"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/shopify-buy";
exports.ids = ["vendor-chunks/shopify-buy"];
exports.modules = {

/***/ "(ssr)/./node_modules/shopify-buy/index.js":
/*!*******************************************!*\
  !*** ./node_modules/shopify-buy/index.js ***!
  \*******************************************/
/***/ ((module) => {

eval("/*\n@license\nThe MIT License (MIT)\n\nCopyright (c) 2016 Shopify Inc.\n\nPermission is hereby granted, free of charge, to any person obtaining a\ncopy of this software and associated documentation files (the\n\"Software\"), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be included\nin all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\nOR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\nIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\nCLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\nTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n*/\n\n\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar classCallCheck$1 = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass$1 = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n\n\n\n\n\n\n\nvar inherits$1 = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar possibleConstructorReturn$1 = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n\n\n\n\nvar slicedToArray$1 = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar toConsumableArray$1 = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n};\n\n/*\nThe MIT License (MIT)\nCopyright (c) 2016 Shopify Inc.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\nIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\nDAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\nOTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE\nOR OTHER DEALINGS IN THE SOFTWARE.\n\n\n*/\nfunction join() {\n  for (var _len = arguments.length, fields = Array(_len), _key = 0; _key < _len; _key++) {\n    fields[_key] = arguments[_key];\n  }\n\n  return fields.join(' ');\n}\n\nfunction isObject(value) {\n  return Boolean(value) && Object.prototype.toString.call(value.valueOf()) === '[object Object]';\n}\n\nfunction deepFreezeCopyExcept(predicate, structure) {\n  if (predicate(structure)) {\n    return structure;\n  } else if (isObject(structure)) {\n    return Object.freeze(Object.keys(structure).reduce(function (copy, key) {\n      copy[key] = deepFreezeCopyExcept(predicate, structure[key]);\n\n      return copy;\n    }, {}));\n  } else if (Array.isArray(structure)) {\n    return Object.freeze(structure.map(function (item) {\n      return deepFreezeCopyExcept(predicate, item);\n    }));\n  } else {\n    return structure;\n  }\n}\n\nfunction schemaForType(typeBundle, typeName) {\n  var typeSchema = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n  var type = typeBundle.types[typeName];\n\n  if (type) {\n    return type;\n  } else if (typeSchema && typeSchema.kind === 'INTERFACE') {\n    return typeSchema;\n  }\n\n  throw new Error('No type of ' + typeName + ' found in schema');\n}\n\nvar classCallCheck = function classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar inherits = function inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === 'undefined' ? 'undefined' : _typeof(superClass)));\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar possibleConstructorReturn = function possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && ((typeof call === 'undefined' ? 'undefined' : _typeof(call)) === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nvar toConsumableArray = function toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }return arr2;\n  } else {\n    return Array.from(arr);\n  }\n};\n\nvar VariableDefinition = function () {\n\n  /**\n   * This constructor should not be invoked directly.\n   * Use the factory function {@link Client#variable} to create a VariableDefinition.\n   *\n   * @param {String} name The name of the variable.\n   * @param {String} type The GraphQL type of the variable.\n   * @param {*} [defaultValue] The default value of the variable.\n   */\n  function VariableDefinition(name, type, defaultValue) {\n    classCallCheck(this, VariableDefinition);\n\n    this.name = name;\n    this.type = type;\n    this.defaultValue = defaultValue;\n    Object.freeze(this);\n  }\n\n  /**\n   * Returns the GraphQL query string for the variable as an input value (e.g. `$variableName`).\n   *\n   * @return {String} The GraphQL query string for the variable as an input value.\n   */\n\n  createClass(VariableDefinition, [{\n    key: 'toInputValueString',\n    value: function toInputValueString() {\n      return '$' + this.name;\n    }\n\n    /**\n     * Returns the GraphQL query string for the variable (e.g. `$variableName:VariableType = defaultValue`).\n     *\n     * @return {String} The GraphQL query string for the variable.\n     */\n\n  }, {\n    key: 'toString',\n    value: function toString() {\n      var defaultValueString = this.defaultValue ? ' = ' + formatInputValue(this.defaultValue) : '';\n\n      return '$' + this.name + ':' + this.type + defaultValueString;\n    }\n  }]);\n  return VariableDefinition;\n}();\n\nfunction isVariable(value) {\n  return VariableDefinition.prototype.isPrototypeOf(value);\n}\n\nfunction variable(name, type, defaultValue) {\n  return new VariableDefinition(name, type, defaultValue);\n}\n\nvar Enum = function () {\n\n  /**\n   * This constructor should not be invoked directly.\n   * Use the factory function {@link Client#enum} to create an Enum.\n   *\n   * @param {String} key The key of the enum.\n   */\n  function Enum(key) {\n    classCallCheck(this, Enum);\n\n    this.key = key;\n  }\n\n  /**\n   * Returns the GraphQL query string for the enum (e.g. `enumKey`).\n   *\n   * @return {String} The GraphQL query string for the enum.\n   */\n\n  createClass(Enum, [{\n    key: \"toString\",\n    value: function toString() {\n      return this.key;\n    }\n  }, {\n    key: \"valueOf\",\n    value: function valueOf() {\n      return this.key.valueOf();\n    }\n  }]);\n  return Enum;\n}();\n\nvar enumFunction = function enumFunction(key) {\n  return new Enum(key);\n};\n\nvar Scalar = function () {\n  function Scalar(value) {\n    classCallCheck(this, Scalar);\n\n    this.value = value;\n  }\n\n  createClass(Scalar, [{\n    key: \"toString\",\n    value: function toString() {\n      return this.value.toString();\n    }\n  }, {\n    key: \"valueOf\",\n    value: function valueOf() {\n      return this.value.valueOf();\n    }\n  }, {\n    key: \"unwrapped\",\n    get: function get$$1() {\n      return this.value;\n    }\n  }]);\n  return Scalar;\n}();\n\nfunction formatInputValue(value) {\n  if (VariableDefinition.prototype.isPrototypeOf(value)) {\n    return value.toInputValueString();\n  } else if (Enum.prototype.isPrototypeOf(value)) {\n    return String(value);\n  } else if (Scalar.prototype.isPrototypeOf(value)) {\n    return JSON.stringify(value.valueOf());\n  } else if (Array.isArray(value)) {\n    return '[' + join.apply(undefined, toConsumableArray(value.map(formatInputValue))) + ']';\n  } else if (isObject(value)) {\n    return formatObject(value, '{', '}');\n  } else {\n    return JSON.stringify(value);\n  }\n}\n\nfunction formatObject(value) {\n  var openChar = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  var closeChar = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n\n  var argPairs = Object.keys(value).map(function (key) {\n    return key + ': ' + formatInputValue(value[key]);\n  });\n\n  return '' + openChar + join.apply(undefined, toConsumableArray(argPairs)) + closeChar;\n}\n\nfunction formatArgs(args) {\n  if (!Object.keys(args).length) {\n    return '';\n  }\n\n  return ' (' + formatObject(args) + ')';\n}\n\nfunction formatDirectives(directives) {\n  if (!Object.keys(directives).length) {\n    return '';\n  }\n\n  var directiveStrings = Object.keys(directives).map(function (key) {\n    var directiveArgs = directives[key];\n    var arg = directiveArgs && Object.keys(directiveArgs).length ? '(' + formatObject(directiveArgs) + ')' : '';\n\n    return '@' + key + arg;\n  });\n\n  return ' ' + join.apply(undefined, toConsumableArray(directiveStrings));\n}\n\n// eslint-disable-next-line no-empty-function\nvar noop = function noop() {};\n\nvar Profiler = {\n  trackTypeDependency: noop,\n  trackFieldDependency: noop\n};\n\nvar trackTypeDependency = Profiler.trackTypeDependency;\nvar trackFieldDependency = Profiler.trackFieldDependency;\n\nfunction parseFieldCreationArgs(creationArgs) {\n  var callback = noop;\n  var options = {};\n  var selectionSet = null;\n\n  if (creationArgs.length === 2) {\n    if (typeof creationArgs[1] === 'function') {\n      var _creationArgs = slicedToArray(creationArgs, 2);\n\n      options = _creationArgs[0];\n      callback = _creationArgs[1];\n    } else {\n      var _creationArgs2 = slicedToArray(creationArgs, 2);\n\n      options = _creationArgs2[0];\n      selectionSet = _creationArgs2[1];\n    }\n  } else if (creationArgs.length === 1) {\n    // SelectionSet is defined before this function is called since it's\n    // called by SelectionSet\n    // eslint-disable-next-line no-use-before-define\n    if (SelectionSet.prototype.isPrototypeOf(creationArgs[0])) {\n      selectionSet = creationArgs[0];\n    } else if (typeof creationArgs[0] === 'function') {\n      callback = creationArgs[0];\n    } else {\n      options = creationArgs[0];\n    }\n  }\n\n  return { options: options, selectionSet: selectionSet, callback: callback };\n}\n\nvar emptyArgs = Object.freeze({});\nvar emptyDirectives = Object.freeze({});\n\nvar Field = function () {\n\n  /**\n   * This constructor should not be invoked directly.\n   * Fields are added to a selection by {@link SelectionSetBuilder#add}, {@link SelectionSetBuilder#addConnection}\n   * and {@link SelectionSetBuilder#addInlineFragmentOn}.\n   *\n   * @param {String} name The name of the field.\n   * @param {Object} [options] An options object containing:\n   *   @param {Object} [options.args] Arguments for the field.\n   *   @param {String} [options.alias] An alias for the field.\n   *   @param {Object} [options.directives] Directives for the field.\n   * @param {SelectionSet} selectionSet The selection set on the field.\n   */\n  function Field(name, options, selectionSet) {\n    classCallCheck(this, Field);\n\n    this.name = name;\n    this.alias = options.alias || null;\n    this.responseKey = this.alias || this.name;\n    this.args = options.args ? deepFreezeCopyExcept(isVariable, options.args) : emptyArgs;\n    this.directives = options.directives ? deepFreezeCopyExcept(isVariable, options.directives) : emptyDirectives;\n    this.selectionSet = selectionSet;\n    Object.freeze(this);\n  }\n\n  /**\n   * Returns the GraphQL query string for the Field (e.g. `catAlias: cat(size: 'small') { name }` or `name`).\n   *\n   * @return {String} The GraphQL query string for the Field.\n   */\n\n  createClass(Field, [{\n    key: 'toString',\n    value: function toString() {\n      var aliasPrefix = this.alias ? this.alias + ': ' : '';\n\n      return '' + aliasPrefix + this.name + formatArgs(this.args) + formatDirectives(this.directives) + this.selectionSet;\n    }\n  }]);\n  return Field;\n}();\n\n// This is an interface that defines a usage, and simplifies type checking\nvar Spread = function Spread() {\n  classCallCheck(this, Spread);\n};\n\nvar InlineFragment = function (_Spread) {\n  inherits(InlineFragment, _Spread);\n\n  /**\n   * This constructor should not be invoked directly.\n   * Use the factory function {@link SelectionSetBuilder#addInlineFragmentOn} to create an InlineFragment.\n   *\n   * @param {String} typeName The type of the fragment.\n   * @param {SelectionSet} selectionSet The selection set on the fragment.\n   */\n  function InlineFragment(typeName, selectionSet) {\n    classCallCheck(this, InlineFragment);\n\n    var _this = possibleConstructorReturn(this, (InlineFragment.__proto__ || Object.getPrototypeOf(InlineFragment)).call(this));\n\n    _this.typeName = typeName;\n    _this.selectionSet = selectionSet;\n    Object.freeze(_this);\n    return _this;\n  }\n\n  /**\n   * Returns the GraphQL query string for the InlineFragment (e.g. `... on Cat { name }`).\n   *\n   * @return {String} The GraphQL query string for the InlineFragment.\n   */\n\n  createClass(InlineFragment, [{\n    key: 'toString',\n    value: function toString() {\n      return '... on ' + this.typeName + this.selectionSet;\n    }\n  }]);\n  return InlineFragment;\n}(Spread);\n\nvar FragmentSpread = function (_Spread2) {\n  inherits(FragmentSpread, _Spread2);\n\n  /**\n   * This constructor should not be invoked directly.\n   * Use the factory function {@link Document#defineFragment} to create a FragmentSpread.\n   *\n   * @param {FragmentDefinition} fragmentDefinition The corresponding fragment definition.\n   */\n  function FragmentSpread(fragmentDefinition) {\n    classCallCheck(this, FragmentSpread);\n\n    var _this2 = possibleConstructorReturn(this, (FragmentSpread.__proto__ || Object.getPrototypeOf(FragmentSpread)).call(this));\n\n    _this2.name = fragmentDefinition.name;\n    _this2.selectionSet = fragmentDefinition.selectionSet;\n    Object.freeze(_this2);\n    return _this2;\n  }\n\n  /**\n   * Returns the GraphQL query string for the FragmentSpread (e.g. `...catName`).\n   *\n   * @return {String} The GraphQL query string for the FragmentSpread.\n   */\n\n  createClass(FragmentSpread, [{\n    key: 'toString',\n    value: function toString() {\n      return '...' + this.name;\n    }\n  }, {\n    key: 'toDefinition',\n    value: function toDefinition() {\n      // eslint-disable-next-line no-use-before-define\n      return new FragmentDefinition(this.name, this.selectionSet.typeSchema.name, this.selectionSet);\n    }\n  }]);\n  return FragmentSpread;\n}(Spread);\n\nvar FragmentDefinition = function () {\n\n  /**\n   * This constructor should not be invoked directly.\n   * Use the factory function {@link Document#defineFragment} to create a FragmentDefinition on a {@link Document}.\n   *\n   * @param {String} name The name of the fragment definition.\n   * @param {String} typeName The type of the fragment.\n   */\n  function FragmentDefinition(name, typeName, selectionSet) {\n    classCallCheck(this, FragmentDefinition);\n\n    this.name = name;\n    this.typeName = typeName;\n    this.selectionSet = selectionSet;\n    this.spread = new FragmentSpread(this);\n    Object.freeze(this);\n  }\n\n  /**\n   * Returns the GraphQL query string for the FragmentDefinition (e.g. `fragment catName on Cat { name }`).\n   *\n   * @return {String} The GraphQL query string for the FragmentDefinition.\n   */\n\n  createClass(FragmentDefinition, [{\n    key: 'toString',\n    value: function toString() {\n      return 'fragment ' + this.name + ' on ' + this.typeName + ' ' + this.selectionSet;\n    }\n  }]);\n  return FragmentDefinition;\n}();\n\nfunction selectionsHaveIdField(selections) {\n  return selections.some(function (fieldOrFragment) {\n    if (Field.prototype.isPrototypeOf(fieldOrFragment)) {\n      return fieldOrFragment.name === 'id';\n    } else if (Spread.prototype.isPrototypeOf(fieldOrFragment) && fieldOrFragment.selectionSet.typeSchema.implementsNode) {\n      return selectionsHaveIdField(fieldOrFragment.selectionSet.selections);\n    }\n\n    return false;\n  });\n}\n\nfunction selectionsHaveTypenameField(selections) {\n  return selections.some(function (fieldOrFragment) {\n    if (Field.prototype.isPrototypeOf(fieldOrFragment)) {\n      return fieldOrFragment.name === '__typename';\n    } else if (Spread.prototype.isPrototypeOf(fieldOrFragment) && fieldOrFragment.selectionSet.typeSchema.implementsNode) {\n      return selectionsHaveTypenameField(fieldOrFragment.selectionSet.selections);\n    }\n\n    return false;\n  });\n}\n\nfunction indexSelectionsByResponseKey(selections) {\n  function assignOrPush(obj, key, value) {\n    if (Array.isArray(obj[key])) {\n      obj[key].push(value);\n    } else {\n      obj[key] = [value];\n    }\n  }\n  var unfrozenObject = selections.reduce(function (acc, selection) {\n    if (selection.responseKey) {\n      assignOrPush(acc, selection.responseKey, selection);\n    } else {\n      var responseKeys = Object.keys(selection.selectionSet.selectionsByResponseKey);\n\n      responseKeys.forEach(function (responseKey) {\n        assignOrPush(acc, responseKey, selection);\n      });\n    }\n\n    return acc;\n  }, {});\n\n  Object.keys(unfrozenObject).forEach(function (key) {\n    Object.freeze(unfrozenObject[key]);\n  });\n\n  return Object.freeze(unfrozenObject);\n}\n\n/**\n * Class that specifies the full selection of data to query.\n */\n\nvar SelectionSet = function () {\n\n  /**\n   * This constructor should not be invoked directly. SelectionSets are created when building queries/mutations.\n   *\n   * @param {Object} typeBundle A set of ES6 modules generated by {@link https://github.com/Shopify/graphql-js-schema|graphql-js-schema}.\n   * @param {(Object|String)} type The type of the current selection.\n   * @param {Function} builderFunction Callback function used to build the SelectionSet.\n   *   The callback takes a {@link SelectionSetBuilder} as its argument.\n   */\n  function SelectionSet(typeBundle, type, builderFunction) {\n    classCallCheck(this, SelectionSet);\n\n    if (typeof type === 'string') {\n      this.typeSchema = schemaForType(typeBundle, type);\n    } else {\n      this.typeSchema = type;\n    }\n\n    trackTypeDependency(this.typeSchema.name);\n\n    this.typeBundle = typeBundle;\n    this.selections = [];\n    if (builderFunction) {\n      // eslint-disable-next-line no-use-before-define\n      builderFunction(new SelectionSetBuilder(this.typeBundle, this.typeSchema, this.selections));\n    }\n\n    if (this.typeSchema.implementsNode || this.typeSchema.name === 'Node') {\n      if (!selectionsHaveIdField(this.selections)) {\n        this.selections.unshift(new Field('id', {}, new SelectionSet(typeBundle, 'ID')));\n      }\n    }\n\n    if (this.typeSchema.kind === 'INTERFACE') {\n      if (!selectionsHaveTypenameField(this.selections)) {\n        this.selections.unshift(new Field('__typename', {}, new SelectionSet(typeBundle, 'String')));\n      }\n    }\n\n    this.selectionsByResponseKey = indexSelectionsByResponseKey(this.selections);\n    Object.freeze(this.selections);\n    Object.freeze(this);\n  }\n\n  /**\n   * Returns the GraphQL query string for the SelectionSet (e.g. `{ cat { name } }`).\n   *\n   * @return {String} The GraphQL query string for the SelectionSet.\n   */\n\n  createClass(SelectionSet, [{\n    key: 'toString',\n    value: function toString() {\n      if (this.typeSchema.kind === 'SCALAR' || this.typeSchema.kind === 'ENUM') {\n        return '';\n      } else {\n        return ' { ' + join(this.selections) + ' }';\n      }\n    }\n  }]);\n  return SelectionSet;\n}();\n\nvar SelectionSetBuilder = function () {\n\n  /**\n   * This constructor should not be invoked directly. SelectionSetBuilders are created when building queries/mutations.\n   *\n   * @param {Object} typeBundle A set of ES6 modules generated by {@link https://github.com/Shopify/graphql-js-schema|graphql-js-schema}.\n   * @param {Object} typeSchema The schema object for the type of the current selection.\n   * @param {Field[]} selections The fields on the current selection.\n   */\n  function SelectionSetBuilder(typeBundle, typeSchema, selections) {\n    classCallCheck(this, SelectionSetBuilder);\n\n    this.typeBundle = typeBundle;\n    this.typeSchema = typeSchema;\n    this.selections = selections;\n  }\n\n  createClass(SelectionSetBuilder, [{\n    key: 'hasSelectionWithResponseKey',\n    value: function hasSelectionWithResponseKey(responseKey) {\n      return this.selections.some(function (field) {\n        return field.responseKey === responseKey;\n      });\n    }\n\n    /**\n     * Adds a field to be queried on the current selection.\n     *\n     * @example\n     * client.query((root) => {\n     *   root.add('cat', {args: {id: '123456'}, alias: 'meow'}, (cat) => {\n     *     cat.add('name');\n     *   });\n     * });\n     *\n     * @param {SelectionSet|String} selectionOrFieldName The selection or name of the field to add.\n     * @param {Object} [options] Options on the query including:\n     *   @param {Object} [options.args] Arguments on the query (e.g. `{id: '123456'}`).\n     *   @param {String} [options.alias] Alias for the field being added.\n     * @param {Function|SelectionSet} [callbackOrSelectionSet] Either a callback which will be used to create a new {@link SelectionSet}, or an existing {@link SelectionSet}.\n     */\n\n  }, {\n    key: 'add',\n    value: function add(selectionOrFieldName) {\n      var selection = void 0;\n\n      if (Object.prototype.toString.call(selectionOrFieldName) === '[object String]') {\n        trackFieldDependency(this.typeSchema.name, selectionOrFieldName);\n\n        for (var _len = arguments.length, rest = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          rest[_key - 1] = arguments[_key];\n        }\n\n        selection = this.field.apply(this, [selectionOrFieldName].concat(rest));\n      } else {\n        if (Field.prototype.isPrototypeOf(selectionOrFieldName)) {\n          trackFieldDependency(this.typeSchema.name, selectionOrFieldName.name);\n        }\n\n        selection = selectionOrFieldName;\n      }\n\n      if (selection.responseKey && this.hasSelectionWithResponseKey(selection.responseKey)) {\n        throw new Error('The field name or alias \\'' + selection.responseKey + '\\' has already been added.');\n      }\n      this.selections.push(selection);\n    }\n  }, {\n    key: 'field',\n    value: function field(name) {\n      for (var _len2 = arguments.length, creationArgs = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        creationArgs[_key2 - 1] = arguments[_key2];\n      }\n\n      var parsedArgs = parseFieldCreationArgs(creationArgs);\n      var options = parsedArgs.options,\n          callback = parsedArgs.callback;\n      var selectionSet = parsedArgs.selectionSet;\n\n      if (!selectionSet) {\n        if (!this.typeSchema.fieldBaseTypes[name]) {\n          throw new Error('No field of name \"' + name + '\" found on type \"' + this.typeSchema.name + '\" in schema');\n        }\n\n        var fieldBaseType = schemaForType(this.typeBundle, this.typeSchema.fieldBaseTypes[name]);\n\n        selectionSet = new SelectionSet(this.typeBundle, fieldBaseType, callback);\n      }\n\n      return new Field(name, options, selectionSet);\n    }\n\n    /**\n     * Creates an inline fragment.\n     *\n     * @access private\n     * @param {String} typeName The type  the inline fragment.\n     * @param {Function|SelectionSet}  [callbackOrSelectionSet] Either a callback which will be used to create a new {@link SelectionSet}, or an existing {@link SelectionSet}.\n     * @return {InlineFragment} An inline fragment.\n     */\n\n  }, {\n    key: 'inlineFragmentOn',\n    value: function inlineFragmentOn(typeName) {\n      var builderFunctionOrSelectionSet = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n\n      var selectionSet = void 0;\n\n      if (SelectionSet.prototype.isPrototypeOf(builderFunctionOrSelectionSet)) {\n        selectionSet = builderFunctionOrSelectionSet;\n      } else {\n        selectionSet = new SelectionSet(this.typeBundle, schemaForType(this.typeBundle, typeName), builderFunctionOrSelectionSet);\n      }\n\n      return new InlineFragment(typeName, selectionSet);\n    }\n\n    /**\n     * Adds a field to be queried on the current selection.\n     *\n     * @access private\n     * @param {String}    name The name of the field to add to the query.\n     * @param {Object} [options] Options on the query including:\n     *   @param {Object} [options.args] Arguments on the query (e.g. `{id: '123456'}`).\n     *   @param {String} [options.alias] Alias for the field being added.\n     * @param {Function}  [callback] Callback which will be used to create a new {@link SelectionSet} for the field added.\n     */\n\n  }, {\n    key: 'addField',\n    value: function addField(name) {\n      for (var _len3 = arguments.length, creationArgs = Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n        creationArgs[_key3 - 1] = arguments[_key3];\n      }\n\n      this.add.apply(this, [name].concat(creationArgs));\n    }\n\n    /**\n     * Adds a connection to be queried on the current selection.\n     * This adds all the fields necessary for pagination.\n     *\n     * @example\n     * client.query((root) => {\n     *   root.add('cat', (cat) => {\n     *     cat.addConnection('friends', {args: {first: 10}, alias: 'coolCats'}, (friends) => {\n     *       friends.add('name');\n     *     });\n     *   });\n     * });\n     *\n     * @param {String}    name The name of the connection to add to the query.\n     * @param {Object} [options] Options on the query including:\n     *   @param {Object} [options.args] Arguments on the query (e.g. `{first: 10}`).\n     *   @param {String} [options.alias] Alias for the field being added.\n     * @param {Function|SelectionSet}  [callbackOrSelectionSet] Either a callback which will be used to create a new {@link SelectionSet}, or an existing {@link SelectionSet}.\n     */\n\n  }, {\n    key: 'addConnection',\n    value: function addConnection(name) {\n      for (var _len4 = arguments.length, creationArgs = Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n        creationArgs[_key4 - 1] = arguments[_key4];\n      }\n\n      var _parseFieldCreationAr = parseFieldCreationArgs(creationArgs),\n          options = _parseFieldCreationAr.options,\n          callback = _parseFieldCreationAr.callback,\n          selectionSet = _parseFieldCreationAr.selectionSet;\n\n      this.add(name, options, function (connection) {\n        connection.add('pageInfo', {}, function (pageInfo) {\n          pageInfo.add('hasNextPage');\n          pageInfo.add('hasPreviousPage');\n        });\n        connection.add('edges', {}, function (edges) {\n          edges.add('cursor');\n          edges.addField('node', {}, selectionSet || callback); // This is bad. Don't do this\n        });\n      });\n    }\n\n    /**\n     * Adds an inline fragment on the current selection.\n     *\n     * @example\n     * client.query((root) => {\n     *   root.add('animal', (animal) => {\n     *     animal.addInlineFragmentOn('cat', (cat) => {\n     *       cat.add('name');\n     *     });\n     *   });\n     * });\n     *\n     * @param {String} typeName The name of the type of the inline fragment.\n     * @param {Function|SelectionSet}  [callbackOrSelectionSet] Either a callback which will be used to create a new {@link SelectionSet}, or an existing {@link SelectionSet}.\n     */\n\n  }, {\n    key: 'addInlineFragmentOn',\n    value: function addInlineFragmentOn(typeName) {\n      var fieldTypeCb = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n\n      this.add(this.inlineFragmentOn(typeName, fieldTypeCb));\n    }\n\n    /**\n     * Adds a fragment spread on the current selection.\n     *\n     * @example\n     * client.query((root) => {\n     *   root.addFragment(catFragmentSpread);\n     * });\n     *\n     * @param {FragmentSpread} fragmentSpread The fragment spread to add.\n     */\n\n  }, {\n    key: 'addFragment',\n    value: function addFragment(fragmentSpread) {\n      this.add(fragmentSpread);\n    }\n  }]);\n  return SelectionSetBuilder;\n}();\n\nfunction parseArgs(args) {\n  var name = void 0;\n  var variables = void 0;\n  var selectionSetCallback = void 0;\n\n  if (args.length === 3) {\n    var _args = slicedToArray(args, 3);\n\n    name = _args[0];\n    variables = _args[1];\n    selectionSetCallback = _args[2];\n  } else if (args.length === 2) {\n    if (Object.prototype.toString.call(args[0]) === '[object String]') {\n      name = args[0];\n      variables = null;\n    } else if (Array.isArray(args[0])) {\n      variables = args[0];\n      name = null;\n    }\n\n    selectionSetCallback = args[1];\n  } else {\n    selectionSetCallback = args[0];\n    name = null;\n  }\n\n  return { name: name, variables: variables, selectionSetCallback: selectionSetCallback };\n}\n\nvar VariableDefinitions = function () {\n  function VariableDefinitions(variableDefinitions) {\n    classCallCheck(this, VariableDefinitions);\n\n    this.variableDefinitions = variableDefinitions ? [].concat(toConsumableArray(variableDefinitions)) : [];\n    Object.freeze(this.variableDefinitions);\n    Object.freeze(this);\n  }\n\n  createClass(VariableDefinitions, [{\n    key: 'toString',\n    value: function toString() {\n      if (this.variableDefinitions.length === 0) {\n        return '';\n      }\n\n      return ' (' + join(this.variableDefinitions) + ') ';\n    }\n  }]);\n  return VariableDefinitions;\n}();\n\n/**\n * Base class for {@link Query} and {@link Mutation}.\n * @abstract\n */\n\nvar Operation = function () {\n\n  /**\n   * This constructor should not be invoked. The subclasses {@link Query} and {@link Mutation} should be used instead.\n   */\n  function Operation(typeBundle, operationType) {\n    classCallCheck(this, Operation);\n\n    for (var _len = arguments.length, args = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      args[_key - 2] = arguments[_key];\n    }\n\n    var _parseArgs = parseArgs(args),\n        name = _parseArgs.name,\n        variables = _parseArgs.variables,\n        selectionSetCallback = _parseArgs.selectionSetCallback;\n\n    this.typeBundle = typeBundle;\n    this.name = name;\n    this.variableDefinitions = new VariableDefinitions(variables);\n    this.operationType = operationType;\n    if (operationType === 'query') {\n      this.selectionSet = new SelectionSet(typeBundle, typeBundle.queryType, selectionSetCallback);\n      this.typeSchema = schemaForType(typeBundle, typeBundle.queryType);\n    } else {\n      this.selectionSet = new SelectionSet(typeBundle, typeBundle.mutationType, selectionSetCallback);\n      this.typeSchema = schemaForType(typeBundle, typeBundle.mutationType);\n    }\n    Object.freeze(this);\n  }\n\n  /**\n   * Whether the operation is anonymous (i.e. has no name).\n   */\n\n  createClass(Operation, [{\n    key: 'toString',\n\n    /**\n     * Returns the GraphQL query or mutation string (e.g. `query myQuery { cat { name } }`).\n     *\n     * @return {String} The GraphQL query or mutation string.\n     */\n    value: function toString() {\n      var nameString = this.name ? ' ' + this.name : '';\n\n      return '' + this.operationType + nameString + this.variableDefinitions + this.selectionSet;\n    }\n  }, {\n    key: 'isAnonymous',\n    get: function get$$1() {\n      return !this.name;\n    }\n  }]);\n  return Operation;\n}();\n\n/**\n * GraphQL Query class.\n * @extends Operation\n */\n\nvar Query = function (_Operation) {\n  inherits(Query, _Operation);\n\n  /**\n   * This constructor should not be invoked directly.\n   * Use the factory functions {@link Client#query} or {@link Document#addQuery} to create a Query.\n   *\n   * @param {Object} typeBundle A set of ES6 modules generated by {@link https://github.com/Shopify/graphql-js-schema|graphql-js-schema}.\n   * @param {String} [name] A name for the query.\n   * @param {Object[]} [variables] A list of variables in the query. See {@link Client#variable}.\n   * @param {Function} selectionSetCallback The query builder callback.\n   *   A {@link SelectionSet} is created using this callback.\n   */\n  function Query(typeBundle) {\n    var _ref;\n\n    classCallCheck(this, Query);\n\n    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    return possibleConstructorReturn(this, (_ref = Query.__proto__ || Object.getPrototypeOf(Query)).call.apply(_ref, [this, typeBundle, 'query'].concat(args)));\n  }\n\n  return Query;\n}(Operation);\n\n/**\n * GraphQL Mutation class.\n * @extends Operation\n */\n\nvar Mutation = function (_Operation) {\n  inherits(Mutation, _Operation);\n\n  /**\n   * This constructor should not be invoked directly.\n   * Use the factory functions {@link Client#mutation} or {@link Document#addMutation} to create a Mutation.\n   *\n   * @param {Object} typeBundle A set of ES6 modules generated by {@link https://github.com/Shopify/graphql-js-schema|graphql-js-schema}.\n   * @param {String} [name] A name for the mutation.\n   * @param {Object[]} [variables] A list of variables in the mutation. See {@link Client#variable}.\n   * @param {Function} selectionSetCallback The mutation builder callback.\n   *   A {@link SelectionSet} is created using this callback.\n   */\n  function Mutation(typeBundle) {\n    var _ref;\n\n    classCallCheck(this, Mutation);\n\n    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    return possibleConstructorReturn(this, (_ref = Mutation.__proto__ || Object.getPrototypeOf(Mutation)).call.apply(_ref, [this, typeBundle, 'mutation'].concat(args)));\n  }\n\n  return Mutation;\n}(Operation);\n\nfunction isAnonymous(operation) {\n  return operation.isAnonymous;\n}\n\nfunction hasAnonymousOperations(operations) {\n  return operations.some(isAnonymous);\n}\n\nfunction hasDuplicateOperationNames(operations) {\n  var names = operations.map(function (operation) {\n    return operation.name;\n  });\n\n  return names.reduce(function (hasDuplicates, name, index) {\n    return hasDuplicates || names.indexOf(name) !== index;\n  }, false);\n}\n\nfunction extractOperation(typeBundle, operationType) {\n  for (var _len = arguments.length, args = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    args[_key - 2] = arguments[_key];\n  }\n\n  if (Operation.prototype.isPrototypeOf(args[0])) {\n    return args[0];\n  }\n\n  if (operationType === 'query') {\n    return new (Function.prototype.bind.apply(Query, [null].concat([typeBundle], args)))();\n  } else {\n    return new (Function.prototype.bind.apply(Mutation, [null].concat([typeBundle], args)))();\n  }\n}\n\nfunction isInvalidOperationCombination(operations) {\n  if (operations.length === 1) {\n    return false;\n  }\n\n  return hasAnonymousOperations(operations) || hasDuplicateOperationNames(operations);\n}\n\nfunction fragmentNameIsNotUnique(existingDefinitions, name) {\n  return existingDefinitions.some(function (definition) {\n    return definition.name === name;\n  });\n}\n\nvar Document = function () {\n\n  /**\n   * This constructor should not be invoked directly.\n   * Use the factory function {@link Client#document} to create a Document.\n   * @param {Object} typeBundle A set of ES6 modules generated by {@link https://github.com/Shopify/graphql-js-schema|graphql-js-schema}.\n   */\n  function Document(typeBundle) {\n    classCallCheck(this, Document);\n\n    this.typeBundle = typeBundle;\n    this.definitions = [];\n  }\n\n  /**\n   * Returns the GraphQL query string for the Document (e.g. `query queryOne { ... } query queryTwo { ... }`).\n   *\n   * @return {String} The GraphQL query string for the Document.\n   */\n\n  createClass(Document, [{\n    key: 'toString',\n    value: function toString() {\n      return join(this.definitions);\n    }\n\n    /**\n     * Adds an operation to the Document.\n     *\n     * @private\n     * @param {String} operationType The type of the operation. Either 'query' or 'mutation'.\n     * @param {(Operation|String)} [query|queryName] Either an instance of an operation\n     *   object, or the name of an operation. Both are optional.\n     * @param {Object[]} [variables] A list of variables in the operation. See {@link Client#variable}.\n     * @param {Function} [callback] The query builder callback. If an operation\n     *   instance is passed, this callback will be ignored.\n     *   A {@link SelectionSet} is created using this callback.\n      */\n\n  }, {\n    key: 'addOperation',\n    value: function addOperation(operationType) {\n      for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n\n      var operation = extractOperation.apply(undefined, [this.typeBundle, operationType].concat(args));\n\n      if (isInvalidOperationCombination(this.operations.concat(operation))) {\n        throw new Error('All operations must be uniquely named on a multi-operation document');\n      }\n\n      this.definitions.push(operation);\n    }\n\n    /**\n     * Adds a query to the Document.\n     *\n     * @example\n     * document.addQuery('myQuery', (root) => {\n     *   root.add('cat', (cat) => {\n     *    cat.add('name');\n     *   });\n     * });\n     *\n     * @param {(Query|String)} [query|queryName] Either an instance of a query\n     *   object, or the name of a query. Both are optional.\n     * @param {Object[]} [variables] A list of variables in the query. See {@link Client#variable}.\n     * @param {Function} [callback] The query builder callback. If a query\n     *   instance is passed, this callback will be ignored.\n     *   A {@link SelectionSet} is created using this callback.\n     */\n\n  }, {\n    key: 'addQuery',\n    value: function addQuery() {\n      for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n\n      this.addOperation.apply(this, ['query'].concat(args));\n    }\n\n    /**\n     * Adds a mutation to the Document.\n     *\n     * @example\n     * const input = client.variable('input', 'CatCreateInput!');\n     *\n     * document.addMutation('myMutation', [input], (root) => {\n     *   root.add('catCreate', {args: {input}}, (catCreate) => {\n     *     catCreate.add('cat', (cat) => {\n     *       cat.add('name');\n     *     });\n     *   });\n     * });\n     *\n     * @param {(Mutation|String)} [mutation|mutationName] Either an instance of a mutation\n     *   object, or the name of a mutation. Both are optional.\n     * @param {Object[]} [variables] A list of variables in the mutation. See {@link Client#variable}.\n     * @param {Function} [callback] The mutation builder callback. If a mutation\n     *   instance is passed, this callback will be ignored.\n     *   A {@link SelectionSet} is created using this callback.\n     */\n\n  }, {\n    key: 'addMutation',\n    value: function addMutation() {\n      for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n\n      this.addOperation.apply(this, ['mutation'].concat(args));\n    }\n\n    /**\n     * Defines a fragment on the Document.\n     *\n     * @param {String} name The name of the fragment.\n     * @param {String} onType The type the fragment is on.\n     * @param {Function} [builderFunction] The query builder callback.\n     *   A {@link SelectionSet} is created using this callback.\n     * @return {FragmentSpread} A {@link FragmentSpread} to be used with {@link SelectionSetBuilder#addFragment}.\n     */\n\n  }, {\n    key: 'defineFragment',\n    value: function defineFragment(name, onType, builderFunction) {\n      if (fragmentNameIsNotUnique(this.fragmentDefinitions, name)) {\n        throw new Error('All fragments must be uniquely named on a multi-fragment document');\n      }\n\n      var selectionSet = new SelectionSet(this.typeBundle, onType, builderFunction);\n      var fragment = new FragmentDefinition(name, onType, selectionSet);\n\n      this.definitions.push(fragment);\n\n      return fragment.spread;\n    }\n\n    /**\n     * All operations ({@link Query} and {@link Mutation}) on the Document.\n     */\n\n  }, {\n    key: 'operations',\n    get: function get$$1() {\n      return this.definitions.filter(function (definition) {\n        return Operation.prototype.isPrototypeOf(definition);\n      });\n    }\n\n    /**\n     * All {@link FragmentDefinition}s on the Document.\n     */\n\n  }, {\n    key: 'fragmentDefinitions',\n    get: function get$$1() {\n      return this.definitions.filter(function (definition) {\n        return FragmentDefinition.prototype.isPrototypeOf(definition);\n      });\n    }\n  }]);\n  return Document;\n}();\n\n/**\n * The base class used when deserializing response data.\n * Provides rich features, like functions to generate queries to refetch a node or fetch the next page.\n *\n * @class\n */\nvar GraphModel =\n\n/**\n * @param {Object} attrs Attributes on the GraphModel.\n */\nfunction GraphModel(attrs) {\n  var _this = this;\n\n  classCallCheck(this, GraphModel);\n\n  Object.defineProperty(this, 'attrs', { value: attrs, enumerable: false });\n\n  Object.keys(this.attrs).filter(function (key) {\n    return !(key in _this);\n  }).forEach(function (key) {\n    var descriptor = void 0;\n\n    if (attrs[key] === null) {\n      descriptor = {\n        enumerable: true,\n        get: function get$$1() {\n          return null;\n        }\n      };\n    } else {\n      descriptor = {\n        enumerable: true,\n        get: function get$$1() {\n          return this.attrs[key].valueOf();\n        }\n      };\n    }\n    Object.defineProperty(_this, key, descriptor);\n  });\n};\n\n/**\n * A registry of classes used to deserialize the response data. Uses {@link GraphModel} by default.\n */\n\nvar ClassRegistry = function () {\n  function ClassRegistry() {\n    classCallCheck(this, ClassRegistry);\n\n    this.classStore = {};\n  }\n\n  /**\n   * Registers a class for a GraphQL type in the registry.\n   *\n   * @param {Class} constructor The constructor of the class.\n   * @param {String} type The GraphQL type of the object to deserialize into the class.\n   */\n\n  createClass(ClassRegistry, [{\n    key: 'registerClassForType',\n    value: function registerClassForType(constructor, type) {\n      this.classStore[type] = constructor;\n    }\n\n    /**\n     * Unregisters a class for a GraphQL type in the registry.\n     *\n     * @param {String} type The GraphQL type to unregister.\n     */\n\n  }, {\n    key: 'unregisterClassForType',\n    value: function unregisterClassForType(type) {\n      delete this.classStore[type];\n    }\n\n    /**\n     * Returns the class for the given GraphQL type.\n     *\n     * @param {String} type The GraphQL type to look up.\n     * @return {Class|GraphModel} The class for the given GraphQL type. Defaults to {@link GraphModel} if no class is registered for the GraphQL type.\n     */\n\n  }, {\n    key: 'classForType',\n    value: function classForType(type) {\n      return this.classStore[type] || GraphModel;\n    }\n  }]);\n  return ClassRegistry;\n}();\n\nfunction isValue(arg) {\n  return Object.prototype.toString.call(arg) !== '[object Null]' && Object.prototype.toString.call(arg) !== '[object Undefined]';\n}\n\nfunction isNodeContext(context) {\n  return context.selection.selectionSet.typeSchema.implementsNode;\n}\n\nfunction isConnection(context) {\n  return context.selection.selectionSet.typeSchema.name.endsWith('Connection');\n}\n\nfunction nearestNode(context) {\n  if (context == null) {\n    return null;\n  } else if (isNodeContext(context)) {\n    return context;\n  } else {\n    return nearestNode(context.parent);\n  }\n}\n\nfunction contextsFromRoot(context) {\n  if (context.parent) {\n    return contextsFromRoot(context.parent).concat(context);\n  } else {\n    return [context];\n  }\n}\n\nfunction contextsFromNearestNode(context) {\n  if (context.selection.selectionSet.typeSchema.implementsNode) {\n    return [context];\n  } else {\n    return contextsFromNearestNode(context.parent).concat(context);\n  }\n}\n\nfunction initializeDocumentAndVars(currentContext, contextChain) {\n  var lastInChain = contextChain[contextChain.length - 1];\n  var first = lastInChain.selection.args.first;\n  var variableDefinitions = Object.keys(lastInChain.selection.args).filter(function (key) {\n    return isVariable(lastInChain.selection.args[key]);\n  }).map(function (key) {\n    return lastInChain.selection.args[key];\n  });\n\n  var firstVar = variableDefinitions.find(function (definition) {\n    return definition.name === 'first';\n  });\n\n  if (!firstVar) {\n    if (isVariable(first)) {\n      firstVar = first;\n    } else {\n      firstVar = variable('first', 'Int', first);\n      variableDefinitions.push(firstVar);\n    }\n  }\n\n  var document = new Document(currentContext.selection.selectionSet.typeBundle);\n\n  return [document, variableDefinitions, firstVar];\n}\n\nfunction addNextFieldTo(currentSelection, contextChain, path, cursor) {\n  // There are always at least two. When we start, it's the root context, and the first set\n  var nextContext = contextChain.shift();\n\n  path.push(nextContext.selection.responseKey);\n\n  if (contextChain.length) {\n    currentSelection.add(nextContext.selection.name, { alias: nextContext.selection.alias, args: nextContext.selection.args }, function (newSelection) {\n      addNextFieldTo(newSelection, contextChain, path, cursor);\n    });\n  } else {\n    var edgesField = nextContext.selection.selectionSet.selections.find(function (field) {\n      return field.name === 'edges';\n    });\n    var nodeField = edgesField.selectionSet.selections.find(function (field) {\n      return field.name === 'node';\n    });\n    var first = void 0;\n\n    if (isVariable(nextContext.selection.args.first)) {\n      first = nextContext.selection.args.first;\n    } else {\n      first = variable('first', 'Int', nextContext.selection.args.first);\n    }\n\n    var options = {\n      alias: nextContext.selection.alias,\n      args: Object.assign({}, nextContext.selection.args, { after: cursor, first: first })\n    };\n\n    currentSelection.addConnection(nextContext.selection.name, options, nodeField.selectionSet);\n  }\n}\n\nfunction collectFragments(selections) {\n  return selections.reduce(function (fragmentDefinitions, field) {\n    if (FragmentSpread.prototype.isPrototypeOf(field)) {\n      fragmentDefinitions.push(field.toDefinition());\n    }\n\n    fragmentDefinitions.push.apply(fragmentDefinitions, toConsumableArray(collectFragments(field.selectionSet.selections)));\n\n    return fragmentDefinitions;\n  }, []);\n}\n\nfunction nextPageQueryAndPath(context, cursor) {\n  var nearestNodeContext = nearestNode(context);\n\n  if (nearestNodeContext) {\n    return function () {\n      var _document$definitions;\n\n      var path = [];\n      var nodeType = nearestNodeContext.selection.selectionSet.typeSchema;\n      var nodeId = nearestNodeContext.responseData.id;\n      var contextChain = contextsFromNearestNode(context);\n\n      var _initializeDocumentAn = initializeDocumentAndVars(context, contextChain),\n          _initializeDocumentAn2 = slicedToArray(_initializeDocumentAn, 2),\n          document = _initializeDocumentAn2[0],\n          variableDefinitions = _initializeDocumentAn2[1];\n\n      document.addQuery(variableDefinitions, function (root) {\n        path.push('node');\n        root.add('node', { args: { id: nodeId } }, function (node) {\n          node.addInlineFragmentOn(nodeType.name, function (fragment) {\n            addNextFieldTo(fragment, contextChain.slice(1), path, cursor);\n          });\n        });\n      });\n\n      var fragments = collectFragments(document.operations[0].selectionSet.selections);\n\n      (_document$definitions = document.definitions).unshift.apply(_document$definitions, toConsumableArray(fragments));\n\n      return [document, path];\n    };\n  } else {\n    return function () {\n      var _document$definitions2;\n\n      var path = [];\n      var contextChain = contextsFromRoot(context);\n\n      var _initializeDocumentAn3 = initializeDocumentAndVars(context, contextChain),\n          _initializeDocumentAn4 = slicedToArray(_initializeDocumentAn3, 2),\n          document = _initializeDocumentAn4[0],\n          variableDefinitions = _initializeDocumentAn4[1];\n\n      document.addQuery(variableDefinitions, function (root) {\n        addNextFieldTo(root, contextChain.slice(1), path, cursor);\n      });\n\n      var fragments = collectFragments(document.operations[0].selectionSet.selections);\n\n      (_document$definitions2 = document.definitions).unshift.apply(_document$definitions2, toConsumableArray(fragments));\n\n      return [document, path];\n    };\n  }\n}\n\nfunction hasNextPage$1(connection, edge) {\n  if (edge !== connection.edges[connection.edges.length - 1]) {\n    return new Scalar(true);\n  }\n\n  return connection.pageInfo.hasNextPage;\n}\n\nfunction hasPreviousPage(connection, edge) {\n  if (edge !== connection.edges[0]) {\n    return new Scalar(true);\n  }\n\n  return connection.pageInfo.hasPreviousPage;\n}\n\nfunction transformConnections(variableValues) {\n  return function (context, value) {\n    if (isConnection(context)) {\n      if (!(value.pageInfo && value.pageInfo.hasOwnProperty('hasNextPage') && value.pageInfo.hasOwnProperty('hasPreviousPage'))) {\n        throw new Error('Connections must include the selections \"pageInfo { hasNextPage, hasPreviousPage }\".');\n      }\n\n      return value.edges.map(function (edge) {\n        return Object.assign(edge.node, {\n          nextPageQueryAndPath: nextPageQueryAndPath(context, edge.cursor),\n          hasNextPage: hasNextPage$1(value, edge),\n          hasPreviousPage: hasPreviousPage(value, edge),\n          variableValues: variableValues\n        });\n      });\n    } else {\n      return value;\n    }\n  };\n}\n\n/* eslint-disable no-warning-comments */\nvar DecodingContext = function () {\n  function DecodingContext(selection, responseData) {\n    var parent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    classCallCheck(this, DecodingContext);\n\n    this.selection = selection;\n    this.responseData = responseData;\n    this.parent = parent;\n    Object.freeze(this);\n  }\n\n  createClass(DecodingContext, [{\n    key: 'contextForObjectProperty',\n    value: function contextForObjectProperty(responseKey) {\n      var nestedSelections = this.selection.selectionSet.selectionsByResponseKey[responseKey];\n      var nextSelection = nestedSelections && nestedSelections[0];\n      var nextContext = void 0;\n\n      // fragment spreads operate inside the current context, so we recurse to get the proper\n      // selection set, but retain the current response context\n      if (Spread.prototype.isPrototypeOf(nextSelection)) {\n        nextContext = new DecodingContext(nextSelection, this.responseData, this.parent);\n      } else {\n        nextContext = new DecodingContext(nextSelection, this.responseData[responseKey], this);\n      }\n\n      if (!nextSelection) {\n        throw new Error('Unexpected response key \"' + responseKey + '\", not found in selection set: ' + this.selection.selectionSet);\n      }\n\n      if (Field.prototype.isPrototypeOf(nextSelection)) {\n        return nextContext;\n      } else {\n        return nextContext.contextForObjectProperty(responseKey);\n      }\n    }\n  }, {\n    key: 'contextForArrayItem',\n    value: function contextForArrayItem(item) {\n      return new DecodingContext(this.selection, item, this.parent);\n    }\n  }]);\n  return DecodingContext;\n}();\n\nfunction decodeArrayItems(context, transformers) {\n  return context.responseData.map(function (item) {\n    return decodeContext(context.contextForArrayItem(item), transformers);\n  });\n}\n\nfunction decodeObjectValues(context, transformers) {\n  return Object.keys(context.responseData).reduce(function (acc, responseKey) {\n    acc[responseKey] = decodeContext(context.contextForObjectProperty(responseKey), transformers);\n\n    return acc;\n  }, {});\n}\n\nfunction runTransformers(transformers, context, value) {\n  return transformers.reduce(function (acc, transformer) {\n    return transformer(context, acc);\n  }, value);\n}\n\nfunction decodeContext(context, transformers) {\n  var value = context.responseData;\n\n  if (Array.isArray(value)) {\n    value = decodeArrayItems(context, transformers);\n  } else if (isObject(value)) {\n    value = decodeObjectValues(context, transformers);\n  }\n\n  return runTransformers(transformers, context, value);\n}\n\nfunction generateRefetchQueries(context, value) {\n  if (isValue(value) && isNodeContext(context)) {\n    value.refetchQuery = function () {\n      return new Query(context.selection.selectionSet.typeBundle, function (root) {\n        root.add('node', { args: { id: context.responseData.id } }, function (node) {\n          node.addInlineFragmentOn(context.selection.selectionSet.typeSchema.name, context.selection.selectionSet);\n        });\n      });\n    };\n  }\n\n  return value;\n}\n\nfunction transformPojosToClassesWithRegistry(classRegistry) {\n  return function transformPojosToClasses(context, value) {\n    if (isObject(value)) {\n      var Klass = classRegistry.classForType(context.selection.selectionSet.typeSchema.name);\n\n      return new Klass(value);\n    } else {\n      return value;\n    }\n  };\n}\n\nfunction transformScalars(context, value) {\n  if (isValue(value)) {\n    if (context.selection.selectionSet.typeSchema.kind === 'SCALAR') {\n      return new Scalar(value);\n    } else if (context.selection.selectionSet.typeSchema.kind === 'ENUM') {\n      return new Enum(value);\n    }\n  }\n\n  return value;\n}\n\nfunction recordTypeInformation(context, value) {\n  var _context$selection$se = context.selection.selectionSet,\n      typeBundle = _context$selection$se.typeBundle,\n      typeSchema = _context$selection$se.typeSchema;\n\n  if (isValue(value)) {\n    if (value.__typename) {\n      value.type = schemaForType(typeBundle, value.__typename, typeSchema);\n    } else {\n      value.type = typeSchema;\n    }\n  }\n\n  return value;\n}\n\nfunction defaultTransformers(_ref) {\n  var _ref$classRegistry = _ref.classRegistry,\n      classRegistry = _ref$classRegistry === undefined ? new ClassRegistry() : _ref$classRegistry,\n      variableValues = _ref.variableValues;\n\n  return [transformScalars, generateRefetchQueries, transformConnections(variableValues), recordTypeInformation, transformPojosToClassesWithRegistry(classRegistry)];\n}\n\n/**\n * A function used to decode the response data.\n *\n * @function decode\n * @param {SelectionSet} selection The selection set used to query the response data.\n * @param {Object} responseData The response data returned.\n * @param {Object} [options] Options to use when decoding including:\n *   @param {ClassRegistry} [options.classRegistry] A class registry to use when deserializing the data into classes.\n * @return {GraphModel} The decoded response data.\n */\nfunction decode(selection, responseData) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  var transformers = options.transformers || defaultTransformers(options);\n  var context = new DecodingContext(selection, responseData);\n\n  return decodeContext(context, transformers);\n}\n\nfunction httpFetcher(url) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  return function fetcher(graphQLParams, headers) {\n    return fetch(url, _extends({\n      body: JSON.stringify(graphQLParams),\n      method: 'POST',\n      mode: 'cors'\n    }, options, {\n      headers: _extends({\n        'Content-Type': 'application/json',\n        Accept: 'application/json'\n      }, options.headers, headers)\n    })).then(function (response) {\n      var contentType = response.headers.get('content-type');\n\n      if (contentType.indexOf('application/json') > -1) {\n        return response.json();\n      }\n\n      return response.text().then(function (text) {\n        return { text: text };\n      });\n    });\n  };\n}\n\nfunction hasNextPage(paginatedModels) {\n  return paginatedModels && paginatedModels.length && paginatedModels[paginatedModels.length - 1].hasNextPage;\n}\n\n/**\n * The Client class used to create and send GraphQL documents, fragments, queries and mutations.\n */\n\nvar Client$2 = function () {\n\n  /**\n   * @param {Object} typeBundle A set of ES6 modules generated by {@link https://github.com/Shopify/graphql-js-schema|graphql-js-schema}.\n   * @param {Object} options An options object. Must include either `url` and optional `fetcherOptions` OR a `fetcher` function.\n   *   @param {(String|Function)} options.url|fetcher Either the URL of the GraphQL API endpoint, or a custom fetcher function for further customization.\n   *   @param {Object} [options.fetcherOptions] Additional options to use with `fetch`, like headers. Do not specify this argument if `fetcher` is specified.\n   *   @param {ClassRegistry} [options.registry=new ClassRegistry()] A {@link ClassRegistry} used to decode the response data.\n   */\n  function Client(typeBundle, _ref) {\n    var url = _ref.url,\n        fetcherOptions = _ref.fetcherOptions,\n        fetcher = _ref.fetcher,\n        _ref$registry = _ref.registry,\n        registry = _ref$registry === undefined ? new ClassRegistry() : _ref$registry;\n    classCallCheck(this, Client);\n\n    this.typeBundle = typeBundle;\n    this.classRegistry = registry;\n\n    if (url && fetcher) {\n      throw new Error('Arguments not supported: supply either `url` and optional `fetcherOptions` OR use a `fetcher` function for further customization.');\n    }\n\n    if (url) {\n      this.fetcher = httpFetcher(url, fetcherOptions);\n    } else if (fetcher) {\n      if (fetcherOptions) {\n        throw new Error('Arguments not supported: when specifying your own `fetcher`, set options through it and not with `fetcherOptions`');\n      }\n\n      this.fetcher = fetcher;\n    } else {\n      throw new Error('Invalid arguments: one of `url` or `fetcher` is needed.');\n    }\n  }\n\n  /**\n   * Creates a GraphQL document.\n   *\n   * @example\n   * const document = client.document();\n   *\n   * @return {Document} A GraphQL document.\n   */\n\n  createClass(Client, [{\n    key: 'document',\n    value: function document() {\n      return new Document(this.typeBundle);\n    }\n\n    /**\n     * Creates a GraphQL query.\n     *\n     * @example\n     * const query = client.query('myQuery', (root) => {\n     *   root.add('cat', (cat) => {\n     *    cat.add('name');\n     *   });\n     * });\n     *\n     * @param {String} [name] A name for the query.\n     * @param {VariableDefinition[]} [variables] A list of variables in the query. See {@link Client#variable}.\n     * @param {Function} selectionSetCallback The query builder callback.\n     *   A {@link SelectionSet} is created using this callback.\n     * @return {Query} A GraphQL query.\n     */\n\n  }, {\n    key: 'query',\n    value: function query() {\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return new (Function.prototype.bind.apply(Query, [null].concat([this.typeBundle], args)))();\n    }\n\n    /**\n     * Creates a GraphQL mutation.\n     *\n     * @example\n     * const input = client.variable('input', 'CatCreateInput!');\n     *\n     * const mutation = client.mutation('myMutation', [input], (root) => {\n     *   root.add('catCreate', {args: {input}}, (catCreate) => {\n     *     catCreate.add('cat', (cat) => {\n     *       cat.add('name');\n     *     });\n     *   });\n     * });\n     *\n     * @param {String} [name] A name for the mutation.\n     * @param {VariableDefinition[]} [variables] A list of variables in the mutation. See {@link Client#variable}.\n     * @param {Function} selectionSetCallback The mutation builder callback.\n     *   A {@link SelectionSet} is created using this callback.\n     * @return {Mutation} A GraphQL mutation.\n     */\n\n  }, {\n    key: 'mutation',\n    value: function mutation() {\n      for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return new (Function.prototype.bind.apply(Mutation, [null].concat([this.typeBundle], args)))();\n    }\n\n    /**\n     * Sends a GraphQL operation (query or mutation) or a document.\n     *\n     * @example\n     * client.send(query, {id: '12345'}).then((result) => {\n     *   // Do something with the returned result\n     *   console.log(result);\n     * });\n     *\n     * @param {(Query|Mutation|Document|Function)} request The operation or document to send. If represented\n     * as a function, it must return `Query`, `Mutation`, or `Document` and recieve the client as the only param.\n     * @param {Object} [variableValues] The values for variables in the operation or document.\n     * @param {Object} [otherProperties] Other properties to send with the query. For example, a custom operation name.\n     * @param {Object} [headers] Additional headers to be applied on a request by request basis.\n     * @return {Promise.<Object>} A promise resolving to an object containing the response data.\n     */\n\n  }, {\n    key: 'send',\n    value: function send(request) {\n      var variableValues = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n      var _this = this;\n\n      var otherProperties = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      var headers = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n\n      var operationOrDocument = void 0;\n\n      if (Function.prototype.isPrototypeOf(request)) {\n        operationOrDocument = request(this);\n      } else {\n        operationOrDocument = request;\n      }\n\n      var graphQLParams = { query: operationOrDocument.toString() };\n\n      if (variableValues) {\n        graphQLParams.variables = variableValues;\n      }\n\n      Object.assign(graphQLParams, otherProperties);\n\n      var operation = void 0;\n\n      if (Operation.prototype.isPrototypeOf(operationOrDocument)) {\n        operation = operationOrDocument;\n      } else {\n        var document = operationOrDocument;\n\n        if (document.operations.length === 1) {\n          operation = document.operations[0];\n        } else if (otherProperties.operationName) {\n          operation = document.operations.find(function (documentOperation) {\n            return documentOperation.name === otherProperties.operationName;\n          });\n        } else {\n          throw new Error('\\n          A document must contain exactly one operation, or an operationName\\n          must be specified. Example:\\n\\n            client.send(document, null, {operationName: \\'myFancyQuery\\'});\\n        ');\n        }\n      }\n\n      return this.fetcher(graphQLParams, headers).then(function (response) {\n        if (response.data) {\n          response.model = decode(operation, response.data, {\n            classRegistry: _this.classRegistry,\n            variableValues: variableValues\n          });\n        }\n\n        return response;\n      });\n    }\n\n    /**\n     * Fetches the next page of a paginated node or array of nodes.\n     *\n     * @example\n     * client.fetchNextPage(node, {first: 10}).then((result) => {\n     *   // Do something with the next page\n     *   console.log(result);\n     * });\n     *\n     * @param {(GraphModel|GraphModel[])} nodeOrNodes The node or list of nodes on which to fetch the next page.\n     * @param {Object} [options] Options object containing:\n     *   @param {Integer} [options.first] The number of nodes to query on the next page. Defaults to the page size of the previous query.\n     * @return {Promise.<GraphModel[]>} A promise resolving with the next page of {@link GraphModel}s.\n     */\n\n  }, {\n    key: 'fetchNextPage',\n    value: function fetchNextPage(nodeOrNodes, options) {\n      var node = void 0;\n\n      if (Array.isArray(nodeOrNodes)) {\n        node = nodeOrNodes[nodeOrNodes.length - 1];\n      } else {\n        node = nodeOrNodes;\n      }\n\n      var _node$nextPageQueryAn = node.nextPageQueryAndPath(),\n          _node$nextPageQueryAn2 = slicedToArray(_node$nextPageQueryAn, 2),\n          query = _node$nextPageQueryAn2[0],\n          path = _node$nextPageQueryAn2[1];\n\n      var variableValues = void 0;\n\n      if (node.variableValues || options) {\n        variableValues = Object.assign({}, node.variableValues, options);\n      }\n\n      return this.send(query, variableValues).then(function (response) {\n        response.model = path.reduce(function (object, key) {\n          return object[key];\n        }, response.model);\n\n        return response;\n      });\n    }\n\n    /**\n     * Fetches all subsequent pages of a paginated array of nodes.\n     *\n     * @example\n     * client.fetchAllPages(nodes, {pageSize: 20}).then((result) => {\n     *   // Do something with all the models\n     *   console.log(result);\n     * });\n     *\n     * @param {GraphModel[]} paginatedModels The list of nodes on which to fetch all pages.\n     * @param {Object} options Options object containing:\n     *   @param {Integer} options.pageSize The number of nodes to query on each page.\n     * @return {Promise.<GraphModel[]>} A promise resolving with all pages of {@link GraphModel}s, including the original list.\n     */\n\n  }, {\n    key: 'fetchAllPages',\n    value: function fetchAllPages(paginatedModels, _ref2) {\n      var _this2 = this;\n\n      var pageSize = _ref2.pageSize;\n\n      if (hasNextPage(paginatedModels)) {\n        return this.fetchNextPage(paginatedModels, { first: pageSize }).then(function (_ref3) {\n          var model = _ref3.model;\n\n          var pages = paginatedModels.concat(model);\n\n          return _this2.fetchAllPages(pages, { pageSize: pageSize });\n        });\n      }\n\n      return Promise.resolve(paginatedModels);\n    }\n\n    /**\n     * Refetches a {@link GraphModel} whose type implements `Node`.\n     *\n     * @example\n     * client.refetch(node).then((result) => {\n     *   // Do something with the refetched node\n     *   console.log(result);\n     * });\n     *\n     * @param {GraphModel} nodeType A {@link GraphModel} whose type implements `Node`.\n     * @return {Promise.<GraphModel>} The refetched {@link GraphModel}.\n     */\n\n  }, {\n    key: 'refetch',\n    value: function refetch(nodeType) {\n      if (!nodeType) {\n        throw new Error('\\'client#refetch\\' must be called with a non-null instance of a Node.');\n      } else if (!nodeType.type.implementsNode) {\n        throw new Error('\\'client#refetch\\' must be called with a type that implements Node. Received ' + nodeType.type.name + '.');\n      }\n\n      return this.send(nodeType.refetchQuery()).then(function (_ref4) {\n        var model = _ref4.model;\n        return model.node;\n      });\n    }\n\n    /**\n     * Creates a variable to be used in a {@link Query} or {@link Mutation}.\n     *\n     * @example\n     * const idVariable = client.variable('id', 'ID!', '12345');\n     *\n     * @param {String} name The name of the variable.\n     * @param {String} type The GraphQL type of the variable.\n     * @param {*} [defaultValue] The default value of the variable.\n     * @return {VariableDefinition} A variable object that can be used in a {@link Query} or {@link Mutation}.\n     */\n\n  }, {\n    key: 'variable',\n    value: function variable$$1(name, type, defaultValue) {\n      return variable(name, type, defaultValue);\n    }\n\n    /**\n     * Creates an enum to be used in a {@link Query} or {@link Mutation}.\n     *\n     * @example\n     * const titleEnum = client.enum('TITLE');\n     *\n     * @param {String} key The key of the enum.\n     * @return {Enum} An enum object that can be used in a {@link Query} or {@link Mutation}.\n     */\n\n  }, {\n    key: 'enum',\n    value: function _enum(key) {\n      return enumFunction(key);\n    }\n  }]);\n  return Client;\n}();\n\n/**\n * The class used to configure the JS Buy SDK Client.\n * @class\n */\nvar Config = function () {\n  createClass$1(Config, [{\n    key: 'requiredProperties',\n\n\n    /**\n     * Properties that must be set on initializations\n     * @attribute requiredProperties\n     * @default ['storefrontAccessToken', 'domain']\n     * @type Array\n     * @private\n     */\n    get: function get$$1() {\n      return ['storefrontAccessToken', 'domain'];\n    }\n\n    /**\n     * Deprecated properties that map directly to required properties\n     * @attribute deprecatedProperties\n     * @default {'accessToken': 'storefrontAccessToken', 'apiKey': 'storefrontAccessToken'}\n     * @type Object\n     * @private\n     */\n\n  }, {\n    key: 'deprecatedProperties',\n    get: function get$$1() {\n      return {\n        accessToken: 'storefrontAccessToken',\n        apiKey: 'storefrontAccessToken'\n      };\n    }\n\n    /**\n     * @constructs Config\n     * @param {Object} attrs An object specifying the configuration. Requires the following properties:\n     *   @param {String} attrs.storefrontAccessToken The {@link https://help.shopify.com/api/reference/storefront_access_token|Storefront access token} for the shop.\n     *   @param {String} attrs.domain The `myshopify` domain for the shop (e.g. `graphql.myshopify.com`).\n     */\n\n  }]);\n\n  function Config(attrs) {\n    var _this = this;\n\n    classCallCheck$1(this, Config);\n\n    Object.keys(this.deprecatedProperties).forEach(function (key) {\n      if (!attrs.hasOwnProperty(key)) {\n        return;\n      }\n      // eslint-disable-next-line no-console\n      console.warn('[ShopifyBuy] Config property ' + key + ' is deprecated as of v1.0, please use ' + _this.deprecatedProperties[key] + ' instead.');\n      attrs[_this.deprecatedProperties[key]] = attrs[key];\n    });\n\n    this.requiredProperties.forEach(function (key) {\n      if (attrs.hasOwnProperty(key)) {\n        _this[key] = attrs[key];\n      } else {\n        throw new Error('new Config() requires the option \\'' + key + '\\'');\n      }\n    });\n\n    if (attrs.hasOwnProperty('apiVersion')) {\n      this.apiVersion = attrs.apiVersion;\n    } else {\n      this.apiVersion = '2024-04';\n    }\n\n    if (attrs.hasOwnProperty('source')) {\n      this.source = attrs.source;\n    }\n\n    if (attrs.hasOwnProperty('language')) {\n      this.language = attrs.language;\n    }\n  }\n\n  return Config;\n}();\n\nvar InputMapper = function () {\n  function InputMapper() {\n    classCallCheck$1(this, InputMapper);\n  }\n\n  createClass$1(InputMapper, [{\n    key: 'create',\n    value: function create() {\n      var input = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var cartInput = {};\n\n      if (input.presentmentCurrencyCode) {\n        // eslint-disable-next-line no-console\n        console.warn('presentmentCurrencyCode is not supported by the Cart API');\n      }\n\n      // SDK checkout input fields we can map:\n      if (input.lineItems && input.lineItems.length) {\n        cartInput.lines = input.lineItems.map(function (lineItem) {\n          lineItem.merchandiseId = lineItem.variantId;\n          delete lineItem.variantId;\n\n          return lineItem;\n        });\n      }\n\n      if (input.note) {\n        cartInput.note = input.note;\n      }\n\n      if (input.email) {\n        cartInput.buyerIdentity = { email: input.email };\n      }\n\n      if (input.shippingAddress) {\n        if (!cartInput.buyerIdentity) {\n          cartInput.buyerIdentity = {};\n        }\n        cartInput.buyerIdentity.deliveryAddressPreferences = [{ deliveryAddress: input.shippingAddress }];\n      }\n\n      if (input.customAttributes) {\n        cartInput.attributes = input.customAttributes;\n      }\n\n      // Fields that aren't documented in SDK but could still be passed in:\n      if (input.buyerIdentity) {\n        if (!cartInput.buyerIdentity) {\n          cartInput.buyerIdentity = {};\n        }\n        cartInput.buyerIdentity.countryCode = input.buyerIdentity.countryCode;\n      }\n\n      if (input.allowPartialAddresses) {\n        // eslint-disable-next-line no-console\n        console.warn('allowPartialAddresses is not supported by the Cart API');\n      }\n\n      return cartInput;\n    }\n  }, {\n    key: 'updateAttributes',\n    value: function updateAttributes(checkoutId, input) {\n      var cartAttributesUpdateInput = {\n        attributes: [],\n        cartId: ''\n      };\n\n      var cartNoteUpdateInput = {\n        cartId: '',\n        note: ''\n      };\n\n      if (checkoutId) {\n        cartAttributesUpdateInput.cartId = checkoutId;\n        cartNoteUpdateInput.cartId = checkoutId;\n      }\n\n      if (input.customAttributes) {\n        cartAttributesUpdateInput.attributes = input.customAttributes;\n      }\n\n      if (input.note) {\n        cartNoteUpdateInput.note = input.note;\n      }\n\n      if (input.allowPartialAddresses) {\n        // eslint-disable-next-line no-console\n        console.warn('allowPartialAddresses is not supported by the Cart API');\n      }\n\n      // With cart, we will need to execute two separate mutations (one for attributes and one for note)\n      return { cartAttributesUpdateInput: cartAttributesUpdateInput, cartNoteUpdateInput: cartNoteUpdateInput };\n    }\n  }, {\n    key: 'updateEmail',\n    value: function updateEmail(checkoutId, email) {\n      var cartBuyerIdentityInput = {\n        buyerIdentity: { email: email },\n        cartId: checkoutId\n      };\n\n      return cartBuyerIdentityInput;\n    }\n  }, {\n    key: 'addLineItems',\n    value: function addLineItems(checkoutId, lineItems) {\n      var lines = Array.isArray(lineItems) ? lineItems : [lineItems];\n\n      return {\n        cartId: checkoutId,\n        lines: lines.map(mapLineItemToLine).filter(Boolean)\n      };\n    }\n  }, {\n    key: 'addDiscount',\n    value: function addDiscount(checkoutId, discountCodes) {\n      return {\n        cartId: checkoutId,\n        discountCodes: Array.isArray(discountCodes) ? discountCodes.flat() : []\n      };\n    }\n  }, {\n    key: 'removeDiscount',\n    value: function removeDiscount(checkoutId) {\n      return {\n        cartId: checkoutId,\n        discountCodes: []\n      };\n    }\n  }, {\n    key: 'addGiftCards',\n    value: function addGiftCards(checkoutId, giftCardCodes) {\n      return {\n        cartId: checkoutId,\n        giftCardCodes: giftCardCodes || []\n      };\n    }\n  }, {\n    key: 'removeGiftCard',\n    value: function removeGiftCard(checkoutId, appliedGiftCardId) {\n      return {\n        cartId: checkoutId,\n        appliedGiftCardIds: appliedGiftCardId ? [appliedGiftCardId] : []\n      };\n    }\n  }, {\n    key: 'removeLineItems',\n    value: function removeLineItems(checkoutId, lineItemIds) {\n      var lineIds = Array.isArray(lineItemIds) ? lineItemIds : [lineItemIds];\n\n      return {\n        cartId: checkoutId,\n        lineIds: lineIds\n      };\n    }\n  }, {\n    key: 'replaceLineItems',\n    value: function replaceLineItems(checkoutId, lineItems) {\n      var lines = Array.isArray(lineItems) ? lineItems : [lineItems];\n\n      return {\n        cartId: checkoutId,\n        lines: lines.map(mapLineItemToLine).filter(Boolean)\n      };\n    }\n  }, {\n    key: 'updateLineItems',\n    value: function updateLineItems(checkoutId, lineItems) {\n      var lines = Array.isArray(lineItems) ? lineItems : [lineItems];\n\n      return {\n        cartId: checkoutId,\n        lines: lines.map(mapLineItemToLine).filter(Boolean)\n      };\n    }\n  }, {\n    key: 'updateShippingAddress',\n    value: function updateShippingAddress(checkoutId, shippingAddress) {\n      var deliveryAddress = {};\n\n      if (shippingAddress.address1) {\n        deliveryAddress.address1 = shippingAddress.address1;\n      }\n\n      if (shippingAddress.address2) {\n        deliveryAddress.address2 = shippingAddress.address2;\n      }\n\n      if (shippingAddress.city) {\n        deliveryAddress.city = shippingAddress.city;\n      }\n\n      if (shippingAddress.company) {\n        deliveryAddress.company = shippingAddress.company;\n      }\n\n      if (shippingAddress.country) {\n        deliveryAddress.country = shippingAddress.country;\n      }\n\n      if (shippingAddress.firstName) {\n        deliveryAddress.firstName = shippingAddress.firstName;\n      }\n\n      if (shippingAddress.lastName) {\n        deliveryAddress.lastName = shippingAddress.lastName;\n      }\n\n      if (shippingAddress.phone) {\n        deliveryAddress.phone = shippingAddress.phone;\n      }\n\n      if (shippingAddress.zip) {\n        deliveryAddress.zip = shippingAddress.zip;\n      }\n\n      if (shippingAddress.province) {\n        deliveryAddress.province = shippingAddress.province;\n      }\n\n      var withDeliveryAddress = deliveryAddress && Object.keys(deliveryAddress).length > 0;\n\n      return {\n        cartId: checkoutId,\n        buyerIdentity: {\n          deliveryAddressPreferences: withDeliveryAddress ? [{ deliveryAddress: deliveryAddress }] : []\n        }\n      };\n    }\n  }]);\n  return InputMapper;\n}();\n\nfunction mapLineItemToLine(lineItem) {\n  var line = {};\n\n  if (typeof lineItem.id !== 'undefined') {\n    line.id = lineItem.id;\n  }\n\n  if (typeof lineItem.customAttributes !== 'undefined') {\n    line.attributes = lineItem.customAttributes;\n  }\n\n  if (typeof lineItem.quantity !== 'undefined') {\n    line.quantity = lineItem.quantity;\n  }\n\n  if (typeof lineItem.variantId !== 'undefined') {\n    line.merchandiseId = lineItem.variantId;\n  }\n\n  if (Object.keys(line).length === 0) {\n    return null;\n  }\n\n  return line;\n}\n\nvar Resource = function Resource(client) {\n  classCallCheck$1(this, Resource);\n\n  this.graphQLClient = client;\n  this.inputMapper = new InputMapper();\n};\n\nvar defaultErrors = [{ message: 'an unknown error has occurred.' }];\n\nfunction defaultResolver(path) {\n  var keys = path.split('.');\n\n  return function (_ref) {\n    var model = _ref.model,\n        errors = _ref.errors;\n\n    return new Promise(function (resolve, reject) {\n      try {\n        var result = keys.reduce(function (ref, key) {\n          return ref[key];\n        }, model);\n\n        resolve(result);\n      } catch (_) {\n        if (errors) {\n          reject(errors);\n        } else {\n          reject(defaultErrors);\n        }\n      }\n    });\n  };\n}\n\nfunction fetchResourcesForProducts(productOrProduct, client) {\n  var products = [].concat(productOrProduct);\n\n  return Promise.all(products.reduce(function (promiseAcc, product) {\n\n    // If the graphql query doesn't find a match, skip fetching variants and images.\n    if (product === null) {\n      return promiseAcc;\n    }\n\n    // Fetch the rest of the images and variants for this product\n    promiseAcc.push(client.fetchAllPages(product.images, { pageSize: 250 }).then(function (images) {\n      product.attrs.images = images;\n    }));\n\n    promiseAcc.push(client.fetchAllPages(product.variants, { pageSize: 250 }).then(function (variants) {\n      product.attrs.variants = variants;\n    }));\n\n    return promiseAcc;\n  }, []));\n}\n\nfunction paginateProductConnectionsAndResolve(client) {\n  return function (products) {\n    return fetchResourcesForProducts(products, client).then(function () {\n      return products;\n    });\n  };\n}\n\nfunction paginateCollectionsProductConnectionsAndResolve(client) {\n  return function (collectionOrCollections) {\n    var collections = [].concat(collectionOrCollections);\n\n    return Promise.all(collections.reduce(function (promiseAcc, collection) {\n      return promiseAcc.concat(fetchResourcesForProducts(collection.products, client));\n    }, [])).then(function () {\n      return collectionOrCollections;\n    });\n  };\n}\n\n/**\n * @namespace ProductHelpers\n */\nvar productHelpers = {\n\n  /**\n   * Returns the variant of a product corresponding to the options given.\n   *\n   * @example\n   * const selectedVariant = client.product.helpers.variantForOptions(product, {\n   *   size: \"Small\",\n   *   color: \"Red\"\n   * });\n   *\n   * @memberof ProductHelpers\n   * @method variantForOptions\n   * @param {GraphModel} product The product to find the variant on. Must include `variants`.\n   * @param {Object} options An object containing the options for the variant.\n   * @return {GraphModel} The variant corresponding to the options given.\n   */\n  variantForOptions: function variantForOptions(product, options) {\n    return product.variants.find(function (variant) {\n      return variant.selectedOptions.every(function (selectedOption) {\n        return options[selectedOption.name] === selectedOption.value.valueOf();\n      });\n    });\n  }\n};\n\nfunction query(client) {\n  var document = client.document();\n  var spreads = {};\n  var variables = {};\n  variables.__defaultOperation__ = {};\n  variables.__defaultOperation__.id = client.variable(\"id\", \"ID!\");\n  spreads.VariantFragment = document.defineFragment(\"VariantFragment\", \"ProductVariant\", function (root) {\n    root.add(\"id\");\n    root.add(\"title\");\n    root.add(\"price\", function (price) {\n      price.add(\"amount\");\n      price.add(\"currencyCode\");\n    });\n    root.add(\"price\", {\n      alias: \"priceV2\"\n    }, function (price) {\n      price.add(\"amount\");\n      price.add(\"currencyCode\");\n    });\n    root.add(\"weight\");\n    root.add(\"availableForSale\", {\n      alias: \"available\"\n    });\n    root.add(\"sku\");\n    root.add(\"compareAtPrice\", function (compareAtPrice) {\n      compareAtPrice.add(\"amount\");\n      compareAtPrice.add(\"currencyCode\");\n    });\n    root.add(\"compareAtPrice\", {\n      alias: \"compareAtPriceV2\"\n    }, function (compareAtPrice) {\n      compareAtPrice.add(\"amount\");\n      compareAtPrice.add(\"currencyCode\");\n    });\n    root.add(\"image\", function (image) {\n      image.add(\"id\");\n      image.add(\"url\", {\n        alias: \"src\"\n      });\n      image.add(\"altText\");\n      image.add(\"width\");\n      image.add(\"height\");\n    });\n    root.add(\"selectedOptions\", function (selectedOptions) {\n      selectedOptions.add(\"name\");\n      selectedOptions.add(\"value\");\n    });\n    root.add(\"unitPrice\", function (unitPrice) {\n      unitPrice.add(\"amount\");\n      unitPrice.add(\"currencyCode\");\n    });\n    root.add(\"unitPriceMeasurement\", function (unitPriceMeasurement) {\n      unitPriceMeasurement.add(\"measuredType\");\n      unitPriceMeasurement.add(\"quantityUnit\");\n      unitPriceMeasurement.add(\"quantityValue\");\n      unitPriceMeasurement.add(\"referenceUnit\");\n      unitPriceMeasurement.add(\"referenceValue\");\n    });\n  });\n  spreads.ProductFragment = document.defineFragment(\"ProductFragment\", \"Product\", function (root) {\n    root.add(\"id\");\n    root.add(\"availableForSale\");\n    root.add(\"createdAt\");\n    root.add(\"updatedAt\");\n    root.add(\"descriptionHtml\");\n    root.add(\"description\");\n    root.add(\"handle\");\n    root.add(\"productType\");\n    root.add(\"title\");\n    root.add(\"vendor\");\n    root.add(\"publishedAt\");\n    root.add(\"onlineStoreUrl\");\n    root.add(\"options\", function (options) {\n      options.add(\"name\");\n      options.add(\"values\");\n    });\n    root.add(\"images\", {\n      args: {\n        first: 250\n      }\n    }, function (images) {\n      images.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      images.add(\"edges\", function (edges) {\n        edges.add(\"cursor\");\n        edges.add(\"node\", function (node) {\n          node.add(\"id\");\n          node.add(\"url\", {\n            alias: \"src\"\n          });\n          node.add(\"altText\");\n          node.add(\"width\");\n          node.add(\"height\");\n        });\n      });\n    });\n    root.add(\"variants\", {\n      args: {\n        first: 250\n      }\n    }, function (variants) {\n      variants.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      variants.add(\"edges\", function (edges) {\n        edges.add(\"cursor\");\n        edges.add(\"node\", function (node) {\n          node.addFragment(spreads.VariantFragment);\n        });\n      });\n    });\n  });\n  document.addQuery([variables.__defaultOperation__.id], function (root) {\n    root.add(\"node\", {\n      args: {\n        id: variables.__defaultOperation__.id\n      }\n    }, function (node) {\n      node.addFragment(spreads.ProductFragment);\n    });\n  });\n  return document;\n}\n\nfunction query$1(client) {\n  var document = client.document();\n  var spreads = {};\n  var variables = {};\n  variables.__defaultOperation__ = {};\n  variables.__defaultOperation__.ids = client.variable(\"ids\", \"[ID!]!\");\n  spreads.VariantFragment = document.defineFragment(\"VariantFragment\", \"ProductVariant\", function (root) {\n    root.add(\"id\");\n    root.add(\"title\");\n    root.add(\"price\", function (price) {\n      price.add(\"amount\");\n      price.add(\"currencyCode\");\n    });\n    root.add(\"price\", {\n      alias: \"priceV2\"\n    }, function (price) {\n      price.add(\"amount\");\n      price.add(\"currencyCode\");\n    });\n    root.add(\"weight\");\n    root.add(\"availableForSale\", {\n      alias: \"available\"\n    });\n    root.add(\"sku\");\n    root.add(\"compareAtPrice\", function (compareAtPrice) {\n      compareAtPrice.add(\"amount\");\n      compareAtPrice.add(\"currencyCode\");\n    });\n    root.add(\"compareAtPrice\", {\n      alias: \"compareAtPriceV2\"\n    }, function (compareAtPrice) {\n      compareAtPrice.add(\"amount\");\n      compareAtPrice.add(\"currencyCode\");\n    });\n    root.add(\"image\", function (image) {\n      image.add(\"id\");\n      image.add(\"url\", {\n        alias: \"src\"\n      });\n      image.add(\"altText\");\n      image.add(\"width\");\n      image.add(\"height\");\n    });\n    root.add(\"selectedOptions\", function (selectedOptions) {\n      selectedOptions.add(\"name\");\n      selectedOptions.add(\"value\");\n    });\n    root.add(\"unitPrice\", function (unitPrice) {\n      unitPrice.add(\"amount\");\n      unitPrice.add(\"currencyCode\");\n    });\n    root.add(\"unitPriceMeasurement\", function (unitPriceMeasurement) {\n      unitPriceMeasurement.add(\"measuredType\");\n      unitPriceMeasurement.add(\"quantityUnit\");\n      unitPriceMeasurement.add(\"quantityValue\");\n      unitPriceMeasurement.add(\"referenceUnit\");\n      unitPriceMeasurement.add(\"referenceValue\");\n    });\n  });\n  spreads.ProductFragment = document.defineFragment(\"ProductFragment\", \"Product\", function (root) {\n    root.add(\"id\");\n    root.add(\"availableForSale\");\n    root.add(\"createdAt\");\n    root.add(\"updatedAt\");\n    root.add(\"descriptionHtml\");\n    root.add(\"description\");\n    root.add(\"handle\");\n    root.add(\"productType\");\n    root.add(\"title\");\n    root.add(\"vendor\");\n    root.add(\"publishedAt\");\n    root.add(\"onlineStoreUrl\");\n    root.add(\"options\", function (options) {\n      options.add(\"name\");\n      options.add(\"values\");\n    });\n    root.add(\"images\", {\n      args: {\n        first: 250\n      }\n    }, function (images) {\n      images.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      images.add(\"edges\", function (edges) {\n        edges.add(\"cursor\");\n        edges.add(\"node\", function (node) {\n          node.add(\"id\");\n          node.add(\"url\", {\n            alias: \"src\"\n          });\n          node.add(\"altText\");\n          node.add(\"width\");\n          node.add(\"height\");\n        });\n      });\n    });\n    root.add(\"variants\", {\n      args: {\n        first: 250\n      }\n    }, function (variants) {\n      variants.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      variants.add(\"edges\", function (edges) {\n        edges.add(\"cursor\");\n        edges.add(\"node\", function (node) {\n          node.addFragment(spreads.VariantFragment);\n        });\n      });\n    });\n  });\n  document.addQuery([variables.__defaultOperation__.ids], function (root) {\n    root.add(\"nodes\", {\n      args: {\n        ids: variables.__defaultOperation__.ids\n      }\n    }, function (nodes) {\n      nodes.addFragment(spreads.ProductFragment);\n    });\n  });\n  return document;\n}\n\nfunction query$2(client) {\n  var document = client.document();\n  var spreads = {};\n  var variables = {};\n  variables.__defaultOperation__ = {};\n  variables.__defaultOperation__.first = client.variable(\"first\", \"Int!\");\n  variables.__defaultOperation__.query = client.variable(\"query\", \"String\");\n  variables.__defaultOperation__.sortKey = client.variable(\"sortKey\", \"ProductSortKeys\");\n  variables.__defaultOperation__.reverse = client.variable(\"reverse\", \"Boolean\");\n  spreads.VariantFragment = document.defineFragment(\"VariantFragment\", \"ProductVariant\", function (root) {\n    root.add(\"id\");\n    root.add(\"title\");\n    root.add(\"price\", function (price) {\n      price.add(\"amount\");\n      price.add(\"currencyCode\");\n    });\n    root.add(\"price\", {\n      alias: \"priceV2\"\n    }, function (price) {\n      price.add(\"amount\");\n      price.add(\"currencyCode\");\n    });\n    root.add(\"weight\");\n    root.add(\"availableForSale\", {\n      alias: \"available\"\n    });\n    root.add(\"sku\");\n    root.add(\"compareAtPrice\", function (compareAtPrice) {\n      compareAtPrice.add(\"amount\");\n      compareAtPrice.add(\"currencyCode\");\n    });\n    root.add(\"compareAtPrice\", {\n      alias: \"compareAtPriceV2\"\n    }, function (compareAtPrice) {\n      compareAtPrice.add(\"amount\");\n      compareAtPrice.add(\"currencyCode\");\n    });\n    root.add(\"image\", function (image) {\n      image.add(\"id\");\n      image.add(\"url\", {\n        alias: \"src\"\n      });\n      image.add(\"altText\");\n      image.add(\"width\");\n      image.add(\"height\");\n    });\n    root.add(\"selectedOptions\", function (selectedOptions) {\n      selectedOptions.add(\"name\");\n      selectedOptions.add(\"value\");\n    });\n    root.add(\"unitPrice\", function (unitPrice) {\n      unitPrice.add(\"amount\");\n      unitPrice.add(\"currencyCode\");\n    });\n    root.add(\"unitPriceMeasurement\", function (unitPriceMeasurement) {\n      unitPriceMeasurement.add(\"measuredType\");\n      unitPriceMeasurement.add(\"quantityUnit\");\n      unitPriceMeasurement.add(\"quantityValue\");\n      unitPriceMeasurement.add(\"referenceUnit\");\n      unitPriceMeasurement.add(\"referenceValue\");\n    });\n  });\n  spreads.ProductFragment = document.defineFragment(\"ProductFragment\", \"Product\", function (root) {\n    root.add(\"id\");\n    root.add(\"availableForSale\");\n    root.add(\"createdAt\");\n    root.add(\"updatedAt\");\n    root.add(\"descriptionHtml\");\n    root.add(\"description\");\n    root.add(\"handle\");\n    root.add(\"productType\");\n    root.add(\"title\");\n    root.add(\"vendor\");\n    root.add(\"publishedAt\");\n    root.add(\"onlineStoreUrl\");\n    root.add(\"options\", function (options) {\n      options.add(\"name\");\n      options.add(\"values\");\n    });\n    root.add(\"images\", {\n      args: {\n        first: 250\n      }\n    }, function (images) {\n      images.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      images.add(\"edges\", function (edges) {\n        edges.add(\"cursor\");\n        edges.add(\"node\", function (node) {\n          node.add(\"id\");\n          node.add(\"url\", {\n            alias: \"src\"\n          });\n          node.add(\"altText\");\n          node.add(\"width\");\n          node.add(\"height\");\n        });\n      });\n    });\n    root.add(\"variants\", {\n      args: {\n        first: 250\n      }\n    }, function (variants) {\n      variants.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      variants.add(\"edges\", function (edges) {\n        edges.add(\"cursor\");\n        edges.add(\"node\", function (node) {\n          node.addFragment(spreads.VariantFragment);\n        });\n      });\n    });\n  });\n  document.addQuery([variables.__defaultOperation__.first, variables.__defaultOperation__.query, variables.__defaultOperation__.sortKey, variables.__defaultOperation__.reverse], function (root) {\n    root.add(\"products\", {\n      args: {\n        first: variables.__defaultOperation__.first,\n        query: variables.__defaultOperation__.query,\n        sortKey: variables.__defaultOperation__.sortKey,\n        reverse: variables.__defaultOperation__.reverse\n      }\n    }, function (products) {\n      products.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      products.add(\"edges\", function (edges) {\n        edges.add(\"cursor\");\n        edges.add(\"node\", function (node) {\n          node.addFragment(spreads.ProductFragment);\n        });\n      });\n    });\n  });\n  return document;\n}\n\nfunction query$3(client) {\n  var document = client.document();\n  var spreads = {};\n  var variables = {};\n  variables.__defaultOperation__ = {};\n  variables.__defaultOperation__.handle = client.variable(\"handle\", \"String!\");\n  spreads.VariantFragment = document.defineFragment(\"VariantFragment\", \"ProductVariant\", function (root) {\n    root.add(\"id\");\n    root.add(\"title\");\n    root.add(\"price\", function (price) {\n      price.add(\"amount\");\n      price.add(\"currencyCode\");\n    });\n    root.add(\"price\", {\n      alias: \"priceV2\"\n    }, function (price) {\n      price.add(\"amount\");\n      price.add(\"currencyCode\");\n    });\n    root.add(\"weight\");\n    root.add(\"availableForSale\", {\n      alias: \"available\"\n    });\n    root.add(\"sku\");\n    root.add(\"compareAtPrice\", function (compareAtPrice) {\n      compareAtPrice.add(\"amount\");\n      compareAtPrice.add(\"currencyCode\");\n    });\n    root.add(\"compareAtPrice\", {\n      alias: \"compareAtPriceV2\"\n    }, function (compareAtPrice) {\n      compareAtPrice.add(\"amount\");\n      compareAtPrice.add(\"currencyCode\");\n    });\n    root.add(\"image\", function (image) {\n      image.add(\"id\");\n      image.add(\"url\", {\n        alias: \"src\"\n      });\n      image.add(\"altText\");\n      image.add(\"width\");\n      image.add(\"height\");\n    });\n    root.add(\"selectedOptions\", function (selectedOptions) {\n      selectedOptions.add(\"name\");\n      selectedOptions.add(\"value\");\n    });\n    root.add(\"unitPrice\", function (unitPrice) {\n      unitPrice.add(\"amount\");\n      unitPrice.add(\"currencyCode\");\n    });\n    root.add(\"unitPriceMeasurement\", function (unitPriceMeasurement) {\n      unitPriceMeasurement.add(\"measuredType\");\n      unitPriceMeasurement.add(\"quantityUnit\");\n      unitPriceMeasurement.add(\"quantityValue\");\n      unitPriceMeasurement.add(\"referenceUnit\");\n      unitPriceMeasurement.add(\"referenceValue\");\n    });\n  });\n  spreads.ProductFragment = document.defineFragment(\"ProductFragment\", \"Product\", function (root) {\n    root.add(\"id\");\n    root.add(\"availableForSale\");\n    root.add(\"createdAt\");\n    root.add(\"updatedAt\");\n    root.add(\"descriptionHtml\");\n    root.add(\"description\");\n    root.add(\"handle\");\n    root.add(\"productType\");\n    root.add(\"title\");\n    root.add(\"vendor\");\n    root.add(\"publishedAt\");\n    root.add(\"onlineStoreUrl\");\n    root.add(\"options\", function (options) {\n      options.add(\"name\");\n      options.add(\"values\");\n    });\n    root.add(\"images\", {\n      args: {\n        first: 250\n      }\n    }, function (images) {\n      images.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      images.add(\"edges\", function (edges) {\n        edges.add(\"cursor\");\n        edges.add(\"node\", function (node) {\n          node.add(\"id\");\n          node.add(\"url\", {\n            alias: \"src\"\n          });\n          node.add(\"altText\");\n          node.add(\"width\");\n          node.add(\"height\");\n        });\n      });\n    });\n    root.add(\"variants\", {\n      args: {\n        first: 250\n      }\n    }, function (variants) {\n      variants.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      variants.add(\"edges\", function (edges) {\n        edges.add(\"cursor\");\n        edges.add(\"node\", function (node) {\n          node.addFragment(spreads.VariantFragment);\n        });\n      });\n    });\n  });\n  document.addQuery([variables.__defaultOperation__.handle], function (root) {\n    root.add(\"productByHandle\", {\n      args: {\n        handle: variables.__defaultOperation__.handle\n      }\n    }, function (productByHandle) {\n      productByHandle.addFragment(spreads.ProductFragment);\n    });\n  });\n  return document;\n}\n\nfunction query$4(client) {\n  var document = client.document();\n  var spreads = {};\n  var variables = {};\n  variables.__defaultOperation__ = {};\n  variables.__defaultOperation__.productId = client.variable(\"productId\", \"ID!\");\n  spreads.VariantFragment = document.defineFragment(\"VariantFragment\", \"ProductVariant\", function (root) {\n    root.add(\"id\");\n    root.add(\"title\");\n    root.add(\"price\", function (price) {\n      price.add(\"amount\");\n      price.add(\"currencyCode\");\n    });\n    root.add(\"price\", {\n      alias: \"priceV2\"\n    }, function (price) {\n      price.add(\"amount\");\n      price.add(\"currencyCode\");\n    });\n    root.add(\"weight\");\n    root.add(\"availableForSale\", {\n      alias: \"available\"\n    });\n    root.add(\"sku\");\n    root.add(\"compareAtPrice\", function (compareAtPrice) {\n      compareAtPrice.add(\"amount\");\n      compareAtPrice.add(\"currencyCode\");\n    });\n    root.add(\"compareAtPrice\", {\n      alias: \"compareAtPriceV2\"\n    }, function (compareAtPrice) {\n      compareAtPrice.add(\"amount\");\n      compareAtPrice.add(\"currencyCode\");\n    });\n    root.add(\"image\", function (image) {\n      image.add(\"id\");\n      image.add(\"url\", {\n        alias: \"src\"\n      });\n      image.add(\"altText\");\n      image.add(\"width\");\n      image.add(\"height\");\n    });\n    root.add(\"selectedOptions\", function (selectedOptions) {\n      selectedOptions.add(\"name\");\n      selectedOptions.add(\"value\");\n    });\n    root.add(\"unitPrice\", function (unitPrice) {\n      unitPrice.add(\"amount\");\n      unitPrice.add(\"currencyCode\");\n    });\n    root.add(\"unitPriceMeasurement\", function (unitPriceMeasurement) {\n      unitPriceMeasurement.add(\"measuredType\");\n      unitPriceMeasurement.add(\"quantityUnit\");\n      unitPriceMeasurement.add(\"quantityValue\");\n      unitPriceMeasurement.add(\"referenceUnit\");\n      unitPriceMeasurement.add(\"referenceValue\");\n    });\n  });\n  spreads.ProductFragment = document.defineFragment(\"ProductFragment\", \"Product\", function (root) {\n    root.add(\"id\");\n    root.add(\"availableForSale\");\n    root.add(\"createdAt\");\n    root.add(\"updatedAt\");\n    root.add(\"descriptionHtml\");\n    root.add(\"description\");\n    root.add(\"handle\");\n    root.add(\"productType\");\n    root.add(\"title\");\n    root.add(\"vendor\");\n    root.add(\"publishedAt\");\n    root.add(\"onlineStoreUrl\");\n    root.add(\"options\", function (options) {\n      options.add(\"name\");\n      options.add(\"values\");\n    });\n    root.add(\"images\", {\n      args: {\n        first: 250\n      }\n    }, function (images) {\n      images.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      images.add(\"edges\", function (edges) {\n        edges.add(\"cursor\");\n        edges.add(\"node\", function (node) {\n          node.add(\"id\");\n          node.add(\"url\", {\n            alias: \"src\"\n          });\n          node.add(\"altText\");\n          node.add(\"width\");\n          node.add(\"height\");\n        });\n      });\n    });\n    root.add(\"variants\", {\n      args: {\n        first: 250\n      }\n    }, function (variants) {\n      variants.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      variants.add(\"edges\", function (edges) {\n        edges.add(\"cursor\");\n        edges.add(\"node\", function (node) {\n          node.addFragment(spreads.VariantFragment);\n        });\n      });\n    });\n  });\n  document.addQuery([variables.__defaultOperation__.productId], function (root) {\n    root.add(\"productRecommendations\", {\n      args: {\n        productId: variables.__defaultOperation__.productId\n      }\n    }, function (productRecommendations) {\n      productRecommendations.addFragment(spreads.ProductFragment);\n    });\n  });\n  return document;\n}\n\n// GraphQL\n/**\n * The JS Buy SDK product resource\n * @class\n */\n\nvar ProductResource = function (_Resource) {\n  inherits$1(ProductResource, _Resource);\n\n  function ProductResource() {\n    classCallCheck$1(this, ProductResource);\n    return possibleConstructorReturn$1(this, (ProductResource.__proto__ || Object.getPrototypeOf(ProductResource)).apply(this, arguments));\n  }\n\n  createClass$1(ProductResource, [{\n    key: 'fetchAll',\n\n\n    /**\n     * Fetches all products on the shop.\n     *\n     * @example\n     * client.product.fetchAll().then((products) => {\n     *   // Do something with the products\n     * });\n     *\n     * @param {Int} [pageSize] The number of products to fetch per page\n     * @return {Promise|GraphModel[]} A promise resolving with an array of `GraphModel`s of the products.\n     */\n    value: function fetchAll() {\n      var first = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 20;\n\n      return this.graphQLClient.send(query$2, { first: first }).then(defaultResolver('products')).then(paginateProductConnectionsAndResolve(this.graphQLClient));\n    }\n\n    /**\n     * Fetches a single product by ID on the shop.\n     *\n     * @example\n     * client.product.fetch('Xk9lM2JkNzFmNzIQ4NTIY4ZDFi9DaGVja291dC9lM2JkN==').then((product) => {\n     *   // Do something with the product\n     * });\n     *\n     * @param {String} id The id of the product to fetch.\n     * @return {Promise|GraphModel} A promise resolving with a `GraphModel` of the product.\n     */\n\n  }, {\n    key: 'fetch',\n    value: function fetch(id) {\n      return this.graphQLClient.send(query, { id: id }).then(defaultResolver('node')).then(paginateProductConnectionsAndResolve(this.graphQLClient));\n    }\n\n    /**\n     * Fetches multiple products by ID on the shop.\n     *\n     * @example\n     * const ids = ['Xk9lM2JkNzFmNzIQ4NTIY4ZDFi9DaGVja291dC9lM2JkN==', 'Z2lkOi8vc2hvcGlmeS9Qcm9kdWN0Lzc4NTc5ODkzODQ='];\n     * client.product.fetchMultiple(ids).then((products) => {\n     *   // Do something with the products\n     * });\n     *\n     * @param {String[]} ids The ids of the products to fetch\n     * @return {Promise|GraphModel[]} A promise resolving with a `GraphModel` of the product.\n     */\n\n  }, {\n    key: 'fetchMultiple',\n    value: function fetchMultiple(ids) {\n      return this.graphQLClient.send(query$1, { ids: ids }).then(defaultResolver('nodes')).then(paginateProductConnectionsAndResolve(this.graphQLClient));\n    }\n\n    /**\n     * Fetches a single product by handle on the shop.\n     *\n     * @example\n     * client.product.fetchByHandle('my-product').then((product) => {\n     *   // Do something with the product\n     * });\n     *\n     * @param {String} handle The handle of the product to fetch.\n     * @return {Promise|GraphModel} A promise resolving with a `GraphModel` of the product.\n     */\n\n  }, {\n    key: 'fetchByHandle',\n    value: function fetchByHandle(handle) {\n      return this.graphQLClient.send(query$3, { handle: handle }).then(defaultResolver('productByHandle')).then(paginateProductConnectionsAndResolve(this.graphQLClient));\n    }\n\n    /**\n     * Fetches all products on the shop that match the query.\n     *\n     * @example\n     * client.product.fetchQuery({first: 20, sortKey: 'CREATED_AT', reverse: true}).then((products) => {\n     *   // Do something with the first 10 products sorted by title in ascending order\n     * });\n     *\n     * @param {Object} [args] An object specifying the query data containing zero or more of:\n     *   @param {Int} [args.first=20] The relay `first` param. This specifies page size.\n     *   @param {String} [args.sortKey=ID] The key to sort results by. Available values are\n     *   documented as {@link https://help.shopify.com/api/storefront-api/reference/enum/productsortkeys|Product Sort Keys}.\n     *   @param {String} [args.query] A query string. See full documentation {@link https://help.shopify.com/api/storefront-api/reference/object/shop#products|here}\n     *   @param {Boolean} [args.reverse] Whether or not to reverse the sort order of the results\n     * @return {Promise|GraphModel[]} A promise resolving with an array of `GraphModel`s of the products.\n     */\n\n  }, {\n    key: 'fetchQuery',\n    value: function fetchQuery() {\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref$first = _ref.first,\n          first = _ref$first === undefined ? 20 : _ref$first,\n          _ref$sortKey = _ref.sortKey,\n          sortKey = _ref$sortKey === undefined ? 'ID' : _ref$sortKey,\n          query$$1 = _ref.query,\n          reverse = _ref.reverse;\n\n      return this.graphQLClient.send(query$2, {\n        first: first,\n        sortKey: sortKey,\n        query: query$$1,\n        reverse: reverse\n      }).then(defaultResolver('products')).then(paginateProductConnectionsAndResolve(this.graphQLClient));\n    }\n\n    /**\n     * Find recommended products related to a given productId.\n     * To learn more about how recommendations are generated, see https://shopify.dev/themes/product-merchandising/recommendations.\n     *\n     * @example\n     * const productId 'Xk9lM2JkNzFmNzIQ4NTIY4ZDFi9DaGVja291dC9lM2JkN==';\n     * client.product.fetchProductRecommendations(productId).then((products) => {\n     *   // Do something with the products\n     * });\n     *\n     * @param {String} productId The id of the product to fetch.\n     * @return {Promise|GraphModel[]} A promise resolving with an array of `GraphModel`s of the products.\n     */\n\n  }, {\n    key: 'fetchRecommendations',\n    value: function fetchRecommendations(productId) {\n      return this.graphQLClient.send(query$4, { productId: productId }).then(defaultResolver('productRecommendations')).then(paginateProductConnectionsAndResolve(this.graphQLClient));\n    }\n  }, {\n    key: 'helpers',\n    get: function get$$1() {\n      return productHelpers;\n    }\n  }]);\n  return ProductResource;\n}(Resource);\n\nfunction query$5(client) {\n  var document = client.document();\n  var spreads = {};\n  var variables = {};\n  variables.__defaultOperation__ = {};\n  variables.__defaultOperation__.id = client.variable(\"id\", \"ID!\");\n  spreads.CollectionFragment = document.defineFragment(\"CollectionFragment\", \"Collection\", function (root) {\n    root.add(\"id\");\n    root.add(\"handle\");\n    root.add(\"description\");\n    root.add(\"descriptionHtml\");\n    root.add(\"updatedAt\");\n    root.add(\"title\");\n    root.add(\"image\", function (image) {\n      image.add(\"id\");\n      image.add(\"url\", {\n        alias: \"src\"\n      });\n      image.add(\"altText\");\n    });\n  });\n  document.addQuery([variables.__defaultOperation__.id], function (root) {\n    root.add(\"node\", {\n      args: {\n        id: variables.__defaultOperation__.id\n      }\n    }, function (node) {\n      node.addFragment(spreads.CollectionFragment);\n    });\n  });\n  return document;\n}\n\nfunction query$6(client) {\n  var document = client.document();\n  var spreads = {};\n  var variables = {};\n  variables.__defaultOperation__ = {};\n  variables.__defaultOperation__.id = client.variable(\"id\", \"ID!\");\n  variables.__defaultOperation__.productsFirst = client.variable(\"productsFirst\", \"Int!\");\n  spreads.VariantFragment = document.defineFragment(\"VariantFragment\", \"ProductVariant\", function (root) {\n    root.add(\"id\");\n    root.add(\"title\");\n    root.add(\"price\", function (price) {\n      price.add(\"amount\");\n      price.add(\"currencyCode\");\n    });\n    root.add(\"price\", {\n      alias: \"priceV2\"\n    }, function (price) {\n      price.add(\"amount\");\n      price.add(\"currencyCode\");\n    });\n    root.add(\"weight\");\n    root.add(\"availableForSale\", {\n      alias: \"available\"\n    });\n    root.add(\"sku\");\n    root.add(\"compareAtPrice\", function (compareAtPrice) {\n      compareAtPrice.add(\"amount\");\n      compareAtPrice.add(\"currencyCode\");\n    });\n    root.add(\"compareAtPrice\", {\n      alias: \"compareAtPriceV2\"\n    }, function (compareAtPrice) {\n      compareAtPrice.add(\"amount\");\n      compareAtPrice.add(\"currencyCode\");\n    });\n    root.add(\"image\", function (image) {\n      image.add(\"id\");\n      image.add(\"url\", {\n        alias: \"src\"\n      });\n      image.add(\"altText\");\n      image.add(\"width\");\n      image.add(\"height\");\n    });\n    root.add(\"selectedOptions\", function (selectedOptions) {\n      selectedOptions.add(\"name\");\n      selectedOptions.add(\"value\");\n    });\n    root.add(\"unitPrice\", function (unitPrice) {\n      unitPrice.add(\"amount\");\n      unitPrice.add(\"currencyCode\");\n    });\n    root.add(\"unitPriceMeasurement\", function (unitPriceMeasurement) {\n      unitPriceMeasurement.add(\"measuredType\");\n      unitPriceMeasurement.add(\"quantityUnit\");\n      unitPriceMeasurement.add(\"quantityValue\");\n      unitPriceMeasurement.add(\"referenceUnit\");\n      unitPriceMeasurement.add(\"referenceValue\");\n    });\n  });\n  spreads.CollectionFragment = document.defineFragment(\"CollectionFragment\", \"Collection\", function (root) {\n    root.add(\"id\");\n    root.add(\"handle\");\n    root.add(\"description\");\n    root.add(\"descriptionHtml\");\n    root.add(\"updatedAt\");\n    root.add(\"title\");\n    root.add(\"image\", function (image) {\n      image.add(\"id\");\n      image.add(\"url\", {\n        alias: \"src\"\n      });\n      image.add(\"altText\");\n    });\n  });\n  spreads.ProductFragment = document.defineFragment(\"ProductFragment\", \"Product\", function (root) {\n    root.add(\"id\");\n    root.add(\"availableForSale\");\n    root.add(\"createdAt\");\n    root.add(\"updatedAt\");\n    root.add(\"descriptionHtml\");\n    root.add(\"description\");\n    root.add(\"handle\");\n    root.add(\"productType\");\n    root.add(\"title\");\n    root.add(\"vendor\");\n    root.add(\"publishedAt\");\n    root.add(\"onlineStoreUrl\");\n    root.add(\"options\", function (options) {\n      options.add(\"name\");\n      options.add(\"values\");\n    });\n    root.add(\"images\", {\n      args: {\n        first: 250\n      }\n    }, function (images) {\n      images.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      images.add(\"edges\", function (edges) {\n        edges.add(\"cursor\");\n        edges.add(\"node\", function (node) {\n          node.add(\"id\");\n          node.add(\"url\", {\n            alias: \"src\"\n          });\n          node.add(\"altText\");\n          node.add(\"width\");\n          node.add(\"height\");\n        });\n      });\n    });\n    root.add(\"variants\", {\n      args: {\n        first: 250\n      }\n    }, function (variants) {\n      variants.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      variants.add(\"edges\", function (edges) {\n        edges.add(\"cursor\");\n        edges.add(\"node\", function (node) {\n          node.addFragment(spreads.VariantFragment);\n        });\n      });\n    });\n  });\n  document.addQuery([variables.__defaultOperation__.id, variables.__defaultOperation__.productsFirst], function (root) {\n    root.add(\"node\", {\n      args: {\n        id: variables.__defaultOperation__.id\n      }\n    }, function (node) {\n      node.addFragment(spreads.CollectionFragment);\n      node.addInlineFragmentOn(\"Collection\", function (Collection) {\n        Collection.add(\"products\", {\n          args: {\n            first: variables.__defaultOperation__.productsFirst\n          }\n        }, function (products) {\n          products.add(\"pageInfo\", function (pageInfo) {\n            pageInfo.add(\"hasNextPage\");\n            pageInfo.add(\"hasPreviousPage\");\n          });\n          products.add(\"edges\", function (edges) {\n            edges.add(\"cursor\");\n            edges.add(\"node\", function (node) {\n              node.addFragment(spreads.ProductFragment);\n            });\n          });\n        });\n      });\n    });\n  });\n  return document;\n}\n\nfunction query$7(client) {\n  var document = client.document();\n  var spreads = {};\n  var variables = {};\n  variables.__defaultOperation__ = {};\n  variables.__defaultOperation__.first = client.variable(\"first\", \"Int!\");\n  variables.__defaultOperation__.query = client.variable(\"query\", \"String\");\n  variables.__defaultOperation__.sortKey = client.variable(\"sortKey\", \"CollectionSortKeys\");\n  variables.__defaultOperation__.reverse = client.variable(\"reverse\", \"Boolean\");\n  spreads.CollectionFragment = document.defineFragment(\"CollectionFragment\", \"Collection\", function (root) {\n    root.add(\"id\");\n    root.add(\"handle\");\n    root.add(\"description\");\n    root.add(\"descriptionHtml\");\n    root.add(\"updatedAt\");\n    root.add(\"title\");\n    root.add(\"image\", function (image) {\n      image.add(\"id\");\n      image.add(\"url\", {\n        alias: \"src\"\n      });\n      image.add(\"altText\");\n    });\n  });\n  document.addQuery([variables.__defaultOperation__.first, variables.__defaultOperation__.query, variables.__defaultOperation__.sortKey, variables.__defaultOperation__.reverse], function (root) {\n    root.add(\"collections\", {\n      args: {\n        first: variables.__defaultOperation__.first,\n        query: variables.__defaultOperation__.query,\n        sortKey: variables.__defaultOperation__.sortKey,\n        reverse: variables.__defaultOperation__.reverse\n      }\n    }, function (collections) {\n      collections.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      collections.add(\"edges\", function (edges) {\n        edges.add(\"cursor\");\n        edges.add(\"node\", function (node) {\n          node.addFragment(spreads.CollectionFragment);\n        });\n      });\n    });\n  });\n  return document;\n}\n\nfunction query$8(client) {\n  var document = client.document();\n  var spreads = {};\n  var variables = {};\n  variables.__defaultOperation__ = {};\n  variables.__defaultOperation__.first = client.variable(\"first\", \"Int!\");\n  variables.__defaultOperation__.query = client.variable(\"query\", \"String\");\n  variables.__defaultOperation__.sortKey = client.variable(\"sortKey\", \"CollectionSortKeys\");\n  variables.__defaultOperation__.reverse = client.variable(\"reverse\", \"Boolean\");\n  variables.__defaultOperation__.productsFirst = client.variable(\"productsFirst\", \"Int!\");\n  spreads.VariantFragment = document.defineFragment(\"VariantFragment\", \"ProductVariant\", function (root) {\n    root.add(\"id\");\n    root.add(\"title\");\n    root.add(\"price\", function (price) {\n      price.add(\"amount\");\n      price.add(\"currencyCode\");\n    });\n    root.add(\"price\", {\n      alias: \"priceV2\"\n    }, function (price) {\n      price.add(\"amount\");\n      price.add(\"currencyCode\");\n    });\n    root.add(\"weight\");\n    root.add(\"availableForSale\", {\n      alias: \"available\"\n    });\n    root.add(\"sku\");\n    root.add(\"compareAtPrice\", function (compareAtPrice) {\n      compareAtPrice.add(\"amount\");\n      compareAtPrice.add(\"currencyCode\");\n    });\n    root.add(\"compareAtPrice\", {\n      alias: \"compareAtPriceV2\"\n    }, function (compareAtPrice) {\n      compareAtPrice.add(\"amount\");\n      compareAtPrice.add(\"currencyCode\");\n    });\n    root.add(\"image\", function (image) {\n      image.add(\"id\");\n      image.add(\"url\", {\n        alias: \"src\"\n      });\n      image.add(\"altText\");\n      image.add(\"width\");\n      image.add(\"height\");\n    });\n    root.add(\"selectedOptions\", function (selectedOptions) {\n      selectedOptions.add(\"name\");\n      selectedOptions.add(\"value\");\n    });\n    root.add(\"unitPrice\", function (unitPrice) {\n      unitPrice.add(\"amount\");\n      unitPrice.add(\"currencyCode\");\n    });\n    root.add(\"unitPriceMeasurement\", function (unitPriceMeasurement) {\n      unitPriceMeasurement.add(\"measuredType\");\n      unitPriceMeasurement.add(\"quantityUnit\");\n      unitPriceMeasurement.add(\"quantityValue\");\n      unitPriceMeasurement.add(\"referenceUnit\");\n      unitPriceMeasurement.add(\"referenceValue\");\n    });\n  });\n  spreads.CollectionFragment = document.defineFragment(\"CollectionFragment\", \"Collection\", function (root) {\n    root.add(\"id\");\n    root.add(\"handle\");\n    root.add(\"description\");\n    root.add(\"descriptionHtml\");\n    root.add(\"updatedAt\");\n    root.add(\"title\");\n    root.add(\"image\", function (image) {\n      image.add(\"id\");\n      image.add(\"url\", {\n        alias: \"src\"\n      });\n      image.add(\"altText\");\n    });\n  });\n  spreads.ProductFragment = document.defineFragment(\"ProductFragment\", \"Product\", function (root) {\n    root.add(\"id\");\n    root.add(\"availableForSale\");\n    root.add(\"createdAt\");\n    root.add(\"updatedAt\");\n    root.add(\"descriptionHtml\");\n    root.add(\"description\");\n    root.add(\"handle\");\n    root.add(\"productType\");\n    root.add(\"title\");\n    root.add(\"vendor\");\n    root.add(\"publishedAt\");\n    root.add(\"onlineStoreUrl\");\n    root.add(\"options\", function (options) {\n      options.add(\"name\");\n      options.add(\"values\");\n    });\n    root.add(\"images\", {\n      args: {\n        first: 250\n      }\n    }, function (images) {\n      images.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      images.add(\"edges\", function (edges) {\n        edges.add(\"cursor\");\n        edges.add(\"node\", function (node) {\n          node.add(\"id\");\n          node.add(\"url\", {\n            alias: \"src\"\n          });\n          node.add(\"altText\");\n          node.add(\"width\");\n          node.add(\"height\");\n        });\n      });\n    });\n    root.add(\"variants\", {\n      args: {\n        first: 250\n      }\n    }, function (variants) {\n      variants.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      variants.add(\"edges\", function (edges) {\n        edges.add(\"cursor\");\n        edges.add(\"node\", function (node) {\n          node.addFragment(spreads.VariantFragment);\n        });\n      });\n    });\n  });\n  document.addQuery([variables.__defaultOperation__.first, variables.__defaultOperation__.query, variables.__defaultOperation__.sortKey, variables.__defaultOperation__.reverse, variables.__defaultOperation__.productsFirst], function (root) {\n    root.add(\"collections\", {\n      args: {\n        first: variables.__defaultOperation__.first,\n        query: variables.__defaultOperation__.query,\n        sortKey: variables.__defaultOperation__.sortKey,\n        reverse: variables.__defaultOperation__.reverse\n      }\n    }, function (collections) {\n      collections.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      collections.add(\"edges\", function (edges) {\n        edges.add(\"cursor\");\n        edges.add(\"node\", function (node) {\n          node.addFragment(spreads.CollectionFragment);\n          node.add(\"products\", {\n            args: {\n              first: variables.__defaultOperation__.productsFirst\n            }\n          }, function (products) {\n            products.add(\"pageInfo\", function (pageInfo) {\n              pageInfo.add(\"hasNextPage\");\n              pageInfo.add(\"hasPreviousPage\");\n            });\n            products.add(\"edges\", function (edges) {\n              edges.add(\"cursor\");\n              edges.add(\"node\", function (node) {\n                node.addFragment(spreads.ProductFragment);\n              });\n            });\n          });\n        });\n      });\n    });\n  });\n  return document;\n}\n\nfunction query$9(client) {\n  var document = client.document();\n  var spreads = {};\n  var variables = {};\n  variables.__defaultOperation__ = {};\n  variables.__defaultOperation__.handle = client.variable(\"handle\", \"String!\");\n  spreads.VariantFragment = document.defineFragment(\"VariantFragment\", \"ProductVariant\", function (root) {\n    root.add(\"id\");\n    root.add(\"title\");\n    root.add(\"price\", function (price) {\n      price.add(\"amount\");\n      price.add(\"currencyCode\");\n    });\n    root.add(\"price\", {\n      alias: \"priceV2\"\n    }, function (price) {\n      price.add(\"amount\");\n      price.add(\"currencyCode\");\n    });\n    root.add(\"weight\");\n    root.add(\"availableForSale\", {\n      alias: \"available\"\n    });\n    root.add(\"sku\");\n    root.add(\"compareAtPrice\", function (compareAtPrice) {\n      compareAtPrice.add(\"amount\");\n      compareAtPrice.add(\"currencyCode\");\n    });\n    root.add(\"compareAtPrice\", {\n      alias: \"compareAtPriceV2\"\n    }, function (compareAtPrice) {\n      compareAtPrice.add(\"amount\");\n      compareAtPrice.add(\"currencyCode\");\n    });\n    root.add(\"image\", function (image) {\n      image.add(\"id\");\n      image.add(\"url\", {\n        alias: \"src\"\n      });\n      image.add(\"altText\");\n      image.add(\"width\");\n      image.add(\"height\");\n    });\n    root.add(\"selectedOptions\", function (selectedOptions) {\n      selectedOptions.add(\"name\");\n      selectedOptions.add(\"value\");\n    });\n    root.add(\"unitPrice\", function (unitPrice) {\n      unitPrice.add(\"amount\");\n      unitPrice.add(\"currencyCode\");\n    });\n    root.add(\"unitPriceMeasurement\", function (unitPriceMeasurement) {\n      unitPriceMeasurement.add(\"measuredType\");\n      unitPriceMeasurement.add(\"quantityUnit\");\n      unitPriceMeasurement.add(\"quantityValue\");\n      unitPriceMeasurement.add(\"referenceUnit\");\n      unitPriceMeasurement.add(\"referenceValue\");\n    });\n  });\n  spreads.ProductFragment = document.defineFragment(\"ProductFragment\", \"Product\", function (root) {\n    root.add(\"id\");\n    root.add(\"availableForSale\");\n    root.add(\"createdAt\");\n    root.add(\"updatedAt\");\n    root.add(\"descriptionHtml\");\n    root.add(\"description\");\n    root.add(\"handle\");\n    root.add(\"productType\");\n    root.add(\"title\");\n    root.add(\"vendor\");\n    root.add(\"publishedAt\");\n    root.add(\"onlineStoreUrl\");\n    root.add(\"options\", function (options) {\n      options.add(\"name\");\n      options.add(\"values\");\n    });\n    root.add(\"images\", {\n      args: {\n        first: 250\n      }\n    }, function (images) {\n      images.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      images.add(\"edges\", function (edges) {\n        edges.add(\"cursor\");\n        edges.add(\"node\", function (node) {\n          node.add(\"id\");\n          node.add(\"url\", {\n            alias: \"src\"\n          });\n          node.add(\"altText\");\n          node.add(\"width\");\n          node.add(\"height\");\n        });\n      });\n    });\n    root.add(\"variants\", {\n      args: {\n        first: 250\n      }\n    }, function (variants) {\n      variants.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      variants.add(\"edges\", function (edges) {\n        edges.add(\"cursor\");\n        edges.add(\"node\", function (node) {\n          node.addFragment(spreads.VariantFragment);\n        });\n      });\n    });\n  });\n  spreads.CollectionFragment = document.defineFragment(\"CollectionFragment\", \"Collection\", function (root) {\n    root.add(\"id\");\n    root.add(\"handle\");\n    root.add(\"description\");\n    root.add(\"descriptionHtml\");\n    root.add(\"updatedAt\");\n    root.add(\"title\");\n    root.add(\"image\", function (image) {\n      image.add(\"id\");\n      image.add(\"url\", {\n        alias: \"src\"\n      });\n      image.add(\"altText\");\n    });\n  });\n  spreads.CollectionsProductsFragment = document.defineFragment(\"CollectionsProductsFragment\", \"Collection\", function (root) {\n    root.add(\"products\", {\n      args: {\n        first: 20\n      }\n    }, function (products) {\n      products.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      products.add(\"edges\", function (edges) {\n        edges.add(\"cursor\");\n        edges.add(\"node\", function (node) {\n          node.addFragment(spreads.ProductFragment);\n        });\n      });\n    });\n  });\n  document.addQuery([variables.__defaultOperation__.handle], function (root) {\n    root.add(\"collectionByHandle\", {\n      args: {\n        handle: variables.__defaultOperation__.handle\n      }\n    }, function (collectionByHandle) {\n      collectionByHandle.addFragment(spreads.CollectionFragment);\n      collectionByHandle.addFragment(spreads.CollectionsProductsFragment);\n    });\n  });\n  return document;\n}\n\n// GraphQL\n/**\n * The JS Buy SDK collection resource\n * @class\n */\n\nvar CollectionResource = function (_Resource) {\n  inherits$1(CollectionResource, _Resource);\n\n  function CollectionResource() {\n    classCallCheck$1(this, CollectionResource);\n    return possibleConstructorReturn$1(this, (CollectionResource.__proto__ || Object.getPrototypeOf(CollectionResource)).apply(this, arguments));\n  }\n\n  createClass$1(CollectionResource, [{\n    key: 'fetchAll',\n\n\n    /**\n     * Fetches all collections on the shop, not including products.\n     * To fetch collections with products use [fetchAllsWithProducts]{@link Client#fetchAllsWithProducts}.\n     *\n     * @example\n     * client.collection.fetchAll().then((collections) => {\n     *   // Do something with the collections\n     * });\n     *\n     * @return {Promise|GraphModel[]} A promise resolving with an array of `GraphModel`s of the collections.\n     */\n    value: function fetchAll() {\n      var first = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 20;\n\n      return this.graphQLClient.send(query$7, { first: first }).then(defaultResolver('collections'));\n    }\n\n    /**\n     * Fetches all collections on the shop, including products.\n     *\n     * @example\n     * client.collection.fetchAllWithProducts().then((collections) => {\n     *   // Do something with the collections\n     * });\n     *\n     * @return {Promise|GraphModel[]} A promise resolving with an array of `GraphModel`s of the collections.\n     */\n\n  }, {\n    key: 'fetchAllWithProducts',\n    value: function fetchAllWithProducts() {\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref$first = _ref.first,\n          first = _ref$first === undefined ? 20 : _ref$first,\n          _ref$productsFirst = _ref.productsFirst,\n          productsFirst = _ref$productsFirst === undefined ? 20 : _ref$productsFirst;\n\n      return this.graphQLClient.send(query$8, { first: first, productsFirst: productsFirst }).then(defaultResolver('collections')).then(paginateCollectionsProductConnectionsAndResolve(this.graphQLClient));\n    }\n\n    /**\n     * Fetches a single collection by ID on the shop, not including products.\n     * To fetch the collection with products use [fetchWithProducts]{@link Client#fetchWithProducts}.\n     *\n     * @example\n     * client.collection.fetch('Xk9lM2JkNzFmNzIQ4NTIY4ZDFiZTUyZTUwNTE2MDNhZjg==').then((collection) => {\n     *   // Do something with the collection\n     * });\n     *\n     * @param {String} id The id of the collection to fetch.\n     * @return {Promise|GraphModel} A promise resolving with a `GraphModel` of the collection.\n     */\n\n  }, {\n    key: 'fetch',\n    value: function fetch(id) {\n      return this.graphQLClient.send(query$5, { id: id }).then(defaultResolver('node'));\n    }\n\n    /**\n     * Fetches a single collection by ID on the shop, including products.\n     *\n     * @example\n     * client.collection.fetchWithProducts('Xk9lM2JkNzFmNzIQ4NTIY4ZDFiZTUyZTUwNTE2MDNhZjg==').then((collection) => {\n     *   // Do something with the collection\n     * });\n     *\n     * @param {String} id The id of the collection to fetch.\n     * @return {Promise|GraphModel} A promise resolving with a `GraphModel` of the collection.\n     */\n\n  }, {\n    key: 'fetchWithProducts',\n    value: function fetchWithProducts(id) {\n      var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref2$productsFirst = _ref2.productsFirst,\n          productsFirst = _ref2$productsFirst === undefined ? 20 : _ref2$productsFirst;\n\n      return this.graphQLClient.send(query$6, { id: id, productsFirst: productsFirst }).then(defaultResolver('node')).then(paginateCollectionsProductConnectionsAndResolve(this.graphQLClient));\n    }\n\n    /**\n     * Fetches a collection by handle on the shop.\n     *\n     * @example\n     * client.collection.fetchByHandle('my-collection').then((collection) => {\n     *   // Do something with the collection\n     * });\n     *\n     * @param {String} handle The handle of the collection to fetch.\n     * @return {Promise|GraphModel} A promise resolving with a `GraphModel` of the collection.\n     */\n\n  }, {\n    key: 'fetchByHandle',\n    value: function fetchByHandle(handle) {\n      return this.graphQLClient.send(query$9, { handle: handle }).then(defaultResolver('collectionByHandle'));\n    }\n\n    /**\n     * Fetches all collections on the shop that match the query.\n     *\n     * @example\n     * client.collection.fetchQuery({first: 20, sortKey: 'CREATED_AT', reverse: true}).then((collections) => {\n     *   // Do something with the first 10 collections sorted by title in ascending order\n     * });\n     *\n     * @param {Object} [args] An object specifying the query data containing zero or more of:\n     *   @param {Int} [args.first=20] The relay `first` param. This specifies page size.\n     *   @param {String} [args.sortKey=ID] The key to sort results by. Available values are\n     *   documented as {@link https://help.shopify.com/api/storefront-api/reference/enum/collectionsortkeys|Collection Sort Keys}.\n     *   @param {String} [args.query] A query string. See full documentation {@link https://help.shopify.com/api/storefront-api/reference/object/shop#collections|here}\n     *   @param {Boolean} [args.reverse] Whether or not to reverse the sort order of the results\n     * @return {Promise|GraphModel[]} A promise resolving with an array of `GraphModel`s of the collections.\n     */\n\n  }, {\n    key: 'fetchQuery',\n    value: function fetchQuery() {\n      var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref3$first = _ref3.first,\n          first = _ref3$first === undefined ? 20 : _ref3$first,\n          _ref3$sortKey = _ref3.sortKey,\n          sortKey = _ref3$sortKey === undefined ? 'ID' : _ref3$sortKey,\n          query = _ref3.query,\n          reverse = _ref3.reverse;\n\n      return this.graphQLClient.send(query$7, {\n        first: first,\n        sortKey: sortKey,\n        query: query,\n        reverse: reverse\n      }).then(defaultResolver('collections'));\n    }\n  }]);\n  return CollectionResource;\n}(Resource);\n\nfunction query$10(client) {\n  var document = client.document();\n  document.addQuery(function (root) {\n    root.add(\"shop\", function (shop) {\n      shop.add(\"paymentSettings\", function (paymentSettings) {\n        paymentSettings.add(\"enabledPresentmentCurrencies\");\n      });\n      shop.add(\"description\");\n      shop.add(\"moneyFormat\");\n      shop.add(\"name\");\n      shop.add(\"primaryDomain\", function (primaryDomain) {\n        primaryDomain.add(\"host\");\n        primaryDomain.add(\"sslEnabled\");\n        primaryDomain.add(\"url\");\n      });\n    });\n  });\n  return document;\n}\n\nfunction query$11(client) {\n  var document = client.document();\n  var spreads = {};\n  spreads.PolicyFragment = document.defineFragment(\"PolicyFragment\", \"ShopPolicy\", function (root) {\n    root.add(\"id\");\n    root.add(\"title\");\n    root.add(\"url\");\n    root.add(\"body\");\n  });\n  document.addQuery(function (root) {\n    root.add(\"shop\", function (shop) {\n      shop.add(\"privacyPolicy\", function (privacyPolicy) {\n        privacyPolicy.addFragment(spreads.PolicyFragment);\n      });\n      shop.add(\"termsOfService\", function (termsOfService) {\n        termsOfService.addFragment(spreads.PolicyFragment);\n      });\n      shop.add(\"refundPolicy\", function (refundPolicy) {\n        refundPolicy.addFragment(spreads.PolicyFragment);\n      });\n    });\n  });\n  return document;\n}\n\n// GraphQL\n/**\n * The JS Buy SDK shop resource\n * @class\n */\n\nvar ShopResource = function (_Resource) {\n  inherits$1(ShopResource, _Resource);\n\n  function ShopResource() {\n    classCallCheck$1(this, ShopResource);\n    return possibleConstructorReturn$1(this, (ShopResource.__proto__ || Object.getPrototypeOf(ShopResource)).apply(this, arguments));\n  }\n\n  createClass$1(ShopResource, [{\n    key: 'fetchInfo',\n\n\n    /**\n     * Fetches shop information (`currencyCode`, `description`, `moneyFormat`, `name`, and `primaryDomain`).\n     * See the {@link https://help.shopify.com/api/storefront-api/reference/object/shop|Storefront API reference} for more information.\n     *\n     * @example\n     * client.shop.fetchInfo().then((shop) => {\n     *   // Do something with the shop\n     * });\n     *\n     * @return {Promise|GraphModel} A promise resolving with a `GraphModel` of the shop.\n     */\n    value: function fetchInfo() {\n      return this.graphQLClient.send(query$10).then(defaultResolver('shop'));\n    }\n\n    /**\n     * Fetches shop policies (privacy policy, terms of service and refund policy).\n     *\n     * @example\n     * client.shop.fetchPolicies().then((shop) => {\n     *   // Do something with the shop\n     * });\n     *\n     * @return {Promise|GraphModel} A promise resolving with a `GraphModel` of the shop.\n     */\n\n  }, {\n    key: 'fetchPolicies',\n    value: function fetchPolicies() {\n      return this.graphQLClient.send(query$11).then(defaultResolver('shop'));\n    }\n  }]);\n  return ShopResource;\n}(Resource);\n\nfunction getDiscountAllocationId(discountAllocation) {\n  var discountApp = discountAllocation.discountApplication;\n  var discountId = discountAllocation.code || discountAllocation.title || discountApp.code || discountApp.title;\n\n  if (!discountId) {\n    throw new Error('Discount allocation must have either code or title in discountApplication: ' + JSON.stringify(discountAllocation));\n  }\n\n  return discountId;\n}\n\nfunction getDiscountApplicationId(discountApplication) {\n  var discountId = discountApplication.code || discountApplication.title;\n\n  if (!discountId) {\n    throw new Error('Discount application must have either code or title: ' + JSON.stringify(discountApplication));\n  }\n\n  return discountId;\n}\n\nfunction convertToCheckoutDiscountApplicationType(cartLineItems, cartOrderLevelDiscountAllocations) {\n  // For each discount allocation, move the code/title field to be inside the discountApplication field\n  // This is because the code/title field is part of the discount allocation for a Cart, but part of\n  // the discount application for a checkout\n  for (var i = 0; i < cartLineItems.length; i++) {\n    var discountAllocations = cartLineItems[i].discountAllocations;\n\n\n    if (!discountAllocations) {\n      continue;\n    }\n\n    for (var j = 0; j < discountAllocations.length; j++) {\n      var allocation = discountAllocations[j];\n      var newDiscountApplication = Object.assign({}, allocation.discountApplication || {}, allocation.code ? { code: allocation.code } : null, allocation.title ? { title: allocation.title } : null);\n\n      var newAllocation = Object.assign({}, allocation);\n\n      delete newAllocation.code;\n      delete newAllocation.title;\n      newAllocation.discountApplication = newDiscountApplication;\n\n      discountAllocations[j] = newAllocation;\n    }\n  }\n\n  for (var _i = 0; _i < cartOrderLevelDiscountAllocations.length; _i++) {\n    var _allocation = cartOrderLevelDiscountAllocations[_i];\n    var _newDiscountApplication = Object.assign({}, _allocation.discountApplication || {}, _allocation.code ? { code: _allocation.code } : null, _allocation.title ? { title: _allocation.title } : null);\n\n    var _newAllocation = Object.assign({}, _allocation);\n\n    delete _newAllocation.code;\n    delete _newAllocation.title;\n    _newAllocation.discountApplication = _newDiscountApplication;\n\n    cartOrderLevelDiscountAllocations[_i] = _newAllocation;\n  }\n}\n\nfunction groupOrderLevelDiscountAllocationsByDiscountId(cartDiscountAllocations) {\n  return cartDiscountAllocations.reduce(function (acc, discountAllocation) {\n    var id = getDiscountAllocationId(discountAllocation);\n    var key = id.toLowerCase();\n\n    acc.set(key, [].concat(toConsumableArray$1(acc.get(key) || []), [discountAllocation]));\n\n    return acc;\n  }, new Map());\n}\n\nfunction findLineIdForEachOrderLevelDiscountAllocation(cartLines, orderLevelDiscountAllocations) {\n  if (!cartLines.length || !orderLevelDiscountAllocations.length) {\n    return [];\n  }\n\n  if (orderLevelDiscountAllocations.length % cartLines.length !== 0) {\n    throw new Error('Invalid number of order-level discount allocations. For each order-level discount, there must be 1 order-level discount allocation for each line item. \\n      Number of line items: ' + cartLines.length + '. Number of discount allocations: ' + orderLevelDiscountAllocations.length);\n  }\n\n  // May have multiple order-level discount allocations for a given line item\n  var discountIdToDiscountAllocationsMap = groupOrderLevelDiscountAllocationsByDiscountId(orderLevelDiscountAllocations);\n\n  // Sort each array within the Map by discountedAmount so that the lowest discounted amount appears first\n  discountIdToDiscountAllocationsMap.forEach(function (allocations) {\n    allocations.sort(function (first, second) {\n      return first.discountedAmount.amount - second.discountedAmount.amount;\n    });\n  });\n\n  // Sort cart line items so that the item with the lowest cost (after line-level discounts) appears first\n  var sortedCartLineItems = [].concat(toConsumableArray$1(cartLines)).sort(function (first, second) {\n    return first.cost.totalAmount.amount - second.cost.totalAmount.amount;\n  });\n\n  // For each discount, the discount allocation with the smallest amount should be applied\n  // to the item with the lowest cost (after line-level discounts)\n  return Array.from(discountIdToDiscountAllocationsMap.values()).flatMap(function (allocations) {\n    return sortedCartLineItems.map(function (lineItem, index) {\n      return {\n        id: lineItem.id,\n        discountAllocation: {\n          discountedAmount: allocations[index].discountedAmount,\n          discountApplication: allocations[index].discountApplication\n        }\n      };\n    });\n  });\n}\n\nfunction discountMapper(_ref) {\n  var cartLineItems = _ref.cartLineItems,\n      cartDiscountAllocations = _ref.cartDiscountAllocations,\n      cartDiscountCodes = _ref.cartDiscountCodes;\n\n  var hasDiscountAllocations = false;\n\n  for (var i = 0; i < cartLineItems.length; i++) {\n    var discountAllocations = cartLineItems[i].discountAllocations;\n\n\n    if (discountAllocations && discountAllocations.length) {\n      hasDiscountAllocations = true;\n      break;\n    }\n  }\n  if (!hasDiscountAllocations && !cartDiscountAllocations.length) {\n    return {\n      discountApplications: [],\n      cartLinesWithAllDiscountAllocations: cartLineItems\n    };\n  }\n\n  // For each discount allocation, move the code/title field to be inside the discountApplication.\n  // This is because the code/title field is part of the discount allocation for a Cart, but part of\n  // the discount application for a Checkout\n  //\n  // CART EXAMPLE:                                  | CHECKOUT EXAMPLE:\n  // \"cart\": {                                      | \"checkout\": {\n  //   \"discountAllocations\": [                     |   \"discountApplications\": {\n  //     {                                          |     \"nodes\": [\n  //       \"discountedAmount\": {                    |       {\n  //         \"amount\": \"18.0\",                      |         \"targetSelection\": \"ALL\",\n  //         \"currencyCode\": \"CAD\"                  |         \"allocationMethod\": \"EACH\",\n  //       },                                       |         \"targetType\": \"SHIPPING_LINE\",\n  //       \"discountApplication\": {                 |         \"value\": {\n  //         \"targetType\": \"SHIPPING_LINE\",         |           \"percentage\": 100.0\n  //         \"allocationMethod\": \"EACH\",            |         },\n  //         \"targetSelection\": \"ALL\",              |         \"code\": \"FREESHIPPINGALLCOUNTRIES\",\n  //         \"value\": {                             |         \"applicable\": true\n  //           \"percentage\": 100.0                  |       }\n  //         }                                      |     ]\n  //       },                                       |   },\n  //       \"code\": \"FREESHIPPINGALLCOUNTRIES\"       | }\n  //     }                                          |\n  //   ]                                            |\n  //   \"discountCodes\": [                           |\n  //     {                                          |\n  //       \"code\": \"FREESHIPPINGALLCOUNTRIES\",      |\n  //       \"applicable\": true                       |\n  //     }                                          |\n  //   ],                                           |\n  // }                                              |\n  convertToCheckoutDiscountApplicationType(cartLineItems, cartDiscountAllocations);\n\n  // While both the Cart and Checkout API return discount allocations for line items and therefore appear similar, they are\n  // substantially different in how they handle order-level discounts.\n  //\n  // The Checkout API ONLY returns discount allocations as a field on line items (for both product-level and order-level discounts).\n  // Shipping discounts are only returned as part of `checkout.discountApplications` (and do NOT have any discount allocations).\n  //\n  // Unlike the Checkout API, the Cart API returns different types of discount allocations in 2 different places:\n  // 1. Discount allocations as a field on line items (for product-level discounts)\n  // 2. Discount allocations as a field on the Cart itself (for order-level discounts and shipping discounts)\n  //\n  // Therefore, to map the Cart API payload to the equivalent Checkout API payload, we need to go through all of the order-level discount\n  // allocations on the *Cart*, and determine which line item the discount is allocated to. But first, we must go through the cart-level\n  // discount allocations to split them into order-level and shipping-level discount allocations.\n  //     - ONLY the order-level discount allocations go onto line items.\n\n  var _cartDiscountAllocati = cartDiscountAllocations.reduce(function (acc, discountAllocation) {\n    if (discountAllocation.discountApplication.targetType === 'SHIPPING_LINE') {\n      acc[0].push(discountAllocation);\n    } else {\n      acc[1].push(discountAllocation);\n    }\n\n    return acc;\n  }, [[], []]),\n      _cartDiscountAllocati2 = slicedToArray$1(_cartDiscountAllocati, 2),\n      shippingDiscountAllocations = _cartDiscountAllocati2[0],\n      orderLevelDiscountAllocations = _cartDiscountAllocati2[1];\n\n  var cartLinesWithAllDiscountAllocations = mergeCartOrderLevelDiscountAllocationsToCartLineDiscountAllocations({\n    lineItems: cartLineItems,\n    orderLevelDiscountAllocationsForLines: findLineIdForEachOrderLevelDiscountAllocation(cartLineItems, orderLevelDiscountAllocations)\n  });\n\n  // The Cart API and Checkout API have almost identical fields for discount applications, but the `value` field's behaviour (for fixed-amount discounts)\n  // is different.\n  //\n  // With the Checkout API, the `value` field of a discount application is equal to the SUM of all of the `allocatedAmount`s of all of the discount allocations\n  // for that discount.\n  // With the Cart API, the `value` field of a discount application is always equal to the `allocatedAmount` of the discount allocation that the discount\n  // application is inside of. Therefore, to map this to the equivalent Checkout API payload, we need to find all of the discount allocations for the same\n  // discount, and sum up all of the allocated amounts to determine the TOTAL value of the discount.\n  var discountIdToDiscountApplicationMap = generateDiscountApplications(cartLinesWithAllDiscountAllocations, shippingDiscountAllocations, cartDiscountCodes);\n\n  return {\n    discountApplications: Array.from(discountIdToDiscountApplicationMap.values()),\n    cartLinesWithAllDiscountAllocations: cartLinesWithAllDiscountAllocations\n  };\n}\n\nfunction mergeCartOrderLevelDiscountAllocationsToCartLineDiscountAllocations(_ref2) {\n  var lineItems = _ref2.lineItems,\n      orderLevelDiscountAllocationsForLines = _ref2.orderLevelDiscountAllocationsForLines;\n\n  return lineItems.map(function (line) {\n    var lineItemId = line.id;\n    // Could have multiple order-level discount allocations for a given line item\n    var orderLevelDiscountAllocationsForLine = orderLevelDiscountAllocationsForLines.filter(function (_ref3) {\n      var id = _ref3.id;\n      return id === lineItemId;\n    }).map(function (_ref4) {\n      var discountAllocation = _ref4.discountAllocation;\n      return {\n        discountedAmount: discountAllocation.discountedAmount,\n        discountApplication: discountAllocation.discountApplication\n      };\n    });\n\n    var mergedDiscountAllocations = (line.discountAllocations || []).concat(orderLevelDiscountAllocationsForLine);\n    var result = Object.assign({}, line, {\n      discountAllocations: mergedDiscountAllocations\n    });\n\n    return result;\n  });\n}\n\nfunction generateDiscountApplications(cartLinesWithAllDiscountAllocations, shippingDiscountAllocations, discountCodes) {\n  var discountIdToDiscountApplicationMap = new Map();\n\n  if (!cartLinesWithAllDiscountAllocations) {\n    return discountIdToDiscountApplicationMap;\n  }\n\n  cartLinesWithAllDiscountAllocations.forEach(function (_ref5) {\n    var discountAllocations = _ref5.discountAllocations;\n\n    if (!discountAllocations) {\n      return;\n    }\n\n    discountAllocations.forEach(function (discountAllocation) {\n      createCheckoutDiscountApplicationFromCartDiscountAllocation(discountAllocation, discountIdToDiscountApplicationMap, discountCodes);\n    });\n  });\n\n  shippingDiscountAllocations.forEach(function (discountAllocation) {\n    createCheckoutDiscountApplicationFromCartDiscountAllocation(discountAllocation, discountIdToDiscountApplicationMap, discountCodes);\n  });\n\n  return discountIdToDiscountApplicationMap;\n}\n\nfunction createCheckoutDiscountApplicationFromCartDiscountAllocation(discountAllocation, discountIdToDiscountApplicationMap, discountCodes) {\n  var discountApp = discountAllocation.discountApplication;\n  var discountId = getDiscountAllocationId(discountAllocation);\n\n  if (!discountId) {\n    throw new Error('Discount allocation must have either code or title in discountApplication: ' + JSON.stringify(discountAllocation));\n  }\n\n  if (discountIdToDiscountApplicationMap.has(discountId.toLowerCase())) {\n    var existingDiscountApplication = discountIdToDiscountApplicationMap.get(discountId.toLowerCase());\n\n    // if existingDiscountApplication.value is an amount rather than a percentage discount\n    if (existingDiscountApplication.value && 'amount' in existingDiscountApplication.value) {\n      existingDiscountApplication.value = {\n        amount: (Number(existingDiscountApplication.value.amount) + Number(discountAllocation.discountedAmount.amount)).toFixed(2),\n        currencyCode: existingDiscountApplication.value.currencyCode,\n        type: existingDiscountApplication.value.type\n      };\n    }\n  } else {\n    var discountApplication = {\n      __typename: 'DiscountApplication',\n      targetSelection: discountApp.targetSelection,\n      allocationMethod: discountApp.allocationMethod,\n      targetType: discountApp.targetType,\n      value: discountApp.value,\n      hasNextPage: false,\n      hasPreviousPage: false\n    };\n\n    if ('code' in discountAllocation.discountApplication) {\n      var discountCode = discountCodes.find(function (_ref6) {\n        var code = _ref6.code;\n        return code.toLowerCase() === discountId.toLowerCase();\n      });\n\n      if (!discountCode) {\n        throw new Error('Discount code ' + discountId + ' not found in cart discount codes. Discount codes: ' + JSON.stringify(discountCodes));\n      }\n      discountApplication = Object.assign({}, discountApplication, {\n        code: discountAllocation.discountApplication.code,\n        applicable: discountCode.applicable,\n        type: {\n          fieldBaseTypes: {\n            applicable: 'Boolean',\n            code: 'String'\n          },\n          implementsNode: false,\n          kind: 'OBJECT',\n          name: 'DiscountApplication'\n        }\n      });\n    } else {\n      discountApplication = Object.assign({}, discountApplication, {\n        title: discountAllocation.discountApplication.title,\n        type: {\n          fieldBaseTypes: {\n            applicable: 'Boolean',\n            title: 'String'\n          },\n          implementsNode: false,\n          kind: 'OBJECT',\n          name: 'DiscountApplication'\n        }\n      });\n    }\n\n    discountIdToDiscountApplicationMap.set(discountId.toLowerCase(), discountApplication);\n  }\n}\n\nfunction getVariantType() {\n  return {\n    name: 'ProductVariant',\n    kind: 'OBJECT',\n    fieldBaseTypes: {\n      availableForSale: 'Boolean',\n      compareAtPrice: 'MoneyV2',\n      id: 'ID',\n      image: 'Image',\n      price: 'MoneyV2',\n      product: 'Product',\n      selectedOptions: 'SelectedOption',\n      sku: 'String',\n      title: 'String',\n      unitPrice: 'MoneyV2',\n      unitPriceMeasurement: 'UnitPriceMeasurement',\n      weight: 'Float'\n    },\n    implementsNode: true\n  };\n}\n\nfunction getLineItemType() {\n  return {\n    name: 'CheckoutLineItem',\n    kind: 'OBJECT',\n    fieldBaseTypes: {\n      customAttributes: 'Attribute',\n      discountAllocations: 'Object[]',\n      id: 'ID',\n      quantity: 'Int',\n      title: 'String',\n      variant: 'Merchandise'\n    },\n    implementsNode: true\n  };\n}\n\nfunction getDiscountAllocationType() {\n  return {\n    fieldBaseTypes: {\n      allocatedAmount: 'MoneyV2',\n      discountApplication: 'DiscountApplication'\n    },\n    implementsNode: false,\n    kind: 'OBJECT',\n    name: 'DiscountAllocation'\n  };\n}\n\nfunction mapVariant(merchandise) {\n  // Copy all properties except 'product'\n  var result = {};\n\n  for (var key in merchandise) {\n    if (merchandise.hasOwnProperty(key) && key !== 'product') {\n      result[key] = merchandise[key];\n    }\n  }\n\n  // The actual Cart merchandise and Checkout variant objects map cleanly to each other,\n  // but the SDK wasn't fetching the title from the product object, so we need to remove it\n  var productWithoutTitle = {};\n\n  if (merchandise.product) {\n    for (var _key in merchandise.product) {\n      if (merchandise.product.hasOwnProperty(_key) && _key !== 'title') {\n        productWithoutTitle[_key] = merchandise.product[_key];\n      }\n    }\n  }\n\n  // Add additional properties\n  result.priceV2 = merchandise.price;\n  result.compareAtPriceV2 = merchandise.compareAtPrice;\n  result.product = productWithoutTitle;\n  result.type = getVariantType();\n\n  return result;\n}\n\nfunction mapDiscountAllocations(discountAllocations, discountApplications) {\n  if (!discountAllocations) {\n    return [];\n  }\n\n  var result = [];\n\n  for (var i = 0; i < discountAllocations.length; i++) {\n    var allocation = discountAllocations[i];\n    var application = null;\n\n    for (var j = 0; j < discountApplications.length; j++) {\n      if (getDiscountAllocationId(allocation) === getDiscountApplicationId(discountApplications[j])) {\n        application = discountApplications[j];\n        break;\n      }\n    }\n\n    if (!application) {\n      throw new Error('Missing discount application for allocation: ' + JSON.stringify(allocation));\n    }\n\n    var discountApp = Object.assign({}, application);\n\n    result.push({\n      allocatedAmount: allocation.discountedAmount,\n      discountApplication: discountApp,\n      type: getDiscountAllocationType()\n    });\n  }\n\n  return result;\n}\n\nfunction mapLineItems(lines, discountApplications) {\n  var skipDiscounts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  if (!lines || !Array.isArray(lines)) {\n    return [];\n  }\n\n  var result = [];\n\n  for (var i = 0; i < lines.length; i++) {\n    var line = lines[i];\n\n    if (!line || !line.merchandise || !line.merchandise.product) {\n      continue;\n    }\n\n    var variant = mapVariant(line.merchandise);\n\n    var discountAllocations = [];\n\n    if (!skipDiscounts) {\n      try {\n        discountAllocations = mapDiscountAllocations(line.discountAllocations || [], discountApplications);\n      } catch (error) {\n        // eslint-disable-next-line no-console\n        console.error('Error mapping discount allocations:', error.message);\n        discountAllocations = [];\n      }\n    }\n\n    result.push({\n      customAttributes: line.attributes,\n      discountAllocations: discountAllocations,\n      id: line.id,\n      quantity: line.quantity,\n      title: line.merchandise.product.title,\n      variant: variant,\n      hasNextPage: false,\n      hasPreviousPage: false,\n      variableValues: line.variableValues,\n      type: getLineItemType()\n    });\n  }\n\n  return result;\n}\n\nfunction mapDiscountsAndLines(cart) {\n  if (!cart) {\n    return { discountApplications: [], cartLinesWithDiscounts: [] };\n  }\n\n  var discountMappingResult = void 0;\n  var discountMappingFailed = false;\n\n  try {\n    discountMappingResult = discountMapper({\n      cartLineItems: cart.lines || [],\n      cartDiscountAllocations: cart.discountAllocations || [],\n      cartDiscountCodes: cart.discountCodes || []\n    });\n  } catch (error) {\n    // eslint-disable-next-line no-console\n    console.error('Error mapping discounts:', error.message);\n    discountMappingFailed = true;\n  }\n\n  var mappedLines = void 0;\n\n  if (discountMappingFailed) {\n    // When discount mapping fails, still map the lines but without any discount allocations\n    // eslint-disable-next-line newline-after-var\n    var linesWithClearedDiscounts = (cart.lines || []).map(function (line) {\n      var lineCopy = Object.assign({}, line);\n\n      lineCopy.discountAllocations = [];\n\n      return lineCopy;\n    });\n    mappedLines = mapLineItems(linesWithClearedDiscounts, [], true);\n  } else {\n    // Normal path when discount mapping succeeds\n    mappedLines = mapLineItems(discountMappingResult.cartLinesWithAllDiscountAllocations || [], discountMappingResult.discountApplications || []);\n  }\n\n  return {\n    discountApplications: discountMappingFailed ? [] : discountMappingResult && discountMappingResult.discountApplications || [],\n    cartLinesWithDiscounts: mappedLines\n  };\n}\n\n// NOTE: fields such as availableShippingRates are not included because they are not queried by the JS Buy SDK\nvar UNSUPPORTED_FIELDS = {\n  completedAt: null,\n  order: null,\n  orderStatusUrl: null,\n  ready: false,\n  requiresShipping: true,\n  shippingLine: null,\n  taxExempt: false,\n  taxesIncluded: false\n};\n\nfunction mapCartPayload(cart) {\n  if (!cart) {\n    return null;\n  }\n\n  var result = mapDiscountsAndLines(cart);\n  var discountApplications = result.discountApplications;\n  var cartLinesWithDiscounts = result.cartLinesWithDiscounts;\n\n  var buyerIdentity = {\n    countryCode: cart.buyerIdentity && cart.buyerIdentity.countryCode\n  };\n\n  var email = null;\n\n  if (cart.buyerIdentity && cart.buyerIdentity.email) {\n    email = cart.buyerIdentity.email;\n  }\n\n  var shippingAddress = null;\n\n  if (cart.buyerIdentity && cart.buyerIdentity.deliveryAddressPreferences && cart.buyerIdentity.deliveryAddressPreferences.length) {\n    shippingAddress = cart.buyerIdentity.deliveryAddressPreferences[0];\n  }\n\n  var currencyCode = null;\n  var totalAmount = null;\n  var totalTaxAmount = null;\n  var totalDutyAmount = null;\n  var checkoutChargeAmount = null;\n\n  if (cart.cost) {\n    if (cart.cost.totalAmount) {\n      currencyCode = cart.cost.totalAmount.currencyCode;\n      totalAmount = cart.cost.totalAmount;\n    }\n    if (cart.cost.totalTaxAmount) {\n      totalTaxAmount = cart.cost.totalTaxAmount;\n    }\n    if (cart.cost.totalDutyAmount) {\n      totalDutyAmount = cart.cost.totalDutyAmount;\n    }\n    if (cart.cost.checkoutChargeAmount) {\n      checkoutChargeAmount = cart.cost.checkoutChargeAmount;\n    }\n  }\n\n  var appliedGiftCards = cart.appliedGiftCards || [];\n  var totalPrice = null;\n\n  // This field will be defined in the API, but we're making it \"optional\" here so that our\n  // unit tests for other fields work while only passing in the relevant fields\n  if (totalAmount) {\n    totalPrice = calculateTotalPrice(cart, totalAmount);\n  }\n\n  var subtotalPrice = null;\n\n  // This field will be defined in the API, but we're making it \"optional\" here so that our\n  // unit tests for other fields work while only passing in the relevant fields\n  if (totalPrice) {\n    subtotalPrice = calculateSubtotalPrice(totalPrice, totalDutyAmount, totalTaxAmount);\n  }\n\n  var webUrl = cart.checkoutUrl;\n\n  if (webUrl) {\n    try {\n      var url = new URL(webUrl);\n\n      if (!url.searchParams.has('_fd') || url.searchParams.get('_fd') !== '0') {\n        url.searchParams.set('_fd', '0');\n        webUrl = url.toString();\n      }\n    } catch (error) {\n      // If URL parsing fails, return the original URL unchanged\n      // rather than risk breaking the checkout flow\n    }\n  }\n\n  var checkoutPayload = Object.assign({\n    appliedGiftCards: appliedGiftCards,\n    buyerIdentity: buyerIdentity,\n    createdAt: cart.createdAt,\n    currencyCode: currencyCode,\n    customAttributes: cart.attributes,\n    discountApplications: discountApplications,\n    email: email,\n    id: cart.id,\n    lineItems: cartLinesWithDiscounts,\n    lineItemsSubtotalPrice: checkoutChargeAmount,\n    note: cart.note,\n    paymentDue: totalAmount,\n    paymentDueV2: totalAmount,\n    shippingAddress: shippingAddress,\n    subtotalPrice: subtotalPrice,\n    subtotalPriceV2: subtotalPrice,\n    totalPrice: totalPrice,\n    totalPriceV2: totalPrice,\n    totalTax: totalTaxAmount || getDefaultMoneyObject(currencyCode, totalAmount),\n    totalTaxV2: totalTaxAmount || getDefaultMoneyObject(currencyCode, totalAmount),\n    updatedAt: cart.updatedAt,\n    webUrl: webUrl\n  }, UNSUPPORTED_FIELDS);\n\n  normalizeCartMoneyFieldDecimalPlaces(checkoutPayload);\n\n  return checkoutPayload;\n}\n\n/**\n *\n * @description Normalize all currency fields in the checkout payload to contain\n * the same number of decimal places that would be returned by the storefront API.\n *\n * In the storefront API, currency amounts are returned as a string that contains\n * 1 decimal place (if the 2nd decimal place is 0) or else 2 decimal places.\n *\n * In our mapping functions, we are typically converting to strings with 2 decimal\n * places. In case any clients of the JS Buy SDK are relying only a single decimal\n * place being returned in some cases, we want to normalize the decimal places.\n */\nfunction normalizeCartMoneyFieldDecimalPlaces(checkout) {\n  // The fields that we have mapped the currency for (that we therefore need to normalize)\n  // are: discountApplication amounts, subtotalPrice, and totalPrice.\n\n  if (checkout.discountApplications) {\n    for (var i = 0; i < checkout.discountApplications.length; i++) {\n      if (typeof checkout.discountApplications[i].value.percentage !== 'undefined') {\n        continue;\n      }\n\n      var discountApplicationAmount = checkout.discountApplications[i].value.amount.toString();\n\n      if (!shouldReturnWithOneDecimalPlace(discountApplicationAmount)) {\n        continue;\n      }\n\n      checkout.discountApplications[i].value.amount = convertToOneDecimalPlace(discountApplicationAmount);\n    }\n  }\n\n  if (checkout.lineItems) {\n    for (var _i = 0; _i < checkout.lineItems.length; _i++) {\n      for (var j = 0; j < checkout.lineItems[_i].discountAllocations.length; j++) {\n        var discountApplication = checkout.lineItems[_i].discountAllocations[j].discountApplication;\n\n        if (typeof discountApplication.value.percentage !== 'undefined') {\n          continue;\n        }\n\n        var _discountApplicationAmount = discountApplication.value.amount.toString();\n\n        if (!shouldReturnWithOneDecimalPlace(_discountApplicationAmount)) {\n          continue;\n        }\n\n        discountApplication.value.amount = convertToOneDecimalPlace(_discountApplicationAmount);\n      }\n    }\n  }\n\n  if (checkout.subtotalPrice) {\n    if (shouldReturnWithOneDecimalPlace(checkout.subtotalPrice.amount)) {\n      checkout.subtotalPrice.amount = convertToOneDecimalPlace(checkout.subtotalPrice.amount);\n      checkout.subtotalPriceV2.amount = convertToOneDecimalPlace(checkout.subtotalPriceV2.amount);\n    }\n  }\n\n  if (checkout.totalPrice) {\n    if (shouldReturnWithOneDecimalPlace(checkout.totalPrice.amount)) {\n      checkout.totalPrice.amount = convertToOneDecimalPlace(checkout.totalPrice.amount);\n      checkout.totalPriceV2.amount = convertToOneDecimalPlace(checkout.totalPriceV2.amount);\n    }\n  }\n}\n\n/**\n * @description Whether the SF API would return this amount with 1 decimal place\n * (as opposed to 2 decimal places). See normalizeCartMoneyFieldDecimalPlaces\n * for more information.\n * @param {string} currency field to check\n * @returns {boolean} whether the SF API would return this amount with 1 decimal place\n */\nfunction shouldReturnWithOneDecimalPlace(amount) {\n  if (!amount || !amount.toString().includes('.')) {\n    return false;\n  }\n\n  var currencyDecimals = amount.toString().split('.')[1];\n\n  if (currencyDecimals.length === 2 && currencyDecimals[1] === '0') {\n    return true;\n  }\n\n  return false;\n}\n\nfunction convertToOneDecimalPlace(stringAmount) {\n  return parseFloat(stringAmount).toFixed(1);\n}\n\nfunction getDefaultMoneyObject(currencyCode, totalAmount) {\n  return {\n    amount: '0.0',\n    currencyCode: currencyCode,\n    type: totalAmount && totalAmount.type\n  };\n}\n\nfunction calculateTotalPrice(cart, totalAmount) {\n  if (!cart.appliedGiftCards || !cart.appliedGiftCards.length) {\n    return totalAmount;\n  }\n\n  // Assuming cart's totalAmount will have the same currency code as gift cards' presentmentAmountUsed\n  var giftCardTotal = 0;\n\n  for (var i = 0; i < cart.appliedGiftCards.length; i++) {\n    giftCardTotal += parseFloat(cart.appliedGiftCards[i].presentmentAmountUsed.amount);\n  }\n\n  return {\n    amount: (parseFloat(totalAmount.amount) + giftCardTotal).toFixed(2),\n    currencyCode: totalAmount.currencyCode,\n    type: totalAmount.type\n  };\n}\n\nfunction calculateSubtotalPrice(totalPrice, totalDutyAmount, totalTaxAmount) {\n  var dutyAmount = totalDutyAmount ? totalDutyAmount.amount : 0;\n  var taxAmount = totalTaxAmount ? totalTaxAmount.amount : 0;\n\n  return {\n    amount: (parseFloat(totalPrice.amount) - parseFloat(dutyAmount) - parseFloat(taxAmount)).toFixed(2),\n    currencyCode: totalPrice.currencyCode,\n    type: totalPrice.type\n  };\n}\n\nvar CartErrorCodeToCheckoutErrorCode = {\n  ADDRESS_FIELD_CONTAINS_EMOJIS: 'NOT_SUPPORTED',\n  ADDRESS_FIELD_CONTAINS_HTML_TAGS: 'NOT_SUPPORTED',\n  ADDRESS_FIELD_CONTAINS_URL: 'NOT_SUPPORTED',\n  ADDRESS_FIELD_DOES_NOT_MATCH_EXPECTED_PATTERN: 'NOT_SUPPORTED',\n  ADDRESS_FIELD_IS_REQUIRED: 'PRESENT',\n  ADDRESS_FIELD_IS_TOO_LONG: 'TOO_LONG',\n  INVALID: 'INVALID',\n  INVALID_COMPANY_LOCATION: 'INVALID',\n  INVALID_DELIVERY_GROUP: 'INVALID',\n  INVALID_DELIVERY_OPTION: 'INVALID',\n  INVALID_INCREMENT: 'INVALID',\n  INVALID_MERCHANDISE_LINE: 'LINE_ITEM_NOT_FOUND',\n  INVALID_METAFIELDS: 'INVALID',\n  INVALID_PAYMENT: 'INVALID',\n  INVALID_PAYMENT_EMPTY_CART: 'INVALID',\n  INVALID_ZIP_CODE_FOR_COUNTRY: 'INVALID_FOR_COUNTRY',\n  INVALID_ZIP_CODE_FOR_PROVINCE: 'INVALID_FOR_COUNTRY_AND_PROVINCE',\n  LESS_THAN: 'LESS_THAN',\n  MAXIMUM_EXCEEDED: 'NOT_ENOUGH_IN_STOCK',\n  MINIMUM_NOT_MET: 'GREATER_THAN_OR_EQUAL_TO',\n  MISSING_CUSTOMER_ACCESS_TOKEN: 'PRESENT',\n  MISSING_DISCOUNT_CODE: 'PRESENT',\n  MISSING_NOTE: 'PRESENT',\n  NOTE_TOO_LONG: 'TOO_LONG',\n  PAYMENT_METHOD_NOT_SUPPORTED: 'NOT_SUPPORTED',\n  PROVINCE_NOT_FOUND: 'INVALID_PROVINCE_IN_COUNTRY',\n  UNSPECIFIED_ADDRESS_ERROR: 'INVALID',\n  VALIDATION_CUSTOM: 'INVALID',\n  ZIP_CODE_NOT_SUPPORTED: 'NOT_SUPPORTED'\n};\n\nvar CartWarningCodeToCheckoutErrorCode = {\n  MERCHANDISE_NOT_ENOUGH_STOCK: 'NOT_ENOUGH_IN_STOCK',\n  MERCHANDISE_OUT_OF_STOCK: 'NOT_ENOUGH_IN_STOCK',\n  PAYMENTS_GIFT_CARDS_UNAVAILABLE: 'NOT_SUPPORTED'\n};\n\nfunction userErrorsMapper(userErrors) {\n  return userErrors.map(function (_ref) {\n    var code = _ref.code,\n        field = _ref.field,\n        message = _ref.message;\n    return {\n      // eslint-disable-next-line no-undefined\n      code: code ? CartErrorCodeToCheckoutErrorCode[code] : undefined,\n      field: field,\n      message: message\n    };\n  });\n}\n\nfunction warningsMapper(warnings) {\n  return warnings.map(function (_ref2) {\n    var code = _ref2.code,\n        message = _ref2.message;\n    return {\n      // eslint-disable-next-line no-undefined\n      code: code ? CartWarningCodeToCheckoutErrorCode[code] : undefined,\n      message: message\n    };\n  });\n}\n\nfunction checkoutUserErrorsMapper(userErrors, warnings) {\n  var hasUserErrors = userErrors && userErrors.length;\n  var hasWarnings = warnings && warnings.length;\n\n  if (!hasUserErrors && !hasWarnings) {\n    return [];\n  }\n\n  var checkoutUserErrors = hasUserErrors ? userErrorsMapper(userErrors) : [];\n  var checkoutWarnings = hasWarnings ? warningsMapper(warnings) : [];\n\n  return [].concat(toConsumableArray$1(checkoutUserErrors), toConsumableArray$1(checkoutWarnings));\n}\n\nfunction handleCartMutation(mutationRootKey, client) {\n  return function (_ref) {\n    var _ref$data = _ref.data,\n        data = _ref$data === undefined ? {} : _ref$data,\n        errors = _ref.errors,\n        _ref$model = _ref.model,\n        model = _ref$model === undefined ? {} : _ref$model;\n\n    var rootData = data[mutationRootKey];\n    var rootModel = model[mutationRootKey];\n\n    if (rootData && rootData.cart) {\n      return client.fetchAllPages(rootModel.cart.lines, { pageSize: 250 }).then(function (lines) {\n        rootModel.cart.attrs.lines = lines;\n        var checkoutUserErrors = checkoutUserErrorsMapper(rootData.userErrors, rootData.warnings);\n\n        try {\n          return Object.assign({}, mapCartPayload(rootModel.cart, mutationRootKey), { userErrors: checkoutUserErrors, errors: rootModel.cart.errors });\n        } catch (error) {\n          return Promise.reject(error);\n        }\n      });\n    }\n\n    if (errors && errors.length) {\n      return Promise.reject(new Error(JSON.stringify(errors)));\n    }\n\n    if (rootData && (rootData.userErrors.length || rootData.warnings.length)) {\n      var checkoutUserErrors = checkoutUserErrorsMapper(rootData.userErrors, rootData.warnings);\n\n      return Promise.reject(checkoutUserErrors);\n    }\n\n    return Promise.reject(new Error('The ' + mutationRootKey + ' mutation failed due to an unknown error.'));\n  };\n}\n\nfunction query$12(client) {\n  var document = client.document();\n  var spreads = {};\n  var variables = {};\n  variables.Cart = {};\n  variables.Cart.id = client.variable(\"id\", \"ID!\");\n  spreads.CartLineFragment = document.defineFragment(\"CartLineFragment\", \"BaseCartLine\", function (root) {\n    root.add(\"id\");\n    root.add(\"merchandise\", function (merchandise) {\n      merchandise.addInlineFragmentOn(\"ProductVariant\", function (ProductVariant) {\n        ProductVariant.add(\"id\");\n        ProductVariant.add(\"title\");\n        ProductVariant.add(\"image\", function (image) {\n          image.add(\"id\");\n          image.add(\"url\", {\n            alias: \"src\"\n          });\n          image.add(\"altText\");\n          image.add(\"width\");\n          image.add(\"height\");\n        });\n        ProductVariant.add(\"product\", function (product) {\n          product.add(\"id\");\n          product.add(\"handle\");\n          product.add(\"title\");\n        });\n        ProductVariant.add(\"weight\");\n        ProductVariant.add(\"availableForSale\", {\n          alias: \"available\"\n        });\n        ProductVariant.add(\"sku\");\n        ProductVariant.add(\"selectedOptions\", function (selectedOptions) {\n          selectedOptions.add(\"name\");\n          selectedOptions.add(\"value\");\n        });\n        ProductVariant.add(\"compareAtPrice\", function (compareAtPrice) {\n          compareAtPrice.add(\"amount\");\n          compareAtPrice.add(\"currencyCode\");\n        });\n        ProductVariant.add(\"price\", function (price) {\n          price.add(\"amount\");\n          price.add(\"currencyCode\");\n        });\n        ProductVariant.add(\"unitPrice\", function (unitPrice) {\n          unitPrice.add(\"amount\");\n          unitPrice.add(\"currencyCode\");\n        });\n        ProductVariant.add(\"unitPriceMeasurement\", function (unitPriceMeasurement) {\n          unitPriceMeasurement.add(\"measuredType\");\n          unitPriceMeasurement.add(\"quantityUnit\");\n          unitPriceMeasurement.add(\"quantityValue\");\n          unitPriceMeasurement.add(\"referenceUnit\");\n          unitPriceMeasurement.add(\"referenceValue\");\n        });\n      });\n    });\n    root.add(\"quantity\");\n    root.add(\"attributes\", function (attributes) {\n      attributes.add(\"key\");\n      attributes.add(\"value\");\n    });\n    root.add(\"cost\", function (cost) {\n      cost.add(\"totalAmount\", function (totalAmount) {\n        totalAmount.add(\"amount\");\n        totalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"subtotalAmount\", function (subtotalAmount) {\n        subtotalAmount.add(\"amount\");\n        subtotalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"amountPerQuantity\", function (amountPerQuantity) {\n        amountPerQuantity.add(\"amount\");\n        amountPerQuantity.add(\"currencyCode\");\n      });\n      cost.add(\"compareAtAmountPerQuantity\", function (compareAtAmountPerQuantity) {\n        compareAtAmountPerQuantity.add(\"amount\");\n        compareAtAmountPerQuantity.add(\"currencyCode\");\n      });\n    });\n    root.add(\"discountAllocations\", function (discountAllocations) {\n      discountAllocations.add(\"discountedAmount\", function (discountedAmount) {\n        discountedAmount.add(\"amount\");\n        discountedAmount.add(\"currencyCode\");\n      });\n      discountAllocations.add(\"discountApplication\", function (discountApplication) {\n        discountApplication.add(\"targetType\");\n        discountApplication.add(\"allocationMethod\");\n        discountApplication.add(\"targetSelection\");\n        discountApplication.add(\"value\", function (value) {\n          value.addInlineFragmentOn(\"PricingPercentageValue\", function (PricingPercentageValue) {\n            PricingPercentageValue.add(\"percentage\");\n          });\n          value.addInlineFragmentOn(\"MoneyV2\", function (MoneyV2) {\n            MoneyV2.add(\"amount\");\n            MoneyV2.add(\"currencyCode\");\n          });\n        });\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCodeDiscountAllocation\", function (CartCodeDiscountAllocation) {\n        CartCodeDiscountAllocation.add(\"code\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartAutomaticDiscountAllocation\", function (CartAutomaticDiscountAllocation) {\n        CartAutomaticDiscountAllocation.add(\"title\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCustomDiscountAllocation\", function (CartCustomDiscountAllocation) {\n        CartCustomDiscountAllocation.add(\"title\");\n      });\n    });\n  });\n  spreads.AppliedGiftCardFragment = document.defineFragment(\"AppliedGiftCardFragment\", \"AppliedGiftCard\", function (root) {\n    root.add(\"amountUsed\", function (amountUsed) {\n      amountUsed.add(\"amount\");\n      amountUsed.add(\"currencyCode\");\n    });\n    root.add(\"amountUsed\", {\n      alias: \"amountUsedV2\"\n    }, function (amountUsed) {\n      amountUsed.add(\"amount\");\n      amountUsed.add(\"currencyCode\");\n    });\n    root.add(\"balance\", function (balance) {\n      balance.add(\"amount\");\n      balance.add(\"currencyCode\");\n    });\n    root.add(\"balance\", {\n      alias: \"balanceV2\"\n    }, function (balance) {\n      balance.add(\"amount\");\n      balance.add(\"currencyCode\");\n    });\n    root.add(\"presentmentAmountUsed\", function (presentmentAmountUsed) {\n      presentmentAmountUsed.add(\"amount\");\n      presentmentAmountUsed.add(\"currencyCode\");\n    });\n    root.add(\"id\");\n    root.add(\"lastCharacters\");\n  });\n  spreads.CartFragment = document.defineFragment(\"CartFragment\", \"Cart\", function (root) {\n    root.add(\"id\");\n    root.add(\"createdAt\");\n    root.add(\"updatedAt\");\n    root.add(\"lines\", {\n      args: {\n        first: 250\n      }\n    }, function (lines) {\n      lines.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      lines.add(\"edges\", function (edges) {\n        edges.add(\"cursor\");\n        edges.add(\"node\", function (node) {\n          node.addFragment(spreads.CartLineFragment);\n        });\n      });\n    });\n    root.add(\"attributes\", function (attributes) {\n      attributes.add(\"key\");\n      attributes.add(\"value\");\n    });\n    root.add(\"cost\", function (cost) {\n      cost.add(\"checkoutChargeAmount\", function (checkoutChargeAmount) {\n        checkoutChargeAmount.add(\"amount\");\n        checkoutChargeAmount.add(\"currencyCode\");\n      });\n      cost.add(\"totalAmount\", function (totalAmount) {\n        totalAmount.add(\"amount\");\n        totalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"subtotalAmount\", function (subtotalAmount) {\n        subtotalAmount.add(\"amount\");\n        subtotalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"totalTaxAmount\", function (totalTaxAmount) {\n        totalTaxAmount.add(\"amount\");\n        totalTaxAmount.add(\"currencyCode\");\n      });\n      cost.add(\"totalDutyAmount\", function (totalDutyAmount) {\n        totalDutyAmount.add(\"amount\");\n        totalDutyAmount.add(\"currencyCode\");\n      });\n    });\n    root.add(\"checkoutUrl\");\n    root.add(\"discountCodes\", function (discountCodes) {\n      discountCodes.add(\"applicable\");\n      discountCodes.add(\"code\");\n    });\n    root.add(\"discountAllocations\", function (discountAllocations) {\n      discountAllocations.add(\"discountedAmount\", function (discountedAmount) {\n        discountedAmount.add(\"amount\");\n        discountedAmount.add(\"currencyCode\");\n      });\n      discountAllocations.add(\"discountApplication\", function (discountApplication) {\n        discountApplication.add(\"targetType\");\n        discountApplication.add(\"allocationMethod\");\n        discountApplication.add(\"targetSelection\");\n        discountApplication.add(\"value\", function (value) {\n          value.addInlineFragmentOn(\"PricingPercentageValue\", function (PricingPercentageValue) {\n            PricingPercentageValue.add(\"percentage\");\n          });\n          value.addInlineFragmentOn(\"MoneyV2\", function (MoneyV2) {\n            MoneyV2.add(\"amount\");\n            MoneyV2.add(\"currencyCode\");\n          });\n        });\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCodeDiscountAllocation\", function (CartCodeDiscountAllocation) {\n        CartCodeDiscountAllocation.add(\"code\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartAutomaticDiscountAllocation\", function (CartAutomaticDiscountAllocation) {\n        CartAutomaticDiscountAllocation.add(\"title\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCustomDiscountAllocation\", function (CartCustomDiscountAllocation) {\n        CartCustomDiscountAllocation.add(\"title\");\n      });\n    });\n    root.add(\"buyerIdentity\", function (buyerIdentity) {\n      buyerIdentity.add(\"countryCode\");\n      buyerIdentity.add(\"preferences\", function (preferences) {\n        preferences.add(\"delivery\", function (delivery) {\n          delivery.add(\"coordinates\", function (coordinates) {\n            coordinates.add(\"latitude\");\n            coordinates.add(\"longitude\");\n            coordinates.add(\"countryCode\");\n          });\n          delivery.add(\"deliveryMethod\");\n          delivery.add(\"pickupHandle\");\n        });\n        preferences.add(\"wallet\");\n      });\n      buyerIdentity.add(\"email\");\n      buyerIdentity.add(\"phone\");\n      buyerIdentity.add(\"customer\", function (customer) {\n        customer.add(\"email\");\n      });\n      buyerIdentity.add(\"deliveryAddressPreferences\", function (deliveryAddressPreferences) {\n        deliveryAddressPreferences.addInlineFragmentOn(\"MailingAddress\", function (MailingAddress) {\n          MailingAddress.add(\"address1\");\n          MailingAddress.add(\"address2\");\n          MailingAddress.add(\"city\");\n          MailingAddress.add(\"company\");\n          MailingAddress.add(\"country\");\n          MailingAddress.add(\"countryCodeV2\");\n          MailingAddress.add(\"firstName\");\n          MailingAddress.add(\"formatted\");\n          MailingAddress.add(\"formattedArea\");\n          MailingAddress.add(\"lastName\");\n          MailingAddress.add(\"latitude\");\n          MailingAddress.add(\"longitude\");\n          MailingAddress.add(\"name\");\n          MailingAddress.add(\"phone\");\n          MailingAddress.add(\"province\");\n          MailingAddress.add(\"provinceCode\");\n          MailingAddress.add(\"zip\");\n        });\n      });\n    });\n    root.add(\"deliveryGroups\", {\n      args: {\n        first: 10\n      }\n    }, function (deliveryGroups) {\n      deliveryGroups.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      deliveryGroups.add(\"edges\", function (edges) {\n        edges.add(\"node\", function (node) {\n          node.add(\"id\");\n          node.add(\"deliveryAddress\", function (deliveryAddress) {\n            deliveryAddress.add(\"address2\");\n            deliveryAddress.add(\"address1\");\n            deliveryAddress.add(\"city\");\n            deliveryAddress.add(\"company\");\n            deliveryAddress.add(\"country\");\n            deliveryAddress.add(\"countryCodeV2\");\n            deliveryAddress.add(\"firstName\");\n            deliveryAddress.add(\"formatted\");\n            deliveryAddress.add(\"formattedArea\");\n            deliveryAddress.add(\"lastName\");\n            deliveryAddress.add(\"latitude\");\n            deliveryAddress.add(\"longitude\");\n            deliveryAddress.add(\"name\");\n            deliveryAddress.add(\"phone\");\n            deliveryAddress.add(\"province\");\n            deliveryAddress.add(\"provinceCode\");\n          });\n          node.add(\"deliveryOptions\", function (deliveryOptions) {\n            deliveryOptions.add(\"code\");\n            deliveryOptions.add(\"deliveryMethodType\");\n            deliveryOptions.add(\"description\");\n            deliveryOptions.add(\"estimatedCost\", function (estimatedCost) {\n              estimatedCost.add(\"amount\");\n              estimatedCost.add(\"currencyCode\");\n            });\n            deliveryOptions.add(\"handle\");\n            deliveryOptions.add(\"title\");\n          });\n          node.add(\"selectedDeliveryOption\", function (selectedDeliveryOption) {\n            selectedDeliveryOption.add(\"code\");\n            selectedDeliveryOption.add(\"deliveryMethodType\");\n            selectedDeliveryOption.add(\"description\");\n            selectedDeliveryOption.add(\"estimatedCost\", function (estimatedCost) {\n              estimatedCost.add(\"amount\");\n              estimatedCost.add(\"currencyCode\");\n            });\n            selectedDeliveryOption.add(\"handle\");\n            selectedDeliveryOption.add(\"title\");\n          });\n          node.add(\"cartLines\", {\n            args: {\n              first: 250\n            }\n          }, function (cartLines) {\n            cartLines.add(\"pageInfo\", function (pageInfo) {\n              pageInfo.add(\"hasNextPage\");\n              pageInfo.add(\"hasPreviousPage\");\n            });\n            cartLines.add(\"edges\", function (edges) {\n              edges.add(\"cursor\");\n              edges.add(\"node\", function (node) {\n                node.add(\"id\");\n              });\n            });\n          });\n        });\n      });\n    });\n    root.add(\"appliedGiftCards\", function (appliedGiftCards) {\n      appliedGiftCards.addFragment(spreads.AppliedGiftCardFragment);\n    });\n    root.add(\"note\");\n  });\n  document.addQuery(\"Cart\", [variables.Cart.id], function (root) {\n    root.add(\"cart\", {\n      args: {\n        id: variables.Cart.id\n      }\n    }, function (cart) {\n      cart.addFragment(spreads.CartFragment);\n    });\n  });\n  return document;\n}\n\nfunction query$13(client) {\n  var document = client.document();\n  var spreads = {};\n  var variables = {};\n  variables.CartCreate = {};\n  variables.CartCreate.input = client.variable(\"input\", \"CartInput!\");\n  spreads.CartLineFragment = document.defineFragment(\"CartLineFragment\", \"BaseCartLine\", function (root) {\n    root.add(\"id\");\n    root.add(\"merchandise\", function (merchandise) {\n      merchandise.addInlineFragmentOn(\"ProductVariant\", function (ProductVariant) {\n        ProductVariant.add(\"id\");\n        ProductVariant.add(\"title\");\n        ProductVariant.add(\"image\", function (image) {\n          image.add(\"id\");\n          image.add(\"url\", {\n            alias: \"src\"\n          });\n          image.add(\"altText\");\n          image.add(\"width\");\n          image.add(\"height\");\n        });\n        ProductVariant.add(\"product\", function (product) {\n          product.add(\"id\");\n          product.add(\"handle\");\n          product.add(\"title\");\n        });\n        ProductVariant.add(\"weight\");\n        ProductVariant.add(\"availableForSale\", {\n          alias: \"available\"\n        });\n        ProductVariant.add(\"sku\");\n        ProductVariant.add(\"selectedOptions\", function (selectedOptions) {\n          selectedOptions.add(\"name\");\n          selectedOptions.add(\"value\");\n        });\n        ProductVariant.add(\"compareAtPrice\", function (compareAtPrice) {\n          compareAtPrice.add(\"amount\");\n          compareAtPrice.add(\"currencyCode\");\n        });\n        ProductVariant.add(\"price\", function (price) {\n          price.add(\"amount\");\n          price.add(\"currencyCode\");\n        });\n        ProductVariant.add(\"unitPrice\", function (unitPrice) {\n          unitPrice.add(\"amount\");\n          unitPrice.add(\"currencyCode\");\n        });\n        ProductVariant.add(\"unitPriceMeasurement\", function (unitPriceMeasurement) {\n          unitPriceMeasurement.add(\"measuredType\");\n          unitPriceMeasurement.add(\"quantityUnit\");\n          unitPriceMeasurement.add(\"quantityValue\");\n          unitPriceMeasurement.add(\"referenceUnit\");\n          unitPriceMeasurement.add(\"referenceValue\");\n        });\n      });\n    });\n    root.add(\"quantity\");\n    root.add(\"attributes\", function (attributes) {\n      attributes.add(\"key\");\n      attributes.add(\"value\");\n    });\n    root.add(\"cost\", function (cost) {\n      cost.add(\"totalAmount\", function (totalAmount) {\n        totalAmount.add(\"amount\");\n        totalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"subtotalAmount\", function (subtotalAmount) {\n        subtotalAmount.add(\"amount\");\n        subtotalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"amountPerQuantity\", function (amountPerQuantity) {\n        amountPerQuantity.add(\"amount\");\n        amountPerQuantity.add(\"currencyCode\");\n      });\n      cost.add(\"compareAtAmountPerQuantity\", function (compareAtAmountPerQuantity) {\n        compareAtAmountPerQuantity.add(\"amount\");\n        compareAtAmountPerQuantity.add(\"currencyCode\");\n      });\n    });\n    root.add(\"discountAllocations\", function (discountAllocations) {\n      discountAllocations.add(\"discountedAmount\", function (discountedAmount) {\n        discountedAmount.add(\"amount\");\n        discountedAmount.add(\"currencyCode\");\n      });\n      discountAllocations.add(\"discountApplication\", function (discountApplication) {\n        discountApplication.add(\"targetType\");\n        discountApplication.add(\"allocationMethod\");\n        discountApplication.add(\"targetSelection\");\n        discountApplication.add(\"value\", function (value) {\n          value.addInlineFragmentOn(\"PricingPercentageValue\", function (PricingPercentageValue) {\n            PricingPercentageValue.add(\"percentage\");\n          });\n          value.addInlineFragmentOn(\"MoneyV2\", function (MoneyV2) {\n            MoneyV2.add(\"amount\");\n            MoneyV2.add(\"currencyCode\");\n          });\n        });\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCodeDiscountAllocation\", function (CartCodeDiscountAllocation) {\n        CartCodeDiscountAllocation.add(\"code\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartAutomaticDiscountAllocation\", function (CartAutomaticDiscountAllocation) {\n        CartAutomaticDiscountAllocation.add(\"title\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCustomDiscountAllocation\", function (CartCustomDiscountAllocation) {\n        CartCustomDiscountAllocation.add(\"title\");\n      });\n    });\n  });\n  spreads.AppliedGiftCardFragment = document.defineFragment(\"AppliedGiftCardFragment\", \"AppliedGiftCard\", function (root) {\n    root.add(\"amountUsed\", function (amountUsed) {\n      amountUsed.add(\"amount\");\n      amountUsed.add(\"currencyCode\");\n    });\n    root.add(\"amountUsed\", {\n      alias: \"amountUsedV2\"\n    }, function (amountUsed) {\n      amountUsed.add(\"amount\");\n      amountUsed.add(\"currencyCode\");\n    });\n    root.add(\"balance\", function (balance) {\n      balance.add(\"amount\");\n      balance.add(\"currencyCode\");\n    });\n    root.add(\"balance\", {\n      alias: \"balanceV2\"\n    }, function (balance) {\n      balance.add(\"amount\");\n      balance.add(\"currencyCode\");\n    });\n    root.add(\"presentmentAmountUsed\", function (presentmentAmountUsed) {\n      presentmentAmountUsed.add(\"amount\");\n      presentmentAmountUsed.add(\"currencyCode\");\n    });\n    root.add(\"id\");\n    root.add(\"lastCharacters\");\n  });\n  spreads.CartFragment = document.defineFragment(\"CartFragment\", \"Cart\", function (root) {\n    root.add(\"id\");\n    root.add(\"createdAt\");\n    root.add(\"updatedAt\");\n    root.add(\"lines\", {\n      args: {\n        first: 250\n      }\n    }, function (lines) {\n      lines.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      lines.add(\"edges\", function (edges) {\n        edges.add(\"cursor\");\n        edges.add(\"node\", function (node) {\n          node.addFragment(spreads.CartLineFragment);\n        });\n      });\n    });\n    root.add(\"attributes\", function (attributes) {\n      attributes.add(\"key\");\n      attributes.add(\"value\");\n    });\n    root.add(\"cost\", function (cost) {\n      cost.add(\"checkoutChargeAmount\", function (checkoutChargeAmount) {\n        checkoutChargeAmount.add(\"amount\");\n        checkoutChargeAmount.add(\"currencyCode\");\n      });\n      cost.add(\"totalAmount\", function (totalAmount) {\n        totalAmount.add(\"amount\");\n        totalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"subtotalAmount\", function (subtotalAmount) {\n        subtotalAmount.add(\"amount\");\n        subtotalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"totalTaxAmount\", function (totalTaxAmount) {\n        totalTaxAmount.add(\"amount\");\n        totalTaxAmount.add(\"currencyCode\");\n      });\n      cost.add(\"totalDutyAmount\", function (totalDutyAmount) {\n        totalDutyAmount.add(\"amount\");\n        totalDutyAmount.add(\"currencyCode\");\n      });\n    });\n    root.add(\"checkoutUrl\");\n    root.add(\"discountCodes\", function (discountCodes) {\n      discountCodes.add(\"applicable\");\n      discountCodes.add(\"code\");\n    });\n    root.add(\"discountAllocations\", function (discountAllocations) {\n      discountAllocations.add(\"discountedAmount\", function (discountedAmount) {\n        discountedAmount.add(\"amount\");\n        discountedAmount.add(\"currencyCode\");\n      });\n      discountAllocations.add(\"discountApplication\", function (discountApplication) {\n        discountApplication.add(\"targetType\");\n        discountApplication.add(\"allocationMethod\");\n        discountApplication.add(\"targetSelection\");\n        discountApplication.add(\"value\", function (value) {\n          value.addInlineFragmentOn(\"PricingPercentageValue\", function (PricingPercentageValue) {\n            PricingPercentageValue.add(\"percentage\");\n          });\n          value.addInlineFragmentOn(\"MoneyV2\", function (MoneyV2) {\n            MoneyV2.add(\"amount\");\n            MoneyV2.add(\"currencyCode\");\n          });\n        });\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCodeDiscountAllocation\", function (CartCodeDiscountAllocation) {\n        CartCodeDiscountAllocation.add(\"code\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartAutomaticDiscountAllocation\", function (CartAutomaticDiscountAllocation) {\n        CartAutomaticDiscountAllocation.add(\"title\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCustomDiscountAllocation\", function (CartCustomDiscountAllocation) {\n        CartCustomDiscountAllocation.add(\"title\");\n      });\n    });\n    root.add(\"buyerIdentity\", function (buyerIdentity) {\n      buyerIdentity.add(\"countryCode\");\n      buyerIdentity.add(\"preferences\", function (preferences) {\n        preferences.add(\"delivery\", function (delivery) {\n          delivery.add(\"coordinates\", function (coordinates) {\n            coordinates.add(\"latitude\");\n            coordinates.add(\"longitude\");\n            coordinates.add(\"countryCode\");\n          });\n          delivery.add(\"deliveryMethod\");\n          delivery.add(\"pickupHandle\");\n        });\n        preferences.add(\"wallet\");\n      });\n      buyerIdentity.add(\"email\");\n      buyerIdentity.add(\"phone\");\n      buyerIdentity.add(\"customer\", function (customer) {\n        customer.add(\"email\");\n      });\n      buyerIdentity.add(\"deliveryAddressPreferences\", function (deliveryAddressPreferences) {\n        deliveryAddressPreferences.addInlineFragmentOn(\"MailingAddress\", function (MailingAddress) {\n          MailingAddress.add(\"address1\");\n          MailingAddress.add(\"address2\");\n          MailingAddress.add(\"city\");\n          MailingAddress.add(\"company\");\n          MailingAddress.add(\"country\");\n          MailingAddress.add(\"countryCodeV2\");\n          MailingAddress.add(\"firstName\");\n          MailingAddress.add(\"formatted\");\n          MailingAddress.add(\"formattedArea\");\n          MailingAddress.add(\"lastName\");\n          MailingAddress.add(\"latitude\");\n          MailingAddress.add(\"longitude\");\n          MailingAddress.add(\"name\");\n          MailingAddress.add(\"phone\");\n          MailingAddress.add(\"province\");\n          MailingAddress.add(\"provinceCode\");\n          MailingAddress.add(\"zip\");\n        });\n      });\n    });\n    root.add(\"deliveryGroups\", {\n      args: {\n        first: 10\n      }\n    }, function (deliveryGroups) {\n      deliveryGroups.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      deliveryGroups.add(\"edges\", function (edges) {\n        edges.add(\"node\", function (node) {\n          node.add(\"id\");\n          node.add(\"deliveryAddress\", function (deliveryAddress) {\n            deliveryAddress.add(\"address2\");\n            deliveryAddress.add(\"address1\");\n            deliveryAddress.add(\"city\");\n            deliveryAddress.add(\"company\");\n            deliveryAddress.add(\"country\");\n            deliveryAddress.add(\"countryCodeV2\");\n            deliveryAddress.add(\"firstName\");\n            deliveryAddress.add(\"formatted\");\n            deliveryAddress.add(\"formattedArea\");\n            deliveryAddress.add(\"lastName\");\n            deliveryAddress.add(\"latitude\");\n            deliveryAddress.add(\"longitude\");\n            deliveryAddress.add(\"name\");\n            deliveryAddress.add(\"phone\");\n            deliveryAddress.add(\"province\");\n            deliveryAddress.add(\"provinceCode\");\n          });\n          node.add(\"deliveryOptions\", function (deliveryOptions) {\n            deliveryOptions.add(\"code\");\n            deliveryOptions.add(\"deliveryMethodType\");\n            deliveryOptions.add(\"description\");\n            deliveryOptions.add(\"estimatedCost\", function (estimatedCost) {\n              estimatedCost.add(\"amount\");\n              estimatedCost.add(\"currencyCode\");\n            });\n            deliveryOptions.add(\"handle\");\n            deliveryOptions.add(\"title\");\n          });\n          node.add(\"selectedDeliveryOption\", function (selectedDeliveryOption) {\n            selectedDeliveryOption.add(\"code\");\n            selectedDeliveryOption.add(\"deliveryMethodType\");\n            selectedDeliveryOption.add(\"description\");\n            selectedDeliveryOption.add(\"estimatedCost\", function (estimatedCost) {\n              estimatedCost.add(\"amount\");\n              estimatedCost.add(\"currencyCode\");\n            });\n            selectedDeliveryOption.add(\"handle\");\n            selectedDeliveryOption.add(\"title\");\n          });\n          node.add(\"cartLines\", {\n            args: {\n              first: 250\n            }\n          }, function (cartLines) {\n            cartLines.add(\"pageInfo\", function (pageInfo) {\n              pageInfo.add(\"hasNextPage\");\n              pageInfo.add(\"hasPreviousPage\");\n            });\n            cartLines.add(\"edges\", function (edges) {\n              edges.add(\"cursor\");\n              edges.add(\"node\", function (node) {\n                node.add(\"id\");\n              });\n            });\n          });\n        });\n      });\n    });\n    root.add(\"appliedGiftCards\", function (appliedGiftCards) {\n      appliedGiftCards.addFragment(spreads.AppliedGiftCardFragment);\n    });\n    root.add(\"note\");\n  });\n  spreads.CartUserErrorFragment = document.defineFragment(\"CartUserErrorFragment\", \"CartUserError\", function (root) {\n    root.add(\"field\");\n    root.add(\"message\");\n    root.add(\"code\");\n  });\n  spreads.CartWarningFragment = document.defineFragment(\"CartWarningFragment\", \"CartWarning\", function (root) {\n    root.add(\"code\");\n    root.add(\"message\");\n  });\n  document.addMutation(\"CartCreate\", [variables.CartCreate.input], function (root) {\n    root.add(\"cartCreate\", {\n      args: {\n        input: variables.CartCreate.input\n      }\n    }, function (cartCreate) {\n      cartCreate.add(\"cart\", function (cart) {\n        cart.addFragment(spreads.CartFragment);\n      });\n      cartCreate.add(\"userErrors\", function (userErrors) {\n        userErrors.addFragment(spreads.CartUserErrorFragment);\n      });\n      cartCreate.add(\"warnings\", function (warnings) {\n        warnings.addFragment(spreads.CartWarningFragment);\n      });\n    });\n  });\n  return document;\n}\n\nfunction query$14(client) {\n  var document = client.document();\n  var spreads = {};\n  var variables = {};\n  variables.CartAttributesUpdate = {};\n  variables.CartAttributesUpdate.attributes = client.variable(\"attributes\", \"[AttributeInput!]!\");\n  variables.CartAttributesUpdate.cartId = client.variable(\"cartId\", \"ID!\");\n  spreads.CartLineFragment = document.defineFragment(\"CartLineFragment\", \"BaseCartLine\", function (root) {\n    root.add(\"id\");\n    root.add(\"merchandise\", function (merchandise) {\n      merchandise.addInlineFragmentOn(\"ProductVariant\", function (ProductVariant) {\n        ProductVariant.add(\"id\");\n        ProductVariant.add(\"title\");\n        ProductVariant.add(\"image\", function (image) {\n          image.add(\"id\");\n          image.add(\"url\", {\n            alias: \"src\"\n          });\n          image.add(\"altText\");\n          image.add(\"width\");\n          image.add(\"height\");\n        });\n        ProductVariant.add(\"product\", function (product) {\n          product.add(\"id\");\n          product.add(\"handle\");\n          product.add(\"title\");\n        });\n        ProductVariant.add(\"weight\");\n        ProductVariant.add(\"availableForSale\", {\n          alias: \"available\"\n        });\n        ProductVariant.add(\"sku\");\n        ProductVariant.add(\"selectedOptions\", function (selectedOptions) {\n          selectedOptions.add(\"name\");\n          selectedOptions.add(\"value\");\n        });\n        ProductVariant.add(\"compareAtPrice\", function (compareAtPrice) {\n          compareAtPrice.add(\"amount\");\n          compareAtPrice.add(\"currencyCode\");\n        });\n        ProductVariant.add(\"price\", function (price) {\n          price.add(\"amount\");\n          price.add(\"currencyCode\");\n        });\n        ProductVariant.add(\"unitPrice\", function (unitPrice) {\n          unitPrice.add(\"amount\");\n          unitPrice.add(\"currencyCode\");\n        });\n        ProductVariant.add(\"unitPriceMeasurement\", function (unitPriceMeasurement) {\n          unitPriceMeasurement.add(\"measuredType\");\n          unitPriceMeasurement.add(\"quantityUnit\");\n          unitPriceMeasurement.add(\"quantityValue\");\n          unitPriceMeasurement.add(\"referenceUnit\");\n          unitPriceMeasurement.add(\"referenceValue\");\n        });\n      });\n    });\n    root.add(\"quantity\");\n    root.add(\"attributes\", function (attributes) {\n      attributes.add(\"key\");\n      attributes.add(\"value\");\n    });\n    root.add(\"cost\", function (cost) {\n      cost.add(\"totalAmount\", function (totalAmount) {\n        totalAmount.add(\"amount\");\n        totalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"subtotalAmount\", function (subtotalAmount) {\n        subtotalAmount.add(\"amount\");\n        subtotalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"amountPerQuantity\", function (amountPerQuantity) {\n        amountPerQuantity.add(\"amount\");\n        amountPerQuantity.add(\"currencyCode\");\n      });\n      cost.add(\"compareAtAmountPerQuantity\", function (compareAtAmountPerQuantity) {\n        compareAtAmountPerQuantity.add(\"amount\");\n        compareAtAmountPerQuantity.add(\"currencyCode\");\n      });\n    });\n    root.add(\"discountAllocations\", function (discountAllocations) {\n      discountAllocations.add(\"discountedAmount\", function (discountedAmount) {\n        discountedAmount.add(\"amount\");\n        discountedAmount.add(\"currencyCode\");\n      });\n      discountAllocations.add(\"discountApplication\", function (discountApplication) {\n        discountApplication.add(\"targetType\");\n        discountApplication.add(\"allocationMethod\");\n        discountApplication.add(\"targetSelection\");\n        discountApplication.add(\"value\", function (value) {\n          value.addInlineFragmentOn(\"PricingPercentageValue\", function (PricingPercentageValue) {\n            PricingPercentageValue.add(\"percentage\");\n          });\n          value.addInlineFragmentOn(\"MoneyV2\", function (MoneyV2) {\n            MoneyV2.add(\"amount\");\n            MoneyV2.add(\"currencyCode\");\n          });\n        });\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCodeDiscountAllocation\", function (CartCodeDiscountAllocation) {\n        CartCodeDiscountAllocation.add(\"code\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartAutomaticDiscountAllocation\", function (CartAutomaticDiscountAllocation) {\n        CartAutomaticDiscountAllocation.add(\"title\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCustomDiscountAllocation\", function (CartCustomDiscountAllocation) {\n        CartCustomDiscountAllocation.add(\"title\");\n      });\n    });\n  });\n  spreads.AppliedGiftCardFragment = document.defineFragment(\"AppliedGiftCardFragment\", \"AppliedGiftCard\", function (root) {\n    root.add(\"amountUsed\", function (amountUsed) {\n      amountUsed.add(\"amount\");\n      amountUsed.add(\"currencyCode\");\n    });\n    root.add(\"amountUsed\", {\n      alias: \"amountUsedV2\"\n    }, function (amountUsed) {\n      amountUsed.add(\"amount\");\n      amountUsed.add(\"currencyCode\");\n    });\n    root.add(\"balance\", function (balance) {\n      balance.add(\"amount\");\n      balance.add(\"currencyCode\");\n    });\n    root.add(\"balance\", {\n      alias: \"balanceV2\"\n    }, function (balance) {\n      balance.add(\"amount\");\n      balance.add(\"currencyCode\");\n    });\n    root.add(\"presentmentAmountUsed\", function (presentmentAmountUsed) {\n      presentmentAmountUsed.add(\"amount\");\n      presentmentAmountUsed.add(\"currencyCode\");\n    });\n    root.add(\"id\");\n    root.add(\"lastCharacters\");\n  });\n  spreads.CartFragment = document.defineFragment(\"CartFragment\", \"Cart\", function (root) {\n    root.add(\"id\");\n    root.add(\"createdAt\");\n    root.add(\"updatedAt\");\n    root.add(\"lines\", {\n      args: {\n        first: 250\n      }\n    }, function (lines) {\n      lines.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      lines.add(\"edges\", function (edges) {\n        edges.add(\"cursor\");\n        edges.add(\"node\", function (node) {\n          node.addFragment(spreads.CartLineFragment);\n        });\n      });\n    });\n    root.add(\"attributes\", function (attributes) {\n      attributes.add(\"key\");\n      attributes.add(\"value\");\n    });\n    root.add(\"cost\", function (cost) {\n      cost.add(\"checkoutChargeAmount\", function (checkoutChargeAmount) {\n        checkoutChargeAmount.add(\"amount\");\n        checkoutChargeAmount.add(\"currencyCode\");\n      });\n      cost.add(\"totalAmount\", function (totalAmount) {\n        totalAmount.add(\"amount\");\n        totalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"subtotalAmount\", function (subtotalAmount) {\n        subtotalAmount.add(\"amount\");\n        subtotalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"totalTaxAmount\", function (totalTaxAmount) {\n        totalTaxAmount.add(\"amount\");\n        totalTaxAmount.add(\"currencyCode\");\n      });\n      cost.add(\"totalDutyAmount\", function (totalDutyAmount) {\n        totalDutyAmount.add(\"amount\");\n        totalDutyAmount.add(\"currencyCode\");\n      });\n    });\n    root.add(\"checkoutUrl\");\n    root.add(\"discountCodes\", function (discountCodes) {\n      discountCodes.add(\"applicable\");\n      discountCodes.add(\"code\");\n    });\n    root.add(\"discountAllocations\", function (discountAllocations) {\n      discountAllocations.add(\"discountedAmount\", function (discountedAmount) {\n        discountedAmount.add(\"amount\");\n        discountedAmount.add(\"currencyCode\");\n      });\n      discountAllocations.add(\"discountApplication\", function (discountApplication) {\n        discountApplication.add(\"targetType\");\n        discountApplication.add(\"allocationMethod\");\n        discountApplication.add(\"targetSelection\");\n        discountApplication.add(\"value\", function (value) {\n          value.addInlineFragmentOn(\"PricingPercentageValue\", function (PricingPercentageValue) {\n            PricingPercentageValue.add(\"percentage\");\n          });\n          value.addInlineFragmentOn(\"MoneyV2\", function (MoneyV2) {\n            MoneyV2.add(\"amount\");\n            MoneyV2.add(\"currencyCode\");\n          });\n        });\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCodeDiscountAllocation\", function (CartCodeDiscountAllocation) {\n        CartCodeDiscountAllocation.add(\"code\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartAutomaticDiscountAllocation\", function (CartAutomaticDiscountAllocation) {\n        CartAutomaticDiscountAllocation.add(\"title\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCustomDiscountAllocation\", function (CartCustomDiscountAllocation) {\n        CartCustomDiscountAllocation.add(\"title\");\n      });\n    });\n    root.add(\"buyerIdentity\", function (buyerIdentity) {\n      buyerIdentity.add(\"countryCode\");\n      buyerIdentity.add(\"preferences\", function (preferences) {\n        preferences.add(\"delivery\", function (delivery) {\n          delivery.add(\"coordinates\", function (coordinates) {\n            coordinates.add(\"latitude\");\n            coordinates.add(\"longitude\");\n            coordinates.add(\"countryCode\");\n          });\n          delivery.add(\"deliveryMethod\");\n          delivery.add(\"pickupHandle\");\n        });\n        preferences.add(\"wallet\");\n      });\n      buyerIdentity.add(\"email\");\n      buyerIdentity.add(\"phone\");\n      buyerIdentity.add(\"customer\", function (customer) {\n        customer.add(\"email\");\n      });\n      buyerIdentity.add(\"deliveryAddressPreferences\", function (deliveryAddressPreferences) {\n        deliveryAddressPreferences.addInlineFragmentOn(\"MailingAddress\", function (MailingAddress) {\n          MailingAddress.add(\"address1\");\n          MailingAddress.add(\"address2\");\n          MailingAddress.add(\"city\");\n          MailingAddress.add(\"company\");\n          MailingAddress.add(\"country\");\n          MailingAddress.add(\"countryCodeV2\");\n          MailingAddress.add(\"firstName\");\n          MailingAddress.add(\"formatted\");\n          MailingAddress.add(\"formattedArea\");\n          MailingAddress.add(\"lastName\");\n          MailingAddress.add(\"latitude\");\n          MailingAddress.add(\"longitude\");\n          MailingAddress.add(\"name\");\n          MailingAddress.add(\"phone\");\n          MailingAddress.add(\"province\");\n          MailingAddress.add(\"provinceCode\");\n          MailingAddress.add(\"zip\");\n        });\n      });\n    });\n    root.add(\"deliveryGroups\", {\n      args: {\n        first: 10\n      }\n    }, function (deliveryGroups) {\n      deliveryGroups.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      deliveryGroups.add(\"edges\", function (edges) {\n        edges.add(\"node\", function (node) {\n          node.add(\"id\");\n          node.add(\"deliveryAddress\", function (deliveryAddress) {\n            deliveryAddress.add(\"address2\");\n            deliveryAddress.add(\"address1\");\n            deliveryAddress.add(\"city\");\n            deliveryAddress.add(\"company\");\n            deliveryAddress.add(\"country\");\n            deliveryAddress.add(\"countryCodeV2\");\n            deliveryAddress.add(\"firstName\");\n            deliveryAddress.add(\"formatted\");\n            deliveryAddress.add(\"formattedArea\");\n            deliveryAddress.add(\"lastName\");\n            deliveryAddress.add(\"latitude\");\n            deliveryAddress.add(\"longitude\");\n            deliveryAddress.add(\"name\");\n            deliveryAddress.add(\"phone\");\n            deliveryAddress.add(\"province\");\n            deliveryAddress.add(\"provinceCode\");\n          });\n          node.add(\"deliveryOptions\", function (deliveryOptions) {\n            deliveryOptions.add(\"code\");\n            deliveryOptions.add(\"deliveryMethodType\");\n            deliveryOptions.add(\"description\");\n            deliveryOptions.add(\"estimatedCost\", function (estimatedCost) {\n              estimatedCost.add(\"amount\");\n              estimatedCost.add(\"currencyCode\");\n            });\n            deliveryOptions.add(\"handle\");\n            deliveryOptions.add(\"title\");\n          });\n          node.add(\"selectedDeliveryOption\", function (selectedDeliveryOption) {\n            selectedDeliveryOption.add(\"code\");\n            selectedDeliveryOption.add(\"deliveryMethodType\");\n            selectedDeliveryOption.add(\"description\");\n            selectedDeliveryOption.add(\"estimatedCost\", function (estimatedCost) {\n              estimatedCost.add(\"amount\");\n              estimatedCost.add(\"currencyCode\");\n            });\n            selectedDeliveryOption.add(\"handle\");\n            selectedDeliveryOption.add(\"title\");\n          });\n          node.add(\"cartLines\", {\n            args: {\n              first: 250\n            }\n          }, function (cartLines) {\n            cartLines.add(\"pageInfo\", function (pageInfo) {\n              pageInfo.add(\"hasNextPage\");\n              pageInfo.add(\"hasPreviousPage\");\n            });\n            cartLines.add(\"edges\", function (edges) {\n              edges.add(\"cursor\");\n              edges.add(\"node\", function (node) {\n                node.add(\"id\");\n              });\n            });\n          });\n        });\n      });\n    });\n    root.add(\"appliedGiftCards\", function (appliedGiftCards) {\n      appliedGiftCards.addFragment(spreads.AppliedGiftCardFragment);\n    });\n    root.add(\"note\");\n  });\n  spreads.CartUserErrorFragment = document.defineFragment(\"CartUserErrorFragment\", \"CartUserError\", function (root) {\n    root.add(\"field\");\n    root.add(\"message\");\n    root.add(\"code\");\n  });\n  spreads.CartWarningFragment = document.defineFragment(\"CartWarningFragment\", \"CartWarning\", function (root) {\n    root.add(\"code\");\n    root.add(\"message\");\n  });\n  document.addMutation(\"CartAttributesUpdate\", [variables.CartAttributesUpdate.attributes, variables.CartAttributesUpdate.cartId], function (root) {\n    root.add(\"cartAttributesUpdate\", {\n      args: {\n        attributes: variables.CartAttributesUpdate.attributes,\n        cartId: variables.CartAttributesUpdate.cartId\n      }\n    }, function (cartAttributesUpdate) {\n      cartAttributesUpdate.add(\"cart\", function (cart) {\n        cart.addFragment(spreads.CartFragment);\n      });\n      cartAttributesUpdate.add(\"userErrors\", function (userErrors) {\n        userErrors.addFragment(spreads.CartUserErrorFragment);\n      });\n      cartAttributesUpdate.add(\"warnings\", function (warnings) {\n        warnings.addFragment(spreads.CartWarningFragment);\n      });\n    });\n  });\n  return document;\n}\n\nfunction query$15(client) {\n  var document = client.document();\n  var spreads = {};\n  var variables = {};\n  variables.CartBuyerIdentityUpdate = {};\n  variables.CartBuyerIdentityUpdate.buyerIdentity = client.variable(\"buyerIdentity\", \"CartBuyerIdentityInput!\");\n  variables.CartBuyerIdentityUpdate.cartId = client.variable(\"cartId\", \"ID!\");\n  spreads.CartLineFragment = document.defineFragment(\"CartLineFragment\", \"BaseCartLine\", function (root) {\n    root.add(\"id\");\n    root.add(\"merchandise\", function (merchandise) {\n      merchandise.addInlineFragmentOn(\"ProductVariant\", function (ProductVariant) {\n        ProductVariant.add(\"id\");\n        ProductVariant.add(\"title\");\n        ProductVariant.add(\"image\", function (image) {\n          image.add(\"id\");\n          image.add(\"url\", {\n            alias: \"src\"\n          });\n          image.add(\"altText\");\n          image.add(\"width\");\n          image.add(\"height\");\n        });\n        ProductVariant.add(\"product\", function (product) {\n          product.add(\"id\");\n          product.add(\"handle\");\n          product.add(\"title\");\n        });\n        ProductVariant.add(\"weight\");\n        ProductVariant.add(\"availableForSale\", {\n          alias: \"available\"\n        });\n        ProductVariant.add(\"sku\");\n        ProductVariant.add(\"selectedOptions\", function (selectedOptions) {\n          selectedOptions.add(\"name\");\n          selectedOptions.add(\"value\");\n        });\n        ProductVariant.add(\"compareAtPrice\", function (compareAtPrice) {\n          compareAtPrice.add(\"amount\");\n          compareAtPrice.add(\"currencyCode\");\n        });\n        ProductVariant.add(\"price\", function (price) {\n          price.add(\"amount\");\n          price.add(\"currencyCode\");\n        });\n        ProductVariant.add(\"unitPrice\", function (unitPrice) {\n          unitPrice.add(\"amount\");\n          unitPrice.add(\"currencyCode\");\n        });\n        ProductVariant.add(\"unitPriceMeasurement\", function (unitPriceMeasurement) {\n          unitPriceMeasurement.add(\"measuredType\");\n          unitPriceMeasurement.add(\"quantityUnit\");\n          unitPriceMeasurement.add(\"quantityValue\");\n          unitPriceMeasurement.add(\"referenceUnit\");\n          unitPriceMeasurement.add(\"referenceValue\");\n        });\n      });\n    });\n    root.add(\"quantity\");\n    root.add(\"attributes\", function (attributes) {\n      attributes.add(\"key\");\n      attributes.add(\"value\");\n    });\n    root.add(\"cost\", function (cost) {\n      cost.add(\"totalAmount\", function (totalAmount) {\n        totalAmount.add(\"amount\");\n        totalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"subtotalAmount\", function (subtotalAmount) {\n        subtotalAmount.add(\"amount\");\n        subtotalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"amountPerQuantity\", function (amountPerQuantity) {\n        amountPerQuantity.add(\"amount\");\n        amountPerQuantity.add(\"currencyCode\");\n      });\n      cost.add(\"compareAtAmountPerQuantity\", function (compareAtAmountPerQuantity) {\n        compareAtAmountPerQuantity.add(\"amount\");\n        compareAtAmountPerQuantity.add(\"currencyCode\");\n      });\n    });\n    root.add(\"discountAllocations\", function (discountAllocations) {\n      discountAllocations.add(\"discountedAmount\", function (discountedAmount) {\n        discountedAmount.add(\"amount\");\n        discountedAmount.add(\"currencyCode\");\n      });\n      discountAllocations.add(\"discountApplication\", function (discountApplication) {\n        discountApplication.add(\"targetType\");\n        discountApplication.add(\"allocationMethod\");\n        discountApplication.add(\"targetSelection\");\n        discountApplication.add(\"value\", function (value) {\n          value.addInlineFragmentOn(\"PricingPercentageValue\", function (PricingPercentageValue) {\n            PricingPercentageValue.add(\"percentage\");\n          });\n          value.addInlineFragmentOn(\"MoneyV2\", function (MoneyV2) {\n            MoneyV2.add(\"amount\");\n            MoneyV2.add(\"currencyCode\");\n          });\n        });\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCodeDiscountAllocation\", function (CartCodeDiscountAllocation) {\n        CartCodeDiscountAllocation.add(\"code\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartAutomaticDiscountAllocation\", function (CartAutomaticDiscountAllocation) {\n        CartAutomaticDiscountAllocation.add(\"title\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCustomDiscountAllocation\", function (CartCustomDiscountAllocation) {\n        CartCustomDiscountAllocation.add(\"title\");\n      });\n    });\n  });\n  spreads.AppliedGiftCardFragment = document.defineFragment(\"AppliedGiftCardFragment\", \"AppliedGiftCard\", function (root) {\n    root.add(\"amountUsed\", function (amountUsed) {\n      amountUsed.add(\"amount\");\n      amountUsed.add(\"currencyCode\");\n    });\n    root.add(\"amountUsed\", {\n      alias: \"amountUsedV2\"\n    }, function (amountUsed) {\n      amountUsed.add(\"amount\");\n      amountUsed.add(\"currencyCode\");\n    });\n    root.add(\"balance\", function (balance) {\n      balance.add(\"amount\");\n      balance.add(\"currencyCode\");\n    });\n    root.add(\"balance\", {\n      alias: \"balanceV2\"\n    }, function (balance) {\n      balance.add(\"amount\");\n      balance.add(\"currencyCode\");\n    });\n    root.add(\"presentmentAmountUsed\", function (presentmentAmountUsed) {\n      presentmentAmountUsed.add(\"amount\");\n      presentmentAmountUsed.add(\"currencyCode\");\n    });\n    root.add(\"id\");\n    root.add(\"lastCharacters\");\n  });\n  spreads.CartFragment = document.defineFragment(\"CartFragment\", \"Cart\", function (root) {\n    root.add(\"id\");\n    root.add(\"createdAt\");\n    root.add(\"updatedAt\");\n    root.add(\"lines\", {\n      args: {\n        first: 250\n      }\n    }, function (lines) {\n      lines.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      lines.add(\"edges\", function (edges) {\n        edges.add(\"cursor\");\n        edges.add(\"node\", function (node) {\n          node.addFragment(spreads.CartLineFragment);\n        });\n      });\n    });\n    root.add(\"attributes\", function (attributes) {\n      attributes.add(\"key\");\n      attributes.add(\"value\");\n    });\n    root.add(\"cost\", function (cost) {\n      cost.add(\"checkoutChargeAmount\", function (checkoutChargeAmount) {\n        checkoutChargeAmount.add(\"amount\");\n        checkoutChargeAmount.add(\"currencyCode\");\n      });\n      cost.add(\"totalAmount\", function (totalAmount) {\n        totalAmount.add(\"amount\");\n        totalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"subtotalAmount\", function (subtotalAmount) {\n        subtotalAmount.add(\"amount\");\n        subtotalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"totalTaxAmount\", function (totalTaxAmount) {\n        totalTaxAmount.add(\"amount\");\n        totalTaxAmount.add(\"currencyCode\");\n      });\n      cost.add(\"totalDutyAmount\", function (totalDutyAmount) {\n        totalDutyAmount.add(\"amount\");\n        totalDutyAmount.add(\"currencyCode\");\n      });\n    });\n    root.add(\"checkoutUrl\");\n    root.add(\"discountCodes\", function (discountCodes) {\n      discountCodes.add(\"applicable\");\n      discountCodes.add(\"code\");\n    });\n    root.add(\"discountAllocations\", function (discountAllocations) {\n      discountAllocations.add(\"discountedAmount\", function (discountedAmount) {\n        discountedAmount.add(\"amount\");\n        discountedAmount.add(\"currencyCode\");\n      });\n      discountAllocations.add(\"discountApplication\", function (discountApplication) {\n        discountApplication.add(\"targetType\");\n        discountApplication.add(\"allocationMethod\");\n        discountApplication.add(\"targetSelection\");\n        discountApplication.add(\"value\", function (value) {\n          value.addInlineFragmentOn(\"PricingPercentageValue\", function (PricingPercentageValue) {\n            PricingPercentageValue.add(\"percentage\");\n          });\n          value.addInlineFragmentOn(\"MoneyV2\", function (MoneyV2) {\n            MoneyV2.add(\"amount\");\n            MoneyV2.add(\"currencyCode\");\n          });\n        });\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCodeDiscountAllocation\", function (CartCodeDiscountAllocation) {\n        CartCodeDiscountAllocation.add(\"code\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartAutomaticDiscountAllocation\", function (CartAutomaticDiscountAllocation) {\n        CartAutomaticDiscountAllocation.add(\"title\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCustomDiscountAllocation\", function (CartCustomDiscountAllocation) {\n        CartCustomDiscountAllocation.add(\"title\");\n      });\n    });\n    root.add(\"buyerIdentity\", function (buyerIdentity) {\n      buyerIdentity.add(\"countryCode\");\n      buyerIdentity.add(\"preferences\", function (preferences) {\n        preferences.add(\"delivery\", function (delivery) {\n          delivery.add(\"coordinates\", function (coordinates) {\n            coordinates.add(\"latitude\");\n            coordinates.add(\"longitude\");\n            coordinates.add(\"countryCode\");\n          });\n          delivery.add(\"deliveryMethod\");\n          delivery.add(\"pickupHandle\");\n        });\n        preferences.add(\"wallet\");\n      });\n      buyerIdentity.add(\"email\");\n      buyerIdentity.add(\"phone\");\n      buyerIdentity.add(\"customer\", function (customer) {\n        customer.add(\"email\");\n      });\n      buyerIdentity.add(\"deliveryAddressPreferences\", function (deliveryAddressPreferences) {\n        deliveryAddressPreferences.addInlineFragmentOn(\"MailingAddress\", function (MailingAddress) {\n          MailingAddress.add(\"address1\");\n          MailingAddress.add(\"address2\");\n          MailingAddress.add(\"city\");\n          MailingAddress.add(\"company\");\n          MailingAddress.add(\"country\");\n          MailingAddress.add(\"countryCodeV2\");\n          MailingAddress.add(\"firstName\");\n          MailingAddress.add(\"formatted\");\n          MailingAddress.add(\"formattedArea\");\n          MailingAddress.add(\"lastName\");\n          MailingAddress.add(\"latitude\");\n          MailingAddress.add(\"longitude\");\n          MailingAddress.add(\"name\");\n          MailingAddress.add(\"phone\");\n          MailingAddress.add(\"province\");\n          MailingAddress.add(\"provinceCode\");\n          MailingAddress.add(\"zip\");\n        });\n      });\n    });\n    root.add(\"deliveryGroups\", {\n      args: {\n        first: 10\n      }\n    }, function (deliveryGroups) {\n      deliveryGroups.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      deliveryGroups.add(\"edges\", function (edges) {\n        edges.add(\"node\", function (node) {\n          node.add(\"id\");\n          node.add(\"deliveryAddress\", function (deliveryAddress) {\n            deliveryAddress.add(\"address2\");\n            deliveryAddress.add(\"address1\");\n            deliveryAddress.add(\"city\");\n            deliveryAddress.add(\"company\");\n            deliveryAddress.add(\"country\");\n            deliveryAddress.add(\"countryCodeV2\");\n            deliveryAddress.add(\"firstName\");\n            deliveryAddress.add(\"formatted\");\n            deliveryAddress.add(\"formattedArea\");\n            deliveryAddress.add(\"lastName\");\n            deliveryAddress.add(\"latitude\");\n            deliveryAddress.add(\"longitude\");\n            deliveryAddress.add(\"name\");\n            deliveryAddress.add(\"phone\");\n            deliveryAddress.add(\"province\");\n            deliveryAddress.add(\"provinceCode\");\n          });\n          node.add(\"deliveryOptions\", function (deliveryOptions) {\n            deliveryOptions.add(\"code\");\n            deliveryOptions.add(\"deliveryMethodType\");\n            deliveryOptions.add(\"description\");\n            deliveryOptions.add(\"estimatedCost\", function (estimatedCost) {\n              estimatedCost.add(\"amount\");\n              estimatedCost.add(\"currencyCode\");\n            });\n            deliveryOptions.add(\"handle\");\n            deliveryOptions.add(\"title\");\n          });\n          node.add(\"selectedDeliveryOption\", function (selectedDeliveryOption) {\n            selectedDeliveryOption.add(\"code\");\n            selectedDeliveryOption.add(\"deliveryMethodType\");\n            selectedDeliveryOption.add(\"description\");\n            selectedDeliveryOption.add(\"estimatedCost\", function (estimatedCost) {\n              estimatedCost.add(\"amount\");\n              estimatedCost.add(\"currencyCode\");\n            });\n            selectedDeliveryOption.add(\"handle\");\n            selectedDeliveryOption.add(\"title\");\n          });\n          node.add(\"cartLines\", {\n            args: {\n              first: 250\n            }\n          }, function (cartLines) {\n            cartLines.add(\"pageInfo\", function (pageInfo) {\n              pageInfo.add(\"hasNextPage\");\n              pageInfo.add(\"hasPreviousPage\");\n            });\n            cartLines.add(\"edges\", function (edges) {\n              edges.add(\"cursor\");\n              edges.add(\"node\", function (node) {\n                node.add(\"id\");\n              });\n            });\n          });\n        });\n      });\n    });\n    root.add(\"appliedGiftCards\", function (appliedGiftCards) {\n      appliedGiftCards.addFragment(spreads.AppliedGiftCardFragment);\n    });\n    root.add(\"note\");\n  });\n  spreads.CartUserErrorFragment = document.defineFragment(\"CartUserErrorFragment\", \"CartUserError\", function (root) {\n    root.add(\"field\");\n    root.add(\"message\");\n    root.add(\"code\");\n  });\n  spreads.CartWarningFragment = document.defineFragment(\"CartWarningFragment\", \"CartWarning\", function (root) {\n    root.add(\"code\");\n    root.add(\"message\");\n  });\n  document.addMutation(\"CartBuyerIdentityUpdate\", [variables.CartBuyerIdentityUpdate.buyerIdentity, variables.CartBuyerIdentityUpdate.cartId], function (root) {\n    root.add(\"cartBuyerIdentityUpdate\", {\n      args: {\n        buyerIdentity: variables.CartBuyerIdentityUpdate.buyerIdentity,\n        cartId: variables.CartBuyerIdentityUpdate.cartId\n      }\n    }, function (cartBuyerIdentityUpdate) {\n      cartBuyerIdentityUpdate.add(\"cart\", function (cart) {\n        cart.addFragment(spreads.CartFragment);\n      });\n      cartBuyerIdentityUpdate.add(\"userErrors\", function (userErrors) {\n        userErrors.addFragment(spreads.CartUserErrorFragment);\n      });\n      cartBuyerIdentityUpdate.add(\"warnings\", function (warnings) {\n        warnings.addFragment(spreads.CartWarningFragment);\n      });\n    });\n  });\n  return document;\n}\n\nfunction query$16(client) {\n  var document = client.document();\n  var spreads = {};\n  var variables = {};\n  variables.CartDiscountCodesUpdate = {};\n  variables.CartDiscountCodesUpdate.cartId = client.variable(\"cartId\", \"ID!\");\n  variables.CartDiscountCodesUpdate.discountCodes = client.variable(\"discountCodes\", \"[String!]!\");\n  spreads.CartLineFragment = document.defineFragment(\"CartLineFragment\", \"BaseCartLine\", function (root) {\n    root.add(\"id\");\n    root.add(\"merchandise\", function (merchandise) {\n      merchandise.addInlineFragmentOn(\"ProductVariant\", function (ProductVariant) {\n        ProductVariant.add(\"id\");\n        ProductVariant.add(\"title\");\n        ProductVariant.add(\"image\", function (image) {\n          image.add(\"id\");\n          image.add(\"url\", {\n            alias: \"src\"\n          });\n          image.add(\"altText\");\n          image.add(\"width\");\n          image.add(\"height\");\n        });\n        ProductVariant.add(\"product\", function (product) {\n          product.add(\"id\");\n          product.add(\"handle\");\n          product.add(\"title\");\n        });\n        ProductVariant.add(\"weight\");\n        ProductVariant.add(\"availableForSale\", {\n          alias: \"available\"\n        });\n        ProductVariant.add(\"sku\");\n        ProductVariant.add(\"selectedOptions\", function (selectedOptions) {\n          selectedOptions.add(\"name\");\n          selectedOptions.add(\"value\");\n        });\n        ProductVariant.add(\"compareAtPrice\", function (compareAtPrice) {\n          compareAtPrice.add(\"amount\");\n          compareAtPrice.add(\"currencyCode\");\n        });\n        ProductVariant.add(\"price\", function (price) {\n          price.add(\"amount\");\n          price.add(\"currencyCode\");\n        });\n        ProductVariant.add(\"unitPrice\", function (unitPrice) {\n          unitPrice.add(\"amount\");\n          unitPrice.add(\"currencyCode\");\n        });\n        ProductVariant.add(\"unitPriceMeasurement\", function (unitPriceMeasurement) {\n          unitPriceMeasurement.add(\"measuredType\");\n          unitPriceMeasurement.add(\"quantityUnit\");\n          unitPriceMeasurement.add(\"quantityValue\");\n          unitPriceMeasurement.add(\"referenceUnit\");\n          unitPriceMeasurement.add(\"referenceValue\");\n        });\n      });\n    });\n    root.add(\"quantity\");\n    root.add(\"attributes\", function (attributes) {\n      attributes.add(\"key\");\n      attributes.add(\"value\");\n    });\n    root.add(\"cost\", function (cost) {\n      cost.add(\"totalAmount\", function (totalAmount) {\n        totalAmount.add(\"amount\");\n        totalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"subtotalAmount\", function (subtotalAmount) {\n        subtotalAmount.add(\"amount\");\n        subtotalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"amountPerQuantity\", function (amountPerQuantity) {\n        amountPerQuantity.add(\"amount\");\n        amountPerQuantity.add(\"currencyCode\");\n      });\n      cost.add(\"compareAtAmountPerQuantity\", function (compareAtAmountPerQuantity) {\n        compareAtAmountPerQuantity.add(\"amount\");\n        compareAtAmountPerQuantity.add(\"currencyCode\");\n      });\n    });\n    root.add(\"discountAllocations\", function (discountAllocations) {\n      discountAllocations.add(\"discountedAmount\", function (discountedAmount) {\n        discountedAmount.add(\"amount\");\n        discountedAmount.add(\"currencyCode\");\n      });\n      discountAllocations.add(\"discountApplication\", function (discountApplication) {\n        discountApplication.add(\"targetType\");\n        discountApplication.add(\"allocationMethod\");\n        discountApplication.add(\"targetSelection\");\n        discountApplication.add(\"value\", function (value) {\n          value.addInlineFragmentOn(\"PricingPercentageValue\", function (PricingPercentageValue) {\n            PricingPercentageValue.add(\"percentage\");\n          });\n          value.addInlineFragmentOn(\"MoneyV2\", function (MoneyV2) {\n            MoneyV2.add(\"amount\");\n            MoneyV2.add(\"currencyCode\");\n          });\n        });\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCodeDiscountAllocation\", function (CartCodeDiscountAllocation) {\n        CartCodeDiscountAllocation.add(\"code\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartAutomaticDiscountAllocation\", function (CartAutomaticDiscountAllocation) {\n        CartAutomaticDiscountAllocation.add(\"title\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCustomDiscountAllocation\", function (CartCustomDiscountAllocation) {\n        CartCustomDiscountAllocation.add(\"title\");\n      });\n    });\n  });\n  spreads.AppliedGiftCardFragment = document.defineFragment(\"AppliedGiftCardFragment\", \"AppliedGiftCard\", function (root) {\n    root.add(\"amountUsed\", function (amountUsed) {\n      amountUsed.add(\"amount\");\n      amountUsed.add(\"currencyCode\");\n    });\n    root.add(\"amountUsed\", {\n      alias: \"amountUsedV2\"\n    }, function (amountUsed) {\n      amountUsed.add(\"amount\");\n      amountUsed.add(\"currencyCode\");\n    });\n    root.add(\"balance\", function (balance) {\n      balance.add(\"amount\");\n      balance.add(\"currencyCode\");\n    });\n    root.add(\"balance\", {\n      alias: \"balanceV2\"\n    }, function (balance) {\n      balance.add(\"amount\");\n      balance.add(\"currencyCode\");\n    });\n    root.add(\"presentmentAmountUsed\", function (presentmentAmountUsed) {\n      presentmentAmountUsed.add(\"amount\");\n      presentmentAmountUsed.add(\"currencyCode\");\n    });\n    root.add(\"id\");\n    root.add(\"lastCharacters\");\n  });\n  spreads.CartFragment = document.defineFragment(\"CartFragment\", \"Cart\", function (root) {\n    root.add(\"id\");\n    root.add(\"createdAt\");\n    root.add(\"updatedAt\");\n    root.add(\"lines\", {\n      args: {\n        first: 250\n      }\n    }, function (lines) {\n      lines.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      lines.add(\"edges\", function (edges) {\n        edges.add(\"cursor\");\n        edges.add(\"node\", function (node) {\n          node.addFragment(spreads.CartLineFragment);\n        });\n      });\n    });\n    root.add(\"attributes\", function (attributes) {\n      attributes.add(\"key\");\n      attributes.add(\"value\");\n    });\n    root.add(\"cost\", function (cost) {\n      cost.add(\"checkoutChargeAmount\", function (checkoutChargeAmount) {\n        checkoutChargeAmount.add(\"amount\");\n        checkoutChargeAmount.add(\"currencyCode\");\n      });\n      cost.add(\"totalAmount\", function (totalAmount) {\n        totalAmount.add(\"amount\");\n        totalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"subtotalAmount\", function (subtotalAmount) {\n        subtotalAmount.add(\"amount\");\n        subtotalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"totalTaxAmount\", function (totalTaxAmount) {\n        totalTaxAmount.add(\"amount\");\n        totalTaxAmount.add(\"currencyCode\");\n      });\n      cost.add(\"totalDutyAmount\", function (totalDutyAmount) {\n        totalDutyAmount.add(\"amount\");\n        totalDutyAmount.add(\"currencyCode\");\n      });\n    });\n    root.add(\"checkoutUrl\");\n    root.add(\"discountCodes\", function (discountCodes) {\n      discountCodes.add(\"applicable\");\n      discountCodes.add(\"code\");\n    });\n    root.add(\"discountAllocations\", function (discountAllocations) {\n      discountAllocations.add(\"discountedAmount\", function (discountedAmount) {\n        discountedAmount.add(\"amount\");\n        discountedAmount.add(\"currencyCode\");\n      });\n      discountAllocations.add(\"discountApplication\", function (discountApplication) {\n        discountApplication.add(\"targetType\");\n        discountApplication.add(\"allocationMethod\");\n        discountApplication.add(\"targetSelection\");\n        discountApplication.add(\"value\", function (value) {\n          value.addInlineFragmentOn(\"PricingPercentageValue\", function (PricingPercentageValue) {\n            PricingPercentageValue.add(\"percentage\");\n          });\n          value.addInlineFragmentOn(\"MoneyV2\", function (MoneyV2) {\n            MoneyV2.add(\"amount\");\n            MoneyV2.add(\"currencyCode\");\n          });\n        });\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCodeDiscountAllocation\", function (CartCodeDiscountAllocation) {\n        CartCodeDiscountAllocation.add(\"code\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartAutomaticDiscountAllocation\", function (CartAutomaticDiscountAllocation) {\n        CartAutomaticDiscountAllocation.add(\"title\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCustomDiscountAllocation\", function (CartCustomDiscountAllocation) {\n        CartCustomDiscountAllocation.add(\"title\");\n      });\n    });\n    root.add(\"buyerIdentity\", function (buyerIdentity) {\n      buyerIdentity.add(\"countryCode\");\n      buyerIdentity.add(\"preferences\", function (preferences) {\n        preferences.add(\"delivery\", function (delivery) {\n          delivery.add(\"coordinates\", function (coordinates) {\n            coordinates.add(\"latitude\");\n            coordinates.add(\"longitude\");\n            coordinates.add(\"countryCode\");\n          });\n          delivery.add(\"deliveryMethod\");\n          delivery.add(\"pickupHandle\");\n        });\n        preferences.add(\"wallet\");\n      });\n      buyerIdentity.add(\"email\");\n      buyerIdentity.add(\"phone\");\n      buyerIdentity.add(\"customer\", function (customer) {\n        customer.add(\"email\");\n      });\n      buyerIdentity.add(\"deliveryAddressPreferences\", function (deliveryAddressPreferences) {\n        deliveryAddressPreferences.addInlineFragmentOn(\"MailingAddress\", function (MailingAddress) {\n          MailingAddress.add(\"address1\");\n          MailingAddress.add(\"address2\");\n          MailingAddress.add(\"city\");\n          MailingAddress.add(\"company\");\n          MailingAddress.add(\"country\");\n          MailingAddress.add(\"countryCodeV2\");\n          MailingAddress.add(\"firstName\");\n          MailingAddress.add(\"formatted\");\n          MailingAddress.add(\"formattedArea\");\n          MailingAddress.add(\"lastName\");\n          MailingAddress.add(\"latitude\");\n          MailingAddress.add(\"longitude\");\n          MailingAddress.add(\"name\");\n          MailingAddress.add(\"phone\");\n          MailingAddress.add(\"province\");\n          MailingAddress.add(\"provinceCode\");\n          MailingAddress.add(\"zip\");\n        });\n      });\n    });\n    root.add(\"deliveryGroups\", {\n      args: {\n        first: 10\n      }\n    }, function (deliveryGroups) {\n      deliveryGroups.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      deliveryGroups.add(\"edges\", function (edges) {\n        edges.add(\"node\", function (node) {\n          node.add(\"id\");\n          node.add(\"deliveryAddress\", function (deliveryAddress) {\n            deliveryAddress.add(\"address2\");\n            deliveryAddress.add(\"address1\");\n            deliveryAddress.add(\"city\");\n            deliveryAddress.add(\"company\");\n            deliveryAddress.add(\"country\");\n            deliveryAddress.add(\"countryCodeV2\");\n            deliveryAddress.add(\"firstName\");\n            deliveryAddress.add(\"formatted\");\n            deliveryAddress.add(\"formattedArea\");\n            deliveryAddress.add(\"lastName\");\n            deliveryAddress.add(\"latitude\");\n            deliveryAddress.add(\"longitude\");\n            deliveryAddress.add(\"name\");\n            deliveryAddress.add(\"phone\");\n            deliveryAddress.add(\"province\");\n            deliveryAddress.add(\"provinceCode\");\n          });\n          node.add(\"deliveryOptions\", function (deliveryOptions) {\n            deliveryOptions.add(\"code\");\n            deliveryOptions.add(\"deliveryMethodType\");\n            deliveryOptions.add(\"description\");\n            deliveryOptions.add(\"estimatedCost\", function (estimatedCost) {\n              estimatedCost.add(\"amount\");\n              estimatedCost.add(\"currencyCode\");\n            });\n            deliveryOptions.add(\"handle\");\n            deliveryOptions.add(\"title\");\n          });\n          node.add(\"selectedDeliveryOption\", function (selectedDeliveryOption) {\n            selectedDeliveryOption.add(\"code\");\n            selectedDeliveryOption.add(\"deliveryMethodType\");\n            selectedDeliveryOption.add(\"description\");\n            selectedDeliveryOption.add(\"estimatedCost\", function (estimatedCost) {\n              estimatedCost.add(\"amount\");\n              estimatedCost.add(\"currencyCode\");\n            });\n            selectedDeliveryOption.add(\"handle\");\n            selectedDeliveryOption.add(\"title\");\n          });\n          node.add(\"cartLines\", {\n            args: {\n              first: 250\n            }\n          }, function (cartLines) {\n            cartLines.add(\"pageInfo\", function (pageInfo) {\n              pageInfo.add(\"hasNextPage\");\n              pageInfo.add(\"hasPreviousPage\");\n            });\n            cartLines.add(\"edges\", function (edges) {\n              edges.add(\"cursor\");\n              edges.add(\"node\", function (node) {\n                node.add(\"id\");\n              });\n            });\n          });\n        });\n      });\n    });\n    root.add(\"appliedGiftCards\", function (appliedGiftCards) {\n      appliedGiftCards.addFragment(spreads.AppliedGiftCardFragment);\n    });\n    root.add(\"note\");\n  });\n  spreads.CartUserErrorFragment = document.defineFragment(\"CartUserErrorFragment\", \"CartUserError\", function (root) {\n    root.add(\"field\");\n    root.add(\"message\");\n    root.add(\"code\");\n  });\n  spreads.CartWarningFragment = document.defineFragment(\"CartWarningFragment\", \"CartWarning\", function (root) {\n    root.add(\"code\");\n    root.add(\"message\");\n  });\n  document.addMutation(\"CartDiscountCodesUpdate\", [variables.CartDiscountCodesUpdate.cartId, variables.CartDiscountCodesUpdate.discountCodes], function (root) {\n    root.add(\"cartDiscountCodesUpdate\", {\n      args: {\n        cartId: variables.CartDiscountCodesUpdate.cartId,\n        discountCodes: variables.CartDiscountCodesUpdate.discountCodes\n      }\n    }, function (cartDiscountCodesUpdate) {\n      cartDiscountCodesUpdate.add(\"cart\", function (cart) {\n        cart.addFragment(spreads.CartFragment);\n      });\n      cartDiscountCodesUpdate.add(\"userErrors\", function (userErrors) {\n        userErrors.addFragment(spreads.CartUserErrorFragment);\n      });\n      cartDiscountCodesUpdate.add(\"warnings\", function (warnings) {\n        warnings.addFragment(spreads.CartWarningFragment);\n      });\n    });\n  });\n  return document;\n}\n\nfunction query$17(client) {\n  var document = client.document();\n  var spreads = {};\n  var variables = {};\n  variables.CartGiftCardCodesUpdate = {};\n  variables.CartGiftCardCodesUpdate.cartId = client.variable(\"cartId\", \"ID!\");\n  variables.CartGiftCardCodesUpdate.giftCardCodes = client.variable(\"giftCardCodes\", \"[String!]!\");\n  spreads.CartLineFragment = document.defineFragment(\"CartLineFragment\", \"BaseCartLine\", function (root) {\n    root.add(\"id\");\n    root.add(\"merchandise\", function (merchandise) {\n      merchandise.addInlineFragmentOn(\"ProductVariant\", function (ProductVariant) {\n        ProductVariant.add(\"id\");\n        ProductVariant.add(\"title\");\n        ProductVariant.add(\"image\", function (image) {\n          image.add(\"id\");\n          image.add(\"url\", {\n            alias: \"src\"\n          });\n          image.add(\"altText\");\n          image.add(\"width\");\n          image.add(\"height\");\n        });\n        ProductVariant.add(\"product\", function (product) {\n          product.add(\"id\");\n          product.add(\"handle\");\n          product.add(\"title\");\n        });\n        ProductVariant.add(\"weight\");\n        ProductVariant.add(\"availableForSale\", {\n          alias: \"available\"\n        });\n        ProductVariant.add(\"sku\");\n        ProductVariant.add(\"selectedOptions\", function (selectedOptions) {\n          selectedOptions.add(\"name\");\n          selectedOptions.add(\"value\");\n        });\n        ProductVariant.add(\"compareAtPrice\", function (compareAtPrice) {\n          compareAtPrice.add(\"amount\");\n          compareAtPrice.add(\"currencyCode\");\n        });\n        ProductVariant.add(\"price\", function (price) {\n          price.add(\"amount\");\n          price.add(\"currencyCode\");\n        });\n        ProductVariant.add(\"unitPrice\", function (unitPrice) {\n          unitPrice.add(\"amount\");\n          unitPrice.add(\"currencyCode\");\n        });\n        ProductVariant.add(\"unitPriceMeasurement\", function (unitPriceMeasurement) {\n          unitPriceMeasurement.add(\"measuredType\");\n          unitPriceMeasurement.add(\"quantityUnit\");\n          unitPriceMeasurement.add(\"quantityValue\");\n          unitPriceMeasurement.add(\"referenceUnit\");\n          unitPriceMeasurement.add(\"referenceValue\");\n        });\n      });\n    });\n    root.add(\"quantity\");\n    root.add(\"attributes\", function (attributes) {\n      attributes.add(\"key\");\n      attributes.add(\"value\");\n    });\n    root.add(\"cost\", function (cost) {\n      cost.add(\"totalAmount\", function (totalAmount) {\n        totalAmount.add(\"amount\");\n        totalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"subtotalAmount\", function (subtotalAmount) {\n        subtotalAmount.add(\"amount\");\n        subtotalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"amountPerQuantity\", function (amountPerQuantity) {\n        amountPerQuantity.add(\"amount\");\n        amountPerQuantity.add(\"currencyCode\");\n      });\n      cost.add(\"compareAtAmountPerQuantity\", function (compareAtAmountPerQuantity) {\n        compareAtAmountPerQuantity.add(\"amount\");\n        compareAtAmountPerQuantity.add(\"currencyCode\");\n      });\n    });\n    root.add(\"discountAllocations\", function (discountAllocations) {\n      discountAllocations.add(\"discountedAmount\", function (discountedAmount) {\n        discountedAmount.add(\"amount\");\n        discountedAmount.add(\"currencyCode\");\n      });\n      discountAllocations.add(\"discountApplication\", function (discountApplication) {\n        discountApplication.add(\"targetType\");\n        discountApplication.add(\"allocationMethod\");\n        discountApplication.add(\"targetSelection\");\n        discountApplication.add(\"value\", function (value) {\n          value.addInlineFragmentOn(\"PricingPercentageValue\", function (PricingPercentageValue) {\n            PricingPercentageValue.add(\"percentage\");\n          });\n          value.addInlineFragmentOn(\"MoneyV2\", function (MoneyV2) {\n            MoneyV2.add(\"amount\");\n            MoneyV2.add(\"currencyCode\");\n          });\n        });\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCodeDiscountAllocation\", function (CartCodeDiscountAllocation) {\n        CartCodeDiscountAllocation.add(\"code\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartAutomaticDiscountAllocation\", function (CartAutomaticDiscountAllocation) {\n        CartAutomaticDiscountAllocation.add(\"title\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCustomDiscountAllocation\", function (CartCustomDiscountAllocation) {\n        CartCustomDiscountAllocation.add(\"title\");\n      });\n    });\n  });\n  spreads.AppliedGiftCardFragment = document.defineFragment(\"AppliedGiftCardFragment\", \"AppliedGiftCard\", function (root) {\n    root.add(\"amountUsed\", function (amountUsed) {\n      amountUsed.add(\"amount\");\n      amountUsed.add(\"currencyCode\");\n    });\n    root.add(\"amountUsed\", {\n      alias: \"amountUsedV2\"\n    }, function (amountUsed) {\n      amountUsed.add(\"amount\");\n      amountUsed.add(\"currencyCode\");\n    });\n    root.add(\"balance\", function (balance) {\n      balance.add(\"amount\");\n      balance.add(\"currencyCode\");\n    });\n    root.add(\"balance\", {\n      alias: \"balanceV2\"\n    }, function (balance) {\n      balance.add(\"amount\");\n      balance.add(\"currencyCode\");\n    });\n    root.add(\"presentmentAmountUsed\", function (presentmentAmountUsed) {\n      presentmentAmountUsed.add(\"amount\");\n      presentmentAmountUsed.add(\"currencyCode\");\n    });\n    root.add(\"id\");\n    root.add(\"lastCharacters\");\n  });\n  spreads.CartFragment = document.defineFragment(\"CartFragment\", \"Cart\", function (root) {\n    root.add(\"id\");\n    root.add(\"createdAt\");\n    root.add(\"updatedAt\");\n    root.add(\"lines\", {\n      args: {\n        first: 250\n      }\n    }, function (lines) {\n      lines.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      lines.add(\"edges\", function (edges) {\n        edges.add(\"cursor\");\n        edges.add(\"node\", function (node) {\n          node.addFragment(spreads.CartLineFragment);\n        });\n      });\n    });\n    root.add(\"attributes\", function (attributes) {\n      attributes.add(\"key\");\n      attributes.add(\"value\");\n    });\n    root.add(\"cost\", function (cost) {\n      cost.add(\"checkoutChargeAmount\", function (checkoutChargeAmount) {\n        checkoutChargeAmount.add(\"amount\");\n        checkoutChargeAmount.add(\"currencyCode\");\n      });\n      cost.add(\"totalAmount\", function (totalAmount) {\n        totalAmount.add(\"amount\");\n        totalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"subtotalAmount\", function (subtotalAmount) {\n        subtotalAmount.add(\"amount\");\n        subtotalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"totalTaxAmount\", function (totalTaxAmount) {\n        totalTaxAmount.add(\"amount\");\n        totalTaxAmount.add(\"currencyCode\");\n      });\n      cost.add(\"totalDutyAmount\", function (totalDutyAmount) {\n        totalDutyAmount.add(\"amount\");\n        totalDutyAmount.add(\"currencyCode\");\n      });\n    });\n    root.add(\"checkoutUrl\");\n    root.add(\"discountCodes\", function (discountCodes) {\n      discountCodes.add(\"applicable\");\n      discountCodes.add(\"code\");\n    });\n    root.add(\"discountAllocations\", function (discountAllocations) {\n      discountAllocations.add(\"discountedAmount\", function (discountedAmount) {\n        discountedAmount.add(\"amount\");\n        discountedAmount.add(\"currencyCode\");\n      });\n      discountAllocations.add(\"discountApplication\", function (discountApplication) {\n        discountApplication.add(\"targetType\");\n        discountApplication.add(\"allocationMethod\");\n        discountApplication.add(\"targetSelection\");\n        discountApplication.add(\"value\", function (value) {\n          value.addInlineFragmentOn(\"PricingPercentageValue\", function (PricingPercentageValue) {\n            PricingPercentageValue.add(\"percentage\");\n          });\n          value.addInlineFragmentOn(\"MoneyV2\", function (MoneyV2) {\n            MoneyV2.add(\"amount\");\n            MoneyV2.add(\"currencyCode\");\n          });\n        });\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCodeDiscountAllocation\", function (CartCodeDiscountAllocation) {\n        CartCodeDiscountAllocation.add(\"code\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartAutomaticDiscountAllocation\", function (CartAutomaticDiscountAllocation) {\n        CartAutomaticDiscountAllocation.add(\"title\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCustomDiscountAllocation\", function (CartCustomDiscountAllocation) {\n        CartCustomDiscountAllocation.add(\"title\");\n      });\n    });\n    root.add(\"buyerIdentity\", function (buyerIdentity) {\n      buyerIdentity.add(\"countryCode\");\n      buyerIdentity.add(\"preferences\", function (preferences) {\n        preferences.add(\"delivery\", function (delivery) {\n          delivery.add(\"coordinates\", function (coordinates) {\n            coordinates.add(\"latitude\");\n            coordinates.add(\"longitude\");\n            coordinates.add(\"countryCode\");\n          });\n          delivery.add(\"deliveryMethod\");\n          delivery.add(\"pickupHandle\");\n        });\n        preferences.add(\"wallet\");\n      });\n      buyerIdentity.add(\"email\");\n      buyerIdentity.add(\"phone\");\n      buyerIdentity.add(\"customer\", function (customer) {\n        customer.add(\"email\");\n      });\n      buyerIdentity.add(\"deliveryAddressPreferences\", function (deliveryAddressPreferences) {\n        deliveryAddressPreferences.addInlineFragmentOn(\"MailingAddress\", function (MailingAddress) {\n          MailingAddress.add(\"address1\");\n          MailingAddress.add(\"address2\");\n          MailingAddress.add(\"city\");\n          MailingAddress.add(\"company\");\n          MailingAddress.add(\"country\");\n          MailingAddress.add(\"countryCodeV2\");\n          MailingAddress.add(\"firstName\");\n          MailingAddress.add(\"formatted\");\n          MailingAddress.add(\"formattedArea\");\n          MailingAddress.add(\"lastName\");\n          MailingAddress.add(\"latitude\");\n          MailingAddress.add(\"longitude\");\n          MailingAddress.add(\"name\");\n          MailingAddress.add(\"phone\");\n          MailingAddress.add(\"province\");\n          MailingAddress.add(\"provinceCode\");\n          MailingAddress.add(\"zip\");\n        });\n      });\n    });\n    root.add(\"deliveryGroups\", {\n      args: {\n        first: 10\n      }\n    }, function (deliveryGroups) {\n      deliveryGroups.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      deliveryGroups.add(\"edges\", function (edges) {\n        edges.add(\"node\", function (node) {\n          node.add(\"id\");\n          node.add(\"deliveryAddress\", function (deliveryAddress) {\n            deliveryAddress.add(\"address2\");\n            deliveryAddress.add(\"address1\");\n            deliveryAddress.add(\"city\");\n            deliveryAddress.add(\"company\");\n            deliveryAddress.add(\"country\");\n            deliveryAddress.add(\"countryCodeV2\");\n            deliveryAddress.add(\"firstName\");\n            deliveryAddress.add(\"formatted\");\n            deliveryAddress.add(\"formattedArea\");\n            deliveryAddress.add(\"lastName\");\n            deliveryAddress.add(\"latitude\");\n            deliveryAddress.add(\"longitude\");\n            deliveryAddress.add(\"name\");\n            deliveryAddress.add(\"phone\");\n            deliveryAddress.add(\"province\");\n            deliveryAddress.add(\"provinceCode\");\n          });\n          node.add(\"deliveryOptions\", function (deliveryOptions) {\n            deliveryOptions.add(\"code\");\n            deliveryOptions.add(\"deliveryMethodType\");\n            deliveryOptions.add(\"description\");\n            deliveryOptions.add(\"estimatedCost\", function (estimatedCost) {\n              estimatedCost.add(\"amount\");\n              estimatedCost.add(\"currencyCode\");\n            });\n            deliveryOptions.add(\"handle\");\n            deliveryOptions.add(\"title\");\n          });\n          node.add(\"selectedDeliveryOption\", function (selectedDeliveryOption) {\n            selectedDeliveryOption.add(\"code\");\n            selectedDeliveryOption.add(\"deliveryMethodType\");\n            selectedDeliveryOption.add(\"description\");\n            selectedDeliveryOption.add(\"estimatedCost\", function (estimatedCost) {\n              estimatedCost.add(\"amount\");\n              estimatedCost.add(\"currencyCode\");\n            });\n            selectedDeliveryOption.add(\"handle\");\n            selectedDeliveryOption.add(\"title\");\n          });\n          node.add(\"cartLines\", {\n            args: {\n              first: 250\n            }\n          }, function (cartLines) {\n            cartLines.add(\"pageInfo\", function (pageInfo) {\n              pageInfo.add(\"hasNextPage\");\n              pageInfo.add(\"hasPreviousPage\");\n            });\n            cartLines.add(\"edges\", function (edges) {\n              edges.add(\"cursor\");\n              edges.add(\"node\", function (node) {\n                node.add(\"id\");\n              });\n            });\n          });\n        });\n      });\n    });\n    root.add(\"appliedGiftCards\", function (appliedGiftCards) {\n      appliedGiftCards.addFragment(spreads.AppliedGiftCardFragment);\n    });\n    root.add(\"note\");\n  });\n  spreads.CartUserErrorFragment = document.defineFragment(\"CartUserErrorFragment\", \"CartUserError\", function (root) {\n    root.add(\"field\");\n    root.add(\"message\");\n    root.add(\"code\");\n  });\n  spreads.CartWarningFragment = document.defineFragment(\"CartWarningFragment\", \"CartWarning\", function (root) {\n    root.add(\"code\");\n    root.add(\"message\");\n  });\n  document.addMutation(\"CartGiftCardCodesUpdate\", [variables.CartGiftCardCodesUpdate.cartId, variables.CartGiftCardCodesUpdate.giftCardCodes], function (root) {\n    root.add(\"cartGiftCardCodesUpdate\", {\n      args: {\n        cartId: variables.CartGiftCardCodesUpdate.cartId,\n        giftCardCodes: variables.CartGiftCardCodesUpdate.giftCardCodes\n      }\n    }, function (cartGiftCardCodesUpdate) {\n      cartGiftCardCodesUpdate.add(\"cart\", function (cart) {\n        cart.addFragment(spreads.CartFragment);\n      });\n      cartGiftCardCodesUpdate.add(\"userErrors\", function (userErrors) {\n        userErrors.addFragment(spreads.CartUserErrorFragment);\n      });\n      cartGiftCardCodesUpdate.add(\"warnings\", function (warnings) {\n        warnings.addFragment(spreads.CartWarningFragment);\n      });\n    });\n  });\n  return document;\n}\n\nfunction query$18(client) {\n  var document = client.document();\n  var spreads = {};\n  var variables = {};\n  variables.CartLinesAdd = {};\n  variables.CartLinesAdd.cartId = client.variable(\"cartId\", \"ID!\");\n  variables.CartLinesAdd.lines = client.variable(\"lines\", \"[CartLineInput!]!\");\n  spreads.CartLineFragment = document.defineFragment(\"CartLineFragment\", \"BaseCartLine\", function (root) {\n    root.add(\"id\");\n    root.add(\"merchandise\", function (merchandise) {\n      merchandise.addInlineFragmentOn(\"ProductVariant\", function (ProductVariant) {\n        ProductVariant.add(\"id\");\n        ProductVariant.add(\"title\");\n        ProductVariant.add(\"image\", function (image) {\n          image.add(\"id\");\n          image.add(\"url\", {\n            alias: \"src\"\n          });\n          image.add(\"altText\");\n          image.add(\"width\");\n          image.add(\"height\");\n        });\n        ProductVariant.add(\"product\", function (product) {\n          product.add(\"id\");\n          product.add(\"handle\");\n          product.add(\"title\");\n        });\n        ProductVariant.add(\"weight\");\n        ProductVariant.add(\"availableForSale\", {\n          alias: \"available\"\n        });\n        ProductVariant.add(\"sku\");\n        ProductVariant.add(\"selectedOptions\", function (selectedOptions) {\n          selectedOptions.add(\"name\");\n          selectedOptions.add(\"value\");\n        });\n        ProductVariant.add(\"compareAtPrice\", function (compareAtPrice) {\n          compareAtPrice.add(\"amount\");\n          compareAtPrice.add(\"currencyCode\");\n        });\n        ProductVariant.add(\"price\", function (price) {\n          price.add(\"amount\");\n          price.add(\"currencyCode\");\n        });\n        ProductVariant.add(\"unitPrice\", function (unitPrice) {\n          unitPrice.add(\"amount\");\n          unitPrice.add(\"currencyCode\");\n        });\n        ProductVariant.add(\"unitPriceMeasurement\", function (unitPriceMeasurement) {\n          unitPriceMeasurement.add(\"measuredType\");\n          unitPriceMeasurement.add(\"quantityUnit\");\n          unitPriceMeasurement.add(\"quantityValue\");\n          unitPriceMeasurement.add(\"referenceUnit\");\n          unitPriceMeasurement.add(\"referenceValue\");\n        });\n      });\n    });\n    root.add(\"quantity\");\n    root.add(\"attributes\", function (attributes) {\n      attributes.add(\"key\");\n      attributes.add(\"value\");\n    });\n    root.add(\"cost\", function (cost) {\n      cost.add(\"totalAmount\", function (totalAmount) {\n        totalAmount.add(\"amount\");\n        totalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"subtotalAmount\", function (subtotalAmount) {\n        subtotalAmount.add(\"amount\");\n        subtotalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"amountPerQuantity\", function (amountPerQuantity) {\n        amountPerQuantity.add(\"amount\");\n        amountPerQuantity.add(\"currencyCode\");\n      });\n      cost.add(\"compareAtAmountPerQuantity\", function (compareAtAmountPerQuantity) {\n        compareAtAmountPerQuantity.add(\"amount\");\n        compareAtAmountPerQuantity.add(\"currencyCode\");\n      });\n    });\n    root.add(\"discountAllocations\", function (discountAllocations) {\n      discountAllocations.add(\"discountedAmount\", function (discountedAmount) {\n        discountedAmount.add(\"amount\");\n        discountedAmount.add(\"currencyCode\");\n      });\n      discountAllocations.add(\"discountApplication\", function (discountApplication) {\n        discountApplication.add(\"targetType\");\n        discountApplication.add(\"allocationMethod\");\n        discountApplication.add(\"targetSelection\");\n        discountApplication.add(\"value\", function (value) {\n          value.addInlineFragmentOn(\"PricingPercentageValue\", function (PricingPercentageValue) {\n            PricingPercentageValue.add(\"percentage\");\n          });\n          value.addInlineFragmentOn(\"MoneyV2\", function (MoneyV2) {\n            MoneyV2.add(\"amount\");\n            MoneyV2.add(\"currencyCode\");\n          });\n        });\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCodeDiscountAllocation\", function (CartCodeDiscountAllocation) {\n        CartCodeDiscountAllocation.add(\"code\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartAutomaticDiscountAllocation\", function (CartAutomaticDiscountAllocation) {\n        CartAutomaticDiscountAllocation.add(\"title\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCustomDiscountAllocation\", function (CartCustomDiscountAllocation) {\n        CartCustomDiscountAllocation.add(\"title\");\n      });\n    });\n  });\n  spreads.AppliedGiftCardFragment = document.defineFragment(\"AppliedGiftCardFragment\", \"AppliedGiftCard\", function (root) {\n    root.add(\"amountUsed\", function (amountUsed) {\n      amountUsed.add(\"amount\");\n      amountUsed.add(\"currencyCode\");\n    });\n    root.add(\"amountUsed\", {\n      alias: \"amountUsedV2\"\n    }, function (amountUsed) {\n      amountUsed.add(\"amount\");\n      amountUsed.add(\"currencyCode\");\n    });\n    root.add(\"balance\", function (balance) {\n      balance.add(\"amount\");\n      balance.add(\"currencyCode\");\n    });\n    root.add(\"balance\", {\n      alias: \"balanceV2\"\n    }, function (balance) {\n      balance.add(\"amount\");\n      balance.add(\"currencyCode\");\n    });\n    root.add(\"presentmentAmountUsed\", function (presentmentAmountUsed) {\n      presentmentAmountUsed.add(\"amount\");\n      presentmentAmountUsed.add(\"currencyCode\");\n    });\n    root.add(\"id\");\n    root.add(\"lastCharacters\");\n  });\n  spreads.CartFragment = document.defineFragment(\"CartFragment\", \"Cart\", function (root) {\n    root.add(\"id\");\n    root.add(\"createdAt\");\n    root.add(\"updatedAt\");\n    root.add(\"lines\", {\n      args: {\n        first: 250\n      }\n    }, function (lines) {\n      lines.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      lines.add(\"edges\", function (edges) {\n        edges.add(\"cursor\");\n        edges.add(\"node\", function (node) {\n          node.addFragment(spreads.CartLineFragment);\n        });\n      });\n    });\n    root.add(\"attributes\", function (attributes) {\n      attributes.add(\"key\");\n      attributes.add(\"value\");\n    });\n    root.add(\"cost\", function (cost) {\n      cost.add(\"checkoutChargeAmount\", function (checkoutChargeAmount) {\n        checkoutChargeAmount.add(\"amount\");\n        checkoutChargeAmount.add(\"currencyCode\");\n      });\n      cost.add(\"totalAmount\", function (totalAmount) {\n        totalAmount.add(\"amount\");\n        totalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"subtotalAmount\", function (subtotalAmount) {\n        subtotalAmount.add(\"amount\");\n        subtotalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"totalTaxAmount\", function (totalTaxAmount) {\n        totalTaxAmount.add(\"amount\");\n        totalTaxAmount.add(\"currencyCode\");\n      });\n      cost.add(\"totalDutyAmount\", function (totalDutyAmount) {\n        totalDutyAmount.add(\"amount\");\n        totalDutyAmount.add(\"currencyCode\");\n      });\n    });\n    root.add(\"checkoutUrl\");\n    root.add(\"discountCodes\", function (discountCodes) {\n      discountCodes.add(\"applicable\");\n      discountCodes.add(\"code\");\n    });\n    root.add(\"discountAllocations\", function (discountAllocations) {\n      discountAllocations.add(\"discountedAmount\", function (discountedAmount) {\n        discountedAmount.add(\"amount\");\n        discountedAmount.add(\"currencyCode\");\n      });\n      discountAllocations.add(\"discountApplication\", function (discountApplication) {\n        discountApplication.add(\"targetType\");\n        discountApplication.add(\"allocationMethod\");\n        discountApplication.add(\"targetSelection\");\n        discountApplication.add(\"value\", function (value) {\n          value.addInlineFragmentOn(\"PricingPercentageValue\", function (PricingPercentageValue) {\n            PricingPercentageValue.add(\"percentage\");\n          });\n          value.addInlineFragmentOn(\"MoneyV2\", function (MoneyV2) {\n            MoneyV2.add(\"amount\");\n            MoneyV2.add(\"currencyCode\");\n          });\n        });\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCodeDiscountAllocation\", function (CartCodeDiscountAllocation) {\n        CartCodeDiscountAllocation.add(\"code\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartAutomaticDiscountAllocation\", function (CartAutomaticDiscountAllocation) {\n        CartAutomaticDiscountAllocation.add(\"title\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCustomDiscountAllocation\", function (CartCustomDiscountAllocation) {\n        CartCustomDiscountAllocation.add(\"title\");\n      });\n    });\n    root.add(\"buyerIdentity\", function (buyerIdentity) {\n      buyerIdentity.add(\"countryCode\");\n      buyerIdentity.add(\"preferences\", function (preferences) {\n        preferences.add(\"delivery\", function (delivery) {\n          delivery.add(\"coordinates\", function (coordinates) {\n            coordinates.add(\"latitude\");\n            coordinates.add(\"longitude\");\n            coordinates.add(\"countryCode\");\n          });\n          delivery.add(\"deliveryMethod\");\n          delivery.add(\"pickupHandle\");\n        });\n        preferences.add(\"wallet\");\n      });\n      buyerIdentity.add(\"email\");\n      buyerIdentity.add(\"phone\");\n      buyerIdentity.add(\"customer\", function (customer) {\n        customer.add(\"email\");\n      });\n      buyerIdentity.add(\"deliveryAddressPreferences\", function (deliveryAddressPreferences) {\n        deliveryAddressPreferences.addInlineFragmentOn(\"MailingAddress\", function (MailingAddress) {\n          MailingAddress.add(\"address1\");\n          MailingAddress.add(\"address2\");\n          MailingAddress.add(\"city\");\n          MailingAddress.add(\"company\");\n          MailingAddress.add(\"country\");\n          MailingAddress.add(\"countryCodeV2\");\n          MailingAddress.add(\"firstName\");\n          MailingAddress.add(\"formatted\");\n          MailingAddress.add(\"formattedArea\");\n          MailingAddress.add(\"lastName\");\n          MailingAddress.add(\"latitude\");\n          MailingAddress.add(\"longitude\");\n          MailingAddress.add(\"name\");\n          MailingAddress.add(\"phone\");\n          MailingAddress.add(\"province\");\n          MailingAddress.add(\"provinceCode\");\n          MailingAddress.add(\"zip\");\n        });\n      });\n    });\n    root.add(\"deliveryGroups\", {\n      args: {\n        first: 10\n      }\n    }, function (deliveryGroups) {\n      deliveryGroups.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      deliveryGroups.add(\"edges\", function (edges) {\n        edges.add(\"node\", function (node) {\n          node.add(\"id\");\n          node.add(\"deliveryAddress\", function (deliveryAddress) {\n            deliveryAddress.add(\"address2\");\n            deliveryAddress.add(\"address1\");\n            deliveryAddress.add(\"city\");\n            deliveryAddress.add(\"company\");\n            deliveryAddress.add(\"country\");\n            deliveryAddress.add(\"countryCodeV2\");\n            deliveryAddress.add(\"firstName\");\n            deliveryAddress.add(\"formatted\");\n            deliveryAddress.add(\"formattedArea\");\n            deliveryAddress.add(\"lastName\");\n            deliveryAddress.add(\"latitude\");\n            deliveryAddress.add(\"longitude\");\n            deliveryAddress.add(\"name\");\n            deliveryAddress.add(\"phone\");\n            deliveryAddress.add(\"province\");\n            deliveryAddress.add(\"provinceCode\");\n          });\n          node.add(\"deliveryOptions\", function (deliveryOptions) {\n            deliveryOptions.add(\"code\");\n            deliveryOptions.add(\"deliveryMethodType\");\n            deliveryOptions.add(\"description\");\n            deliveryOptions.add(\"estimatedCost\", function (estimatedCost) {\n              estimatedCost.add(\"amount\");\n              estimatedCost.add(\"currencyCode\");\n            });\n            deliveryOptions.add(\"handle\");\n            deliveryOptions.add(\"title\");\n          });\n          node.add(\"selectedDeliveryOption\", function (selectedDeliveryOption) {\n            selectedDeliveryOption.add(\"code\");\n            selectedDeliveryOption.add(\"deliveryMethodType\");\n            selectedDeliveryOption.add(\"description\");\n            selectedDeliveryOption.add(\"estimatedCost\", function (estimatedCost) {\n              estimatedCost.add(\"amount\");\n              estimatedCost.add(\"currencyCode\");\n            });\n            selectedDeliveryOption.add(\"handle\");\n            selectedDeliveryOption.add(\"title\");\n          });\n          node.add(\"cartLines\", {\n            args: {\n              first: 250\n            }\n          }, function (cartLines) {\n            cartLines.add(\"pageInfo\", function (pageInfo) {\n              pageInfo.add(\"hasNextPage\");\n              pageInfo.add(\"hasPreviousPage\");\n            });\n            cartLines.add(\"edges\", function (edges) {\n              edges.add(\"cursor\");\n              edges.add(\"node\", function (node) {\n                node.add(\"id\");\n              });\n            });\n          });\n        });\n      });\n    });\n    root.add(\"appliedGiftCards\", function (appliedGiftCards) {\n      appliedGiftCards.addFragment(spreads.AppliedGiftCardFragment);\n    });\n    root.add(\"note\");\n  });\n  spreads.CartUserErrorFragment = document.defineFragment(\"CartUserErrorFragment\", \"CartUserError\", function (root) {\n    root.add(\"field\");\n    root.add(\"message\");\n    root.add(\"code\");\n  });\n  spreads.CartWarningFragment = document.defineFragment(\"CartWarningFragment\", \"CartWarning\", function (root) {\n    root.add(\"code\");\n    root.add(\"message\");\n  });\n  document.addMutation(\"CartLinesAdd\", [variables.CartLinesAdd.cartId, variables.CartLinesAdd.lines], function (root) {\n    root.add(\"cartLinesAdd\", {\n      args: {\n        cartId: variables.CartLinesAdd.cartId,\n        lines: variables.CartLinesAdd.lines\n      }\n    }, function (cartLinesAdd) {\n      cartLinesAdd.add(\"cart\", function (cart) {\n        cart.addFragment(spreads.CartFragment);\n      });\n      cartLinesAdd.add(\"userErrors\", function (userErrors) {\n        userErrors.addFragment(spreads.CartUserErrorFragment);\n      });\n      cartLinesAdd.add(\"warnings\", function (warnings) {\n        warnings.addFragment(spreads.CartWarningFragment);\n      });\n    });\n  });\n  return document;\n}\n\nfunction query$19(client) {\n  var document = client.document();\n  var spreads = {};\n  var variables = {};\n  variables.CartLinesRemove = {};\n  variables.CartLinesRemove.cartId = client.variable(\"cartId\", \"ID!\");\n  variables.CartLinesRemove.lineIds = client.variable(\"lineIds\", \"[ID!]!\");\n  spreads.CartLineFragment = document.defineFragment(\"CartLineFragment\", \"BaseCartLine\", function (root) {\n    root.add(\"id\");\n    root.add(\"merchandise\", function (merchandise) {\n      merchandise.addInlineFragmentOn(\"ProductVariant\", function (ProductVariant) {\n        ProductVariant.add(\"id\");\n        ProductVariant.add(\"title\");\n        ProductVariant.add(\"image\", function (image) {\n          image.add(\"id\");\n          image.add(\"url\", {\n            alias: \"src\"\n          });\n          image.add(\"altText\");\n          image.add(\"width\");\n          image.add(\"height\");\n        });\n        ProductVariant.add(\"product\", function (product) {\n          product.add(\"id\");\n          product.add(\"handle\");\n          product.add(\"title\");\n        });\n        ProductVariant.add(\"weight\");\n        ProductVariant.add(\"availableForSale\", {\n          alias: \"available\"\n        });\n        ProductVariant.add(\"sku\");\n        ProductVariant.add(\"selectedOptions\", function (selectedOptions) {\n          selectedOptions.add(\"name\");\n          selectedOptions.add(\"value\");\n        });\n        ProductVariant.add(\"compareAtPrice\", function (compareAtPrice) {\n          compareAtPrice.add(\"amount\");\n          compareAtPrice.add(\"currencyCode\");\n        });\n        ProductVariant.add(\"price\", function (price) {\n          price.add(\"amount\");\n          price.add(\"currencyCode\");\n        });\n        ProductVariant.add(\"unitPrice\", function (unitPrice) {\n          unitPrice.add(\"amount\");\n          unitPrice.add(\"currencyCode\");\n        });\n        ProductVariant.add(\"unitPriceMeasurement\", function (unitPriceMeasurement) {\n          unitPriceMeasurement.add(\"measuredType\");\n          unitPriceMeasurement.add(\"quantityUnit\");\n          unitPriceMeasurement.add(\"quantityValue\");\n          unitPriceMeasurement.add(\"referenceUnit\");\n          unitPriceMeasurement.add(\"referenceValue\");\n        });\n      });\n    });\n    root.add(\"quantity\");\n    root.add(\"attributes\", function (attributes) {\n      attributes.add(\"key\");\n      attributes.add(\"value\");\n    });\n    root.add(\"cost\", function (cost) {\n      cost.add(\"totalAmount\", function (totalAmount) {\n        totalAmount.add(\"amount\");\n        totalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"subtotalAmount\", function (subtotalAmount) {\n        subtotalAmount.add(\"amount\");\n        subtotalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"amountPerQuantity\", function (amountPerQuantity) {\n        amountPerQuantity.add(\"amount\");\n        amountPerQuantity.add(\"currencyCode\");\n      });\n      cost.add(\"compareAtAmountPerQuantity\", function (compareAtAmountPerQuantity) {\n        compareAtAmountPerQuantity.add(\"amount\");\n        compareAtAmountPerQuantity.add(\"currencyCode\");\n      });\n    });\n    root.add(\"discountAllocations\", function (discountAllocations) {\n      discountAllocations.add(\"discountedAmount\", function (discountedAmount) {\n        discountedAmount.add(\"amount\");\n        discountedAmount.add(\"currencyCode\");\n      });\n      discountAllocations.add(\"discountApplication\", function (discountApplication) {\n        discountApplication.add(\"targetType\");\n        discountApplication.add(\"allocationMethod\");\n        discountApplication.add(\"targetSelection\");\n        discountApplication.add(\"value\", function (value) {\n          value.addInlineFragmentOn(\"PricingPercentageValue\", function (PricingPercentageValue) {\n            PricingPercentageValue.add(\"percentage\");\n          });\n          value.addInlineFragmentOn(\"MoneyV2\", function (MoneyV2) {\n            MoneyV2.add(\"amount\");\n            MoneyV2.add(\"currencyCode\");\n          });\n        });\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCodeDiscountAllocation\", function (CartCodeDiscountAllocation) {\n        CartCodeDiscountAllocation.add(\"code\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartAutomaticDiscountAllocation\", function (CartAutomaticDiscountAllocation) {\n        CartAutomaticDiscountAllocation.add(\"title\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCustomDiscountAllocation\", function (CartCustomDiscountAllocation) {\n        CartCustomDiscountAllocation.add(\"title\");\n      });\n    });\n  });\n  spreads.AppliedGiftCardFragment = document.defineFragment(\"AppliedGiftCardFragment\", \"AppliedGiftCard\", function (root) {\n    root.add(\"amountUsed\", function (amountUsed) {\n      amountUsed.add(\"amount\");\n      amountUsed.add(\"currencyCode\");\n    });\n    root.add(\"amountUsed\", {\n      alias: \"amountUsedV2\"\n    }, function (amountUsed) {\n      amountUsed.add(\"amount\");\n      amountUsed.add(\"currencyCode\");\n    });\n    root.add(\"balance\", function (balance) {\n      balance.add(\"amount\");\n      balance.add(\"currencyCode\");\n    });\n    root.add(\"balance\", {\n      alias: \"balanceV2\"\n    }, function (balance) {\n      balance.add(\"amount\");\n      balance.add(\"currencyCode\");\n    });\n    root.add(\"presentmentAmountUsed\", function (presentmentAmountUsed) {\n      presentmentAmountUsed.add(\"amount\");\n      presentmentAmountUsed.add(\"currencyCode\");\n    });\n    root.add(\"id\");\n    root.add(\"lastCharacters\");\n  });\n  spreads.CartFragment = document.defineFragment(\"CartFragment\", \"Cart\", function (root) {\n    root.add(\"id\");\n    root.add(\"createdAt\");\n    root.add(\"updatedAt\");\n    root.add(\"lines\", {\n      args: {\n        first: 250\n      }\n    }, function (lines) {\n      lines.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      lines.add(\"edges\", function (edges) {\n        edges.add(\"cursor\");\n        edges.add(\"node\", function (node) {\n          node.addFragment(spreads.CartLineFragment);\n        });\n      });\n    });\n    root.add(\"attributes\", function (attributes) {\n      attributes.add(\"key\");\n      attributes.add(\"value\");\n    });\n    root.add(\"cost\", function (cost) {\n      cost.add(\"checkoutChargeAmount\", function (checkoutChargeAmount) {\n        checkoutChargeAmount.add(\"amount\");\n        checkoutChargeAmount.add(\"currencyCode\");\n      });\n      cost.add(\"totalAmount\", function (totalAmount) {\n        totalAmount.add(\"amount\");\n        totalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"subtotalAmount\", function (subtotalAmount) {\n        subtotalAmount.add(\"amount\");\n        subtotalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"totalTaxAmount\", function (totalTaxAmount) {\n        totalTaxAmount.add(\"amount\");\n        totalTaxAmount.add(\"currencyCode\");\n      });\n      cost.add(\"totalDutyAmount\", function (totalDutyAmount) {\n        totalDutyAmount.add(\"amount\");\n        totalDutyAmount.add(\"currencyCode\");\n      });\n    });\n    root.add(\"checkoutUrl\");\n    root.add(\"discountCodes\", function (discountCodes) {\n      discountCodes.add(\"applicable\");\n      discountCodes.add(\"code\");\n    });\n    root.add(\"discountAllocations\", function (discountAllocations) {\n      discountAllocations.add(\"discountedAmount\", function (discountedAmount) {\n        discountedAmount.add(\"amount\");\n        discountedAmount.add(\"currencyCode\");\n      });\n      discountAllocations.add(\"discountApplication\", function (discountApplication) {\n        discountApplication.add(\"targetType\");\n        discountApplication.add(\"allocationMethod\");\n        discountApplication.add(\"targetSelection\");\n        discountApplication.add(\"value\", function (value) {\n          value.addInlineFragmentOn(\"PricingPercentageValue\", function (PricingPercentageValue) {\n            PricingPercentageValue.add(\"percentage\");\n          });\n          value.addInlineFragmentOn(\"MoneyV2\", function (MoneyV2) {\n            MoneyV2.add(\"amount\");\n            MoneyV2.add(\"currencyCode\");\n          });\n        });\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCodeDiscountAllocation\", function (CartCodeDiscountAllocation) {\n        CartCodeDiscountAllocation.add(\"code\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartAutomaticDiscountAllocation\", function (CartAutomaticDiscountAllocation) {\n        CartAutomaticDiscountAllocation.add(\"title\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCustomDiscountAllocation\", function (CartCustomDiscountAllocation) {\n        CartCustomDiscountAllocation.add(\"title\");\n      });\n    });\n    root.add(\"buyerIdentity\", function (buyerIdentity) {\n      buyerIdentity.add(\"countryCode\");\n      buyerIdentity.add(\"preferences\", function (preferences) {\n        preferences.add(\"delivery\", function (delivery) {\n          delivery.add(\"coordinates\", function (coordinates) {\n            coordinates.add(\"latitude\");\n            coordinates.add(\"longitude\");\n            coordinates.add(\"countryCode\");\n          });\n          delivery.add(\"deliveryMethod\");\n          delivery.add(\"pickupHandle\");\n        });\n        preferences.add(\"wallet\");\n      });\n      buyerIdentity.add(\"email\");\n      buyerIdentity.add(\"phone\");\n      buyerIdentity.add(\"customer\", function (customer) {\n        customer.add(\"email\");\n      });\n      buyerIdentity.add(\"deliveryAddressPreferences\", function (deliveryAddressPreferences) {\n        deliveryAddressPreferences.addInlineFragmentOn(\"MailingAddress\", function (MailingAddress) {\n          MailingAddress.add(\"address1\");\n          MailingAddress.add(\"address2\");\n          MailingAddress.add(\"city\");\n          MailingAddress.add(\"company\");\n          MailingAddress.add(\"country\");\n          MailingAddress.add(\"countryCodeV2\");\n          MailingAddress.add(\"firstName\");\n          MailingAddress.add(\"formatted\");\n          MailingAddress.add(\"formattedArea\");\n          MailingAddress.add(\"lastName\");\n          MailingAddress.add(\"latitude\");\n          MailingAddress.add(\"longitude\");\n          MailingAddress.add(\"name\");\n          MailingAddress.add(\"phone\");\n          MailingAddress.add(\"province\");\n          MailingAddress.add(\"provinceCode\");\n          MailingAddress.add(\"zip\");\n        });\n      });\n    });\n    root.add(\"deliveryGroups\", {\n      args: {\n        first: 10\n      }\n    }, function (deliveryGroups) {\n      deliveryGroups.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      deliveryGroups.add(\"edges\", function (edges) {\n        edges.add(\"node\", function (node) {\n          node.add(\"id\");\n          node.add(\"deliveryAddress\", function (deliveryAddress) {\n            deliveryAddress.add(\"address2\");\n            deliveryAddress.add(\"address1\");\n            deliveryAddress.add(\"city\");\n            deliveryAddress.add(\"company\");\n            deliveryAddress.add(\"country\");\n            deliveryAddress.add(\"countryCodeV2\");\n            deliveryAddress.add(\"firstName\");\n            deliveryAddress.add(\"formatted\");\n            deliveryAddress.add(\"formattedArea\");\n            deliveryAddress.add(\"lastName\");\n            deliveryAddress.add(\"latitude\");\n            deliveryAddress.add(\"longitude\");\n            deliveryAddress.add(\"name\");\n            deliveryAddress.add(\"phone\");\n            deliveryAddress.add(\"province\");\n            deliveryAddress.add(\"provinceCode\");\n          });\n          node.add(\"deliveryOptions\", function (deliveryOptions) {\n            deliveryOptions.add(\"code\");\n            deliveryOptions.add(\"deliveryMethodType\");\n            deliveryOptions.add(\"description\");\n            deliveryOptions.add(\"estimatedCost\", function (estimatedCost) {\n              estimatedCost.add(\"amount\");\n              estimatedCost.add(\"currencyCode\");\n            });\n            deliveryOptions.add(\"handle\");\n            deliveryOptions.add(\"title\");\n          });\n          node.add(\"selectedDeliveryOption\", function (selectedDeliveryOption) {\n            selectedDeliveryOption.add(\"code\");\n            selectedDeliveryOption.add(\"deliveryMethodType\");\n            selectedDeliveryOption.add(\"description\");\n            selectedDeliveryOption.add(\"estimatedCost\", function (estimatedCost) {\n              estimatedCost.add(\"amount\");\n              estimatedCost.add(\"currencyCode\");\n            });\n            selectedDeliveryOption.add(\"handle\");\n            selectedDeliveryOption.add(\"title\");\n          });\n          node.add(\"cartLines\", {\n            args: {\n              first: 250\n            }\n          }, function (cartLines) {\n            cartLines.add(\"pageInfo\", function (pageInfo) {\n              pageInfo.add(\"hasNextPage\");\n              pageInfo.add(\"hasPreviousPage\");\n            });\n            cartLines.add(\"edges\", function (edges) {\n              edges.add(\"cursor\");\n              edges.add(\"node\", function (node) {\n                node.add(\"id\");\n              });\n            });\n          });\n        });\n      });\n    });\n    root.add(\"appliedGiftCards\", function (appliedGiftCards) {\n      appliedGiftCards.addFragment(spreads.AppliedGiftCardFragment);\n    });\n    root.add(\"note\");\n  });\n  spreads.CartUserErrorFragment = document.defineFragment(\"CartUserErrorFragment\", \"CartUserError\", function (root) {\n    root.add(\"field\");\n    root.add(\"message\");\n    root.add(\"code\");\n  });\n  spreads.CartWarningFragment = document.defineFragment(\"CartWarningFragment\", \"CartWarning\", function (root) {\n    root.add(\"code\");\n    root.add(\"message\");\n  });\n  document.addMutation(\"CartLinesRemove\", [variables.CartLinesRemove.cartId, variables.CartLinesRemove.lineIds], function (root) {\n    root.add(\"cartLinesRemove\", {\n      args: {\n        cartId: variables.CartLinesRemove.cartId,\n        lineIds: variables.CartLinesRemove.lineIds\n      }\n    }, function (cartLinesRemove) {\n      cartLinesRemove.add(\"cart\", function (cart) {\n        cart.addFragment(spreads.CartFragment);\n      });\n      cartLinesRemove.add(\"userErrors\", function (userErrors) {\n        userErrors.addFragment(spreads.CartUserErrorFragment);\n      });\n      cartLinesRemove.add(\"warnings\", function (warnings) {\n        warnings.addFragment(spreads.CartWarningFragment);\n      });\n    });\n  });\n  return document;\n}\n\nfunction query$20(client) {\n  var document = client.document();\n  var spreads = {};\n  var variables = {};\n  variables.CartLinesUpdate = {};\n  variables.CartLinesUpdate.cartId = client.variable(\"cartId\", \"ID!\");\n  variables.CartLinesUpdate.lines = client.variable(\"lines\", \"[CartLineUpdateInput!]!\");\n  spreads.CartLineFragment = document.defineFragment(\"CartLineFragment\", \"BaseCartLine\", function (root) {\n    root.add(\"id\");\n    root.add(\"merchandise\", function (merchandise) {\n      merchandise.addInlineFragmentOn(\"ProductVariant\", function (ProductVariant) {\n        ProductVariant.add(\"id\");\n        ProductVariant.add(\"title\");\n        ProductVariant.add(\"image\", function (image) {\n          image.add(\"id\");\n          image.add(\"url\", {\n            alias: \"src\"\n          });\n          image.add(\"altText\");\n          image.add(\"width\");\n          image.add(\"height\");\n        });\n        ProductVariant.add(\"product\", function (product) {\n          product.add(\"id\");\n          product.add(\"handle\");\n          product.add(\"title\");\n        });\n        ProductVariant.add(\"weight\");\n        ProductVariant.add(\"availableForSale\", {\n          alias: \"available\"\n        });\n        ProductVariant.add(\"sku\");\n        ProductVariant.add(\"selectedOptions\", function (selectedOptions) {\n          selectedOptions.add(\"name\");\n          selectedOptions.add(\"value\");\n        });\n        ProductVariant.add(\"compareAtPrice\", function (compareAtPrice) {\n          compareAtPrice.add(\"amount\");\n          compareAtPrice.add(\"currencyCode\");\n        });\n        ProductVariant.add(\"price\", function (price) {\n          price.add(\"amount\");\n          price.add(\"currencyCode\");\n        });\n        ProductVariant.add(\"unitPrice\", function (unitPrice) {\n          unitPrice.add(\"amount\");\n          unitPrice.add(\"currencyCode\");\n        });\n        ProductVariant.add(\"unitPriceMeasurement\", function (unitPriceMeasurement) {\n          unitPriceMeasurement.add(\"measuredType\");\n          unitPriceMeasurement.add(\"quantityUnit\");\n          unitPriceMeasurement.add(\"quantityValue\");\n          unitPriceMeasurement.add(\"referenceUnit\");\n          unitPriceMeasurement.add(\"referenceValue\");\n        });\n      });\n    });\n    root.add(\"quantity\");\n    root.add(\"attributes\", function (attributes) {\n      attributes.add(\"key\");\n      attributes.add(\"value\");\n    });\n    root.add(\"cost\", function (cost) {\n      cost.add(\"totalAmount\", function (totalAmount) {\n        totalAmount.add(\"amount\");\n        totalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"subtotalAmount\", function (subtotalAmount) {\n        subtotalAmount.add(\"amount\");\n        subtotalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"amountPerQuantity\", function (amountPerQuantity) {\n        amountPerQuantity.add(\"amount\");\n        amountPerQuantity.add(\"currencyCode\");\n      });\n      cost.add(\"compareAtAmountPerQuantity\", function (compareAtAmountPerQuantity) {\n        compareAtAmountPerQuantity.add(\"amount\");\n        compareAtAmountPerQuantity.add(\"currencyCode\");\n      });\n    });\n    root.add(\"discountAllocations\", function (discountAllocations) {\n      discountAllocations.add(\"discountedAmount\", function (discountedAmount) {\n        discountedAmount.add(\"amount\");\n        discountedAmount.add(\"currencyCode\");\n      });\n      discountAllocations.add(\"discountApplication\", function (discountApplication) {\n        discountApplication.add(\"targetType\");\n        discountApplication.add(\"allocationMethod\");\n        discountApplication.add(\"targetSelection\");\n        discountApplication.add(\"value\", function (value) {\n          value.addInlineFragmentOn(\"PricingPercentageValue\", function (PricingPercentageValue) {\n            PricingPercentageValue.add(\"percentage\");\n          });\n          value.addInlineFragmentOn(\"MoneyV2\", function (MoneyV2) {\n            MoneyV2.add(\"amount\");\n            MoneyV2.add(\"currencyCode\");\n          });\n        });\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCodeDiscountAllocation\", function (CartCodeDiscountAllocation) {\n        CartCodeDiscountAllocation.add(\"code\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartAutomaticDiscountAllocation\", function (CartAutomaticDiscountAllocation) {\n        CartAutomaticDiscountAllocation.add(\"title\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCustomDiscountAllocation\", function (CartCustomDiscountAllocation) {\n        CartCustomDiscountAllocation.add(\"title\");\n      });\n    });\n  });\n  spreads.AppliedGiftCardFragment = document.defineFragment(\"AppliedGiftCardFragment\", \"AppliedGiftCard\", function (root) {\n    root.add(\"amountUsed\", function (amountUsed) {\n      amountUsed.add(\"amount\");\n      amountUsed.add(\"currencyCode\");\n    });\n    root.add(\"amountUsed\", {\n      alias: \"amountUsedV2\"\n    }, function (amountUsed) {\n      amountUsed.add(\"amount\");\n      amountUsed.add(\"currencyCode\");\n    });\n    root.add(\"balance\", function (balance) {\n      balance.add(\"amount\");\n      balance.add(\"currencyCode\");\n    });\n    root.add(\"balance\", {\n      alias: \"balanceV2\"\n    }, function (balance) {\n      balance.add(\"amount\");\n      balance.add(\"currencyCode\");\n    });\n    root.add(\"presentmentAmountUsed\", function (presentmentAmountUsed) {\n      presentmentAmountUsed.add(\"amount\");\n      presentmentAmountUsed.add(\"currencyCode\");\n    });\n    root.add(\"id\");\n    root.add(\"lastCharacters\");\n  });\n  spreads.CartFragment = document.defineFragment(\"CartFragment\", \"Cart\", function (root) {\n    root.add(\"id\");\n    root.add(\"createdAt\");\n    root.add(\"updatedAt\");\n    root.add(\"lines\", {\n      args: {\n        first: 250\n      }\n    }, function (lines) {\n      lines.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      lines.add(\"edges\", function (edges) {\n        edges.add(\"cursor\");\n        edges.add(\"node\", function (node) {\n          node.addFragment(spreads.CartLineFragment);\n        });\n      });\n    });\n    root.add(\"attributes\", function (attributes) {\n      attributes.add(\"key\");\n      attributes.add(\"value\");\n    });\n    root.add(\"cost\", function (cost) {\n      cost.add(\"checkoutChargeAmount\", function (checkoutChargeAmount) {\n        checkoutChargeAmount.add(\"amount\");\n        checkoutChargeAmount.add(\"currencyCode\");\n      });\n      cost.add(\"totalAmount\", function (totalAmount) {\n        totalAmount.add(\"amount\");\n        totalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"subtotalAmount\", function (subtotalAmount) {\n        subtotalAmount.add(\"amount\");\n        subtotalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"totalTaxAmount\", function (totalTaxAmount) {\n        totalTaxAmount.add(\"amount\");\n        totalTaxAmount.add(\"currencyCode\");\n      });\n      cost.add(\"totalDutyAmount\", function (totalDutyAmount) {\n        totalDutyAmount.add(\"amount\");\n        totalDutyAmount.add(\"currencyCode\");\n      });\n    });\n    root.add(\"checkoutUrl\");\n    root.add(\"discountCodes\", function (discountCodes) {\n      discountCodes.add(\"applicable\");\n      discountCodes.add(\"code\");\n    });\n    root.add(\"discountAllocations\", function (discountAllocations) {\n      discountAllocations.add(\"discountedAmount\", function (discountedAmount) {\n        discountedAmount.add(\"amount\");\n        discountedAmount.add(\"currencyCode\");\n      });\n      discountAllocations.add(\"discountApplication\", function (discountApplication) {\n        discountApplication.add(\"targetType\");\n        discountApplication.add(\"allocationMethod\");\n        discountApplication.add(\"targetSelection\");\n        discountApplication.add(\"value\", function (value) {\n          value.addInlineFragmentOn(\"PricingPercentageValue\", function (PricingPercentageValue) {\n            PricingPercentageValue.add(\"percentage\");\n          });\n          value.addInlineFragmentOn(\"MoneyV2\", function (MoneyV2) {\n            MoneyV2.add(\"amount\");\n            MoneyV2.add(\"currencyCode\");\n          });\n        });\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCodeDiscountAllocation\", function (CartCodeDiscountAllocation) {\n        CartCodeDiscountAllocation.add(\"code\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartAutomaticDiscountAllocation\", function (CartAutomaticDiscountAllocation) {\n        CartAutomaticDiscountAllocation.add(\"title\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCustomDiscountAllocation\", function (CartCustomDiscountAllocation) {\n        CartCustomDiscountAllocation.add(\"title\");\n      });\n    });\n    root.add(\"buyerIdentity\", function (buyerIdentity) {\n      buyerIdentity.add(\"countryCode\");\n      buyerIdentity.add(\"preferences\", function (preferences) {\n        preferences.add(\"delivery\", function (delivery) {\n          delivery.add(\"coordinates\", function (coordinates) {\n            coordinates.add(\"latitude\");\n            coordinates.add(\"longitude\");\n            coordinates.add(\"countryCode\");\n          });\n          delivery.add(\"deliveryMethod\");\n          delivery.add(\"pickupHandle\");\n        });\n        preferences.add(\"wallet\");\n      });\n      buyerIdentity.add(\"email\");\n      buyerIdentity.add(\"phone\");\n      buyerIdentity.add(\"customer\", function (customer) {\n        customer.add(\"email\");\n      });\n      buyerIdentity.add(\"deliveryAddressPreferences\", function (deliveryAddressPreferences) {\n        deliveryAddressPreferences.addInlineFragmentOn(\"MailingAddress\", function (MailingAddress) {\n          MailingAddress.add(\"address1\");\n          MailingAddress.add(\"address2\");\n          MailingAddress.add(\"city\");\n          MailingAddress.add(\"company\");\n          MailingAddress.add(\"country\");\n          MailingAddress.add(\"countryCodeV2\");\n          MailingAddress.add(\"firstName\");\n          MailingAddress.add(\"formatted\");\n          MailingAddress.add(\"formattedArea\");\n          MailingAddress.add(\"lastName\");\n          MailingAddress.add(\"latitude\");\n          MailingAddress.add(\"longitude\");\n          MailingAddress.add(\"name\");\n          MailingAddress.add(\"phone\");\n          MailingAddress.add(\"province\");\n          MailingAddress.add(\"provinceCode\");\n          MailingAddress.add(\"zip\");\n        });\n      });\n    });\n    root.add(\"deliveryGroups\", {\n      args: {\n        first: 10\n      }\n    }, function (deliveryGroups) {\n      deliveryGroups.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      deliveryGroups.add(\"edges\", function (edges) {\n        edges.add(\"node\", function (node) {\n          node.add(\"id\");\n          node.add(\"deliveryAddress\", function (deliveryAddress) {\n            deliveryAddress.add(\"address2\");\n            deliveryAddress.add(\"address1\");\n            deliveryAddress.add(\"city\");\n            deliveryAddress.add(\"company\");\n            deliveryAddress.add(\"country\");\n            deliveryAddress.add(\"countryCodeV2\");\n            deliveryAddress.add(\"firstName\");\n            deliveryAddress.add(\"formatted\");\n            deliveryAddress.add(\"formattedArea\");\n            deliveryAddress.add(\"lastName\");\n            deliveryAddress.add(\"latitude\");\n            deliveryAddress.add(\"longitude\");\n            deliveryAddress.add(\"name\");\n            deliveryAddress.add(\"phone\");\n            deliveryAddress.add(\"province\");\n            deliveryAddress.add(\"provinceCode\");\n          });\n          node.add(\"deliveryOptions\", function (deliveryOptions) {\n            deliveryOptions.add(\"code\");\n            deliveryOptions.add(\"deliveryMethodType\");\n            deliveryOptions.add(\"description\");\n            deliveryOptions.add(\"estimatedCost\", function (estimatedCost) {\n              estimatedCost.add(\"amount\");\n              estimatedCost.add(\"currencyCode\");\n            });\n            deliveryOptions.add(\"handle\");\n            deliveryOptions.add(\"title\");\n          });\n          node.add(\"selectedDeliveryOption\", function (selectedDeliveryOption) {\n            selectedDeliveryOption.add(\"code\");\n            selectedDeliveryOption.add(\"deliveryMethodType\");\n            selectedDeliveryOption.add(\"description\");\n            selectedDeliveryOption.add(\"estimatedCost\", function (estimatedCost) {\n              estimatedCost.add(\"amount\");\n              estimatedCost.add(\"currencyCode\");\n            });\n            selectedDeliveryOption.add(\"handle\");\n            selectedDeliveryOption.add(\"title\");\n          });\n          node.add(\"cartLines\", {\n            args: {\n              first: 250\n            }\n          }, function (cartLines) {\n            cartLines.add(\"pageInfo\", function (pageInfo) {\n              pageInfo.add(\"hasNextPage\");\n              pageInfo.add(\"hasPreviousPage\");\n            });\n            cartLines.add(\"edges\", function (edges) {\n              edges.add(\"cursor\");\n              edges.add(\"node\", function (node) {\n                node.add(\"id\");\n              });\n            });\n          });\n        });\n      });\n    });\n    root.add(\"appliedGiftCards\", function (appliedGiftCards) {\n      appliedGiftCards.addFragment(spreads.AppliedGiftCardFragment);\n    });\n    root.add(\"note\");\n  });\n  spreads.CartUserErrorFragment = document.defineFragment(\"CartUserErrorFragment\", \"CartUserError\", function (root) {\n    root.add(\"field\");\n    root.add(\"message\");\n    root.add(\"code\");\n  });\n  spreads.CartWarningFragment = document.defineFragment(\"CartWarningFragment\", \"CartWarning\", function (root) {\n    root.add(\"code\");\n    root.add(\"message\");\n  });\n  document.addMutation(\"CartLinesUpdate\", [variables.CartLinesUpdate.cartId, variables.CartLinesUpdate.lines], function (root) {\n    root.add(\"cartLinesUpdate\", {\n      args: {\n        cartId: variables.CartLinesUpdate.cartId,\n        lines: variables.CartLinesUpdate.lines\n      }\n    }, function (cartLinesUpdate) {\n      cartLinesUpdate.add(\"cart\", function (cart) {\n        cart.addFragment(spreads.CartFragment);\n      });\n      cartLinesUpdate.add(\"userErrors\", function (userErrors) {\n        userErrors.addFragment(spreads.CartUserErrorFragment);\n      });\n      cartLinesUpdate.add(\"warnings\", function (warnings) {\n        warnings.addFragment(spreads.CartWarningFragment);\n      });\n    });\n  });\n  return document;\n}\n\nfunction query$21(client) {\n  var document = client.document();\n  var spreads = {};\n  var variables = {};\n  variables.CartNoteUpdate = {};\n  variables.CartNoteUpdate.cartId = client.variable(\"cartId\", \"ID!\");\n  variables.CartNoteUpdate.note = client.variable(\"note\", \"String!\");\n  spreads.CartLineFragment = document.defineFragment(\"CartLineFragment\", \"BaseCartLine\", function (root) {\n    root.add(\"id\");\n    root.add(\"merchandise\", function (merchandise) {\n      merchandise.addInlineFragmentOn(\"ProductVariant\", function (ProductVariant) {\n        ProductVariant.add(\"id\");\n        ProductVariant.add(\"title\");\n        ProductVariant.add(\"image\", function (image) {\n          image.add(\"id\");\n          image.add(\"url\", {\n            alias: \"src\"\n          });\n          image.add(\"altText\");\n          image.add(\"width\");\n          image.add(\"height\");\n        });\n        ProductVariant.add(\"product\", function (product) {\n          product.add(\"id\");\n          product.add(\"handle\");\n          product.add(\"title\");\n        });\n        ProductVariant.add(\"weight\");\n        ProductVariant.add(\"availableForSale\", {\n          alias: \"available\"\n        });\n        ProductVariant.add(\"sku\");\n        ProductVariant.add(\"selectedOptions\", function (selectedOptions) {\n          selectedOptions.add(\"name\");\n          selectedOptions.add(\"value\");\n        });\n        ProductVariant.add(\"compareAtPrice\", function (compareAtPrice) {\n          compareAtPrice.add(\"amount\");\n          compareAtPrice.add(\"currencyCode\");\n        });\n        ProductVariant.add(\"price\", function (price) {\n          price.add(\"amount\");\n          price.add(\"currencyCode\");\n        });\n        ProductVariant.add(\"unitPrice\", function (unitPrice) {\n          unitPrice.add(\"amount\");\n          unitPrice.add(\"currencyCode\");\n        });\n        ProductVariant.add(\"unitPriceMeasurement\", function (unitPriceMeasurement) {\n          unitPriceMeasurement.add(\"measuredType\");\n          unitPriceMeasurement.add(\"quantityUnit\");\n          unitPriceMeasurement.add(\"quantityValue\");\n          unitPriceMeasurement.add(\"referenceUnit\");\n          unitPriceMeasurement.add(\"referenceValue\");\n        });\n      });\n    });\n    root.add(\"quantity\");\n    root.add(\"attributes\", function (attributes) {\n      attributes.add(\"key\");\n      attributes.add(\"value\");\n    });\n    root.add(\"cost\", function (cost) {\n      cost.add(\"totalAmount\", function (totalAmount) {\n        totalAmount.add(\"amount\");\n        totalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"subtotalAmount\", function (subtotalAmount) {\n        subtotalAmount.add(\"amount\");\n        subtotalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"amountPerQuantity\", function (amountPerQuantity) {\n        amountPerQuantity.add(\"amount\");\n        amountPerQuantity.add(\"currencyCode\");\n      });\n      cost.add(\"compareAtAmountPerQuantity\", function (compareAtAmountPerQuantity) {\n        compareAtAmountPerQuantity.add(\"amount\");\n        compareAtAmountPerQuantity.add(\"currencyCode\");\n      });\n    });\n    root.add(\"discountAllocations\", function (discountAllocations) {\n      discountAllocations.add(\"discountedAmount\", function (discountedAmount) {\n        discountedAmount.add(\"amount\");\n        discountedAmount.add(\"currencyCode\");\n      });\n      discountAllocations.add(\"discountApplication\", function (discountApplication) {\n        discountApplication.add(\"targetType\");\n        discountApplication.add(\"allocationMethod\");\n        discountApplication.add(\"targetSelection\");\n        discountApplication.add(\"value\", function (value) {\n          value.addInlineFragmentOn(\"PricingPercentageValue\", function (PricingPercentageValue) {\n            PricingPercentageValue.add(\"percentage\");\n          });\n          value.addInlineFragmentOn(\"MoneyV2\", function (MoneyV2) {\n            MoneyV2.add(\"amount\");\n            MoneyV2.add(\"currencyCode\");\n          });\n        });\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCodeDiscountAllocation\", function (CartCodeDiscountAllocation) {\n        CartCodeDiscountAllocation.add(\"code\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartAutomaticDiscountAllocation\", function (CartAutomaticDiscountAllocation) {\n        CartAutomaticDiscountAllocation.add(\"title\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCustomDiscountAllocation\", function (CartCustomDiscountAllocation) {\n        CartCustomDiscountAllocation.add(\"title\");\n      });\n    });\n  });\n  spreads.AppliedGiftCardFragment = document.defineFragment(\"AppliedGiftCardFragment\", \"AppliedGiftCard\", function (root) {\n    root.add(\"amountUsed\", function (amountUsed) {\n      amountUsed.add(\"amount\");\n      amountUsed.add(\"currencyCode\");\n    });\n    root.add(\"amountUsed\", {\n      alias: \"amountUsedV2\"\n    }, function (amountUsed) {\n      amountUsed.add(\"amount\");\n      amountUsed.add(\"currencyCode\");\n    });\n    root.add(\"balance\", function (balance) {\n      balance.add(\"amount\");\n      balance.add(\"currencyCode\");\n    });\n    root.add(\"balance\", {\n      alias: \"balanceV2\"\n    }, function (balance) {\n      balance.add(\"amount\");\n      balance.add(\"currencyCode\");\n    });\n    root.add(\"presentmentAmountUsed\", function (presentmentAmountUsed) {\n      presentmentAmountUsed.add(\"amount\");\n      presentmentAmountUsed.add(\"currencyCode\");\n    });\n    root.add(\"id\");\n    root.add(\"lastCharacters\");\n  });\n  spreads.CartFragment = document.defineFragment(\"CartFragment\", \"Cart\", function (root) {\n    root.add(\"id\");\n    root.add(\"createdAt\");\n    root.add(\"updatedAt\");\n    root.add(\"lines\", {\n      args: {\n        first: 250\n      }\n    }, function (lines) {\n      lines.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      lines.add(\"edges\", function (edges) {\n        edges.add(\"cursor\");\n        edges.add(\"node\", function (node) {\n          node.addFragment(spreads.CartLineFragment);\n        });\n      });\n    });\n    root.add(\"attributes\", function (attributes) {\n      attributes.add(\"key\");\n      attributes.add(\"value\");\n    });\n    root.add(\"cost\", function (cost) {\n      cost.add(\"checkoutChargeAmount\", function (checkoutChargeAmount) {\n        checkoutChargeAmount.add(\"amount\");\n        checkoutChargeAmount.add(\"currencyCode\");\n      });\n      cost.add(\"totalAmount\", function (totalAmount) {\n        totalAmount.add(\"amount\");\n        totalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"subtotalAmount\", function (subtotalAmount) {\n        subtotalAmount.add(\"amount\");\n        subtotalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"totalTaxAmount\", function (totalTaxAmount) {\n        totalTaxAmount.add(\"amount\");\n        totalTaxAmount.add(\"currencyCode\");\n      });\n      cost.add(\"totalDutyAmount\", function (totalDutyAmount) {\n        totalDutyAmount.add(\"amount\");\n        totalDutyAmount.add(\"currencyCode\");\n      });\n    });\n    root.add(\"checkoutUrl\");\n    root.add(\"discountCodes\", function (discountCodes) {\n      discountCodes.add(\"applicable\");\n      discountCodes.add(\"code\");\n    });\n    root.add(\"discountAllocations\", function (discountAllocations) {\n      discountAllocations.add(\"discountedAmount\", function (discountedAmount) {\n        discountedAmount.add(\"amount\");\n        discountedAmount.add(\"currencyCode\");\n      });\n      discountAllocations.add(\"discountApplication\", function (discountApplication) {\n        discountApplication.add(\"targetType\");\n        discountApplication.add(\"allocationMethod\");\n        discountApplication.add(\"targetSelection\");\n        discountApplication.add(\"value\", function (value) {\n          value.addInlineFragmentOn(\"PricingPercentageValue\", function (PricingPercentageValue) {\n            PricingPercentageValue.add(\"percentage\");\n          });\n          value.addInlineFragmentOn(\"MoneyV2\", function (MoneyV2) {\n            MoneyV2.add(\"amount\");\n            MoneyV2.add(\"currencyCode\");\n          });\n        });\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCodeDiscountAllocation\", function (CartCodeDiscountAllocation) {\n        CartCodeDiscountAllocation.add(\"code\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartAutomaticDiscountAllocation\", function (CartAutomaticDiscountAllocation) {\n        CartAutomaticDiscountAllocation.add(\"title\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCustomDiscountAllocation\", function (CartCustomDiscountAllocation) {\n        CartCustomDiscountAllocation.add(\"title\");\n      });\n    });\n    root.add(\"buyerIdentity\", function (buyerIdentity) {\n      buyerIdentity.add(\"countryCode\");\n      buyerIdentity.add(\"preferences\", function (preferences) {\n        preferences.add(\"delivery\", function (delivery) {\n          delivery.add(\"coordinates\", function (coordinates) {\n            coordinates.add(\"latitude\");\n            coordinates.add(\"longitude\");\n            coordinates.add(\"countryCode\");\n          });\n          delivery.add(\"deliveryMethod\");\n          delivery.add(\"pickupHandle\");\n        });\n        preferences.add(\"wallet\");\n      });\n      buyerIdentity.add(\"email\");\n      buyerIdentity.add(\"phone\");\n      buyerIdentity.add(\"customer\", function (customer) {\n        customer.add(\"email\");\n      });\n      buyerIdentity.add(\"deliveryAddressPreferences\", function (deliveryAddressPreferences) {\n        deliveryAddressPreferences.addInlineFragmentOn(\"MailingAddress\", function (MailingAddress) {\n          MailingAddress.add(\"address1\");\n          MailingAddress.add(\"address2\");\n          MailingAddress.add(\"city\");\n          MailingAddress.add(\"company\");\n          MailingAddress.add(\"country\");\n          MailingAddress.add(\"countryCodeV2\");\n          MailingAddress.add(\"firstName\");\n          MailingAddress.add(\"formatted\");\n          MailingAddress.add(\"formattedArea\");\n          MailingAddress.add(\"lastName\");\n          MailingAddress.add(\"latitude\");\n          MailingAddress.add(\"longitude\");\n          MailingAddress.add(\"name\");\n          MailingAddress.add(\"phone\");\n          MailingAddress.add(\"province\");\n          MailingAddress.add(\"provinceCode\");\n          MailingAddress.add(\"zip\");\n        });\n      });\n    });\n    root.add(\"deliveryGroups\", {\n      args: {\n        first: 10\n      }\n    }, function (deliveryGroups) {\n      deliveryGroups.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      deliveryGroups.add(\"edges\", function (edges) {\n        edges.add(\"node\", function (node) {\n          node.add(\"id\");\n          node.add(\"deliveryAddress\", function (deliveryAddress) {\n            deliveryAddress.add(\"address2\");\n            deliveryAddress.add(\"address1\");\n            deliveryAddress.add(\"city\");\n            deliveryAddress.add(\"company\");\n            deliveryAddress.add(\"country\");\n            deliveryAddress.add(\"countryCodeV2\");\n            deliveryAddress.add(\"firstName\");\n            deliveryAddress.add(\"formatted\");\n            deliveryAddress.add(\"formattedArea\");\n            deliveryAddress.add(\"lastName\");\n            deliveryAddress.add(\"latitude\");\n            deliveryAddress.add(\"longitude\");\n            deliveryAddress.add(\"name\");\n            deliveryAddress.add(\"phone\");\n            deliveryAddress.add(\"province\");\n            deliveryAddress.add(\"provinceCode\");\n          });\n          node.add(\"deliveryOptions\", function (deliveryOptions) {\n            deliveryOptions.add(\"code\");\n            deliveryOptions.add(\"deliveryMethodType\");\n            deliveryOptions.add(\"description\");\n            deliveryOptions.add(\"estimatedCost\", function (estimatedCost) {\n              estimatedCost.add(\"amount\");\n              estimatedCost.add(\"currencyCode\");\n            });\n            deliveryOptions.add(\"handle\");\n            deliveryOptions.add(\"title\");\n          });\n          node.add(\"selectedDeliveryOption\", function (selectedDeliveryOption) {\n            selectedDeliveryOption.add(\"code\");\n            selectedDeliveryOption.add(\"deliveryMethodType\");\n            selectedDeliveryOption.add(\"description\");\n            selectedDeliveryOption.add(\"estimatedCost\", function (estimatedCost) {\n              estimatedCost.add(\"amount\");\n              estimatedCost.add(\"currencyCode\");\n            });\n            selectedDeliveryOption.add(\"handle\");\n            selectedDeliveryOption.add(\"title\");\n          });\n          node.add(\"cartLines\", {\n            args: {\n              first: 250\n            }\n          }, function (cartLines) {\n            cartLines.add(\"pageInfo\", function (pageInfo) {\n              pageInfo.add(\"hasNextPage\");\n              pageInfo.add(\"hasPreviousPage\");\n            });\n            cartLines.add(\"edges\", function (edges) {\n              edges.add(\"cursor\");\n              edges.add(\"node\", function (node) {\n                node.add(\"id\");\n              });\n            });\n          });\n        });\n      });\n    });\n    root.add(\"appliedGiftCards\", function (appliedGiftCards) {\n      appliedGiftCards.addFragment(spreads.AppliedGiftCardFragment);\n    });\n    root.add(\"note\");\n  });\n  document.addMutation(\"CartNoteUpdate\", [variables.CartNoteUpdate.cartId, variables.CartNoteUpdate.note], function (root) {\n    root.add(\"cartNoteUpdate\", {\n      args: {\n        cartId: variables.CartNoteUpdate.cartId,\n        note: variables.CartNoteUpdate.note\n      }\n    }, function (cartNoteUpdate) {\n      cartNoteUpdate.add(\"cart\", function (cart) {\n        cart.addFragment(spreads.CartFragment);\n      });\n      cartNoteUpdate.add(\"userErrors\", function (userErrors) {\n        userErrors.add(\"field\");\n        userErrors.add(\"message\");\n        userErrors.add(\"code\");\n      });\n    });\n  });\n  return document;\n}\n\nfunction query$22(client) {\n  var document = client.document();\n  var spreads = {};\n  var variables = {};\n  variables.CartGiftCardCodesRemove = {};\n  variables.CartGiftCardCodesRemove.appliedGiftCardIds = client.variable(\"appliedGiftCardIds\", \"[ID!]!\");\n  variables.CartGiftCardCodesRemove.cartId = client.variable(\"cartId\", \"ID!\");\n  spreads.CartLineFragment = document.defineFragment(\"CartLineFragment\", \"BaseCartLine\", function (root) {\n    root.add(\"id\");\n    root.add(\"merchandise\", function (merchandise) {\n      merchandise.addInlineFragmentOn(\"ProductVariant\", function (ProductVariant) {\n        ProductVariant.add(\"id\");\n        ProductVariant.add(\"title\");\n        ProductVariant.add(\"image\", function (image) {\n          image.add(\"id\");\n          image.add(\"url\", {\n            alias: \"src\"\n          });\n          image.add(\"altText\");\n          image.add(\"width\");\n          image.add(\"height\");\n        });\n        ProductVariant.add(\"product\", function (product) {\n          product.add(\"id\");\n          product.add(\"handle\");\n          product.add(\"title\");\n        });\n        ProductVariant.add(\"weight\");\n        ProductVariant.add(\"availableForSale\", {\n          alias: \"available\"\n        });\n        ProductVariant.add(\"sku\");\n        ProductVariant.add(\"selectedOptions\", function (selectedOptions) {\n          selectedOptions.add(\"name\");\n          selectedOptions.add(\"value\");\n        });\n        ProductVariant.add(\"compareAtPrice\", function (compareAtPrice) {\n          compareAtPrice.add(\"amount\");\n          compareAtPrice.add(\"currencyCode\");\n        });\n        ProductVariant.add(\"price\", function (price) {\n          price.add(\"amount\");\n          price.add(\"currencyCode\");\n        });\n        ProductVariant.add(\"unitPrice\", function (unitPrice) {\n          unitPrice.add(\"amount\");\n          unitPrice.add(\"currencyCode\");\n        });\n        ProductVariant.add(\"unitPriceMeasurement\", function (unitPriceMeasurement) {\n          unitPriceMeasurement.add(\"measuredType\");\n          unitPriceMeasurement.add(\"quantityUnit\");\n          unitPriceMeasurement.add(\"quantityValue\");\n          unitPriceMeasurement.add(\"referenceUnit\");\n          unitPriceMeasurement.add(\"referenceValue\");\n        });\n      });\n    });\n    root.add(\"quantity\");\n    root.add(\"attributes\", function (attributes) {\n      attributes.add(\"key\");\n      attributes.add(\"value\");\n    });\n    root.add(\"cost\", function (cost) {\n      cost.add(\"totalAmount\", function (totalAmount) {\n        totalAmount.add(\"amount\");\n        totalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"subtotalAmount\", function (subtotalAmount) {\n        subtotalAmount.add(\"amount\");\n        subtotalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"amountPerQuantity\", function (amountPerQuantity) {\n        amountPerQuantity.add(\"amount\");\n        amountPerQuantity.add(\"currencyCode\");\n      });\n      cost.add(\"compareAtAmountPerQuantity\", function (compareAtAmountPerQuantity) {\n        compareAtAmountPerQuantity.add(\"amount\");\n        compareAtAmountPerQuantity.add(\"currencyCode\");\n      });\n    });\n    root.add(\"discountAllocations\", function (discountAllocations) {\n      discountAllocations.add(\"discountedAmount\", function (discountedAmount) {\n        discountedAmount.add(\"amount\");\n        discountedAmount.add(\"currencyCode\");\n      });\n      discountAllocations.add(\"discountApplication\", function (discountApplication) {\n        discountApplication.add(\"targetType\");\n        discountApplication.add(\"allocationMethod\");\n        discountApplication.add(\"targetSelection\");\n        discountApplication.add(\"value\", function (value) {\n          value.addInlineFragmentOn(\"PricingPercentageValue\", function (PricingPercentageValue) {\n            PricingPercentageValue.add(\"percentage\");\n          });\n          value.addInlineFragmentOn(\"MoneyV2\", function (MoneyV2) {\n            MoneyV2.add(\"amount\");\n            MoneyV2.add(\"currencyCode\");\n          });\n        });\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCodeDiscountAllocation\", function (CartCodeDiscountAllocation) {\n        CartCodeDiscountAllocation.add(\"code\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartAutomaticDiscountAllocation\", function (CartAutomaticDiscountAllocation) {\n        CartAutomaticDiscountAllocation.add(\"title\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCustomDiscountAllocation\", function (CartCustomDiscountAllocation) {\n        CartCustomDiscountAllocation.add(\"title\");\n      });\n    });\n  });\n  spreads.AppliedGiftCardFragment = document.defineFragment(\"AppliedGiftCardFragment\", \"AppliedGiftCard\", function (root) {\n    root.add(\"amountUsed\", function (amountUsed) {\n      amountUsed.add(\"amount\");\n      amountUsed.add(\"currencyCode\");\n    });\n    root.add(\"amountUsed\", {\n      alias: \"amountUsedV2\"\n    }, function (amountUsed) {\n      amountUsed.add(\"amount\");\n      amountUsed.add(\"currencyCode\");\n    });\n    root.add(\"balance\", function (balance) {\n      balance.add(\"amount\");\n      balance.add(\"currencyCode\");\n    });\n    root.add(\"balance\", {\n      alias: \"balanceV2\"\n    }, function (balance) {\n      balance.add(\"amount\");\n      balance.add(\"currencyCode\");\n    });\n    root.add(\"presentmentAmountUsed\", function (presentmentAmountUsed) {\n      presentmentAmountUsed.add(\"amount\");\n      presentmentAmountUsed.add(\"currencyCode\");\n    });\n    root.add(\"id\");\n    root.add(\"lastCharacters\");\n  });\n  spreads.CartFragment = document.defineFragment(\"CartFragment\", \"Cart\", function (root) {\n    root.add(\"id\");\n    root.add(\"createdAt\");\n    root.add(\"updatedAt\");\n    root.add(\"lines\", {\n      args: {\n        first: 250\n      }\n    }, function (lines) {\n      lines.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      lines.add(\"edges\", function (edges) {\n        edges.add(\"cursor\");\n        edges.add(\"node\", function (node) {\n          node.addFragment(spreads.CartLineFragment);\n        });\n      });\n    });\n    root.add(\"attributes\", function (attributes) {\n      attributes.add(\"key\");\n      attributes.add(\"value\");\n    });\n    root.add(\"cost\", function (cost) {\n      cost.add(\"checkoutChargeAmount\", function (checkoutChargeAmount) {\n        checkoutChargeAmount.add(\"amount\");\n        checkoutChargeAmount.add(\"currencyCode\");\n      });\n      cost.add(\"totalAmount\", function (totalAmount) {\n        totalAmount.add(\"amount\");\n        totalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"subtotalAmount\", function (subtotalAmount) {\n        subtotalAmount.add(\"amount\");\n        subtotalAmount.add(\"currencyCode\");\n      });\n      cost.add(\"totalTaxAmount\", function (totalTaxAmount) {\n        totalTaxAmount.add(\"amount\");\n        totalTaxAmount.add(\"currencyCode\");\n      });\n      cost.add(\"totalDutyAmount\", function (totalDutyAmount) {\n        totalDutyAmount.add(\"amount\");\n        totalDutyAmount.add(\"currencyCode\");\n      });\n    });\n    root.add(\"checkoutUrl\");\n    root.add(\"discountCodes\", function (discountCodes) {\n      discountCodes.add(\"applicable\");\n      discountCodes.add(\"code\");\n    });\n    root.add(\"discountAllocations\", function (discountAllocations) {\n      discountAllocations.add(\"discountedAmount\", function (discountedAmount) {\n        discountedAmount.add(\"amount\");\n        discountedAmount.add(\"currencyCode\");\n      });\n      discountAllocations.add(\"discountApplication\", function (discountApplication) {\n        discountApplication.add(\"targetType\");\n        discountApplication.add(\"allocationMethod\");\n        discountApplication.add(\"targetSelection\");\n        discountApplication.add(\"value\", function (value) {\n          value.addInlineFragmentOn(\"PricingPercentageValue\", function (PricingPercentageValue) {\n            PricingPercentageValue.add(\"percentage\");\n          });\n          value.addInlineFragmentOn(\"MoneyV2\", function (MoneyV2) {\n            MoneyV2.add(\"amount\");\n            MoneyV2.add(\"currencyCode\");\n          });\n        });\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCodeDiscountAllocation\", function (CartCodeDiscountAllocation) {\n        CartCodeDiscountAllocation.add(\"code\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartAutomaticDiscountAllocation\", function (CartAutomaticDiscountAllocation) {\n        CartAutomaticDiscountAllocation.add(\"title\");\n      });\n      discountAllocations.addInlineFragmentOn(\"CartCustomDiscountAllocation\", function (CartCustomDiscountAllocation) {\n        CartCustomDiscountAllocation.add(\"title\");\n      });\n    });\n    root.add(\"buyerIdentity\", function (buyerIdentity) {\n      buyerIdentity.add(\"countryCode\");\n      buyerIdentity.add(\"preferences\", function (preferences) {\n        preferences.add(\"delivery\", function (delivery) {\n          delivery.add(\"coordinates\", function (coordinates) {\n            coordinates.add(\"latitude\");\n            coordinates.add(\"longitude\");\n            coordinates.add(\"countryCode\");\n          });\n          delivery.add(\"deliveryMethod\");\n          delivery.add(\"pickupHandle\");\n        });\n        preferences.add(\"wallet\");\n      });\n      buyerIdentity.add(\"email\");\n      buyerIdentity.add(\"phone\");\n      buyerIdentity.add(\"customer\", function (customer) {\n        customer.add(\"email\");\n      });\n      buyerIdentity.add(\"deliveryAddressPreferences\", function (deliveryAddressPreferences) {\n        deliveryAddressPreferences.addInlineFragmentOn(\"MailingAddress\", function (MailingAddress) {\n          MailingAddress.add(\"address1\");\n          MailingAddress.add(\"address2\");\n          MailingAddress.add(\"city\");\n          MailingAddress.add(\"company\");\n          MailingAddress.add(\"country\");\n          MailingAddress.add(\"countryCodeV2\");\n          MailingAddress.add(\"firstName\");\n          MailingAddress.add(\"formatted\");\n          MailingAddress.add(\"formattedArea\");\n          MailingAddress.add(\"lastName\");\n          MailingAddress.add(\"latitude\");\n          MailingAddress.add(\"longitude\");\n          MailingAddress.add(\"name\");\n          MailingAddress.add(\"phone\");\n          MailingAddress.add(\"province\");\n          MailingAddress.add(\"provinceCode\");\n          MailingAddress.add(\"zip\");\n        });\n      });\n    });\n    root.add(\"deliveryGroups\", {\n      args: {\n        first: 10\n      }\n    }, function (deliveryGroups) {\n      deliveryGroups.add(\"pageInfo\", function (pageInfo) {\n        pageInfo.add(\"hasNextPage\");\n        pageInfo.add(\"hasPreviousPage\");\n      });\n      deliveryGroups.add(\"edges\", function (edges) {\n        edges.add(\"node\", function (node) {\n          node.add(\"id\");\n          node.add(\"deliveryAddress\", function (deliveryAddress) {\n            deliveryAddress.add(\"address2\");\n            deliveryAddress.add(\"address1\");\n            deliveryAddress.add(\"city\");\n            deliveryAddress.add(\"company\");\n            deliveryAddress.add(\"country\");\n            deliveryAddress.add(\"countryCodeV2\");\n            deliveryAddress.add(\"firstName\");\n            deliveryAddress.add(\"formatted\");\n            deliveryAddress.add(\"formattedArea\");\n            deliveryAddress.add(\"lastName\");\n            deliveryAddress.add(\"latitude\");\n            deliveryAddress.add(\"longitude\");\n            deliveryAddress.add(\"name\");\n            deliveryAddress.add(\"phone\");\n            deliveryAddress.add(\"province\");\n            deliveryAddress.add(\"provinceCode\");\n          });\n          node.add(\"deliveryOptions\", function (deliveryOptions) {\n            deliveryOptions.add(\"code\");\n            deliveryOptions.add(\"deliveryMethodType\");\n            deliveryOptions.add(\"description\");\n            deliveryOptions.add(\"estimatedCost\", function (estimatedCost) {\n              estimatedCost.add(\"amount\");\n              estimatedCost.add(\"currencyCode\");\n            });\n            deliveryOptions.add(\"handle\");\n            deliveryOptions.add(\"title\");\n          });\n          node.add(\"selectedDeliveryOption\", function (selectedDeliveryOption) {\n            selectedDeliveryOption.add(\"code\");\n            selectedDeliveryOption.add(\"deliveryMethodType\");\n            selectedDeliveryOption.add(\"description\");\n            selectedDeliveryOption.add(\"estimatedCost\", function (estimatedCost) {\n              estimatedCost.add(\"amount\");\n              estimatedCost.add(\"currencyCode\");\n            });\n            selectedDeliveryOption.add(\"handle\");\n            selectedDeliveryOption.add(\"title\");\n          });\n          node.add(\"cartLines\", {\n            args: {\n              first: 250\n            }\n          }, function (cartLines) {\n            cartLines.add(\"pageInfo\", function (pageInfo) {\n              pageInfo.add(\"hasNextPage\");\n              pageInfo.add(\"hasPreviousPage\");\n            });\n            cartLines.add(\"edges\", function (edges) {\n              edges.add(\"cursor\");\n              edges.add(\"node\", function (node) {\n                node.add(\"id\");\n              });\n            });\n          });\n        });\n      });\n    });\n    root.add(\"appliedGiftCards\", function (appliedGiftCards) {\n      appliedGiftCards.addFragment(spreads.AppliedGiftCardFragment);\n    });\n    root.add(\"note\");\n  });\n  spreads.CartUserErrorFragment = document.defineFragment(\"CartUserErrorFragment\", \"CartUserError\", function (root) {\n    root.add(\"field\");\n    root.add(\"message\");\n    root.add(\"code\");\n  });\n  spreads.CartWarningFragment = document.defineFragment(\"CartWarningFragment\", \"CartWarning\", function (root) {\n    root.add(\"code\");\n    root.add(\"message\");\n  });\n  document.addMutation(\"CartGiftCardCodesRemove\", [variables.CartGiftCardCodesRemove.appliedGiftCardIds, variables.CartGiftCardCodesRemove.cartId], function (root) {\n    root.add(\"cartGiftCardCodesRemove\", {\n      args: {\n        appliedGiftCardIds: variables.CartGiftCardCodesRemove.appliedGiftCardIds,\n        cartId: variables.CartGiftCardCodesRemove.cartId\n      }\n    }, function (cartGiftCardCodesRemove) {\n      cartGiftCardCodesRemove.add(\"cart\", function (cart) {\n        cart.addFragment(spreads.CartFragment);\n      });\n      cartGiftCardCodesRemove.add(\"userErrors\", function (userErrors) {\n        userErrors.addFragment(spreads.CartUserErrorFragment);\n      });\n      cartGiftCardCodesRemove.add(\"warnings\", function (warnings) {\n        warnings.addFragment(spreads.CartWarningFragment);\n      });\n    });\n  });\n  return document;\n}\n\n/**\n * The JS Buy SDK cart resource\n * @class\n */\n\nvar CheckoutResource = function (_Resource) {\n  inherits$1(CheckoutResource, _Resource);\n\n  function CheckoutResource() {\n    classCallCheck$1(this, CheckoutResource);\n    return possibleConstructorReturn$1(this, (CheckoutResource.__proto__ || Object.getPrototypeOf(CheckoutResource)).apply(this, arguments));\n  }\n\n  createClass$1(CheckoutResource, [{\n    key: 'fetch',\n\n\n    /**\n     * Fetches a card by ID.\n     *\n     * @example\n     * client.cart.fetch('FlZj9rZXlN5MDY4ZDFiZTUyZTUwNTE2MDNhZjg=').then((cart) => {\n     *   // Do something with the cart\n     * });\n     *\n     * @param {String} id The id of the card to fetch.\n     * @return {Promise|GraphModel} A promise resolving with a `GraphModel` of the cart.\n     */\n    value: function fetch(id) {\n      var _this2 = this;\n\n      return this.graphQLClient.send(query$12, { id: id }).then(function (_ref) {\n        var model = _ref.model,\n            data = _ref.data;\n\n        return new Promise(function (resolve, reject) {\n          try {\n            var cart = data.cart || data.node;\n\n            if (!cart) {\n              return resolve(null);\n            }\n\n            return _this2.graphQLClient.fetchAllPages(model.cart.lines, { pageSize: 250 }).then(function (lines) {\n              model.cart.attrs.lines = lines;\n\n              return resolve(mapCartPayload(model.cart));\n            });\n          } catch (error) {\n            if (error) {\n              reject(error);\n            } else {\n              reject([{ message: 'an unknown error has occurred.' }]);\n            }\n          }\n\n          return resolve(null);\n        });\n      });\n    }\n\n    /**\n     * Creates a checkout.\n     *\n     * @example\n     * const input = {\n     *   lineItems: [\n     *     {variantId: 'Z2lkOi8vc2hvcGlmeS9Qcm9kdWN0VmFyaWFudC8yOTEwNjAyMjc5Mg==', quantity: 5}\n     *   ]\n     * };\n     *\n     * client.checkout.create(input).then((checkout) => {\n     *   // Do something with the newly created checkout\n     * });\n     *\n     * @param {Object} [input] An input object containing zero or more of:\n     *   @param {String} [input.email] An email connected to the checkout.\n     *   @param {Object[]} [input.lineItems] A list of line items in the checkout. See the {@link https://help.shopify.com/api/storefront-api/reference/input-object/checkoutlineiteminput|Storefront API reference} for valid input fields for each line item.\n     *   @param {Object} [input.shippingAddress] A shipping address. See the {@link https://help.shopify.com/api/storefront-api/reference/input-object/mailingaddressinput|Storefront API reference} for valid input fields.\n     *   @param {String} [input.note] A note for the checkout.\n     *   @param {Object[]} [input.customAttributes] A list of custom attributes for the checkout. See the {@link https://help.shopify.com/api/storefront-api/reference/input-object/attributeinput|Storefront API reference} for valid input fields.\n     *   @deprecated {String} [input.presentmentCurrencyCode ] A presentment currency code. See the {@link https://help.shopify.com/en/api/storefront-api/reference/enum/currencycode|Storefront API reference} for valid currency code values.\n     *   @return {Promise|GraphModel} A promise resolving with the created checkout.\n     */\n\n  }, {\n    key: 'create',\n    value: function create() {\n      var i = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var input = this.inputMapper.create(i);\n\n      return this.graphQLClient.send(query$13, { input: input }).then(handleCartMutation('cartCreate', this.graphQLClient));\n    }\n\n    /**\n     * Replaces the value of checkout's custom attributes and/or note with values defined in the input\n     *\n     * @example\n     * const checkoutId = 'Z2lkOi8vc2hvcGlmeS9DaGVja291dC9kMTZmM2EzMDM4Yjc4N=';\n     * const input = {customAttributes: [{key: \"MyKey\", value: \"MyValue\"}]};\n     *\n     * client.checkout.updateAttributes(checkoutId, input).then((checkout) => {\n     *   // Do something with the updated checkout\n     * });\n     *\n     * @param {String} checkoutId The ID of the checkout to update.\n     * @param {Object} [input] An input object containing zero or more of:\n     *   @param {Object[]} [input.customAttributes] A list of custom attributes for the checkout. See the {@link https://help.shopify.com/api/storefront-api/reference/input-object/attributeinput|Storefront API reference} for valid input fields.\n     *   @param {String} [input.note] A note for the checkout.\n     * @return {Promise|GraphModel} A promise resolving with the updated checkout.\n     */\n\n  }, {\n    key: 'updateAttributes',\n    value: function updateAttributes(checkoutId) {\n      var _this3 = this;\n\n      var input = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      var _inputMapper$updateAt = this.inputMapper.updateAttributes(checkoutId, input),\n          cartAttributesUpdateInput = _inputMapper$updateAt.cartAttributesUpdateInput,\n          cartNoteUpdateInput = _inputMapper$updateAt.cartNoteUpdateInput;\n\n      var promise = Promise.resolve();\n\n      function updateNote() {\n        return this.graphQLClient.send(query$21, cartNoteUpdateInput).then(handleCartMutation('cartNoteUpdate', this.graphQLClient));\n      }\n\n      function updateAttributes() {\n        return this.graphQLClient.send(query$14, cartAttributesUpdateInput).then(handleCartMutation('cartAttributesUpdate', this.graphQLClient));\n      }\n\n      if (typeof cartNoteUpdateInput.note !== 'undefined') {\n        promise = promise.then(function () {\n          return updateNote.call(_this3);\n        });\n      }\n\n      if (cartAttributesUpdateInput.attributes.length) {\n        promise = promise.then(function () {\n          return updateAttributes.call(_this3);\n        });\n      }\n\n      return promise;\n    }\n\n    /**\n     * Replaces the value of checkout's email address\n     *\n     * @example\n     * const checkoutId = 'Z2lkOi8vc2hvcGlmeS9DaGVja291dC9kMTZmM2EzMDM4Yjc4N=';\n     * const email = 'user@example.com';\n     *\n     * client.checkout.updateEmail(checkoutId, email).then((checkout) => {\n     *   // Do something with the updated checkout\n     * });\n     *\n     * @param {String} checkoutId The ID of the checkout to update.\n     * @param {String} email The email address to apply to the checkout.\n     * @return {Promise|GraphModel} A promise resolving with the updated checkout.\n     */\n\n  }, {\n    key: 'updateEmail',\n    value: function updateEmail(checkoutId, email) {\n      var variables = this.inputMapper.updateEmail(checkoutId, email);\n\n      return this.graphQLClient.send(query$15, variables).then(handleCartMutation('cartBuyerIdentityUpdate', this.graphQLClient));\n    }\n\n    /**\n     * Adds line items to an existing checkout.\n     *\n     * @example\n     * const checkoutId = 'Z2lkOi8vc2hvcGlmeS9DaGVja291dC9kMTZmM2EzMDM4Yjc4N=';\n     * const lineItems = [{variantId: 'Z2lkOi8vc2hvcGlmeS9Qcm9kdWN0VmFyaWFudC8yOTEwNjAyMjc5Mg==', quantity: 5}];\n     *\n     * client.checkout.addLineItems(checkoutId, lineItems).then((checkout) => {\n     *   // Do something with the updated checkout\n     * });\n     *\n     * @param {String} checkoutId The ID of the checkout to add line items to.\n     * @param {Object[]} lineItems A list of line items to add to the checkout. See the {@link https://help.shopify.com/api/storefront-api/reference/input-object/checkoutlineiteminput|Storefront API reference} for valid input fields for each line item.\n     * @return {Promise|GraphModel} A promise resolving with the updated checkout.\n     */\n\n  }, {\n    key: 'addLineItems',\n    value: function addLineItems(checkoutId) {\n      var lineItems = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n      var variables = this.inputMapper.addLineItems(checkoutId, lineItems);\n\n      return this.graphQLClient.send(query$18, variables).then(handleCartMutation('cartLinesAdd', this.graphQLClient));\n    }\n\n    /**\n     * Applies a discount to an existing checkout using a discount code.\n     *\n     * @example\n     * const checkoutId = 'Z2lkOi8vc2hvcGlmeS9DaGVja291dC9kMTZmM2EzMDM4Yjc4N=';\n     * const discountCode = 'best-discount-ever';\n     *\n     * client.checkout.addDiscount(checkoutId, discountCode).then((checkout) => {\n     *   // Do something with the updated checkout\n     * });\n     *\n     * @param {String} checkoutId The ID of the checkout to add discount to.\n     * @param {String} discountCode The discount code to apply to the checkout.\n     * @return {Promise|GraphModel} A promise resolving with the updated checkout.\n     */\n\n  }, {\n    key: 'addDiscount',\n    value: function addDiscount(checkoutId, discountCode) {\n      var _this4 = this;\n\n      // We want access to Cart's `discountCodes` field, so we can't just use the\n      // existing `fetch` method since that also maps and removes the `discountCodes` field.\n      // We must therefore look at the raw Cart data to be able to see ALL existing discount codes,\n      // whether they are `applied` or not.\n\n      // The query below is identical to the `fetch` method's query EXCEPT we don't call `mapCartPayload` here\n      return this.graphQLClient.send(query$12, { id: checkoutId }).then(function (_ref2) {\n        var model = _ref2.model,\n            data = _ref2.data;\n\n        return new Promise(function (resolve, reject) {\n          try {\n            var cart = data.cart || data.node;\n\n            if (!cart) {\n              return resolve(null);\n            }\n\n            return _this4.graphQLClient.fetchAllPages(model.cart.lines, { pageSize: 250 }).then(function (lines) {\n              model.cart.attrs.lines = lines;\n\n              return resolve(model.cart);\n            });\n          } catch (error) {\n            if (error) {\n              reject(error);\n            } else {\n              reject([{ message: 'an unknown error has occurred.' }]);\n            }\n          }\n\n          return resolve(null);\n        });\n      }).then(function (checkout) {\n        var existingCodes = checkout.discountCodes.map(function (code) {\n          return code.code;\n        });\n\n        var variables = _this4.inputMapper.addDiscount(checkoutId, existingCodes.concat(discountCode));\n\n        return _this4.graphQLClient.send(query$16, variables).then(handleCartMutation('cartDiscountCodesUpdate', _this4.graphQLClient));\n      });\n    }\n\n    /**\n     * Removes the applied discount from an existing checkout.\n     *\n     * @example\n     * const checkoutId = 'Z2lkOi8vc2hvcGlmeS9DaGVja291dC9kMTZmM2EzMDM4Yjc4N=';\n     *\n     * client.checkout.removeDiscount(checkoutId).then((checkout) => {\n     *   // Do something with the updated checkout\n     * });\n     *\n     * @param {String} checkoutId The ID of the checkout to remove the discount from.\n     * @return {Promise|GraphModel} A promise resolving with the updated checkout.\n     */\n\n  }, {\n    key: 'removeDiscount',\n    value: function removeDiscount(checkoutId) {\n      var variables = this.inputMapper.removeDiscount(checkoutId);\n\n      return this.graphQLClient.send(query$16, variables).then(handleCartMutation('cartDiscountCodesUpdate', this.graphQLClient));\n    }\n\n    /**\n     * Applies gift cards to an existing checkout using a list of gift card codes\n     *\n     * @example\n     * const checkoutId = 'Z2lkOi8vc2hvcGlmeS9DaGVja291dC9kMTZmM2EzMDM4Yjc4N=';\n     * const giftCardCodes = ['6FD8853DAGAA949F'];\n     *\n     * client.checkout.addGiftCards(checkoutId, giftCardCodes).then((checkout) => {\n     *   // Do something with the updated checkout\n     * });\n     *\n     * @param {String} checkoutId The ID of the checkout to add gift cards to.\n     * @param {String[]} giftCardCodes The gift card codes to apply to the checkout.\n     * @return {Promise|GraphModel} A promise resolving with the updated checkout.\n     */\n\n  }, {\n    key: 'addGiftCards',\n    value: function addGiftCards(checkoutId, giftCardCodes) {\n      var variables = this.inputMapper.addGiftCards(checkoutId, giftCardCodes);\n\n      return this.graphQLClient.send(query$17, variables).then(handleCartMutation('cartGiftCardCodesUpdate', this.graphQLClient));\n    }\n\n    /**\n     * Remove a gift card from an existing checkout\n     *\n     * @example\n     * const checkoutId = 'Z2lkOi8vc2hvcGlmeS9DaGVja291dC9kMTZmM2EzMDM4Yjc4N=';\n     * const appliedGiftCardId = 'Z2lkOi8vc2hvcGlmeS9BcHBsaWVkR2lmdENhcmQvNDI4NTQ1ODAzMTI=';\n     *\n     * client.checkout.removeGiftCard(checkoutId, appliedGiftCardId).then((checkout) => {\n     *   // Do something with the updated checkout\n     * });\n     *\n     * @param {String} checkoutId The ID of the checkout to add gift cards to.\n     * @param {String} appliedGiftCardId The gift card id to remove from the checkout.\n     * @return {Promise|GraphModel} A promise resolving with the updated checkout.\n     */\n\n  }, {\n    key: 'removeGiftCard',\n    value: function removeGiftCard(checkoutId, appliedGiftCardId) {\n      var variables = this.inputMapper.removeGiftCard(checkoutId, appliedGiftCardId);\n\n      return this.graphQLClient.send(query$22, variables).then(handleCartMutation('cartGiftCardCodesRemove', this.graphQLClient));\n    }\n\n    /**\n     * Removes line items from an existing checkout.\n     *\n     * @example\n     * const checkoutId = 'Z2lkOi8vc2hvcGlmeS9DaGVja291dC9kMTZmM2EzMDM4Yjc4N=';\n     * const lineItemIds = ['TViZGE5Y2U1ZDFhY2FiMmM2YT9rZXk9NTc2YjBhODcwNWIxYzg0YjE5ZjRmZGQ5NjczNGVkZGU='];\n     *\n     * client.checkout.removeLineItems(checkoutId, lineItemIds).then((checkout) => {\n     *   // Do something with the updated checkout\n     * });\n     *\n     * @param {String} checkoutId The ID of the checkout to remove line items from.\n     * @param {String[]} lineItemIds A list of the ids of line items to remove from the checkout.\n     * @return {Promise|GraphModel} A promise resolving with the updated checkout.\n     */\n\n  }, {\n    key: 'removeLineItems',\n    value: function removeLineItems(checkoutId) {\n      var lineIds = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n      var variables = this.inputMapper.removeLineItems(checkoutId, lineIds);\n\n      return this.graphQLClient.send(query$19, variables).then(handleCartMutation('cartLinesRemove', this.graphQLClient));\n    }\n\n    /**\n     * Replace line items on an existing checkout.\n     *\n     * @example\n     * const checkoutId = 'Z2lkOi8vc2hvcGlmeS9DaGVja291dC9kMTZmM2EzMDM4Yjc4N=';\n     * const lineItems = [{variantId: 'Z2lkOi8vc2hvcGlmeS9Qcm9kdWN0VmFyaWFudC8yOTEwNjAyMjc5Mg==', quantity: 5}];\n     *\n     * client.checkout.replaceLineItems(checkoutId, lineItems).then((checkout) => {\n     *   // Do something with the updated checkout\n     * });\n     *\n     * @param {String} checkoutId The ID of the checkout to add line items to.\n     * @param {Object[]} lineItems A list of line items to set on the checkout. See the {@link https://help.shopify.com/api/storefront-api/reference/input-object/checkoutlineiteminput|Storefront API reference} for valid input fields for each line item.\n     * @return {Promise|GraphModel} A promise resolving with the updated checkout.\n     */\n\n  }, {\n    key: 'replaceLineItems',\n    value: function replaceLineItems(checkoutId, lineItems) {\n      var _this5 = this;\n\n      return this.fetch(checkoutId).then(function (checkout) {\n        var lineIds = checkout.lineItems.map(function (lineItem) {\n          return lineItem.id;\n        });\n\n        return _this5.removeLineItems(checkoutId, lineIds);\n      }).then(function () {\n        return _this5.addLineItems(checkoutId, lineItems);\n      });\n    }\n\n    /**\n     * Updates line items on an existing checkout.\n     *\n     * @example\n     * const checkoutId = 'Z2lkOi8vc2hvcGlmeS9DaGVja291dC9kMTZmM2EzMDM4Yjc4N=';\n     * const lineItems = [\n     *   {\n     *     id: 'TViZGE5Y2U1ZDFhY2FiMmM2YT9rZXk9NTc2YjBhODcwNWIxYzg0YjE5ZjRmZGQ5NjczNGVkZGU=',\n     *     quantity: 5,\n     *     variantId: 'Z2lkOi8vc2hvcGlmeS9Qcm9kdWN0VmFyaWFudC8yOTEwNjAyMjc5Mg=='\n     *   }\n     * ];\n     *\n     * client.checkout.updateLineItems(checkoutId, lineItems).then(checkout => {\n     *   // Do something with the updated checkout\n     * });\n     *\n     * @param {String} checkoutId The ID of the checkout to update a line item on.\n     * @param {Object[]} lineItems A list of line item information to update. See the {@link https://help.shopify.com/api/storefront-api/reference/input-object/checkoutlineitemupdateinput|Storefront API reference} for valid input fields for each line item.\n     * @return {Promise|GraphModel} A promise resolving with the updated checkout.\n     */\n\n  }, {\n    key: 'updateLineItems',\n    value: function updateLineItems(checkoutId, lineItems) {\n      var variables = this.inputMapper.updateLineItems(checkoutId, lineItems);\n\n      return this.graphQLClient.send(query$20, variables).then(handleCartMutation('cartLinesUpdate', this.graphQLClient));\n    }\n\n    /**\n     * Updates shipping address on an existing checkout.\n     *\n     * @example\n     * const checkoutId = `'Z2lkOi8vc2hvcGlmeS9DaGVja291dC9kMTZmM2EzMDM4Yjc4N=';\n     * const shippingAddress = {\n     *    address1: 'Chestnut Street 92',\n     *    address2: 'Apartment 2',\n     *    city: 'Louisville',\n     *    company: null,\n     *    country: 'United States',\n     *    firstName: 'Bob',\n     *    lastName: 'Norman',\n     *    phone: '555-625-1199',\n     *    province: 'Kentucky',\n     *    zip: '40202'\n     *  };\n     *\n     * client.checkout.updateShippingAddress(checkoutId, shippingAddress).then(checkout => {\n     *   // Do something with the updated checkout\n     * });\n     *\n     * @param  {String} checkoutId The ID of the checkout to update shipping address.\n     * @param  {Object} shippingAddress A shipping address.\n     * @return {Promise|GraphModel} A promise resolving with the updated checkout.\n     */\n\n  }, {\n    key: 'updateShippingAddress',\n    value: function updateShippingAddress(checkoutId, shippingAddress) {\n      var variables = this.inputMapper.updateShippingAddress(checkoutId, shippingAddress);\n\n      return this.graphQLClient.send(query$15, variables).then(handleCartMutation('cartBuyerIdentityUpdate', this.graphQLClient));\n    }\n  }]);\n  return CheckoutResource;\n}(Resource);\n\n/**\n * @namespace ImageHelpers\n */\nvar imageHelpers = {\n\n  /**\n   * Generates the image src for a resized image with maximum dimensions `maxWidth` and `maxHeight`.\n   * Images do not scale up.\n   *\n   * @example\n   * const url = client.image.helpers.imageForSize(product.variants[0].image, {maxWidth: 50, maxHeight: 50});\n   *\n   * @memberof ImageHelpers\n   * @method imageForSize\n   * @param {Object} image The original image model to generate the image src for.\n   * @param {Object} options An options object containing:\n   *  @param {Integer} options.maxWidth The maximum width for the image.\n   *  @param {Integer} options.maxHeight The maximum height for the image.\n   * @return {String} The image src for the resized image.\n   */\n  imageForSize: function imageForSize(image, _ref) {\n    var maxWidth = _ref.maxWidth,\n        maxHeight = _ref.maxHeight;\n\n    var splitUrl = image.src.split('?');\n    var notQuery = splitUrl[0];\n    var query = splitUrl[1] ? '?' + splitUrl[1] : '';\n\n    // Use the section before the query\n    var imageTokens = notQuery.split('.');\n\n    // Take the token before the file extension and append the dimensions\n    var imagePathIndex = imageTokens.length - 2;\n\n    imageTokens[imagePathIndex] = imageTokens[imagePathIndex] + '_' + maxWidth + 'x' + maxHeight;\n\n    return '' + imageTokens.join('.') + query;\n  }\n};\n\n/**\n * The JS Buy SDK image resource\n * @class\n */\n\nvar ImageResource = function (_Resource) {\n  inherits$1(ImageResource, _Resource);\n\n  function ImageResource() {\n    classCallCheck$1(this, ImageResource);\n    return possibleConstructorReturn$1(this, (ImageResource.__proto__ || Object.getPrototypeOf(ImageResource)).apply(this, arguments));\n  }\n\n  createClass$1(ImageResource, [{\n    key: 'helpers',\n    get: function get$$1() {\n      return imageHelpers;\n    }\n  }]);\n  return ImageResource;\n}(Resource);\n\nvar version = \"3.0.6\";\n\nvar AppliedGiftCard = {\n  \"name\": \"AppliedGiftCard\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"amountUsed\": \"MoneyV2\",\n    \"balance\": \"MoneyV2\",\n    \"id\": \"ID\",\n    \"lastCharacters\": \"String\",\n    \"presentmentAmountUsed\": \"MoneyV2\"\n  },\n  \"implementsNode\": true\n};\n\nvar Attribute = {\n  \"name\": \"Attribute\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"key\": \"String\",\n    \"value\": \"String\"\n  },\n  \"implementsNode\": false\n};\n\nvar AutomaticDiscountApplication = {\n  \"name\": \"AutomaticDiscountApplication\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"title\": \"String\"\n  },\n  \"implementsNode\": false\n};\n\nvar BaseCartLine = {\n  \"name\": \"BaseCartLine\",\n  \"kind\": \"INTERFACE\",\n  \"fieldBaseTypes\": {\n    \"attributes\": \"Attribute\",\n    \"cost\": \"CartLineCost\",\n    \"discountAllocations\": \"CartDiscountAllocation\",\n    \"id\": \"ID\",\n    \"merchandise\": \"Merchandise\",\n    \"quantity\": \"Int\"\n  },\n  \"possibleTypes\": [\"CartLine\", \"ComponentizableCartLine\"]\n};\n\nvar BaseCartLineConnection = {\n  \"name\": \"BaseCartLineConnection\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"edges\": \"BaseCartLineEdge\",\n    \"pageInfo\": \"PageInfo\"\n  },\n  \"implementsNode\": false\n};\n\nvar BaseCartLineEdge = {\n  \"name\": \"BaseCartLineEdge\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"cursor\": \"String\",\n    \"node\": \"BaseCartLine\"\n  },\n  \"implementsNode\": false\n};\n\nvar Boolean$1 = {\n  \"name\": \"Boolean\",\n  \"kind\": \"SCALAR\"\n};\n\nvar Cart = {\n  \"name\": \"Cart\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"appliedGiftCards\": \"AppliedGiftCard\",\n    \"attributes\": \"Attribute\",\n    \"buyerIdentity\": \"CartBuyerIdentity\",\n    \"checkoutUrl\": \"URL\",\n    \"cost\": \"CartCost\",\n    \"createdAt\": \"DateTime\",\n    \"deliveryGroups\": \"CartDeliveryGroupConnection\",\n    \"discountAllocations\": \"CartDiscountAllocation\",\n    \"discountCodes\": \"CartDiscountCode\",\n    \"id\": \"ID\",\n    \"lines\": \"BaseCartLineConnection\",\n    \"note\": \"String\",\n    \"updatedAt\": \"DateTime\"\n  },\n  \"implementsNode\": true\n};\n\nvar CartAttributesUpdatePayload = {\n  \"name\": \"CartAttributesUpdatePayload\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"cart\": \"Cart\",\n    \"userErrors\": \"CartUserError\",\n    \"warnings\": \"CartWarning\"\n  },\n  \"implementsNode\": false\n};\n\nvar CartAutomaticDiscountAllocation = {\n  \"name\": \"CartAutomaticDiscountAllocation\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"title\": \"String\"\n  },\n  \"implementsNode\": false\n};\n\nvar CartBuyerIdentity = {\n  \"name\": \"CartBuyerIdentity\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"countryCode\": \"CountryCode\",\n    \"customer\": \"Customer\",\n    \"deliveryAddressPreferences\": \"DeliveryAddress\",\n    \"email\": \"String\",\n    \"phone\": \"String\",\n    \"preferences\": \"CartPreferences\"\n  },\n  \"implementsNode\": false\n};\n\nvar CartBuyerIdentityUpdatePayload = {\n  \"name\": \"CartBuyerIdentityUpdatePayload\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"cart\": \"Cart\",\n    \"userErrors\": \"CartUserError\",\n    \"warnings\": \"CartWarning\"\n  },\n  \"implementsNode\": false\n};\n\nvar CartCodeDiscountAllocation = {\n  \"name\": \"CartCodeDiscountAllocation\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"code\": \"String\"\n  },\n  \"implementsNode\": false\n};\n\nvar CartCost = {\n  \"name\": \"CartCost\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"checkoutChargeAmount\": \"MoneyV2\",\n    \"subtotalAmount\": \"MoneyV2\",\n    \"totalAmount\": \"MoneyV2\",\n    \"totalDutyAmount\": \"MoneyV2\",\n    \"totalTaxAmount\": \"MoneyV2\"\n  },\n  \"implementsNode\": false\n};\n\nvar CartCreatePayload = {\n  \"name\": \"CartCreatePayload\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"cart\": \"Cart\",\n    \"userErrors\": \"CartUserError\",\n    \"warnings\": \"CartWarning\"\n  },\n  \"implementsNode\": false\n};\n\nvar CartCustomDiscountAllocation = {\n  \"name\": \"CartCustomDiscountAllocation\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"title\": \"String\"\n  },\n  \"implementsNode\": false\n};\n\nvar CartDeliveryCoordinatesPreference = {\n  \"name\": \"CartDeliveryCoordinatesPreference\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"countryCode\": \"CountryCode\",\n    \"latitude\": \"Float\",\n    \"longitude\": \"Float\"\n  },\n  \"implementsNode\": false\n};\n\nvar CartDeliveryGroup = {\n  \"name\": \"CartDeliveryGroup\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"cartLines\": \"BaseCartLineConnection\",\n    \"deliveryAddress\": \"MailingAddress\",\n    \"deliveryOptions\": \"CartDeliveryOption\",\n    \"id\": \"ID\",\n    \"selectedDeliveryOption\": \"CartDeliveryOption\"\n  },\n  \"implementsNode\": false\n};\n\nvar CartDeliveryGroupConnection = {\n  \"name\": \"CartDeliveryGroupConnection\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"edges\": \"CartDeliveryGroupEdge\",\n    \"pageInfo\": \"PageInfo\"\n  },\n  \"implementsNode\": false\n};\n\nvar CartDeliveryGroupEdge = {\n  \"name\": \"CartDeliveryGroupEdge\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"node\": \"CartDeliveryGroup\"\n  },\n  \"implementsNode\": false\n};\n\nvar CartDeliveryOption = {\n  \"name\": \"CartDeliveryOption\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"code\": \"String\",\n    \"deliveryMethodType\": \"DeliveryMethodType\",\n    \"description\": \"String\",\n    \"estimatedCost\": \"MoneyV2\",\n    \"handle\": \"String\",\n    \"title\": \"String\"\n  },\n  \"implementsNode\": false\n};\n\nvar CartDeliveryPreference = {\n  \"name\": \"CartDeliveryPreference\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"coordinates\": \"CartDeliveryCoordinatesPreference\",\n    \"deliveryMethod\": \"PreferenceDeliveryMethodType\",\n    \"pickupHandle\": \"String\"\n  },\n  \"implementsNode\": false\n};\n\nvar CartDiscountAllocation = {\n  \"name\": \"CartDiscountAllocation\",\n  \"kind\": \"INTERFACE\",\n  \"fieldBaseTypes\": {\n    \"discountApplication\": \"CartDiscountApplication\",\n    \"discountedAmount\": \"MoneyV2\"\n  },\n  \"possibleTypes\": [\"CartAutomaticDiscountAllocation\", \"CartCodeDiscountAllocation\", \"CartCustomDiscountAllocation\"]\n};\n\nvar CartDiscountApplication = {\n  \"name\": \"CartDiscountApplication\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"allocationMethod\": \"DiscountApplicationAllocationMethod\",\n    \"targetSelection\": \"DiscountApplicationTargetSelection\",\n    \"targetType\": \"DiscountApplicationTargetType\",\n    \"value\": \"PricingValue\"\n  },\n  \"implementsNode\": false\n};\n\nvar CartDiscountCode = {\n  \"name\": \"CartDiscountCode\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"applicable\": \"Boolean\",\n    \"code\": \"String\"\n  },\n  \"implementsNode\": false\n};\n\nvar CartDiscountCodesUpdatePayload = {\n  \"name\": \"CartDiscountCodesUpdatePayload\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"cart\": \"Cart\",\n    \"userErrors\": \"CartUserError\",\n    \"warnings\": \"CartWarning\"\n  },\n  \"implementsNode\": false\n};\n\nvar CartErrorCode = {\n  \"name\": \"CartErrorCode\",\n  \"kind\": \"ENUM\"\n};\n\nvar CartGiftCardCodesRemovePayload = {\n  \"name\": \"CartGiftCardCodesRemovePayload\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"cart\": \"Cart\",\n    \"userErrors\": \"CartUserError\",\n    \"warnings\": \"CartWarning\"\n  },\n  \"implementsNode\": false\n};\n\nvar CartGiftCardCodesUpdatePayload = {\n  \"name\": \"CartGiftCardCodesUpdatePayload\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"cart\": \"Cart\",\n    \"userErrors\": \"CartUserError\",\n    \"warnings\": \"CartWarning\"\n  },\n  \"implementsNode\": false\n};\n\nvar CartLineCost = {\n  \"name\": \"CartLineCost\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"amountPerQuantity\": \"MoneyV2\",\n    \"compareAtAmountPerQuantity\": \"MoneyV2\",\n    \"subtotalAmount\": \"MoneyV2\",\n    \"totalAmount\": \"MoneyV2\"\n  },\n  \"implementsNode\": false\n};\n\nvar CartLinesAddPayload = {\n  \"name\": \"CartLinesAddPayload\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"cart\": \"Cart\",\n    \"userErrors\": \"CartUserError\",\n    \"warnings\": \"CartWarning\"\n  },\n  \"implementsNode\": false\n};\n\nvar CartLinesRemovePayload = {\n  \"name\": \"CartLinesRemovePayload\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"cart\": \"Cart\",\n    \"userErrors\": \"CartUserError\",\n    \"warnings\": \"CartWarning\"\n  },\n  \"implementsNode\": false\n};\n\nvar CartLinesUpdatePayload = {\n  \"name\": \"CartLinesUpdatePayload\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"cart\": \"Cart\",\n    \"userErrors\": \"CartUserError\",\n    \"warnings\": \"CartWarning\"\n  },\n  \"implementsNode\": false\n};\n\nvar CartNoteUpdatePayload = {\n  \"name\": \"CartNoteUpdatePayload\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"cart\": \"Cart\",\n    \"userErrors\": \"CartUserError\"\n  },\n  \"implementsNode\": false\n};\n\nvar CartPreferences = {\n  \"name\": \"CartPreferences\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"delivery\": \"CartDeliveryPreference\",\n    \"wallet\": \"String\"\n  },\n  \"implementsNode\": false\n};\n\nvar CartUserError = {\n  \"name\": \"CartUserError\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"code\": \"CartErrorCode\",\n    \"field\": \"String\",\n    \"message\": \"String\"\n  },\n  \"implementsNode\": false\n};\n\nvar CartWarning = {\n  \"name\": \"CartWarning\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"code\": \"CartWarningCode\",\n    \"message\": \"String\"\n  },\n  \"implementsNode\": false\n};\n\nvar CartWarningCode = {\n  \"name\": \"CartWarningCode\",\n  \"kind\": \"ENUM\"\n};\n\nvar Collection = {\n  \"name\": \"Collection\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"description\": \"String\",\n    \"descriptionHtml\": \"HTML\",\n    \"handle\": \"String\",\n    \"id\": \"ID\",\n    \"image\": \"Image\",\n    \"products\": \"ProductConnection\",\n    \"title\": \"String\",\n    \"updatedAt\": \"DateTime\"\n  },\n  \"implementsNode\": true\n};\n\nvar CollectionConnection = {\n  \"name\": \"CollectionConnection\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"edges\": \"CollectionEdge\",\n    \"pageInfo\": \"PageInfo\"\n  },\n  \"implementsNode\": false\n};\n\nvar CollectionEdge = {\n  \"name\": \"CollectionEdge\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"cursor\": \"String\",\n    \"node\": \"Collection\"\n  },\n  \"implementsNode\": false\n};\n\nvar CountryCode = {\n  \"name\": \"CountryCode\",\n  \"kind\": \"ENUM\"\n};\n\nvar CurrencyCode = {\n  \"name\": \"CurrencyCode\",\n  \"kind\": \"ENUM\"\n};\n\nvar Customer = {\n  \"name\": \"Customer\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"email\": \"String\"\n  },\n  \"implementsNode\": false\n};\n\nvar DateTime = {\n  \"name\": \"DateTime\",\n  \"kind\": \"SCALAR\"\n};\n\nvar Decimal = {\n  \"name\": \"Decimal\",\n  \"kind\": \"SCALAR\"\n};\n\nvar DeliveryAddress = {\n  \"name\": \"DeliveryAddress\",\n  \"kind\": \"UNION\"\n};\n\nvar DeliveryMethodType = {\n  \"name\": \"DeliveryMethodType\",\n  \"kind\": \"ENUM\"\n};\n\nvar DiscountApplication = {\n  \"name\": \"DiscountApplication\",\n  \"kind\": \"INTERFACE\",\n  \"fieldBaseTypes\": {\n    \"allocationMethod\": \"DiscountApplicationAllocationMethod\",\n    \"targetSelection\": \"DiscountApplicationTargetSelection\",\n    \"targetType\": \"DiscountApplicationTargetType\",\n    \"value\": \"PricingValue\"\n  },\n  \"possibleTypes\": [\"AutomaticDiscountApplication\", \"DiscountCodeApplication\", \"ManualDiscountApplication\", \"ScriptDiscountApplication\"]\n};\n\nvar DiscountApplicationAllocationMethod = {\n  \"name\": \"DiscountApplicationAllocationMethod\",\n  \"kind\": \"ENUM\"\n};\n\nvar DiscountApplicationTargetSelection = {\n  \"name\": \"DiscountApplicationTargetSelection\",\n  \"kind\": \"ENUM\"\n};\n\nvar DiscountApplicationTargetType = {\n  \"name\": \"DiscountApplicationTargetType\",\n  \"kind\": \"ENUM\"\n};\n\nvar DiscountCodeApplication = {\n  \"name\": \"DiscountCodeApplication\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"applicable\": \"Boolean\",\n    \"code\": \"String\"\n  },\n  \"implementsNode\": false\n};\n\nvar Domain = {\n  \"name\": \"Domain\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"host\": \"String\",\n    \"sslEnabled\": \"Boolean\",\n    \"url\": \"URL\"\n  },\n  \"implementsNode\": false\n};\n\nvar Float = {\n  \"name\": \"Float\",\n  \"kind\": \"SCALAR\"\n};\n\nvar HTML = {\n  \"name\": \"HTML\",\n  \"kind\": \"SCALAR\"\n};\n\nvar ID = {\n  \"name\": \"ID\",\n  \"kind\": \"SCALAR\"\n};\n\nvar Image = {\n  \"name\": \"Image\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"altText\": \"String\",\n    \"height\": \"Int\",\n    \"id\": \"ID\",\n    \"url\": \"URL\",\n    \"width\": \"Int\"\n  },\n  \"implementsNode\": false\n};\n\nvar ImageConnection = {\n  \"name\": \"ImageConnection\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"edges\": \"ImageEdge\",\n    \"pageInfo\": \"PageInfo\"\n  },\n  \"implementsNode\": false\n};\n\nvar ImageEdge = {\n  \"name\": \"ImageEdge\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"cursor\": \"String\",\n    \"node\": \"Image\"\n  },\n  \"implementsNode\": false\n};\n\nvar Int = {\n  \"name\": \"Int\",\n  \"kind\": \"SCALAR\"\n};\n\nvar MailingAddress = {\n  \"name\": \"MailingAddress\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"address1\": \"String\",\n    \"address2\": \"String\",\n    \"city\": \"String\",\n    \"company\": \"String\",\n    \"country\": \"String\",\n    \"countryCodeV2\": \"CountryCode\",\n    \"firstName\": \"String\",\n    \"formatted\": \"String\",\n    \"formattedArea\": \"String\",\n    \"lastName\": \"String\",\n    \"latitude\": \"Float\",\n    \"longitude\": \"Float\",\n    \"name\": \"String\",\n    \"phone\": \"String\",\n    \"province\": \"String\",\n    \"provinceCode\": \"String\",\n    \"zip\": \"String\"\n  },\n  \"implementsNode\": true\n};\n\nvar ManualDiscountApplication = {\n  \"name\": \"ManualDiscountApplication\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"description\": \"String\",\n    \"title\": \"String\"\n  },\n  \"implementsNode\": false\n};\n\nvar Merchandise = {\n  \"name\": \"Merchandise\",\n  \"kind\": \"UNION\"\n};\n\nvar MoneyV2 = {\n  \"name\": \"MoneyV2\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"amount\": \"Decimal\",\n    \"currencyCode\": \"CurrencyCode\"\n  },\n  \"implementsNode\": false\n};\n\nvar Mutation$1 = {\n  \"name\": \"Mutation\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"cartAttributesUpdate\": \"CartAttributesUpdatePayload\",\n    \"cartBuyerIdentityUpdate\": \"CartBuyerIdentityUpdatePayload\",\n    \"cartCreate\": \"CartCreatePayload\",\n    \"cartDiscountCodesUpdate\": \"CartDiscountCodesUpdatePayload\",\n    \"cartGiftCardCodesRemove\": \"CartGiftCardCodesRemovePayload\",\n    \"cartGiftCardCodesUpdate\": \"CartGiftCardCodesUpdatePayload\",\n    \"cartLinesAdd\": \"CartLinesAddPayload\",\n    \"cartLinesRemove\": \"CartLinesRemovePayload\",\n    \"cartLinesUpdate\": \"CartLinesUpdatePayload\",\n    \"cartNoteUpdate\": \"CartNoteUpdatePayload\"\n  },\n  \"implementsNode\": false,\n  \"relayInputObjectBaseTypes\": {\n    \"cartCreate\": \"CartInput\",\n    \"cartMetafieldDelete\": \"CartMetafieldDeleteInput\",\n    \"customerAccessTokenCreate\": \"CustomerAccessTokenCreateInput\",\n    \"customerActivate\": \"CustomerActivateInput\",\n    \"customerCreate\": \"CustomerCreateInput\",\n    \"customerReset\": \"CustomerResetInput\"\n  }\n};\n\nvar Node = {\n  \"name\": \"Node\",\n  \"kind\": \"INTERFACE\",\n  \"fieldBaseTypes\": {},\n  \"possibleTypes\": [\"AppliedGiftCard\", \"Article\", \"Blog\", \"Cart\", \"CartLine\", \"Collection\", \"Comment\", \"Company\", \"CompanyContact\", \"CompanyLocation\", \"ComponentizableCartLine\", \"ExternalVideo\", \"GenericFile\", \"Location\", \"MailingAddress\", \"Market\", \"MediaImage\", \"MediaPresentation\", \"Menu\", \"MenuItem\", \"Metafield\", \"Metaobject\", \"Model3d\", \"Order\", \"Page\", \"Product\", \"ProductOption\", \"ProductOptionValue\", \"ProductVariant\", \"Shop\", \"ShopPayInstallmentsFinancingPlan\", \"ShopPayInstallmentsFinancingPlanTerm\", \"ShopPayInstallmentsProductVariantPricing\", \"ShopPolicy\", \"TaxonomyCategory\", \"UrlRedirect\", \"Video\"]\n};\n\nvar PageInfo = {\n  \"name\": \"PageInfo\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"hasNextPage\": \"Boolean\",\n    \"hasPreviousPage\": \"Boolean\"\n  },\n  \"implementsNode\": false\n};\n\nvar PaymentSettings = {\n  \"name\": \"PaymentSettings\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"enabledPresentmentCurrencies\": \"CurrencyCode\"\n  },\n  \"implementsNode\": false\n};\n\nvar PreferenceDeliveryMethodType = {\n  \"name\": \"PreferenceDeliveryMethodType\",\n  \"kind\": \"ENUM\"\n};\n\nvar PricingPercentageValue = {\n  \"name\": \"PricingPercentageValue\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"percentage\": \"Float\"\n  },\n  \"implementsNode\": false\n};\n\nvar PricingValue = {\n  \"name\": \"PricingValue\",\n  \"kind\": \"UNION\"\n};\n\nvar Product = {\n  \"name\": \"Product\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"availableForSale\": \"Boolean\",\n    \"createdAt\": \"DateTime\",\n    \"description\": \"String\",\n    \"descriptionHtml\": \"HTML\",\n    \"handle\": \"String\",\n    \"id\": \"ID\",\n    \"images\": \"ImageConnection\",\n    \"onlineStoreUrl\": \"URL\",\n    \"options\": \"ProductOption\",\n    \"productType\": \"String\",\n    \"publishedAt\": \"DateTime\",\n    \"title\": \"String\",\n    \"updatedAt\": \"DateTime\",\n    \"variants\": \"ProductVariantConnection\",\n    \"vendor\": \"String\"\n  },\n  \"implementsNode\": true\n};\n\nvar ProductConnection = {\n  \"name\": \"ProductConnection\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"edges\": \"ProductEdge\",\n    \"pageInfo\": \"PageInfo\"\n  },\n  \"implementsNode\": false\n};\n\nvar ProductEdge = {\n  \"name\": \"ProductEdge\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"cursor\": \"String\",\n    \"node\": \"Product\"\n  },\n  \"implementsNode\": false\n};\n\nvar ProductOption = {\n  \"name\": \"ProductOption\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"name\": \"String\",\n    \"values\": \"String\"\n  },\n  \"implementsNode\": true\n};\n\nvar ProductVariant = {\n  \"name\": \"ProductVariant\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"availableForSale\": \"Boolean\",\n    \"compareAtPrice\": \"MoneyV2\",\n    \"id\": \"ID\",\n    \"image\": \"Image\",\n    \"price\": \"MoneyV2\",\n    \"product\": \"Product\",\n    \"selectedOptions\": \"SelectedOption\",\n    \"sku\": \"String\",\n    \"title\": \"String\",\n    \"unitPrice\": \"MoneyV2\",\n    \"unitPriceMeasurement\": \"UnitPriceMeasurement\",\n    \"weight\": \"Float\"\n  },\n  \"implementsNode\": true\n};\n\nvar ProductVariantConnection = {\n  \"name\": \"ProductVariantConnection\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"edges\": \"ProductVariantEdge\",\n    \"pageInfo\": \"PageInfo\"\n  },\n  \"implementsNode\": false\n};\n\nvar ProductVariantEdge = {\n  \"name\": \"ProductVariantEdge\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"cursor\": \"String\",\n    \"node\": \"ProductVariant\"\n  },\n  \"implementsNode\": false\n};\n\nvar QueryRoot = {\n  \"name\": \"QueryRoot\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"cart\": \"Cart\",\n    \"collectionByHandle\": \"Collection\",\n    \"collections\": \"CollectionConnection\",\n    \"node\": \"Node\",\n    \"nodes\": \"Node\",\n    \"productByHandle\": \"Product\",\n    \"productRecommendations\": \"Product\",\n    \"products\": \"ProductConnection\",\n    \"shop\": \"Shop\"\n  },\n  \"implementsNode\": false\n};\n\nvar ScriptDiscountApplication = {\n  \"name\": \"ScriptDiscountApplication\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"title\": \"String\"\n  },\n  \"implementsNode\": false\n};\n\nvar SelectedOption = {\n  \"name\": \"SelectedOption\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"name\": \"String\",\n    \"value\": \"String\"\n  },\n  \"implementsNode\": false\n};\n\nvar Shop = {\n  \"name\": \"Shop\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"description\": \"String\",\n    \"moneyFormat\": \"String\",\n    \"name\": \"String\",\n    \"paymentSettings\": \"PaymentSettings\",\n    \"primaryDomain\": \"Domain\",\n    \"privacyPolicy\": \"ShopPolicy\",\n    \"refundPolicy\": \"ShopPolicy\",\n    \"termsOfService\": \"ShopPolicy\"\n  },\n  \"implementsNode\": true\n};\n\nvar ShopPolicy = {\n  \"name\": \"ShopPolicy\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"body\": \"String\",\n    \"id\": \"ID\",\n    \"title\": \"String\",\n    \"url\": \"URL\"\n  },\n  \"implementsNode\": true\n};\n\nvar String$1 = {\n  \"name\": \"String\",\n  \"kind\": \"SCALAR\"\n};\n\nvar URL$1 = {\n  \"name\": \"URL\",\n  \"kind\": \"SCALAR\"\n};\n\nvar UnitPriceMeasurement = {\n  \"name\": \"UnitPriceMeasurement\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"measuredType\": \"UnitPriceMeasurementMeasuredType\",\n    \"quantityUnit\": \"UnitPriceMeasurementMeasuredUnit\",\n    \"quantityValue\": \"Float\",\n    \"referenceUnit\": \"UnitPriceMeasurementMeasuredUnit\",\n    \"referenceValue\": \"Int\"\n  },\n  \"implementsNode\": false\n};\n\nvar UnitPriceMeasurementMeasuredType = {\n  \"name\": \"UnitPriceMeasurementMeasuredType\",\n  \"kind\": \"ENUM\"\n};\n\nvar UnitPriceMeasurementMeasuredUnit = {\n  \"name\": \"UnitPriceMeasurementMeasuredUnit\",\n  \"kind\": \"ENUM\"\n};\n\nvar UserError = {\n  \"name\": \"UserError\",\n  \"kind\": \"OBJECT\",\n  \"fieldBaseTypes\": {\n    \"field\": \"String\",\n    \"message\": \"String\"\n  },\n  \"implementsNode\": false\n};\n\nvar Types = {\n  types: {}\n};\nTypes.types[\"AppliedGiftCard\"] = AppliedGiftCard;\nTypes.types[\"Attribute\"] = Attribute;\nTypes.types[\"AutomaticDiscountApplication\"] = AutomaticDiscountApplication;\nTypes.types[\"BaseCartLine\"] = BaseCartLine;\nTypes.types[\"BaseCartLineConnection\"] = BaseCartLineConnection;\nTypes.types[\"BaseCartLineEdge\"] = BaseCartLineEdge;\nTypes.types[\"Boolean\"] = Boolean$1;\nTypes.types[\"Cart\"] = Cart;\nTypes.types[\"CartAttributesUpdatePayload\"] = CartAttributesUpdatePayload;\nTypes.types[\"CartAutomaticDiscountAllocation\"] = CartAutomaticDiscountAllocation;\nTypes.types[\"CartBuyerIdentity\"] = CartBuyerIdentity;\nTypes.types[\"CartBuyerIdentityUpdatePayload\"] = CartBuyerIdentityUpdatePayload;\nTypes.types[\"CartCodeDiscountAllocation\"] = CartCodeDiscountAllocation;\nTypes.types[\"CartCost\"] = CartCost;\nTypes.types[\"CartCreatePayload\"] = CartCreatePayload;\nTypes.types[\"CartCustomDiscountAllocation\"] = CartCustomDiscountAllocation;\nTypes.types[\"CartDeliveryCoordinatesPreference\"] = CartDeliveryCoordinatesPreference;\nTypes.types[\"CartDeliveryGroup\"] = CartDeliveryGroup;\nTypes.types[\"CartDeliveryGroupConnection\"] = CartDeliveryGroupConnection;\nTypes.types[\"CartDeliveryGroupEdge\"] = CartDeliveryGroupEdge;\nTypes.types[\"CartDeliveryOption\"] = CartDeliveryOption;\nTypes.types[\"CartDeliveryPreference\"] = CartDeliveryPreference;\nTypes.types[\"CartDiscountAllocation\"] = CartDiscountAllocation;\nTypes.types[\"CartDiscountApplication\"] = CartDiscountApplication;\nTypes.types[\"CartDiscountCode\"] = CartDiscountCode;\nTypes.types[\"CartDiscountCodesUpdatePayload\"] = CartDiscountCodesUpdatePayload;\nTypes.types[\"CartErrorCode\"] = CartErrorCode;\nTypes.types[\"CartGiftCardCodesRemovePayload\"] = CartGiftCardCodesRemovePayload;\nTypes.types[\"CartGiftCardCodesUpdatePayload\"] = CartGiftCardCodesUpdatePayload;\nTypes.types[\"CartLineCost\"] = CartLineCost;\nTypes.types[\"CartLinesAddPayload\"] = CartLinesAddPayload;\nTypes.types[\"CartLinesRemovePayload\"] = CartLinesRemovePayload;\nTypes.types[\"CartLinesUpdatePayload\"] = CartLinesUpdatePayload;\nTypes.types[\"CartNoteUpdatePayload\"] = CartNoteUpdatePayload;\nTypes.types[\"CartPreferences\"] = CartPreferences;\nTypes.types[\"CartUserError\"] = CartUserError;\nTypes.types[\"CartWarning\"] = CartWarning;\nTypes.types[\"CartWarningCode\"] = CartWarningCode;\nTypes.types[\"Collection\"] = Collection;\nTypes.types[\"CollectionConnection\"] = CollectionConnection;\nTypes.types[\"CollectionEdge\"] = CollectionEdge;\nTypes.types[\"CountryCode\"] = CountryCode;\nTypes.types[\"CurrencyCode\"] = CurrencyCode;\nTypes.types[\"Customer\"] = Customer;\nTypes.types[\"DateTime\"] = DateTime;\nTypes.types[\"Decimal\"] = Decimal;\nTypes.types[\"DeliveryAddress\"] = DeliveryAddress;\nTypes.types[\"DeliveryMethodType\"] = DeliveryMethodType;\nTypes.types[\"DiscountApplication\"] = DiscountApplication;\nTypes.types[\"DiscountApplicationAllocationMethod\"] = DiscountApplicationAllocationMethod;\nTypes.types[\"DiscountApplicationTargetSelection\"] = DiscountApplicationTargetSelection;\nTypes.types[\"DiscountApplicationTargetType\"] = DiscountApplicationTargetType;\nTypes.types[\"DiscountCodeApplication\"] = DiscountCodeApplication;\nTypes.types[\"Domain\"] = Domain;\nTypes.types[\"Float\"] = Float;\nTypes.types[\"HTML\"] = HTML;\nTypes.types[\"ID\"] = ID;\nTypes.types[\"Image\"] = Image;\nTypes.types[\"ImageConnection\"] = ImageConnection;\nTypes.types[\"ImageEdge\"] = ImageEdge;\nTypes.types[\"Int\"] = Int;\nTypes.types[\"MailingAddress\"] = MailingAddress;\nTypes.types[\"ManualDiscountApplication\"] = ManualDiscountApplication;\nTypes.types[\"Merchandise\"] = Merchandise;\nTypes.types[\"MoneyV2\"] = MoneyV2;\nTypes.types[\"Mutation\"] = Mutation$1;\nTypes.types[\"Node\"] = Node;\nTypes.types[\"PageInfo\"] = PageInfo;\nTypes.types[\"PaymentSettings\"] = PaymentSettings;\nTypes.types[\"PreferenceDeliveryMethodType\"] = PreferenceDeliveryMethodType;\nTypes.types[\"PricingPercentageValue\"] = PricingPercentageValue;\nTypes.types[\"PricingValue\"] = PricingValue;\nTypes.types[\"Product\"] = Product;\nTypes.types[\"ProductConnection\"] = ProductConnection;\nTypes.types[\"ProductEdge\"] = ProductEdge;\nTypes.types[\"ProductOption\"] = ProductOption;\nTypes.types[\"ProductVariant\"] = ProductVariant;\nTypes.types[\"ProductVariantConnection\"] = ProductVariantConnection;\nTypes.types[\"ProductVariantEdge\"] = ProductVariantEdge;\nTypes.types[\"QueryRoot\"] = QueryRoot;\nTypes.types[\"ScriptDiscountApplication\"] = ScriptDiscountApplication;\nTypes.types[\"SelectedOption\"] = SelectedOption;\nTypes.types[\"Shop\"] = Shop;\nTypes.types[\"ShopPolicy\"] = ShopPolicy;\nTypes.types[\"String\"] = String$1;\nTypes.types[\"URL\"] = URL$1;\nTypes.types[\"UnitPriceMeasurement\"] = UnitPriceMeasurement;\nTypes.types[\"UnitPriceMeasurementMeasuredType\"] = UnitPriceMeasurementMeasuredType;\nTypes.types[\"UnitPriceMeasurementMeasuredUnit\"] = UnitPriceMeasurementMeasuredUnit;\nTypes.types[\"UserError\"] = UserError;\nTypes.queryType = \"QueryRoot\";\nTypes.mutationType = \"Mutation\";\nTypes.subscriptionType = null;\n\nfunction recursivelyFreezeObject(structure) {\n  Object.getOwnPropertyNames(structure).forEach(function (key) {\n    var value = structure[key];\n    if (value && (typeof value === \"undefined\" ? \"undefined\" : _typeof(value)) === 'object') {\n      recursivelyFreezeObject(value);\n    }\n  });\n  Object.freeze(structure);\n  return structure;\n}\n\nvar types = recursivelyFreezeObject(Types);\n\n// GraphQL\n/**\n * The JS Buy SDK Client.\n * @class\n *\n * @property {ProductResource} product The property under which product fetching methods live.\n * @property {CollectionResource} collection The property under which collection fetching methods live.\n * @property {ShopResource} shop The property under which shop fetching methods live.\n * @property {CartResource} cart The property under which shop fetching and mutating methods live.\n * @property {ImageResource} image The property under which image helper methods live.\n */\n\nvar Client = function () {\n  createClass$1(Client, null, [{\n    key: 'buildClient',\n\n\n    /**\n     * Primary entry point for building a new Client.\n     */\n    value: function buildClient(config, fetchFunction) {\n      var newConfig = new Config(config);\n      var client = new Client(newConfig, Client$2, fetchFunction);\n\n      client.config = newConfig;\n\n      return client;\n    }\n\n    /**\n     * @constructs Client\n     * @param {Config} config An instance of {@link Config} used to configure the Client.\n     */\n\n  }]);\n\n  function Client(config) {\n    var GraphQLClientClass = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Client$2;\n    var fetchFunction = arguments[2];\n    classCallCheck$1(this, Client);\n\n    var url = 'https://' + config.domain + '/api/2025-01/graphql';\n\n    var headers = {\n      'X-SDK-Variant': 'javascript',\n      'X-SDK-Version': version,\n      'X-Shopify-Storefront-Access-Token': config.storefrontAccessToken\n    };\n\n    if (config.source) {\n      headers['X-SDK-Variant-Source'] = config.source;\n    }\n\n    var languageHeader = config.language ? config.language : '*';\n\n    headers['Accept-Language'] = languageHeader;\n\n    if (fetchFunction) {\n      headers['Content-Type'] = 'application/json';\n      headers.Accept = 'application/json';\n\n      this.graphQLClient = new GraphQLClientClass(types, {\n        fetcher: function fetcher(graphQLParams) {\n          return fetchFunction(url, {\n            body: JSON.stringify(graphQLParams),\n            method: 'POST',\n            mode: 'cors',\n            headers: headers\n          }).then(function (response) {\n            return response.json();\n          });\n        }\n      });\n    } else {\n      this.graphQLClient = new GraphQLClientClass(types, {\n        url: url,\n        fetcherOptions: { headers: headers }\n      });\n    }\n\n    this.product = new ProductResource(this.graphQLClient);\n    this.collection = new CollectionResource(this.graphQLClient);\n    this.shop = new ShopResource(this.graphQLClient);\n    this.checkout = new CheckoutResource(this.graphQLClient);\n    this.image = new ImageResource(this.graphQLClient);\n  }\n\n  /**\n   * Fetches the next page of models\n   *\n   * @example\n   * client.fetchNextPage(products).then((nextProducts) => {\n   *   // Do something with the products\n   * });\n   *\n   * @param {models} [Array] The paginated set to fetch the next page of\n   * @return {Promise|GraphModel[]} A promise resolving with an array of `GraphModel`s of the type provided.\n   */\n\n\n  createClass$1(Client, [{\n    key: 'fetchNextPage',\n    value: function fetchNextPage(models) {\n      return this.graphQLClient.fetchNextPage(models);\n    }\n  }]);\n  return Client;\n}();\n\nmodule.exports = Client;\n//# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc2hvcGlmeS1idXkvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRWE7O0FBRWI7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBOzs7Ozs7Ozs7Ozs7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxvQkFBb0Isa0JBQWtCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOzs7Ozs7Ozs7O0FBVUQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7Ozs7Ozs7Ozs7O0FBWUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZ0RBQWdELCtCQUErQjtBQUMvRTs7QUFFQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7QUFjRDtBQUNBO0FBQ0EsOENBQThDLGdCQUFnQjs7QUFFOUQ7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBLG9FQUFvRSxhQUFhO0FBQ2pGO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQSxLQUFLLElBQUk7QUFDVCxJQUFJO0FBQ0o7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0JBQW9CLGtCQUFrQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBLGtCQUFrQixzQkFBc0I7QUFDeEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGdEQUFnRCwrQkFBK0I7QUFDL0U7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBLDhDQUE4QyxnQkFBZ0I7QUFDOUQ7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsK0JBQStCLHVCQUF1QjtBQUN0RDtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckIsYUFBYSxHQUFHO0FBQ2hCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsUUFBUTtBQUN0Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixRQUFRO0FBQ3hCOztBQUVBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsK0JBQStCLG1CQUFtQjtBQUNsRDtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLFFBQVE7QUFDdEI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSixpQ0FBaUMsS0FBSztBQUN0QyxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUEsV0FBVztBQUNYOztBQUVBLGdDQUFnQztBQUNoQyxzQ0FBc0M7O0FBRXRDOztBQUVBO0FBQ0E7QUFDQSx5Q0FBeUMsOEJBQThCLEdBQUc7QUFDMUUsVUFBVSw4Q0FBOEM7QUFDeEQ7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSxRQUFRO0FBQ3JCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGFBQWEsY0FBYztBQUMzQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDBGQUEwRixNQUFNO0FBQ2hHO0FBQ0EsY0FBYyxRQUFRO0FBQ3RCOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLCtCQUErQiwrQ0FBK0M7QUFDOUU7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSxjQUFjO0FBQzNCO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUZBQWlGLE1BQU07QUFDdkY7QUFDQSxjQUFjLFFBQVE7QUFDdEI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7O0FBRUQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsK0JBQStCLCtCQUErQjtBQUM5RDtBQUNBLGFBQWEsb0JBQW9CO0FBQ2pDO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsUUFBUTtBQUN0Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQSwrQkFBK0IsK0JBQStCLHFDQUFxQyxlQUFlO0FBQ2xIO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0dBQWtHLE1BQU07QUFDeEc7QUFDQSxjQUFjLFFBQVE7QUFDdEI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjs7QUFFQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0EsR0FBRyxJQUFJOztBQUVQO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUSw4Q0FBOEMscUVBQXFFO0FBQ3hJLGFBQWEsaUJBQWlCO0FBQzlCLGFBQWEsVUFBVTtBQUN2Qiw2QkFBNkIsMkJBQTJCO0FBQ3hEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxrREFBa0Q7QUFDbEQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsMERBQTBEO0FBQzFEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxvRUFBb0UsTUFBTSxRQUFRO0FBQ2xGO0FBQ0EsY0FBYyxRQUFRO0FBQ3RCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1IsbUJBQW1CLCtCQUErQjtBQUNsRDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVEsOENBQThDLHFFQUFxRTtBQUN4SSxhQUFhLFFBQVE7QUFDckIsYUFBYSxTQUFTO0FBQ3RCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsT0FBTyxhQUFhLGdCQUFnQjtBQUM5RDtBQUNBLFVBQVU7QUFDVixRQUFRO0FBQ1I7QUFDQSxlQUFlLHFCQUFxQjtBQUNwQyxlQUFlLFFBQVE7QUFDdkIsaUJBQWlCLFFBQVEsOENBQThDLGFBQWE7QUFDcEYsaUJBQWlCLFFBQVE7QUFDekIsZUFBZSx1QkFBdUIsK0VBQStFLG1CQUFtQixrQkFBa0IsbUJBQW1CO0FBQzdLOztBQUVBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSwyRkFBMkYsYUFBYTtBQUN4RztBQUNBOztBQUVBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLHFHQUFxRyxlQUFlO0FBQ3BIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsd0JBQXdCLCtFQUErRSxtQkFBbUIsa0JBQWtCLG1CQUFtQjtBQUM5SyxnQkFBZ0IsZ0JBQWdCO0FBQ2hDOztBQUVBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFdBQVc7QUFDMUIsZUFBZSxRQUFRO0FBQ3ZCLGlCQUFpQixRQUFRLDhDQUE4QyxhQUFhO0FBQ3BGLGlCQUFpQixRQUFRO0FBQ3pCLGVBQWUsV0FBVyx3REFBd0Qsb0JBQW9CO0FBQ3RHOztBQUVBLEdBQUc7QUFDSDtBQUNBO0FBQ0EscUdBQXFHLGVBQWU7QUFDcEg7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLE9BQU8sVUFBVSxvQkFBb0I7QUFDOUU7QUFDQSxZQUFZO0FBQ1osVUFBVTtBQUNWLFFBQVE7QUFDUjtBQUNBLGVBQWUsV0FBVztBQUMxQixlQUFlLFFBQVE7QUFDdkIsaUJBQWlCLFFBQVEsOENBQThDLFVBQVU7QUFDakYsaUJBQWlCLFFBQVE7QUFDekIsZUFBZSx3QkFBd0IsK0VBQStFLG1CQUFtQixrQkFBa0IsbUJBQW1CO0FBQzlLOztBQUVBLEdBQUc7QUFDSDtBQUNBO0FBQ0EscUdBQXFHLGVBQWU7QUFDcEg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0EsU0FBUztBQUNULGtDQUFrQztBQUNsQztBQUNBLG1DQUFtQyw2QkFBNkI7QUFDaEUsU0FBUztBQUNULE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaLFVBQVU7QUFDVixRQUFRO0FBQ1I7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSx3QkFBd0IsK0VBQStFLG1CQUFtQixrQkFBa0IsbUJBQW1CO0FBQzlLOztBQUVBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxlQUFlLGdCQUFnQjtBQUMvQjs7QUFFQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBLFdBQVc7QUFDWDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxDQUFDOztBQUVEO0FBQ0EsbUJBQW1CLGFBQWEsS0FBSyxlQUFlO0FBQ3BEO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSw2REFBNkQsYUFBYSxLQUFLLGdCQUFnQjtBQUMvRjtBQUNBO0FBQ0E7O0FBRUEsdUZBQXVGLGFBQWE7QUFDcEc7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsMkVBQTJFLE1BQU0sUUFBUTtBQUN6RjtBQUNBLGdCQUFnQixRQUFRO0FBQ3hCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQ0FBZ0Msb0JBQW9CLElBQUkseUJBQXlCO0FBQ2pGO0FBQ0EsYUFBYSxRQUFRLDhDQUE4QyxxRUFBcUU7QUFDeEksYUFBYSxRQUFRO0FBQ3JCLGFBQWEsVUFBVSxtREFBbUQsc0JBQXNCO0FBQ2hHLGFBQWEsVUFBVTtBQUN2QixVQUFVLG9CQUFvQjtBQUM5QjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsdUZBQXVGLGFBQWE7QUFDcEc7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQ0FBZ0MsdUJBQXVCLElBQUksNEJBQTRCO0FBQ3ZGO0FBQ0EsYUFBYSxRQUFRLDhDQUE4QyxxRUFBcUU7QUFDeEksYUFBYSxRQUFRO0FBQ3JCLGFBQWEsVUFBVSxzREFBc0Qsc0JBQXNCO0FBQ25HLGFBQWEsVUFBVTtBQUN2QixVQUFVLG9CQUFvQjtBQUM5QjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsdUZBQXVGLGFBQWE7QUFDcEc7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBLHFGQUFxRixhQUFhO0FBQ2xHO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBOztBQUVBO0FBQ0E7QUFDQSwrQkFBK0IsdUJBQXVCO0FBQ3RELGFBQWEsUUFBUSw4Q0FBOEMscUVBQXFFO0FBQ3hJO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwrRUFBK0UsTUFBTSxpQkFBaUIsS0FBSztBQUMzRztBQUNBLGNBQWMsUUFBUTtBQUN0Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsb0JBQW9CO0FBQ25DO0FBQ0EsZUFBZSxVQUFVLHVEQUF1RCxzQkFBc0I7QUFDdEcsZUFBZSxVQUFVO0FBQ3pCO0FBQ0EsWUFBWSxvQkFBb0I7QUFDaEM7O0FBRUEsR0FBRztBQUNIO0FBQ0E7QUFDQSw2RkFBNkYsZUFBZTtBQUM1RztBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLFFBQVE7QUFDUjtBQUNBLGVBQWUsZ0JBQWdCO0FBQy9CO0FBQ0EsZUFBZSxVQUFVLG1EQUFtRCxzQkFBc0I7QUFDbEcsZUFBZSxVQUFVO0FBQ3pCO0FBQ0EsWUFBWSxvQkFBb0I7QUFDaEM7O0FBRUEsR0FBRztBQUNIO0FBQ0E7QUFDQSx5RUFBeUUsZUFBZTtBQUN4RjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsT0FBTyxPQUFPO0FBQzlDO0FBQ0E7QUFDQSxZQUFZO0FBQ1osVUFBVTtBQUNWLFFBQVE7QUFDUjtBQUNBLGVBQWUsbUJBQW1CO0FBQ2xDO0FBQ0EsZUFBZSxVQUFVLHNEQUFzRCxzQkFBc0I7QUFDckcsZUFBZSxVQUFVO0FBQ3pCO0FBQ0EsWUFBWSxvQkFBb0I7QUFDaEM7O0FBRUEsR0FBRztBQUNIO0FBQ0E7QUFDQSx5RUFBeUUsZUFBZTtBQUN4RjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFVBQVU7QUFDekIsWUFBWSxvQkFBb0I7QUFDaEMsZ0JBQWdCLGdCQUFnQixHQUFHLHNCQUFzQixpQkFBaUIsc0NBQXNDO0FBQ2hIOztBQUVBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLHdCQUF3QixhQUFhLEtBQUssZUFBZTtBQUN6RDs7QUFFQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQSxZQUFZLHlCQUF5QjtBQUNyQzs7QUFFQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSx5Q0FBeUMsaUNBQWlDOztBQUUxRTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQSxzRUFBc0Usa0JBQWtCO0FBQ3hGOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsT0FBTztBQUNwQixhQUFhLFFBQVE7QUFDckI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7O0FBRUEsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixnQkFBZ0Isa0JBQWtCLG1EQUFtRCxrQkFBa0I7QUFDdkc7O0FBRUEsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSx1REFBdUQsc0VBQXNFO0FBQzdIO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsZ0NBQWdDLDZCQUE2QjtBQUN6Rjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsMkJBQTJCLFFBQVEsY0FBYztBQUNqRDtBQUNBO0FBQ0EsV0FBVztBQUNYLFNBQVM7QUFDVCxPQUFPOztBQUVQOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxPQUFPOztBQUVQOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZFQUE2RSw4QkFBOEI7QUFDM0c7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUcsSUFBSTtBQUNQOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLFFBQVEsK0JBQStCO0FBQ2xFO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGNBQWM7QUFDekIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixhQUFhLGVBQWU7QUFDNUIsWUFBWSxZQUFZO0FBQ3hCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCO0FBQ2pCLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsYUFBYSxRQUFRLDhDQUE4QyxxRUFBcUU7QUFDeEksYUFBYSxRQUFRO0FBQ3JCLGVBQWUsbUJBQW1CO0FBQ2xDLGVBQWUsUUFBUTtBQUN2QixlQUFlLGVBQWUsMENBQTBDLHFCQUFxQjtBQUM3RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLFVBQVU7QUFDeEI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVixRQUFRO0FBQ1I7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxzQkFBc0IsbURBQW1ELHNCQUFzQjtBQUM5RyxlQUFlLFVBQVU7QUFDekIsWUFBWSxvQkFBb0I7QUFDaEMsZ0JBQWdCLE9BQU87QUFDdkI7O0FBRUEsR0FBRztBQUNIO0FBQ0E7QUFDQSxzRUFBc0UsYUFBYTtBQUNuRjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsT0FBTyxPQUFPO0FBQzlDO0FBQ0E7QUFDQSxZQUFZO0FBQ1osVUFBVTtBQUNWLFFBQVE7QUFDUjtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLHNCQUFzQixzREFBc0Qsc0JBQXNCO0FBQ2pILGVBQWUsVUFBVTtBQUN6QixZQUFZLG9CQUFvQjtBQUNoQyxnQkFBZ0IsVUFBVTtBQUMxQjs7QUFFQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLHlFQUF5RSxlQUFlO0FBQ3hGO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixZQUFZO0FBQ3ZDO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxlQUFlLG9DQUFvQztBQUNuRDtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGdCQUFnQixrQkFBa0I7QUFDbEM7O0FBRUEsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTs7QUFFQSw0QkFBNEI7O0FBRTVCO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsUUFBUTtBQUNSOztBQUVBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLFdBQVc7QUFDWCxVQUFVO0FBQ1YsNkxBQTZMLGdDQUFnQyxFQUFFO0FBQy9OO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDs7QUFFQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxVQUFVO0FBQzdDO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxlQUFlLDJCQUEyQjtBQUMxQyxlQUFlLFFBQVE7QUFDdkIsaUJBQWlCLFNBQVM7QUFDMUIsZ0JBQWdCLHdCQUF3QiwyQ0FBMkMsaUJBQWlCO0FBQ3BHOztBQUVBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EseUNBQXlDO0FBQ3pDOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsYUFBYTtBQUNqRDtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsZUFBZSxjQUFjO0FBQzdCLGVBQWUsUUFBUTtBQUN2QixpQkFBaUIsU0FBUztBQUMxQixnQkFBZ0Isd0JBQXdCLHVDQUF1QyxpQkFBaUI7QUFDaEc7O0FBRUEsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLHFEQUFxRCxpQkFBaUI7QUFDdEU7O0FBRUE7O0FBRUEsK0NBQStDLG9CQUFvQjtBQUNuRSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLG9CQUFvQixrQkFBa0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLGVBQWUsWUFBWSxZQUFZLGtCQUFrQjtBQUN6RCxnQkFBZ0Isc0JBQXNCLGVBQWUsaUJBQWlCO0FBQ3RFOztBQUVBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBLDJDQUEyQyxhQUFhLElBQUksZUFBZTtBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZUFBZSxHQUFHO0FBQ2xCLGdCQUFnQixvQkFBb0IseUNBQXlDLGFBQWEsSUFBSSxlQUFlO0FBQzdHOztBQUVBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHdDQUF3QyxhQUFhLElBQUksZUFBZTtBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixnQkFBZ0IsTUFBTSxzQ0FBc0MsYUFBYSxJQUFJLGVBQWU7QUFDNUY7O0FBRUEsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTs7QUFFQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixpQkFBaUIsUUFBUSxpQ0FBaUMsOEZBQThGO0FBQ3hKLGlCQUFpQixRQUFRO0FBQ3pCOztBQUVBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0Esb0NBQW9DO0FBQ3BDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0VBQWdFLHdDQUF3QztBQUN4Rzs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWU7QUFDZjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsY0FBYztBQUN2QztBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSwrREFBK0Qsa0NBQWtDO0FBQ2pHO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7O0FBRUQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsdUJBQXVCLDJDQUEyQzs7QUFFbEU7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDJEQUEyRCxlQUFlO0FBQzFFO0FBQ0EsS0FBSzs7QUFFTCw2REFBNkQsZUFBZTtBQUM1RTtBQUNBLEtBQUs7O0FBRUw7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLGFBQWEsWUFBWTtBQUN6QixhQUFhLFFBQVE7QUFDckIsY0FBYyxZQUFZO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxlQUFlLEtBQUs7QUFDcEIsZ0JBQWdCLHNCQUFzQjtBQUN0QztBQUNBO0FBQ0E7O0FBRUEsZ0RBQWdELGNBQWM7QUFDOUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGdCQUFnQixvQkFBb0I7QUFDcEM7O0FBRUEsR0FBRztBQUNIO0FBQ0E7QUFDQSw4Q0FBOEMsUUFBUTtBQUN0RDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLGVBQWUsVUFBVTtBQUN6QixnQkFBZ0Isc0JBQXNCO0FBQ3RDOztBQUVBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsZ0RBQWdELFVBQVU7QUFDMUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGdCQUFnQixvQkFBb0I7QUFDcEM7O0FBRUEsR0FBRztBQUNIO0FBQ0E7QUFDQSxnREFBZ0QsZ0JBQWdCO0FBQ2hFOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLGdEQUFnRDtBQUNsRjtBQUNBLFFBQVE7QUFDUjtBQUNBLGVBQWUsUUFBUTtBQUN2QixpQkFBaUIsS0FBSztBQUN0QixpQkFBaUIsUUFBUTtBQUN6Qix3QkFBd0IsbUdBQW1HO0FBQzNILGlCQUFpQixRQUFRLHFEQUFxRDtBQUM5RSxpQkFBaUIsU0FBUztBQUMxQixnQkFBZ0Isc0JBQXNCO0FBQ3RDOztBQUVBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsdUZBQXVGO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZ0JBQWdCLHNCQUFzQjtBQUN0Qzs7QUFFQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLGdEQUFnRCxzQkFBc0I7QUFDdEU7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsV0FBVztBQUNYLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZixhQUFhO0FBQ2IsV0FBVztBQUNYLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBLHNFQUFzRSxtQ0FBbUM7QUFDekc7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxnQkFBZ0Isc0JBQXNCO0FBQ3RDO0FBQ0E7QUFDQTs7QUFFQSxnREFBZ0QsY0FBYztBQUM5RDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxnQkFBZ0Isc0JBQXNCO0FBQ3RDOztBQUVBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsdUZBQXVGO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGdEQUFnRCw0Q0FBNEM7QUFDNUY7O0FBRUE7QUFDQTtBQUNBLHFFQUFxRSwrQkFBK0I7QUFDcEc7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZ0JBQWdCLG9CQUFvQjtBQUNwQzs7QUFFQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLGdEQUFnRCxRQUFRO0FBQ3hEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLGVBQWUsUUFBUTtBQUN2QixnQkFBZ0Isb0JBQW9CO0FBQ3BDOztBQUVBLEdBQUc7QUFDSDtBQUNBO0FBQ0Esd0ZBQXdGO0FBQ3hGO0FBQ0E7O0FBRUEsZ0RBQWdELHNDQUFzQztBQUN0Rjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZ0JBQWdCLG9CQUFvQjtBQUNwQzs7QUFFQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLGdEQUFnRCxnQkFBZ0I7QUFDaEU7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsZ0RBQWdEO0FBQ3JGO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGlCQUFpQixLQUFLO0FBQ3RCLGlCQUFpQixRQUFRO0FBQ3pCLHdCQUF3Qix5R0FBeUc7QUFDakksaUJBQWlCLFFBQVEscURBQXFEO0FBQzlFLGlCQUFpQixTQUFTO0FBQzFCLGdCQUFnQixzQkFBc0I7QUFDdEM7O0FBRUEsR0FBRztBQUNIO0FBQ0E7QUFDQSx3RkFBd0Y7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0EsZ0JBQWdCLGtHQUFrRztBQUNsSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLGdCQUFnQixvQkFBb0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsZ0JBQWdCLG9CQUFvQjtBQUNwQzs7QUFFQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDBCQUEwQjtBQUM1Qzs7O0FBR0E7QUFDQTtBQUNBOztBQUVBLG9CQUFvQixnQ0FBZ0M7QUFDcEQ7QUFDQSxtREFBbUQsc0NBQXNDLHNCQUFzQix3QkFBd0IsNkJBQTZCLDBCQUEwQjs7QUFFOUwsMENBQTBDOztBQUUxQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLG1CQUFtQiwrQ0FBK0M7QUFDbEU7QUFDQSxrREFBa0QsdUNBQXVDLHVCQUF1Qix5QkFBeUIsOEJBQThCLDJCQUEyQjs7QUFFbE0seUNBQXlDOztBQUV6QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxrQkFBa0IsMEJBQTBCO0FBQzVDOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBb0Q7QUFDcEQ7QUFDQSxvREFBb0Q7QUFDcEQsb0RBQW9EO0FBQ3BEO0FBQ0E7QUFDQSxZQUFZO0FBQ1osb0RBQW9EO0FBQ3BEO0FBQ0EsK0RBQStEO0FBQy9EO0FBQ0Esb0RBQW9EO0FBQ3BEO0FBQ0Esb0RBQW9EO0FBQ3BELFlBQVksNkNBQTZDO0FBQ3pEO0FBQ0Esb0RBQW9EO0FBQ3BEO0FBQ0E7QUFDQSxvREFBb0Q7QUFDcEQ7QUFDQTtBQUNBLG9EQUFvRDtBQUNwRDtBQUNBLG9EQUFvRDtBQUNwRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQSxLQUFLOztBQUVMO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxNQUFNO0FBQ04sNENBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLGtCQUFrQixnQ0FBZ0M7QUFDbEQ7QUFDQTs7QUFFQSxvQkFBb0IsaUNBQWlDO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLHNDQUFzQzs7QUFFdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxrQkFBa0Isa0JBQWtCO0FBQ3BDOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWE7QUFDYjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDOztBQUVyQzs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxvQkFBb0IsMENBQTBDO0FBQzlEO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EscUJBQXFCLGdDQUFnQztBQUNyRCxzQkFBc0IsdURBQXVEO0FBQzdFOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLGFBQWEsU0FBUztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLGtCQUFrQixrQ0FBa0M7QUFDcEQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QztBQUM1QztBQUNBO0FBQ0EsOENBQThDOztBQUU5QztBQUNBOztBQUVBO0FBQ0EsMERBQTBELGVBQWU7QUFDekU7QUFDQTs7QUFFQTtBQUNBLGlDQUFpQyxxREFBcUQsK0RBQStEO0FBQ3JKLFVBQVU7QUFDVjtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZixhQUFhO0FBQ2IsV0FBVztBQUNYLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2YsYUFBYTtBQUNiLFdBQVc7QUFDWCxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZixhQUFhO0FBQ2IsV0FBVztBQUNYLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2YsYUFBYTtBQUNiLFdBQVc7QUFDWCxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmLGFBQWE7QUFDYixXQUFXO0FBQ1gsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZixhQUFhO0FBQ2IsV0FBVztBQUNYLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2YsYUFBYTtBQUNiLFdBQVc7QUFDWCxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmLGFBQWE7QUFDYixXQUFXO0FBQ1gsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZixhQUFhO0FBQ2IsV0FBVztBQUNYLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2YsYUFBYTtBQUNiLFdBQVc7QUFDWCxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZixhQUFhO0FBQ2IsV0FBVztBQUNYLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZ0JBQWdCLG9CQUFvQjtBQUNwQztBQUNBO0FBQ0E7O0FBRUEsaURBQWlELFFBQVE7QUFDekQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLDBFQUEwRSxlQUFlO0FBQ3pGOztBQUVBO0FBQ0EsYUFBYTtBQUNiLFlBQVk7QUFDWjtBQUNBO0FBQ0EsY0FBYztBQUNkLHdCQUF3QiwyQ0FBMkM7QUFDbkU7QUFDQTs7QUFFQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxlQUFlLFFBQVE7QUFDdkIsaUJBQWlCLFFBQVE7QUFDekIsaUJBQWlCLFVBQVUsaUVBQWlFLHlIQUF5SDtBQUNyTixpQkFBaUIsUUFBUSxxREFBcUQsdUhBQXVIO0FBQ3JNLGlCQUFpQixRQUFRO0FBQ3pCLGlCQUFpQixVQUFVLGdGQUFnRixrSEFBa0g7QUFDN04sc0JBQXNCLFFBQVEsdUVBQXVFLDJHQUEyRztBQUNoTixrQkFBa0Isb0JBQW9CO0FBQ3RDOztBQUVBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsaURBQWlELGNBQWM7QUFDL0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixvQkFBb0IsK0JBQStCO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsaUJBQWlCLFVBQVUsZ0ZBQWdGLGtIQUFrSDtBQUM3TixpQkFBaUIsUUFBUTtBQUN6QixnQkFBZ0Isb0JBQW9CO0FBQ3BDOztBQUVBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZ0JBQWdCLG9CQUFvQjtBQUNwQzs7QUFFQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixtRkFBbUY7QUFDOUc7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsVUFBVSxnRUFBZ0UseUhBQXlIO0FBQ2xOLGdCQUFnQixvQkFBb0I7QUFDcEM7O0FBRUEsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZ0JBQWdCLG9CQUFvQjtBQUNwQzs7QUFFQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaURBQWlELGdCQUFnQjtBQUNqRTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsMEVBQTBFLGVBQWU7QUFDekY7O0FBRUE7QUFDQSxhQUFhO0FBQ2IsWUFBWTtBQUNaO0FBQ0E7QUFDQSxjQUFjO0FBQ2Qsd0JBQXdCLDJDQUEyQztBQUNuRTtBQUNBOztBQUVBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0EsU0FBUzs7QUFFVDs7QUFFQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGdCQUFnQixvQkFBb0I7QUFDcEM7O0FBRUEsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFVBQVU7QUFDekIsZ0JBQWdCLG9CQUFvQjtBQUNwQzs7QUFFQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixnQkFBZ0Isb0JBQW9CO0FBQ3BDOztBQUVBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxVQUFVO0FBQ3pCLGdCQUFnQixvQkFBb0I7QUFDcEM7O0FBRUEsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsbUZBQW1GO0FBQzlHO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFVBQVUsZ0VBQWdFLHlIQUF5SDtBQUNsTixnQkFBZ0Isb0JBQW9CO0FBQ3BDOztBQUVBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBLE9BQU87QUFDUDtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxVQUFVLDhEQUE4RCwrSEFBK0g7QUFDdE4sZ0JBQWdCLG9CQUFvQjtBQUNwQzs7QUFFQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLGdCQUFnQixRQUFRO0FBQ3hCLGdCQUFnQixRQUFRO0FBQ3hCLGdCQUFnQixvQkFBb0I7QUFDcEM7O0FBRUEsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0VBQStFLDRCQUE0QjtBQUMzRztBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSxRQUFRO0FBQ3JCLGNBQWMsU0FBUztBQUN2QixjQUFjLFNBQVM7QUFDdkIsY0FBYyxRQUFRO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsaUJBQWlCO0FBQy9CLGNBQWMsb0JBQW9CO0FBQ2xDLGNBQWMsY0FBYztBQUM1QixjQUFjLGNBQWM7QUFDNUIsY0FBYyxlQUFlO0FBQzdCOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUSx1QkFBdUIsY0FBYztBQUM1RDs7QUFFQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBLFdBQVc7QUFDWDtBQUNBLE9BQU87QUFDUCxNQUFNO0FBQ047QUFDQTtBQUNBLDBCQUEwQjtBQUMxQixPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLGFBQWEsUUFBUTtBQUNyQixjQUFjLHNCQUFzQjtBQUNwQzs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7O0FBRUQ7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2xhZ29zaW5wYXJpcy8uL25vZGVfbW9kdWxlcy9zaG9waWZ5LWJ1eS9pbmRleC5qcz9lMmM3Il0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5AbGljZW5zZVxuVGhlIE1JVCBMaWNlbnNlIChNSVQpXG5cbkNvcHlyaWdodCAoYykgMjAxNiBTaG9waWZ5IEluYy5cblxuUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbmNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcblwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xud2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvXG5wZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG9cbnRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcblxuVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbmluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG5PUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG5NRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuXG5JTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWVxuQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCxcblRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFXG5TT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikge1xuICByZXR1cm4gdHlwZW9mIG9iajtcbn0gOiBmdW5jdGlvbiAob2JqKSB7XG4gIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqO1xufTtcblxuXG5cblxuXG5cblxuXG5cblxuXG52YXIgY2xhc3NDYWxsQ2hlY2skMSA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcbiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICB9XG59O1xuXG52YXIgY3JlYXRlQ2xhc3MkMSA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtcbiAgICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtcbiAgICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcbiAgICAgIGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xuICAgIGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xuICAgIHJldHVybiBDb25zdHJ1Y3RvcjtcbiAgfTtcbn0oKTtcblxuXG5cblxuXG5cblxuXG5cbnZhciBpbmhlcml0cyQxID0gZnVuY3Rpb24gKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG4gIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTtcbiAgfVxuXG4gIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwge1xuICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICB2YWx1ZTogc3ViQ2xhc3MsXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfVxuICB9KTtcbiAgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzO1xufTtcblxuXG5cblxuXG5cblxuXG5cblxuXG52YXIgcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiQxID0gZnVuY3Rpb24gKHNlbGYsIGNhbGwpIHtcbiAgaWYgKCFzZWxmKSB7XG4gICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuICB9XG5cbiAgcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7XG59O1xuXG5cblxuXG5cbnZhciBzbGljZWRUb0FycmF5JDEgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIHNsaWNlSXRlcmF0b3IoYXJyLCBpKSB7XG4gICAgdmFyIF9hcnIgPSBbXTtcbiAgICB2YXIgX24gPSB0cnVlO1xuICAgIHZhciBfZCA9IGZhbHNlO1xuICAgIHZhciBfZSA9IHVuZGVmaW5lZDtcblxuICAgIHRyeSB7XG4gICAgICBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7XG4gICAgICAgIF9hcnIucHVzaChfcy52YWx1ZSk7XG5cbiAgICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgX2QgPSB0cnVlO1xuICAgICAgX2UgPSBlcnI7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICghX24gJiYgX2lbXCJyZXR1cm5cIl0pIF9pW1wicmV0dXJuXCJdKCk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBpZiAoX2QpIHRocm93IF9lO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBfYXJyO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChhcnIsIGkpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7XG4gICAgICByZXR1cm4gYXJyO1xuICAgIH0gZWxzZSBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSB7XG4gICAgICByZXR1cm4gc2xpY2VJdGVyYXRvcihhcnIsIGkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZVwiKTtcbiAgICB9XG4gIH07XG59KCk7XG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbnZhciB0b0NvbnN1bWFibGVBcnJheSQxID0gZnVuY3Rpb24gKGFycikge1xuICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgYXJyMltpXSA9IGFycltpXTtcblxuICAgIHJldHVybiBhcnIyO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBBcnJheS5mcm9tKGFycik7XG4gIH1cbn07XG5cbi8qXG5UaGUgTUlUIExpY2Vuc2UgKE1JVClcbkNvcHlyaWdodCAoYykgMjAxNiBTaG9waWZ5IEluYy5cblxuUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxub2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xudG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG5mdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXG5UaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbiBhbGxcbmNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsXG5FWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbk1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC5cbklOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG5PVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRVxuT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG5cbiovXG5mdW5jdGlvbiBqb2luKCkge1xuICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgZmllbGRzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgZmllbGRzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgcmV0dXJuIGZpZWxkcy5qb2luKCcgJyk7XG59XG5cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gIHJldHVybiBCb29sZWFuKHZhbHVlKSAmJiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUudmFsdWVPZigpKSA9PT0gJ1tvYmplY3QgT2JqZWN0XSc7XG59XG5cbmZ1bmN0aW9uIGRlZXBGcmVlemVDb3B5RXhjZXB0KHByZWRpY2F0ZSwgc3RydWN0dXJlKSB7XG4gIGlmIChwcmVkaWNhdGUoc3RydWN0dXJlKSkge1xuICAgIHJldHVybiBzdHJ1Y3R1cmU7XG4gIH0gZWxzZSBpZiAoaXNPYmplY3Qoc3RydWN0dXJlKSkge1xuICAgIHJldHVybiBPYmplY3QuZnJlZXplKE9iamVjdC5rZXlzKHN0cnVjdHVyZSkucmVkdWNlKGZ1bmN0aW9uIChjb3B5LCBrZXkpIHtcbiAgICAgIGNvcHlba2V5XSA9IGRlZXBGcmVlemVDb3B5RXhjZXB0KHByZWRpY2F0ZSwgc3RydWN0dXJlW2tleV0pO1xuXG4gICAgICByZXR1cm4gY29weTtcbiAgICB9LCB7fSkpO1xuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoc3RydWN0dXJlKSkge1xuICAgIHJldHVybiBPYmplY3QuZnJlZXplKHN0cnVjdHVyZS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHJldHVybiBkZWVwRnJlZXplQ29weUV4Y2VwdChwcmVkaWNhdGUsIGl0ZW0pO1xuICAgIH0pKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gc3RydWN0dXJlO1xuICB9XG59XG5cbmZ1bmN0aW9uIHNjaGVtYUZvclR5cGUodHlwZUJ1bmRsZSwgdHlwZU5hbWUpIHtcbiAgdmFyIHR5cGVTY2hlbWEgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IG51bGw7XG5cbiAgdmFyIHR5cGUgPSB0eXBlQnVuZGxlLnR5cGVzW3R5cGVOYW1lXTtcblxuICBpZiAodHlwZSkge1xuICAgIHJldHVybiB0eXBlO1xuICB9IGVsc2UgaWYgKHR5cGVTY2hlbWEgJiYgdHlwZVNjaGVtYS5raW5kID09PSAnSU5URVJGQUNFJykge1xuICAgIHJldHVybiB0eXBlU2NoZW1hO1xuICB9XG5cbiAgdGhyb3cgbmV3IEVycm9yKCdObyB0eXBlIG9mICcgKyB0eXBlTmFtZSArICcgZm91bmQgaW4gc2NoZW1hJyk7XG59XG5cbnZhciBjbGFzc0NhbGxDaGVjayA9IGZ1bmN0aW9uIGNsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG4gIH1cbn07XG5cbnZhciBjcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtcbiAgICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtcbiAgICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcbiAgICAgIGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xuICAgIGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xuICAgIHJldHVybiBDb25zdHJ1Y3RvcjtcbiAgfTtcbn0oKTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtcblxuICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4gICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRhcmdldDtcbn07XG5cbnZhciBpbmhlcml0cyA9IGZ1bmN0aW9uIGluaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG4gIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArICh0eXBlb2Ygc3VwZXJDbGFzcyA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2Yoc3VwZXJDbGFzcykpKTtcbiAgfVxuXG4gIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwge1xuICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICB2YWx1ZTogc3ViQ2xhc3MsXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfVxuICB9KTtcbiAgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzO1xufTtcblxudmFyIHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4gPSBmdW5jdGlvbiBwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHtcbiAgaWYgKCFzZWxmKSB7XG4gICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuICB9XG5cbiAgcmV0dXJuIGNhbGwgJiYgKCh0eXBlb2YgY2FsbCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoY2FsbCkpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7XG59O1xuXG52YXIgc2xpY2VkVG9BcnJheSA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gc2xpY2VJdGVyYXRvcihhcnIsIGkpIHtcbiAgICB2YXIgX2FyciA9IFtdO1xuICAgIHZhciBfbiA9IHRydWU7XG4gICAgdmFyIF9kID0gZmFsc2U7XG4gICAgdmFyIF9lID0gdW5kZWZpbmVkO1xuXG4gICAgdHJ5IHtcbiAgICAgIGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHtcbiAgICAgICAgX2Fyci5wdXNoKF9zLnZhbHVlKTtcblxuICAgICAgICBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBfZCA9IHRydWU7XG4gICAgICBfZSA9IGVycjtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKCFfbiAmJiBfaVtcInJldHVyblwiXSkgX2lbXCJyZXR1cm5cIl0oKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGlmIChfZCkgdGhyb3cgX2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIF9hcnI7XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKGFyciwgaSkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGFycikpIHtcbiAgICAgIHJldHVybiBhcnI7XG4gICAgfSBlbHNlIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpIHtcbiAgICAgIHJldHVybiBzbGljZUl0ZXJhdG9yKGFyciwgaSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlXCIpO1xuICAgIH1cbiAgfTtcbn0oKTtcblxudmFyIHRvQ29uc3VtYWJsZUFycmF5ID0gZnVuY3Rpb24gdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGFycikpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgYXJyMiA9IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICBhcnIyW2ldID0gYXJyW2ldO1xuICAgIH1yZXR1cm4gYXJyMjtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShhcnIpO1xuICB9XG59O1xuXG52YXIgVmFyaWFibGVEZWZpbml0aW9uID0gZnVuY3Rpb24gKCkge1xuXG4gIC8qKlxuICAgKiBUaGlzIGNvbnN0cnVjdG9yIHNob3VsZCBub3QgYmUgaW52b2tlZCBkaXJlY3RseS5cbiAgICogVXNlIHRoZSBmYWN0b3J5IGZ1bmN0aW9uIHtAbGluayBDbGllbnQjdmFyaWFibGV9IHRvIGNyZWF0ZSBhIFZhcmlhYmxlRGVmaW5pdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIHZhcmlhYmxlLlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSBUaGUgR3JhcGhRTCB0eXBlIG9mIHRoZSB2YXJpYWJsZS5cbiAgICogQHBhcmFtIHsqfSBbZGVmYXVsdFZhbHVlXSBUaGUgZGVmYXVsdCB2YWx1ZSBvZiB0aGUgdmFyaWFibGUuXG4gICAqL1xuICBmdW5jdGlvbiBWYXJpYWJsZURlZmluaXRpb24obmFtZSwgdHlwZSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgVmFyaWFibGVEZWZpbml0aW9uKTtcblxuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICB0aGlzLmRlZmF1bHRWYWx1ZSA9IGRlZmF1bHRWYWx1ZTtcbiAgICBPYmplY3QuZnJlZXplKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIEdyYXBoUUwgcXVlcnkgc3RyaW5nIGZvciB0aGUgdmFyaWFibGUgYXMgYW4gaW5wdXQgdmFsdWUgKGUuZy4gYCR2YXJpYWJsZU5hbWVgKS5cbiAgICpcbiAgICogQHJldHVybiB7U3RyaW5nfSBUaGUgR3JhcGhRTCBxdWVyeSBzdHJpbmcgZm9yIHRoZSB2YXJpYWJsZSBhcyBhbiBpbnB1dCB2YWx1ZS5cbiAgICovXG5cbiAgY3JlYXRlQ2xhc3MoVmFyaWFibGVEZWZpbml0aW9uLCBbe1xuICAgIGtleTogJ3RvSW5wdXRWYWx1ZVN0cmluZycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHRvSW5wdXRWYWx1ZVN0cmluZygpIHtcbiAgICAgIHJldHVybiAnJCcgKyB0aGlzLm5hbWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgR3JhcGhRTCBxdWVyeSBzdHJpbmcgZm9yIHRoZSB2YXJpYWJsZSAoZS5nLiBgJHZhcmlhYmxlTmFtZTpWYXJpYWJsZVR5cGUgPSBkZWZhdWx0VmFsdWVgKS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge1N0cmluZ30gVGhlIEdyYXBoUUwgcXVlcnkgc3RyaW5nIGZvciB0aGUgdmFyaWFibGUuXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ3RvU3RyaW5nJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgICB2YXIgZGVmYXVsdFZhbHVlU3RyaW5nID0gdGhpcy5kZWZhdWx0VmFsdWUgPyAnID0gJyArIGZvcm1hdElucHV0VmFsdWUodGhpcy5kZWZhdWx0VmFsdWUpIDogJyc7XG5cbiAgICAgIHJldHVybiAnJCcgKyB0aGlzLm5hbWUgKyAnOicgKyB0aGlzLnR5cGUgKyBkZWZhdWx0VmFsdWVTdHJpbmc7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBWYXJpYWJsZURlZmluaXRpb247XG59KCk7XG5cbmZ1bmN0aW9uIGlzVmFyaWFibGUodmFsdWUpIHtcbiAgcmV0dXJuIFZhcmlhYmxlRGVmaW5pdGlvbi5wcm90b3R5cGUuaXNQcm90b3R5cGVPZih2YWx1ZSk7XG59XG5cbmZ1bmN0aW9uIHZhcmlhYmxlKG5hbWUsIHR5cGUsIGRlZmF1bHRWYWx1ZSkge1xuICByZXR1cm4gbmV3IFZhcmlhYmxlRGVmaW5pdGlvbihuYW1lLCB0eXBlLCBkZWZhdWx0VmFsdWUpO1xufVxuXG52YXIgRW51bSA9IGZ1bmN0aW9uICgpIHtcblxuICAvKipcbiAgICogVGhpcyBjb25zdHJ1Y3RvciBzaG91bGQgbm90IGJlIGludm9rZWQgZGlyZWN0bHkuXG4gICAqIFVzZSB0aGUgZmFjdG9yeSBmdW5jdGlvbiB7QGxpbmsgQ2xpZW50I2VudW19IHRvIGNyZWF0ZSBhbiBFbnVtLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIGVudW0uXG4gICAqL1xuICBmdW5jdGlvbiBFbnVtKGtleSkge1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIEVudW0pO1xuXG4gICAgdGhpcy5rZXkgPSBrZXk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgR3JhcGhRTCBxdWVyeSBzdHJpbmcgZm9yIHRoZSBlbnVtIChlLmcuIGBlbnVtS2V5YCkuXG4gICAqXG4gICAqIEByZXR1cm4ge1N0cmluZ30gVGhlIEdyYXBoUUwgcXVlcnkgc3RyaW5nIGZvciB0aGUgZW51bS5cbiAgICovXG5cbiAgY3JlYXRlQ2xhc3MoRW51bSwgW3tcbiAgICBrZXk6IFwidG9TdHJpbmdcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgICByZXR1cm4gdGhpcy5rZXk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInZhbHVlT2ZcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWVPZigpIHtcbiAgICAgIHJldHVybiB0aGlzLmtleS52YWx1ZU9mKCk7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBFbnVtO1xufSgpO1xuXG52YXIgZW51bUZ1bmN0aW9uID0gZnVuY3Rpb24gZW51bUZ1bmN0aW9uKGtleSkge1xuICByZXR1cm4gbmV3IEVudW0oa2V5KTtcbn07XG5cbnZhciBTY2FsYXIgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFNjYWxhcih2YWx1ZSkge1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIFNjYWxhcik7XG5cbiAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gIH1cblxuICBjcmVhdGVDbGFzcyhTY2FsYXIsIFt7XG4gICAga2V5OiBcInRvU3RyaW5nXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgICAgcmV0dXJuIHRoaXMudmFsdWUudG9TdHJpbmcoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidmFsdWVPZlwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB2YWx1ZU9mKCkge1xuICAgICAgcmV0dXJuIHRoaXMudmFsdWUudmFsdWVPZigpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ1bndyYXBwZWRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHtcbiAgICAgIHJldHVybiB0aGlzLnZhbHVlO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gU2NhbGFyO1xufSgpO1xuXG5mdW5jdGlvbiBmb3JtYXRJbnB1dFZhbHVlKHZhbHVlKSB7XG4gIGlmIChWYXJpYWJsZURlZmluaXRpb24ucHJvdG90eXBlLmlzUHJvdG90eXBlT2YodmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlLnRvSW5wdXRWYWx1ZVN0cmluZygpO1xuICB9IGVsc2UgaWYgKEVudW0ucHJvdG90eXBlLmlzUHJvdG90eXBlT2YodmFsdWUpKSB7XG4gICAgcmV0dXJuIFN0cmluZyh2YWx1ZSk7XG4gIH0gZWxzZSBpZiAoU2NhbGFyLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKHZhbHVlKSkge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh2YWx1ZS52YWx1ZU9mKCkpO1xuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgcmV0dXJuICdbJyArIGpvaW4uYXBwbHkodW5kZWZpbmVkLCB0b0NvbnN1bWFibGVBcnJheSh2YWx1ZS5tYXAoZm9ybWF0SW5wdXRWYWx1ZSkpKSArICddJztcbiAgfSBlbHNlIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gZm9ybWF0T2JqZWN0KHZhbHVlLCAneycsICd9Jyk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBmb3JtYXRPYmplY3QodmFsdWUpIHtcbiAgdmFyIG9wZW5DaGFyID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAnJztcbiAgdmFyIGNsb3NlQ2hhciA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogJyc7XG5cbiAgdmFyIGFyZ1BhaXJzID0gT2JqZWN0LmtleXModmFsdWUpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuIGtleSArICc6ICcgKyBmb3JtYXRJbnB1dFZhbHVlKHZhbHVlW2tleV0pO1xuICB9KTtcblxuICByZXR1cm4gJycgKyBvcGVuQ2hhciArIGpvaW4uYXBwbHkodW5kZWZpbmVkLCB0b0NvbnN1bWFibGVBcnJheShhcmdQYWlycykpICsgY2xvc2VDaGFyO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRBcmdzKGFyZ3MpIHtcbiAgaWYgKCFPYmplY3Qua2V5cyhhcmdzKS5sZW5ndGgpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICByZXR1cm4gJyAoJyArIGZvcm1hdE9iamVjdChhcmdzKSArICcpJztcbn1cblxuZnVuY3Rpb24gZm9ybWF0RGlyZWN0aXZlcyhkaXJlY3RpdmVzKSB7XG4gIGlmICghT2JqZWN0LmtleXMoZGlyZWN0aXZlcykubGVuZ3RoKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG5cbiAgdmFyIGRpcmVjdGl2ZVN0cmluZ3MgPSBPYmplY3Qua2V5cyhkaXJlY3RpdmVzKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgIHZhciBkaXJlY3RpdmVBcmdzID0gZGlyZWN0aXZlc1trZXldO1xuICAgIHZhciBhcmcgPSBkaXJlY3RpdmVBcmdzICYmIE9iamVjdC5rZXlzKGRpcmVjdGl2ZUFyZ3MpLmxlbmd0aCA/ICcoJyArIGZvcm1hdE9iamVjdChkaXJlY3RpdmVBcmdzKSArICcpJyA6ICcnO1xuXG4gICAgcmV0dXJuICdAJyArIGtleSArIGFyZztcbiAgfSk7XG5cbiAgcmV0dXJuICcgJyArIGpvaW4uYXBwbHkodW5kZWZpbmVkLCB0b0NvbnN1bWFibGVBcnJheShkaXJlY3RpdmVTdHJpbmdzKSk7XG59XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1lbXB0eS1mdW5jdGlvblxudmFyIG5vb3AgPSBmdW5jdGlvbiBub29wKCkge307XG5cbnZhciBQcm9maWxlciA9IHtcbiAgdHJhY2tUeXBlRGVwZW5kZW5jeTogbm9vcCxcbiAgdHJhY2tGaWVsZERlcGVuZGVuY3k6IG5vb3Bcbn07XG5cbnZhciB0cmFja1R5cGVEZXBlbmRlbmN5ID0gUHJvZmlsZXIudHJhY2tUeXBlRGVwZW5kZW5jeTtcbnZhciB0cmFja0ZpZWxkRGVwZW5kZW5jeSA9IFByb2ZpbGVyLnRyYWNrRmllbGREZXBlbmRlbmN5O1xuXG5mdW5jdGlvbiBwYXJzZUZpZWxkQ3JlYXRpb25BcmdzKGNyZWF0aW9uQXJncykge1xuICB2YXIgY2FsbGJhY2sgPSBub29wO1xuICB2YXIgb3B0aW9ucyA9IHt9O1xuICB2YXIgc2VsZWN0aW9uU2V0ID0gbnVsbDtcblxuICBpZiAoY3JlYXRpb25BcmdzLmxlbmd0aCA9PT0gMikge1xuICAgIGlmICh0eXBlb2YgY3JlYXRpb25BcmdzWzFdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB2YXIgX2NyZWF0aW9uQXJncyA9IHNsaWNlZFRvQXJyYXkoY3JlYXRpb25BcmdzLCAyKTtcblxuICAgICAgb3B0aW9ucyA9IF9jcmVhdGlvbkFyZ3NbMF07XG4gICAgICBjYWxsYmFjayA9IF9jcmVhdGlvbkFyZ3NbMV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBfY3JlYXRpb25BcmdzMiA9IHNsaWNlZFRvQXJyYXkoY3JlYXRpb25BcmdzLCAyKTtcblxuICAgICAgb3B0aW9ucyA9IF9jcmVhdGlvbkFyZ3MyWzBdO1xuICAgICAgc2VsZWN0aW9uU2V0ID0gX2NyZWF0aW9uQXJnczJbMV07XG4gICAgfVxuICB9IGVsc2UgaWYgKGNyZWF0aW9uQXJncy5sZW5ndGggPT09IDEpIHtcbiAgICAvLyBTZWxlY3Rpb25TZXQgaXMgZGVmaW5lZCBiZWZvcmUgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgc2luY2UgaXQnc1xuICAgIC8vIGNhbGxlZCBieSBTZWxlY3Rpb25TZXRcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICBpZiAoU2VsZWN0aW9uU2V0LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGNyZWF0aW9uQXJnc1swXSkpIHtcbiAgICAgIHNlbGVjdGlvblNldCA9IGNyZWF0aW9uQXJnc1swXTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBjcmVhdGlvbkFyZ3NbMF0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNhbGxiYWNrID0gY3JlYXRpb25BcmdzWzBdO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcHRpb25zID0gY3JlYXRpb25BcmdzWzBdO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7IG9wdGlvbnM6IG9wdGlvbnMsIHNlbGVjdGlvblNldDogc2VsZWN0aW9uU2V0LCBjYWxsYmFjazogY2FsbGJhY2sgfTtcbn1cblxudmFyIGVtcHR5QXJncyA9IE9iamVjdC5mcmVlemUoe30pO1xudmFyIGVtcHR5RGlyZWN0aXZlcyA9IE9iamVjdC5mcmVlemUoe30pO1xuXG52YXIgRmllbGQgPSBmdW5jdGlvbiAoKSB7XG5cbiAgLyoqXG4gICAqIFRoaXMgY29uc3RydWN0b3Igc2hvdWxkIG5vdCBiZSBpbnZva2VkIGRpcmVjdGx5LlxuICAgKiBGaWVsZHMgYXJlIGFkZGVkIHRvIGEgc2VsZWN0aW9uIGJ5IHtAbGluayBTZWxlY3Rpb25TZXRCdWlsZGVyI2FkZH0sIHtAbGluayBTZWxlY3Rpb25TZXRCdWlsZGVyI2FkZENvbm5lY3Rpb259XG4gICAqIGFuZCB7QGxpbmsgU2VsZWN0aW9uU2V0QnVpbGRlciNhZGRJbmxpbmVGcmFnbWVudE9ufS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIGZpZWxkLlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIEFuIG9wdGlvbnMgb2JqZWN0IGNvbnRhaW5pbmc6XG4gICAqICAgQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLmFyZ3NdIEFyZ3VtZW50cyBmb3IgdGhlIGZpZWxkLlxuICAgKiAgIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9ucy5hbGlhc10gQW4gYWxpYXMgZm9yIHRoZSBmaWVsZC5cbiAgICogICBAcGFyYW0ge09iamVjdH0gW29wdGlvbnMuZGlyZWN0aXZlc10gRGlyZWN0aXZlcyBmb3IgdGhlIGZpZWxkLlxuICAgKiBAcGFyYW0ge1NlbGVjdGlvblNldH0gc2VsZWN0aW9uU2V0IFRoZSBzZWxlY3Rpb24gc2V0IG9uIHRoZSBmaWVsZC5cbiAgICovXG4gIGZ1bmN0aW9uIEZpZWxkKG5hbWUsIG9wdGlvbnMsIHNlbGVjdGlvblNldCkge1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIEZpZWxkKTtcblxuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5hbGlhcyA9IG9wdGlvbnMuYWxpYXMgfHwgbnVsbDtcbiAgICB0aGlzLnJlc3BvbnNlS2V5ID0gdGhpcy5hbGlhcyB8fCB0aGlzLm5hbWU7XG4gICAgdGhpcy5hcmdzID0gb3B0aW9ucy5hcmdzID8gZGVlcEZyZWV6ZUNvcHlFeGNlcHQoaXNWYXJpYWJsZSwgb3B0aW9ucy5hcmdzKSA6IGVtcHR5QXJncztcbiAgICB0aGlzLmRpcmVjdGl2ZXMgPSBvcHRpb25zLmRpcmVjdGl2ZXMgPyBkZWVwRnJlZXplQ29weUV4Y2VwdChpc1ZhcmlhYmxlLCBvcHRpb25zLmRpcmVjdGl2ZXMpIDogZW1wdHlEaXJlY3RpdmVzO1xuICAgIHRoaXMuc2VsZWN0aW9uU2V0ID0gc2VsZWN0aW9uU2V0O1xuICAgIE9iamVjdC5mcmVlemUodGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgR3JhcGhRTCBxdWVyeSBzdHJpbmcgZm9yIHRoZSBGaWVsZCAoZS5nLiBgY2F0QWxpYXM6IGNhdChzaXplOiAnc21hbGwnKSB7IG5hbWUgfWAgb3IgYG5hbWVgKS5cbiAgICpcbiAgICogQHJldHVybiB7U3RyaW5nfSBUaGUgR3JhcGhRTCBxdWVyeSBzdHJpbmcgZm9yIHRoZSBGaWVsZC5cbiAgICovXG5cbiAgY3JlYXRlQ2xhc3MoRmllbGQsIFt7XG4gICAga2V5OiAndG9TdHJpbmcnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgICAgIHZhciBhbGlhc1ByZWZpeCA9IHRoaXMuYWxpYXMgPyB0aGlzLmFsaWFzICsgJzogJyA6ICcnO1xuXG4gICAgICByZXR1cm4gJycgKyBhbGlhc1ByZWZpeCArIHRoaXMubmFtZSArIGZvcm1hdEFyZ3ModGhpcy5hcmdzKSArIGZvcm1hdERpcmVjdGl2ZXModGhpcy5kaXJlY3RpdmVzKSArIHRoaXMuc2VsZWN0aW9uU2V0O1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gRmllbGQ7XG59KCk7XG5cbi8vIFRoaXMgaXMgYW4gaW50ZXJmYWNlIHRoYXQgZGVmaW5lcyBhIHVzYWdlLCBhbmQgc2ltcGxpZmllcyB0eXBlIGNoZWNraW5nXG52YXIgU3ByZWFkID0gZnVuY3Rpb24gU3ByZWFkKCkge1xuICBjbGFzc0NhbGxDaGVjayh0aGlzLCBTcHJlYWQpO1xufTtcblxudmFyIElubGluZUZyYWdtZW50ID0gZnVuY3Rpb24gKF9TcHJlYWQpIHtcbiAgaW5oZXJpdHMoSW5saW5lRnJhZ21lbnQsIF9TcHJlYWQpO1xuXG4gIC8qKlxuICAgKiBUaGlzIGNvbnN0cnVjdG9yIHNob3VsZCBub3QgYmUgaW52b2tlZCBkaXJlY3RseS5cbiAgICogVXNlIHRoZSBmYWN0b3J5IGZ1bmN0aW9uIHtAbGluayBTZWxlY3Rpb25TZXRCdWlsZGVyI2FkZElubGluZUZyYWdtZW50T259IHRvIGNyZWF0ZSBhbiBJbmxpbmVGcmFnbWVudC5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGVOYW1lIFRoZSB0eXBlIG9mIHRoZSBmcmFnbWVudC5cbiAgICogQHBhcmFtIHtTZWxlY3Rpb25TZXR9IHNlbGVjdGlvblNldCBUaGUgc2VsZWN0aW9uIHNldCBvbiB0aGUgZnJhZ21lbnQuXG4gICAqL1xuICBmdW5jdGlvbiBJbmxpbmVGcmFnbWVudCh0eXBlTmFtZSwgc2VsZWN0aW9uU2V0KSB7XG4gICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgSW5saW5lRnJhZ21lbnQpO1xuXG4gICAgdmFyIF90aGlzID0gcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoSW5saW5lRnJhZ21lbnQuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihJbmxpbmVGcmFnbWVudCkpLmNhbGwodGhpcykpO1xuXG4gICAgX3RoaXMudHlwZU5hbWUgPSB0eXBlTmFtZTtcbiAgICBfdGhpcy5zZWxlY3Rpb25TZXQgPSBzZWxlY3Rpb25TZXQ7XG4gICAgT2JqZWN0LmZyZWV6ZShfdGhpcyk7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIEdyYXBoUUwgcXVlcnkgc3RyaW5nIGZvciB0aGUgSW5saW5lRnJhZ21lbnQgKGUuZy4gYC4uLiBvbiBDYXQgeyBuYW1lIH1gKS5cbiAgICpcbiAgICogQHJldHVybiB7U3RyaW5nfSBUaGUgR3JhcGhRTCBxdWVyeSBzdHJpbmcgZm9yIHRoZSBJbmxpbmVGcmFnbWVudC5cbiAgICovXG5cbiAgY3JlYXRlQ2xhc3MoSW5saW5lRnJhZ21lbnQsIFt7XG4gICAga2V5OiAndG9TdHJpbmcnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgICAgIHJldHVybiAnLi4uIG9uICcgKyB0aGlzLnR5cGVOYW1lICsgdGhpcy5zZWxlY3Rpb25TZXQ7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBJbmxpbmVGcmFnbWVudDtcbn0oU3ByZWFkKTtcblxudmFyIEZyYWdtZW50U3ByZWFkID0gZnVuY3Rpb24gKF9TcHJlYWQyKSB7XG4gIGluaGVyaXRzKEZyYWdtZW50U3ByZWFkLCBfU3ByZWFkMik7XG5cbiAgLyoqXG4gICAqIFRoaXMgY29uc3RydWN0b3Igc2hvdWxkIG5vdCBiZSBpbnZva2VkIGRpcmVjdGx5LlxuICAgKiBVc2UgdGhlIGZhY3RvcnkgZnVuY3Rpb24ge0BsaW5rIERvY3VtZW50I2RlZmluZUZyYWdtZW50fSB0byBjcmVhdGUgYSBGcmFnbWVudFNwcmVhZC5cbiAgICpcbiAgICogQHBhcmFtIHtGcmFnbWVudERlZmluaXRpb259IGZyYWdtZW50RGVmaW5pdGlvbiBUaGUgY29ycmVzcG9uZGluZyBmcmFnbWVudCBkZWZpbml0aW9uLlxuICAgKi9cbiAgZnVuY3Rpb24gRnJhZ21lbnRTcHJlYWQoZnJhZ21lbnREZWZpbml0aW9uKSB7XG4gICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgRnJhZ21lbnRTcHJlYWQpO1xuXG4gICAgdmFyIF90aGlzMiA9IHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEZyYWdtZW50U3ByZWFkLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoRnJhZ21lbnRTcHJlYWQpKS5jYWxsKHRoaXMpKTtcblxuICAgIF90aGlzMi5uYW1lID0gZnJhZ21lbnREZWZpbml0aW9uLm5hbWU7XG4gICAgX3RoaXMyLnNlbGVjdGlvblNldCA9IGZyYWdtZW50RGVmaW5pdGlvbi5zZWxlY3Rpb25TZXQ7XG4gICAgT2JqZWN0LmZyZWV6ZShfdGhpczIpO1xuICAgIHJldHVybiBfdGhpczI7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgR3JhcGhRTCBxdWVyeSBzdHJpbmcgZm9yIHRoZSBGcmFnbWVudFNwcmVhZCAoZS5nLiBgLi4uY2F0TmFtZWApLlxuICAgKlxuICAgKiBAcmV0dXJuIHtTdHJpbmd9IFRoZSBHcmFwaFFMIHF1ZXJ5IHN0cmluZyBmb3IgdGhlIEZyYWdtZW50U3ByZWFkLlxuICAgKi9cblxuICBjcmVhdGVDbGFzcyhGcmFnbWVudFNwcmVhZCwgW3tcbiAgICBrZXk6ICd0b1N0cmluZycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgICAgcmV0dXJuICcuLi4nICsgdGhpcy5uYW1lO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3RvRGVmaW5pdGlvbicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHRvRGVmaW5pdGlvbigpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgcmV0dXJuIG5ldyBGcmFnbWVudERlZmluaXRpb24odGhpcy5uYW1lLCB0aGlzLnNlbGVjdGlvblNldC50eXBlU2NoZW1hLm5hbWUsIHRoaXMuc2VsZWN0aW9uU2V0KTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIEZyYWdtZW50U3ByZWFkO1xufShTcHJlYWQpO1xuXG52YXIgRnJhZ21lbnREZWZpbml0aW9uID0gZnVuY3Rpb24gKCkge1xuXG4gIC8qKlxuICAgKiBUaGlzIGNvbnN0cnVjdG9yIHNob3VsZCBub3QgYmUgaW52b2tlZCBkaXJlY3RseS5cbiAgICogVXNlIHRoZSBmYWN0b3J5IGZ1bmN0aW9uIHtAbGluayBEb2N1bWVudCNkZWZpbmVGcmFnbWVudH0gdG8gY3JlYXRlIGEgRnJhZ21lbnREZWZpbml0aW9uIG9uIGEge0BsaW5rIERvY3VtZW50fS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIGZyYWdtZW50IGRlZmluaXRpb24uXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlTmFtZSBUaGUgdHlwZSBvZiB0aGUgZnJhZ21lbnQuXG4gICAqL1xuICBmdW5jdGlvbiBGcmFnbWVudERlZmluaXRpb24obmFtZSwgdHlwZU5hbWUsIHNlbGVjdGlvblNldCkge1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIEZyYWdtZW50RGVmaW5pdGlvbik7XG5cbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMudHlwZU5hbWUgPSB0eXBlTmFtZTtcbiAgICB0aGlzLnNlbGVjdGlvblNldCA9IHNlbGVjdGlvblNldDtcbiAgICB0aGlzLnNwcmVhZCA9IG5ldyBGcmFnbWVudFNwcmVhZCh0aGlzKTtcbiAgICBPYmplY3QuZnJlZXplKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIEdyYXBoUUwgcXVlcnkgc3RyaW5nIGZvciB0aGUgRnJhZ21lbnREZWZpbml0aW9uIChlLmcuIGBmcmFnbWVudCBjYXROYW1lIG9uIENhdCB7IG5hbWUgfWApLlxuICAgKlxuICAgKiBAcmV0dXJuIHtTdHJpbmd9IFRoZSBHcmFwaFFMIHF1ZXJ5IHN0cmluZyBmb3IgdGhlIEZyYWdtZW50RGVmaW5pdGlvbi5cbiAgICovXG5cbiAgY3JlYXRlQ2xhc3MoRnJhZ21lbnREZWZpbml0aW9uLCBbe1xuICAgIGtleTogJ3RvU3RyaW5nJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgICByZXR1cm4gJ2ZyYWdtZW50ICcgKyB0aGlzLm5hbWUgKyAnIG9uICcgKyB0aGlzLnR5cGVOYW1lICsgJyAnICsgdGhpcy5zZWxlY3Rpb25TZXQ7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBGcmFnbWVudERlZmluaXRpb247XG59KCk7XG5cbmZ1bmN0aW9uIHNlbGVjdGlvbnNIYXZlSWRGaWVsZChzZWxlY3Rpb25zKSB7XG4gIHJldHVybiBzZWxlY3Rpb25zLnNvbWUoZnVuY3Rpb24gKGZpZWxkT3JGcmFnbWVudCkge1xuICAgIGlmIChGaWVsZC5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihmaWVsZE9yRnJhZ21lbnQpKSB7XG4gICAgICByZXR1cm4gZmllbGRPckZyYWdtZW50Lm5hbWUgPT09ICdpZCc7XG4gICAgfSBlbHNlIGlmIChTcHJlYWQucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoZmllbGRPckZyYWdtZW50KSAmJiBmaWVsZE9yRnJhZ21lbnQuc2VsZWN0aW9uU2V0LnR5cGVTY2hlbWEuaW1wbGVtZW50c05vZGUpIHtcbiAgICAgIHJldHVybiBzZWxlY3Rpb25zSGF2ZUlkRmllbGQoZmllbGRPckZyYWdtZW50LnNlbGVjdGlvblNldC5zZWxlY3Rpb25zKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBzZWxlY3Rpb25zSGF2ZVR5cGVuYW1lRmllbGQoc2VsZWN0aW9ucykge1xuICByZXR1cm4gc2VsZWN0aW9ucy5zb21lKGZ1bmN0aW9uIChmaWVsZE9yRnJhZ21lbnQpIHtcbiAgICBpZiAoRmllbGQucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoZmllbGRPckZyYWdtZW50KSkge1xuICAgICAgcmV0dXJuIGZpZWxkT3JGcmFnbWVudC5uYW1lID09PSAnX190eXBlbmFtZSc7XG4gICAgfSBlbHNlIGlmIChTcHJlYWQucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoZmllbGRPckZyYWdtZW50KSAmJiBmaWVsZE9yRnJhZ21lbnQuc2VsZWN0aW9uU2V0LnR5cGVTY2hlbWEuaW1wbGVtZW50c05vZGUpIHtcbiAgICAgIHJldHVybiBzZWxlY3Rpb25zSGF2ZVR5cGVuYW1lRmllbGQoZmllbGRPckZyYWdtZW50LnNlbGVjdGlvblNldC5zZWxlY3Rpb25zKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBpbmRleFNlbGVjdGlvbnNCeVJlc3BvbnNlS2V5KHNlbGVjdGlvbnMpIHtcbiAgZnVuY3Rpb24gYXNzaWduT3JQdXNoKG9iaiwga2V5LCB2YWx1ZSkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KG9ialtrZXldKSkge1xuICAgICAgb2JqW2tleV0ucHVzaCh2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9ialtrZXldID0gW3ZhbHVlXTtcbiAgICB9XG4gIH1cbiAgdmFyIHVuZnJvemVuT2JqZWN0ID0gc2VsZWN0aW9ucy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgc2VsZWN0aW9uKSB7XG4gICAgaWYgKHNlbGVjdGlvbi5yZXNwb25zZUtleSkge1xuICAgICAgYXNzaWduT3JQdXNoKGFjYywgc2VsZWN0aW9uLnJlc3BvbnNlS2V5LCBzZWxlY3Rpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgcmVzcG9uc2VLZXlzID0gT2JqZWN0LmtleXMoc2VsZWN0aW9uLnNlbGVjdGlvblNldC5zZWxlY3Rpb25zQnlSZXNwb25zZUtleSk7XG5cbiAgICAgIHJlc3BvbnNlS2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChyZXNwb25zZUtleSkge1xuICAgICAgICBhc3NpZ25PclB1c2goYWNjLCByZXNwb25zZUtleSwgc2VsZWN0aW9uKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBhY2M7XG4gIH0sIHt9KTtcblxuICBPYmplY3Qua2V5cyh1bmZyb3plbk9iamVjdCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgT2JqZWN0LmZyZWV6ZSh1bmZyb3plbk9iamVjdFtrZXldKTtcbiAgfSk7XG5cbiAgcmV0dXJuIE9iamVjdC5mcmVlemUodW5mcm96ZW5PYmplY3QpO1xufVxuXG4vKipcbiAqIENsYXNzIHRoYXQgc3BlY2lmaWVzIHRoZSBmdWxsIHNlbGVjdGlvbiBvZiBkYXRhIHRvIHF1ZXJ5LlxuICovXG5cbnZhciBTZWxlY3Rpb25TZXQgPSBmdW5jdGlvbiAoKSB7XG5cbiAgLyoqXG4gICAqIFRoaXMgY29uc3RydWN0b3Igc2hvdWxkIG5vdCBiZSBpbnZva2VkIGRpcmVjdGx5LiBTZWxlY3Rpb25TZXRzIGFyZSBjcmVhdGVkIHdoZW4gYnVpbGRpbmcgcXVlcmllcy9tdXRhdGlvbnMuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB0eXBlQnVuZGxlIEEgc2V0IG9mIEVTNiBtb2R1bGVzIGdlbmVyYXRlZCBieSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL1Nob3BpZnkvZ3JhcGhxbC1qcy1zY2hlbWF8Z3JhcGhxbC1qcy1zY2hlbWF9LlxuICAgKiBAcGFyYW0geyhPYmplY3R8U3RyaW5nKX0gdHlwZSBUaGUgdHlwZSBvZiB0aGUgY3VycmVudCBzZWxlY3Rpb24uXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGJ1aWxkZXJGdW5jdGlvbiBDYWxsYmFjayBmdW5jdGlvbiB1c2VkIHRvIGJ1aWxkIHRoZSBTZWxlY3Rpb25TZXQuXG4gICAqICAgVGhlIGNhbGxiYWNrIHRha2VzIGEge0BsaW5rIFNlbGVjdGlvblNldEJ1aWxkZXJ9IGFzIGl0cyBhcmd1bWVudC5cbiAgICovXG4gIGZ1bmN0aW9uIFNlbGVjdGlvblNldCh0eXBlQnVuZGxlLCB0eXBlLCBidWlsZGVyRnVuY3Rpb24pIHtcbiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBTZWxlY3Rpb25TZXQpO1xuXG4gICAgaWYgKHR5cGVvZiB0eXBlID09PSAnc3RyaW5nJykge1xuICAgICAgdGhpcy50eXBlU2NoZW1hID0gc2NoZW1hRm9yVHlwZSh0eXBlQnVuZGxlLCB0eXBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy50eXBlU2NoZW1hID0gdHlwZTtcbiAgICB9XG5cbiAgICB0cmFja1R5cGVEZXBlbmRlbmN5KHRoaXMudHlwZVNjaGVtYS5uYW1lKTtcblxuICAgIHRoaXMudHlwZUJ1bmRsZSA9IHR5cGVCdW5kbGU7XG4gICAgdGhpcy5zZWxlY3Rpb25zID0gW107XG4gICAgaWYgKGJ1aWxkZXJGdW5jdGlvbikge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICBidWlsZGVyRnVuY3Rpb24obmV3IFNlbGVjdGlvblNldEJ1aWxkZXIodGhpcy50eXBlQnVuZGxlLCB0aGlzLnR5cGVTY2hlbWEsIHRoaXMuc2VsZWN0aW9ucykpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnR5cGVTY2hlbWEuaW1wbGVtZW50c05vZGUgfHwgdGhpcy50eXBlU2NoZW1hLm5hbWUgPT09ICdOb2RlJykge1xuICAgICAgaWYgKCFzZWxlY3Rpb25zSGF2ZUlkRmllbGQodGhpcy5zZWxlY3Rpb25zKSkge1xuICAgICAgICB0aGlzLnNlbGVjdGlvbnMudW5zaGlmdChuZXcgRmllbGQoJ2lkJywge30sIG5ldyBTZWxlY3Rpb25TZXQodHlwZUJ1bmRsZSwgJ0lEJykpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy50eXBlU2NoZW1hLmtpbmQgPT09ICdJTlRFUkZBQ0UnKSB7XG4gICAgICBpZiAoIXNlbGVjdGlvbnNIYXZlVHlwZW5hbWVGaWVsZCh0aGlzLnNlbGVjdGlvbnMpKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9ucy51bnNoaWZ0KG5ldyBGaWVsZCgnX190eXBlbmFtZScsIHt9LCBuZXcgU2VsZWN0aW9uU2V0KHR5cGVCdW5kbGUsICdTdHJpbmcnKSkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuc2VsZWN0aW9uc0J5UmVzcG9uc2VLZXkgPSBpbmRleFNlbGVjdGlvbnNCeVJlc3BvbnNlS2V5KHRoaXMuc2VsZWN0aW9ucyk7XG4gICAgT2JqZWN0LmZyZWV6ZSh0aGlzLnNlbGVjdGlvbnMpO1xuICAgIE9iamVjdC5mcmVlemUodGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgR3JhcGhRTCBxdWVyeSBzdHJpbmcgZm9yIHRoZSBTZWxlY3Rpb25TZXQgKGUuZy4gYHsgY2F0IHsgbmFtZSB9IH1gKS5cbiAgICpcbiAgICogQHJldHVybiB7U3RyaW5nfSBUaGUgR3JhcGhRTCBxdWVyeSBzdHJpbmcgZm9yIHRoZSBTZWxlY3Rpb25TZXQuXG4gICAqL1xuXG4gIGNyZWF0ZUNsYXNzKFNlbGVjdGlvblNldCwgW3tcbiAgICBrZXk6ICd0b1N0cmluZycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgICAgaWYgKHRoaXMudHlwZVNjaGVtYS5raW5kID09PSAnU0NBTEFSJyB8fCB0aGlzLnR5cGVTY2hlbWEua2luZCA9PT0gJ0VOVU0nKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAnIHsgJyArIGpvaW4odGhpcy5zZWxlY3Rpb25zKSArICcgfSc7XG4gICAgICB9XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBTZWxlY3Rpb25TZXQ7XG59KCk7XG5cbnZhciBTZWxlY3Rpb25TZXRCdWlsZGVyID0gZnVuY3Rpb24gKCkge1xuXG4gIC8qKlxuICAgKiBUaGlzIGNvbnN0cnVjdG9yIHNob3VsZCBub3QgYmUgaW52b2tlZCBkaXJlY3RseS4gU2VsZWN0aW9uU2V0QnVpbGRlcnMgYXJlIGNyZWF0ZWQgd2hlbiBidWlsZGluZyBxdWVyaWVzL211dGF0aW9ucy5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IHR5cGVCdW5kbGUgQSBzZXQgb2YgRVM2IG1vZHVsZXMgZ2VuZXJhdGVkIGJ5IHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vU2hvcGlmeS9ncmFwaHFsLWpzLXNjaGVtYXxncmFwaHFsLWpzLXNjaGVtYX0uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB0eXBlU2NoZW1hIFRoZSBzY2hlbWEgb2JqZWN0IGZvciB0aGUgdHlwZSBvZiB0aGUgY3VycmVudCBzZWxlY3Rpb24uXG4gICAqIEBwYXJhbSB7RmllbGRbXX0gc2VsZWN0aW9ucyBUaGUgZmllbGRzIG9uIHRoZSBjdXJyZW50IHNlbGVjdGlvbi5cbiAgICovXG4gIGZ1bmN0aW9uIFNlbGVjdGlvblNldEJ1aWxkZXIodHlwZUJ1bmRsZSwgdHlwZVNjaGVtYSwgc2VsZWN0aW9ucykge1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIFNlbGVjdGlvblNldEJ1aWxkZXIpO1xuXG4gICAgdGhpcy50eXBlQnVuZGxlID0gdHlwZUJ1bmRsZTtcbiAgICB0aGlzLnR5cGVTY2hlbWEgPSB0eXBlU2NoZW1hO1xuICAgIHRoaXMuc2VsZWN0aW9ucyA9IHNlbGVjdGlvbnM7XG4gIH1cblxuICBjcmVhdGVDbGFzcyhTZWxlY3Rpb25TZXRCdWlsZGVyLCBbe1xuICAgIGtleTogJ2hhc1NlbGVjdGlvbldpdGhSZXNwb25zZUtleScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGhhc1NlbGVjdGlvbldpdGhSZXNwb25zZUtleShyZXNwb25zZUtleSkge1xuICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0aW9ucy5zb21lKGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICByZXR1cm4gZmllbGQucmVzcG9uc2VLZXkgPT09IHJlc3BvbnNlS2V5O1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBhIGZpZWxkIHRvIGJlIHF1ZXJpZWQgb24gdGhlIGN1cnJlbnQgc2VsZWN0aW9uLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBjbGllbnQucXVlcnkoKHJvb3QpID0+IHtcbiAgICAgKiAgIHJvb3QuYWRkKCdjYXQnLCB7YXJnczoge2lkOiAnMTIzNDU2J30sIGFsaWFzOiAnbWVvdyd9LCAoY2F0KSA9PiB7XG4gICAgICogICAgIGNhdC5hZGQoJ25hbWUnKTtcbiAgICAgKiAgIH0pO1xuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogQHBhcmFtIHtTZWxlY3Rpb25TZXR8U3RyaW5nfSBzZWxlY3Rpb25PckZpZWxkTmFtZSBUaGUgc2VsZWN0aW9uIG9yIG5hbWUgb2YgdGhlIGZpZWxkIHRvIGFkZC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIE9wdGlvbnMgb24gdGhlIHF1ZXJ5IGluY2x1ZGluZzpcbiAgICAgKiAgIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5hcmdzXSBBcmd1bWVudHMgb24gdGhlIHF1ZXJ5IChlLmcuIGB7aWQ6ICcxMjM0NTYnfWApLlxuICAgICAqICAgQHBhcmFtIHtTdHJpbmd9IFtvcHRpb25zLmFsaWFzXSBBbGlhcyBmb3IgdGhlIGZpZWxkIGJlaW5nIGFkZGVkLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258U2VsZWN0aW9uU2V0fSBbY2FsbGJhY2tPclNlbGVjdGlvblNldF0gRWl0aGVyIGEgY2FsbGJhY2sgd2hpY2ggd2lsbCBiZSB1c2VkIHRvIGNyZWF0ZSBhIG5ldyB7QGxpbmsgU2VsZWN0aW9uU2V0fSwgb3IgYW4gZXhpc3Rpbmcge0BsaW5rIFNlbGVjdGlvblNldH0uXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2FkZCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGFkZChzZWxlY3Rpb25PckZpZWxkTmFtZSkge1xuICAgICAgdmFyIHNlbGVjdGlvbiA9IHZvaWQgMDtcblxuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChzZWxlY3Rpb25PckZpZWxkTmFtZSkgPT09ICdbb2JqZWN0IFN0cmluZ10nKSB7XG4gICAgICAgIHRyYWNrRmllbGREZXBlbmRlbmN5KHRoaXMudHlwZVNjaGVtYS5uYW1lLCBzZWxlY3Rpb25PckZpZWxkTmFtZSk7XG5cbiAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIHJlc3QgPSBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgICAgcmVzdFtfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgICAgIH1cblxuICAgICAgICBzZWxlY3Rpb24gPSB0aGlzLmZpZWxkLmFwcGx5KHRoaXMsIFtzZWxlY3Rpb25PckZpZWxkTmFtZV0uY29uY2F0KHJlc3QpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChGaWVsZC5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihzZWxlY3Rpb25PckZpZWxkTmFtZSkpIHtcbiAgICAgICAgICB0cmFja0ZpZWxkRGVwZW5kZW5jeSh0aGlzLnR5cGVTY2hlbWEubmFtZSwgc2VsZWN0aW9uT3JGaWVsZE5hbWUubmFtZSk7XG4gICAgICAgIH1cblxuICAgICAgICBzZWxlY3Rpb24gPSBzZWxlY3Rpb25PckZpZWxkTmFtZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHNlbGVjdGlvbi5yZXNwb25zZUtleSAmJiB0aGlzLmhhc1NlbGVjdGlvbldpdGhSZXNwb25zZUtleShzZWxlY3Rpb24ucmVzcG9uc2VLZXkpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIGZpZWxkIG5hbWUgb3IgYWxpYXMgXFwnJyArIHNlbGVjdGlvbi5yZXNwb25zZUtleSArICdcXCcgaGFzIGFscmVhZHkgYmVlbiBhZGRlZC4nKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc2VsZWN0aW9ucy5wdXNoKHNlbGVjdGlvbik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnZmllbGQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBmaWVsZChuYW1lKSB7XG4gICAgICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGNyZWF0aW9uQXJncyA9IEFycmF5KF9sZW4yID4gMSA/IF9sZW4yIC0gMSA6IDApLCBfa2V5MiA9IDE7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICAgICAgY3JlYXRpb25BcmdzW19rZXkyIC0gMV0gPSBhcmd1bWVudHNbX2tleTJdO1xuICAgICAgfVxuXG4gICAgICB2YXIgcGFyc2VkQXJncyA9IHBhcnNlRmllbGRDcmVhdGlvbkFyZ3MoY3JlYXRpb25BcmdzKTtcbiAgICAgIHZhciBvcHRpb25zID0gcGFyc2VkQXJncy5vcHRpb25zLFxuICAgICAgICAgIGNhbGxiYWNrID0gcGFyc2VkQXJncy5jYWxsYmFjaztcbiAgICAgIHZhciBzZWxlY3Rpb25TZXQgPSBwYXJzZWRBcmdzLnNlbGVjdGlvblNldDtcblxuICAgICAgaWYgKCFzZWxlY3Rpb25TZXQpIHtcbiAgICAgICAgaWYgKCF0aGlzLnR5cGVTY2hlbWEuZmllbGRCYXNlVHlwZXNbbmFtZV0pIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGZpZWxkIG9mIG5hbWUgXCInICsgbmFtZSArICdcIiBmb3VuZCBvbiB0eXBlIFwiJyArIHRoaXMudHlwZVNjaGVtYS5uYW1lICsgJ1wiIGluIHNjaGVtYScpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGZpZWxkQmFzZVR5cGUgPSBzY2hlbWFGb3JUeXBlKHRoaXMudHlwZUJ1bmRsZSwgdGhpcy50eXBlU2NoZW1hLmZpZWxkQmFzZVR5cGVzW25hbWVdKTtcblxuICAgICAgICBzZWxlY3Rpb25TZXQgPSBuZXcgU2VsZWN0aW9uU2V0KHRoaXMudHlwZUJ1bmRsZSwgZmllbGRCYXNlVHlwZSwgY2FsbGJhY2spO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3IEZpZWxkKG5hbWUsIG9wdGlvbnMsIHNlbGVjdGlvblNldCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbmxpbmUgZnJhZ21lbnQuXG4gICAgICpcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZU5hbWUgVGhlIHR5cGUgIHRoZSBpbmxpbmUgZnJhZ21lbnQuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxTZWxlY3Rpb25TZXR9ICBbY2FsbGJhY2tPclNlbGVjdGlvblNldF0gRWl0aGVyIGEgY2FsbGJhY2sgd2hpY2ggd2lsbCBiZSB1c2VkIHRvIGNyZWF0ZSBhIG5ldyB7QGxpbmsgU2VsZWN0aW9uU2V0fSwgb3IgYW4gZXhpc3Rpbmcge0BsaW5rIFNlbGVjdGlvblNldH0uXG4gICAgICogQHJldHVybiB7SW5saW5lRnJhZ21lbnR9IEFuIGlubGluZSBmcmFnbWVudC5cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnaW5saW5lRnJhZ21lbnRPbicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGlubGluZUZyYWdtZW50T24odHlwZU5hbWUpIHtcbiAgICAgIHZhciBidWlsZGVyRnVuY3Rpb25PclNlbGVjdGlvblNldCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogbm9vcDtcblxuICAgICAgdmFyIHNlbGVjdGlvblNldCA9IHZvaWQgMDtcblxuICAgICAgaWYgKFNlbGVjdGlvblNldC5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihidWlsZGVyRnVuY3Rpb25PclNlbGVjdGlvblNldCkpIHtcbiAgICAgICAgc2VsZWN0aW9uU2V0ID0gYnVpbGRlckZ1bmN0aW9uT3JTZWxlY3Rpb25TZXQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWxlY3Rpb25TZXQgPSBuZXcgU2VsZWN0aW9uU2V0KHRoaXMudHlwZUJ1bmRsZSwgc2NoZW1hRm9yVHlwZSh0aGlzLnR5cGVCdW5kbGUsIHR5cGVOYW1lKSwgYnVpbGRlckZ1bmN0aW9uT3JTZWxlY3Rpb25TZXQpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3IElubGluZUZyYWdtZW50KHR5cGVOYW1lLCBzZWxlY3Rpb25TZXQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBmaWVsZCB0byBiZSBxdWVyaWVkIG9uIHRoZSBjdXJyZW50IHNlbGVjdGlvbi5cbiAgICAgKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSAgICBuYW1lIFRoZSBuYW1lIG9mIHRoZSBmaWVsZCB0byBhZGQgdG8gdGhlIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gT3B0aW9ucyBvbiB0aGUgcXVlcnkgaW5jbHVkaW5nOlxuICAgICAqICAgQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLmFyZ3NdIEFyZ3VtZW50cyBvbiB0aGUgcXVlcnkgKGUuZy4gYHtpZDogJzEyMzQ1Nid9YCkuXG4gICAgICogICBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMuYWxpYXNdIEFsaWFzIGZvciB0aGUgZmllbGQgYmVpbmcgYWRkZWQuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gIFtjYWxsYmFja10gQ2FsbGJhY2sgd2hpY2ggd2lsbCBiZSB1c2VkIHRvIGNyZWF0ZSBhIG5ldyB7QGxpbmsgU2VsZWN0aW9uU2V0fSBmb3IgdGhlIGZpZWxkIGFkZGVkLlxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdhZGRGaWVsZCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGFkZEZpZWxkKG5hbWUpIHtcbiAgICAgIGZvciAodmFyIF9sZW4zID0gYXJndW1lbnRzLmxlbmd0aCwgY3JlYXRpb25BcmdzID0gQXJyYXkoX2xlbjMgPiAxID8gX2xlbjMgLSAxIDogMCksIF9rZXkzID0gMTsgX2tleTMgPCBfbGVuMzsgX2tleTMrKykge1xuICAgICAgICBjcmVhdGlvbkFyZ3NbX2tleTMgLSAxXSA9IGFyZ3VtZW50c1tfa2V5M107XG4gICAgICB9XG5cbiAgICAgIHRoaXMuYWRkLmFwcGx5KHRoaXMsIFtuYW1lXS5jb25jYXQoY3JlYXRpb25BcmdzKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBhIGNvbm5lY3Rpb24gdG8gYmUgcXVlcmllZCBvbiB0aGUgY3VycmVudCBzZWxlY3Rpb24uXG4gICAgICogVGhpcyBhZGRzIGFsbCB0aGUgZmllbGRzIG5lY2Vzc2FyeSBmb3IgcGFnaW5hdGlvbi5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogY2xpZW50LnF1ZXJ5KChyb290KSA9PiB7XG4gICAgICogICByb290LmFkZCgnY2F0JywgKGNhdCkgPT4ge1xuICAgICAqICAgICBjYXQuYWRkQ29ubmVjdGlvbignZnJpZW5kcycsIHthcmdzOiB7Zmlyc3Q6IDEwfSwgYWxpYXM6ICdjb29sQ2F0cyd9LCAoZnJpZW5kcykgPT4ge1xuICAgICAqICAgICAgIGZyaWVuZHMuYWRkKCduYW1lJyk7XG4gICAgICogICAgIH0pO1xuICAgICAqICAgfSk7XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gICAgbmFtZSBUaGUgbmFtZSBvZiB0aGUgY29ubmVjdGlvbiB0byBhZGQgdG8gdGhlIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gT3B0aW9ucyBvbiB0aGUgcXVlcnkgaW5jbHVkaW5nOlxuICAgICAqICAgQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLmFyZ3NdIEFyZ3VtZW50cyBvbiB0aGUgcXVlcnkgKGUuZy4gYHtmaXJzdDogMTB9YCkuXG4gICAgICogICBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMuYWxpYXNdIEFsaWFzIGZvciB0aGUgZmllbGQgYmVpbmcgYWRkZWQuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxTZWxlY3Rpb25TZXR9ICBbY2FsbGJhY2tPclNlbGVjdGlvblNldF0gRWl0aGVyIGEgY2FsbGJhY2sgd2hpY2ggd2lsbCBiZSB1c2VkIHRvIGNyZWF0ZSBhIG5ldyB7QGxpbmsgU2VsZWN0aW9uU2V0fSwgb3IgYW4gZXhpc3Rpbmcge0BsaW5rIFNlbGVjdGlvblNldH0uXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2FkZENvbm5lY3Rpb24nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRDb25uZWN0aW9uKG5hbWUpIHtcbiAgICAgIGZvciAodmFyIF9sZW40ID0gYXJndW1lbnRzLmxlbmd0aCwgY3JlYXRpb25BcmdzID0gQXJyYXkoX2xlbjQgPiAxID8gX2xlbjQgLSAxIDogMCksIF9rZXk0ID0gMTsgX2tleTQgPCBfbGVuNDsgX2tleTQrKykge1xuICAgICAgICBjcmVhdGlvbkFyZ3NbX2tleTQgLSAxXSA9IGFyZ3VtZW50c1tfa2V5NF07XG4gICAgICB9XG5cbiAgICAgIHZhciBfcGFyc2VGaWVsZENyZWF0aW9uQXIgPSBwYXJzZUZpZWxkQ3JlYXRpb25BcmdzKGNyZWF0aW9uQXJncyksXG4gICAgICAgICAgb3B0aW9ucyA9IF9wYXJzZUZpZWxkQ3JlYXRpb25Bci5vcHRpb25zLFxuICAgICAgICAgIGNhbGxiYWNrID0gX3BhcnNlRmllbGRDcmVhdGlvbkFyLmNhbGxiYWNrLFxuICAgICAgICAgIHNlbGVjdGlvblNldCA9IF9wYXJzZUZpZWxkQ3JlYXRpb25Bci5zZWxlY3Rpb25TZXQ7XG5cbiAgICAgIHRoaXMuYWRkKG5hbWUsIG9wdGlvbnMsIGZ1bmN0aW9uIChjb25uZWN0aW9uKSB7XG4gICAgICAgIGNvbm5lY3Rpb24uYWRkKCdwYWdlSW5mbycsIHt9LCBmdW5jdGlvbiAocGFnZUluZm8pIHtcbiAgICAgICAgICBwYWdlSW5mby5hZGQoJ2hhc05leHRQYWdlJyk7XG4gICAgICAgICAgcGFnZUluZm8uYWRkKCdoYXNQcmV2aW91c1BhZ2UnKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbm5lY3Rpb24uYWRkKCdlZGdlcycsIHt9LCBmdW5jdGlvbiAoZWRnZXMpIHtcbiAgICAgICAgICBlZGdlcy5hZGQoJ2N1cnNvcicpO1xuICAgICAgICAgIGVkZ2VzLmFkZEZpZWxkKCdub2RlJywge30sIHNlbGVjdGlvblNldCB8fCBjYWxsYmFjayk7IC8vIFRoaXMgaXMgYmFkLiBEb24ndCBkbyB0aGlzXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBhbiBpbmxpbmUgZnJhZ21lbnQgb24gdGhlIGN1cnJlbnQgc2VsZWN0aW9uLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBjbGllbnQucXVlcnkoKHJvb3QpID0+IHtcbiAgICAgKiAgIHJvb3QuYWRkKCdhbmltYWwnLCAoYW5pbWFsKSA9PiB7XG4gICAgICogICAgIGFuaW1hbC5hZGRJbmxpbmVGcmFnbWVudE9uKCdjYXQnLCAoY2F0KSA9PiB7XG4gICAgICogICAgICAgY2F0LmFkZCgnbmFtZScpO1xuICAgICAqICAgICB9KTtcbiAgICAgKiAgIH0pO1xuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGVOYW1lIFRoZSBuYW1lIG9mIHRoZSB0eXBlIG9mIHRoZSBpbmxpbmUgZnJhZ21lbnQuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxTZWxlY3Rpb25TZXR9ICBbY2FsbGJhY2tPclNlbGVjdGlvblNldF0gRWl0aGVyIGEgY2FsbGJhY2sgd2hpY2ggd2lsbCBiZSB1c2VkIHRvIGNyZWF0ZSBhIG5ldyB7QGxpbmsgU2VsZWN0aW9uU2V0fSwgb3IgYW4gZXhpc3Rpbmcge0BsaW5rIFNlbGVjdGlvblNldH0uXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2FkZElubGluZUZyYWdtZW50T24nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRJbmxpbmVGcmFnbWVudE9uKHR5cGVOYW1lKSB7XG4gICAgICB2YXIgZmllbGRUeXBlQ2IgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IG5vb3A7XG5cbiAgICAgIHRoaXMuYWRkKHRoaXMuaW5saW5lRnJhZ21lbnRPbih0eXBlTmFtZSwgZmllbGRUeXBlQ2IpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgZnJhZ21lbnQgc3ByZWFkIG9uIHRoZSBjdXJyZW50IHNlbGVjdGlvbi5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogY2xpZW50LnF1ZXJ5KChyb290KSA9PiB7XG4gICAgICogICByb290LmFkZEZyYWdtZW50KGNhdEZyYWdtZW50U3ByZWFkKTtcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RnJhZ21lbnRTcHJlYWR9IGZyYWdtZW50U3ByZWFkIFRoZSBmcmFnbWVudCBzcHJlYWQgdG8gYWRkLlxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdhZGRGcmFnbWVudCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGFkZEZyYWdtZW50KGZyYWdtZW50U3ByZWFkKSB7XG4gICAgICB0aGlzLmFkZChmcmFnbWVudFNwcmVhZCk7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBTZWxlY3Rpb25TZXRCdWlsZGVyO1xufSgpO1xuXG5mdW5jdGlvbiBwYXJzZUFyZ3MoYXJncykge1xuICB2YXIgbmFtZSA9IHZvaWQgMDtcbiAgdmFyIHZhcmlhYmxlcyA9IHZvaWQgMDtcbiAgdmFyIHNlbGVjdGlvblNldENhbGxiYWNrID0gdm9pZCAwO1xuXG4gIGlmIChhcmdzLmxlbmd0aCA9PT0gMykge1xuICAgIHZhciBfYXJncyA9IHNsaWNlZFRvQXJyYXkoYXJncywgMyk7XG5cbiAgICBuYW1lID0gX2FyZ3NbMF07XG4gICAgdmFyaWFibGVzID0gX2FyZ3NbMV07XG4gICAgc2VsZWN0aW9uU2V0Q2FsbGJhY2sgPSBfYXJnc1syXTtcbiAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMikge1xuICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJnc1swXSkgPT09ICdbb2JqZWN0IFN0cmluZ10nKSB7XG4gICAgICBuYW1lID0gYXJnc1swXTtcbiAgICAgIHZhcmlhYmxlcyA9IG51bGw7XG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFyZ3NbMF0pKSB7XG4gICAgICB2YXJpYWJsZXMgPSBhcmdzWzBdO1xuICAgICAgbmFtZSA9IG51bGw7XG4gICAgfVxuXG4gICAgc2VsZWN0aW9uU2V0Q2FsbGJhY2sgPSBhcmdzWzFdO1xuICB9IGVsc2Uge1xuICAgIHNlbGVjdGlvblNldENhbGxiYWNrID0gYXJnc1swXTtcbiAgICBuYW1lID0gbnVsbDtcbiAgfVxuXG4gIHJldHVybiB7IG5hbWU6IG5hbWUsIHZhcmlhYmxlczogdmFyaWFibGVzLCBzZWxlY3Rpb25TZXRDYWxsYmFjazogc2VsZWN0aW9uU2V0Q2FsbGJhY2sgfTtcbn1cblxudmFyIFZhcmlhYmxlRGVmaW5pdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFZhcmlhYmxlRGVmaW5pdGlvbnModmFyaWFibGVEZWZpbml0aW9ucykge1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIFZhcmlhYmxlRGVmaW5pdGlvbnMpO1xuXG4gICAgdGhpcy52YXJpYWJsZURlZmluaXRpb25zID0gdmFyaWFibGVEZWZpbml0aW9ucyA/IFtdLmNvbmNhdCh0b0NvbnN1bWFibGVBcnJheSh2YXJpYWJsZURlZmluaXRpb25zKSkgOiBbXTtcbiAgICBPYmplY3QuZnJlZXplKHRoaXMudmFyaWFibGVEZWZpbml0aW9ucyk7XG4gICAgT2JqZWN0LmZyZWV6ZSh0aGlzKTtcbiAgfVxuXG4gIGNyZWF0ZUNsYXNzKFZhcmlhYmxlRGVmaW5pdGlvbnMsIFt7XG4gICAga2V5OiAndG9TdHJpbmcnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgICAgIGlmICh0aGlzLnZhcmlhYmxlRGVmaW5pdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuICcgKCcgKyBqb2luKHRoaXMudmFyaWFibGVEZWZpbml0aW9ucykgKyAnKSAnO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gVmFyaWFibGVEZWZpbml0aW9ucztcbn0oKTtcblxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciB7QGxpbmsgUXVlcnl9IGFuZCB7QGxpbmsgTXV0YXRpb259LlxuICogQGFic3RyYWN0XG4gKi9cblxudmFyIE9wZXJhdGlvbiA9IGZ1bmN0aW9uICgpIHtcblxuICAvKipcbiAgICogVGhpcyBjb25zdHJ1Y3RvciBzaG91bGQgbm90IGJlIGludm9rZWQuIFRoZSBzdWJjbGFzc2VzIHtAbGluayBRdWVyeX0gYW5kIHtAbGluayBNdXRhdGlvbn0gc2hvdWxkIGJlIHVzZWQgaW5zdGVhZC5cbiAgICovXG4gIGZ1bmN0aW9uIE9wZXJhdGlvbih0eXBlQnVuZGxlLCBvcGVyYXRpb25UeXBlKSB7XG4gICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgT3BlcmF0aW9uKTtcblxuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiA+IDIgPyBfbGVuIC0gMiA6IDApLCBfa2V5ID0gMjsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5IC0gMl0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgdmFyIF9wYXJzZUFyZ3MgPSBwYXJzZUFyZ3MoYXJncyksXG4gICAgICAgIG5hbWUgPSBfcGFyc2VBcmdzLm5hbWUsXG4gICAgICAgIHZhcmlhYmxlcyA9IF9wYXJzZUFyZ3MudmFyaWFibGVzLFxuICAgICAgICBzZWxlY3Rpb25TZXRDYWxsYmFjayA9IF9wYXJzZUFyZ3Muc2VsZWN0aW9uU2V0Q2FsbGJhY2s7XG5cbiAgICB0aGlzLnR5cGVCdW5kbGUgPSB0eXBlQnVuZGxlO1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy52YXJpYWJsZURlZmluaXRpb25zID0gbmV3IFZhcmlhYmxlRGVmaW5pdGlvbnModmFyaWFibGVzKTtcbiAgICB0aGlzLm9wZXJhdGlvblR5cGUgPSBvcGVyYXRpb25UeXBlO1xuICAgIGlmIChvcGVyYXRpb25UeXBlID09PSAncXVlcnknKSB7XG4gICAgICB0aGlzLnNlbGVjdGlvblNldCA9IG5ldyBTZWxlY3Rpb25TZXQodHlwZUJ1bmRsZSwgdHlwZUJ1bmRsZS5xdWVyeVR5cGUsIHNlbGVjdGlvblNldENhbGxiYWNrKTtcbiAgICAgIHRoaXMudHlwZVNjaGVtYSA9IHNjaGVtYUZvclR5cGUodHlwZUJ1bmRsZSwgdHlwZUJ1bmRsZS5xdWVyeVR5cGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNlbGVjdGlvblNldCA9IG5ldyBTZWxlY3Rpb25TZXQodHlwZUJ1bmRsZSwgdHlwZUJ1bmRsZS5tdXRhdGlvblR5cGUsIHNlbGVjdGlvblNldENhbGxiYWNrKTtcbiAgICAgIHRoaXMudHlwZVNjaGVtYSA9IHNjaGVtYUZvclR5cGUodHlwZUJ1bmRsZSwgdHlwZUJ1bmRsZS5tdXRhdGlvblR5cGUpO1xuICAgIH1cbiAgICBPYmplY3QuZnJlZXplKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIG9wZXJhdGlvbiBpcyBhbm9ueW1vdXMgKGkuZS4gaGFzIG5vIG5hbWUpLlxuICAgKi9cblxuICBjcmVhdGVDbGFzcyhPcGVyYXRpb24sIFt7XG4gICAga2V5OiAndG9TdHJpbmcnLFxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgR3JhcGhRTCBxdWVyeSBvciBtdXRhdGlvbiBzdHJpbmcgKGUuZy4gYHF1ZXJ5IG15UXVlcnkgeyBjYXQgeyBuYW1lIH0gfWApLlxuICAgICAqXG4gICAgICogQHJldHVybiB7U3RyaW5nfSBUaGUgR3JhcGhRTCBxdWVyeSBvciBtdXRhdGlvbiBzdHJpbmcuXG4gICAgICovXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgICAgdmFyIG5hbWVTdHJpbmcgPSB0aGlzLm5hbWUgPyAnICcgKyB0aGlzLm5hbWUgOiAnJztcblxuICAgICAgcmV0dXJuICcnICsgdGhpcy5vcGVyYXRpb25UeXBlICsgbmFtZVN0cmluZyArIHRoaXMudmFyaWFibGVEZWZpbml0aW9ucyArIHRoaXMuc2VsZWN0aW9uU2V0O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2lzQW5vbnltb3VzJyxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHtcbiAgICAgIHJldHVybiAhdGhpcy5uYW1lO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gT3BlcmF0aW9uO1xufSgpO1xuXG4vKipcbiAqIEdyYXBoUUwgUXVlcnkgY2xhc3MuXG4gKiBAZXh0ZW5kcyBPcGVyYXRpb25cbiAqL1xuXG52YXIgUXVlcnkgPSBmdW5jdGlvbiAoX09wZXJhdGlvbikge1xuICBpbmhlcml0cyhRdWVyeSwgX09wZXJhdGlvbik7XG5cbiAgLyoqXG4gICAqIFRoaXMgY29uc3RydWN0b3Igc2hvdWxkIG5vdCBiZSBpbnZva2VkIGRpcmVjdGx5LlxuICAgKiBVc2UgdGhlIGZhY3RvcnkgZnVuY3Rpb25zIHtAbGluayBDbGllbnQjcXVlcnl9IG9yIHtAbGluayBEb2N1bWVudCNhZGRRdWVyeX0gdG8gY3JlYXRlIGEgUXVlcnkuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB0eXBlQnVuZGxlIEEgc2V0IG9mIEVTNiBtb2R1bGVzIGdlbmVyYXRlZCBieSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL1Nob3BpZnkvZ3JhcGhxbC1qcy1zY2hlbWF8Z3JhcGhxbC1qcy1zY2hlbWF9LlxuICAgKiBAcGFyYW0ge1N0cmluZ30gW25hbWVdIEEgbmFtZSBmb3IgdGhlIHF1ZXJ5LlxuICAgKiBAcGFyYW0ge09iamVjdFtdfSBbdmFyaWFibGVzXSBBIGxpc3Qgb2YgdmFyaWFibGVzIGluIHRoZSBxdWVyeS4gU2VlIHtAbGluayBDbGllbnQjdmFyaWFibGV9LlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBzZWxlY3Rpb25TZXRDYWxsYmFjayBUaGUgcXVlcnkgYnVpbGRlciBjYWxsYmFjay5cbiAgICogICBBIHtAbGluayBTZWxlY3Rpb25TZXR9IGlzIGNyZWF0ZWQgdXNpbmcgdGhpcyBjYWxsYmFjay5cbiAgICovXG4gIGZ1bmN0aW9uIFF1ZXJ5KHR5cGVCdW5kbGUpIHtcbiAgICB2YXIgX3JlZjtcblxuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIFF1ZXJ5KTtcblxuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKF9yZWYgPSBRdWVyeS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFF1ZXJ5KSkuY2FsbC5hcHBseShfcmVmLCBbdGhpcywgdHlwZUJ1bmRsZSwgJ3F1ZXJ5J10uY29uY2F0KGFyZ3MpKSk7XG4gIH1cblxuICByZXR1cm4gUXVlcnk7XG59KE9wZXJhdGlvbik7XG5cbi8qKlxuICogR3JhcGhRTCBNdXRhdGlvbiBjbGFzcy5cbiAqIEBleHRlbmRzIE9wZXJhdGlvblxuICovXG5cbnZhciBNdXRhdGlvbiA9IGZ1bmN0aW9uIChfT3BlcmF0aW9uKSB7XG4gIGluaGVyaXRzKE11dGF0aW9uLCBfT3BlcmF0aW9uKTtcblxuICAvKipcbiAgICogVGhpcyBjb25zdHJ1Y3RvciBzaG91bGQgbm90IGJlIGludm9rZWQgZGlyZWN0bHkuXG4gICAqIFVzZSB0aGUgZmFjdG9yeSBmdW5jdGlvbnMge0BsaW5rIENsaWVudCNtdXRhdGlvbn0gb3Ige0BsaW5rIERvY3VtZW50I2FkZE11dGF0aW9ufSB0byBjcmVhdGUgYSBNdXRhdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IHR5cGVCdW5kbGUgQSBzZXQgb2YgRVM2IG1vZHVsZXMgZ2VuZXJhdGVkIGJ5IHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vU2hvcGlmeS9ncmFwaHFsLWpzLXNjaGVtYXxncmFwaHFsLWpzLXNjaGVtYX0uXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbbmFtZV0gQSBuYW1lIGZvciB0aGUgbXV0YXRpb24uXG4gICAqIEBwYXJhbSB7T2JqZWN0W119IFt2YXJpYWJsZXNdIEEgbGlzdCBvZiB2YXJpYWJsZXMgaW4gdGhlIG11dGF0aW9uLiBTZWUge0BsaW5rIENsaWVudCN2YXJpYWJsZX0uXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHNlbGVjdGlvblNldENhbGxiYWNrIFRoZSBtdXRhdGlvbiBidWlsZGVyIGNhbGxiYWNrLlxuICAgKiAgIEEge0BsaW5rIFNlbGVjdGlvblNldH0gaXMgY3JlYXRlZCB1c2luZyB0aGlzIGNhbGxiYWNrLlxuICAgKi9cbiAgZnVuY3Rpb24gTXV0YXRpb24odHlwZUJ1bmRsZSkge1xuICAgIHZhciBfcmVmO1xuXG4gICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgTXV0YXRpb24pO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoX3JlZiA9IE11dGF0aW9uLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTXV0YXRpb24pKS5jYWxsLmFwcGx5KF9yZWYsIFt0aGlzLCB0eXBlQnVuZGxlLCAnbXV0YXRpb24nXS5jb25jYXQoYXJncykpKTtcbiAgfVxuXG4gIHJldHVybiBNdXRhdGlvbjtcbn0oT3BlcmF0aW9uKTtcblxuZnVuY3Rpb24gaXNBbm9ueW1vdXMob3BlcmF0aW9uKSB7XG4gIHJldHVybiBvcGVyYXRpb24uaXNBbm9ueW1vdXM7XG59XG5cbmZ1bmN0aW9uIGhhc0Fub255bW91c09wZXJhdGlvbnMob3BlcmF0aW9ucykge1xuICByZXR1cm4gb3BlcmF0aW9ucy5zb21lKGlzQW5vbnltb3VzKTtcbn1cblxuZnVuY3Rpb24gaGFzRHVwbGljYXRlT3BlcmF0aW9uTmFtZXMob3BlcmF0aW9ucykge1xuICB2YXIgbmFtZXMgPSBvcGVyYXRpb25zLm1hcChmdW5jdGlvbiAob3BlcmF0aW9uKSB7XG4gICAgcmV0dXJuIG9wZXJhdGlvbi5uYW1lO1xuICB9KTtcblxuICByZXR1cm4gbmFtZXMucmVkdWNlKGZ1bmN0aW9uIChoYXNEdXBsaWNhdGVzLCBuYW1lLCBpbmRleCkge1xuICAgIHJldHVybiBoYXNEdXBsaWNhdGVzIHx8IG5hbWVzLmluZGV4T2YobmFtZSkgIT09IGluZGV4O1xuICB9LCBmYWxzZSk7XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RPcGVyYXRpb24odHlwZUJ1bmRsZSwgb3BlcmF0aW9uVHlwZSkge1xuICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4gPiAyID8gX2xlbiAtIDIgOiAwKSwgX2tleSA9IDI7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICBhcmdzW19rZXkgLSAyXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgfVxuXG4gIGlmIChPcGVyYXRpb24ucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYXJnc1swXSkpIHtcbiAgICByZXR1cm4gYXJnc1swXTtcbiAgfVxuXG4gIGlmIChvcGVyYXRpb25UeXBlID09PSAncXVlcnknKSB7XG4gICAgcmV0dXJuIG5ldyAoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuYXBwbHkoUXVlcnksIFtudWxsXS5jb25jYXQoW3R5cGVCdW5kbGVdLCBhcmdzKSkpKCk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG5ldyAoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuYXBwbHkoTXV0YXRpb24sIFtudWxsXS5jb25jYXQoW3R5cGVCdW5kbGVdLCBhcmdzKSkpKCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNJbnZhbGlkT3BlcmF0aW9uQ29tYmluYXRpb24ob3BlcmF0aW9ucykge1xuICBpZiAob3BlcmF0aW9ucy5sZW5ndGggPT09IDEpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gaGFzQW5vbnltb3VzT3BlcmF0aW9ucyhvcGVyYXRpb25zKSB8fCBoYXNEdXBsaWNhdGVPcGVyYXRpb25OYW1lcyhvcGVyYXRpb25zKTtcbn1cblxuZnVuY3Rpb24gZnJhZ21lbnROYW1lSXNOb3RVbmlxdWUoZXhpc3RpbmdEZWZpbml0aW9ucywgbmFtZSkge1xuICByZXR1cm4gZXhpc3RpbmdEZWZpbml0aW9ucy5zb21lKGZ1bmN0aW9uIChkZWZpbml0aW9uKSB7XG4gICAgcmV0dXJuIGRlZmluaXRpb24ubmFtZSA9PT0gbmFtZTtcbiAgfSk7XG59XG5cbnZhciBEb2N1bWVudCA9IGZ1bmN0aW9uICgpIHtcblxuICAvKipcbiAgICogVGhpcyBjb25zdHJ1Y3RvciBzaG91bGQgbm90IGJlIGludm9rZWQgZGlyZWN0bHkuXG4gICAqIFVzZSB0aGUgZmFjdG9yeSBmdW5jdGlvbiB7QGxpbmsgQ2xpZW50I2RvY3VtZW50fSB0byBjcmVhdGUgYSBEb2N1bWVudC5cbiAgICogQHBhcmFtIHtPYmplY3R9IHR5cGVCdW5kbGUgQSBzZXQgb2YgRVM2IG1vZHVsZXMgZ2VuZXJhdGVkIGJ5IHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vU2hvcGlmeS9ncmFwaHFsLWpzLXNjaGVtYXxncmFwaHFsLWpzLXNjaGVtYX0uXG4gICAqL1xuICBmdW5jdGlvbiBEb2N1bWVudCh0eXBlQnVuZGxlKSB7XG4gICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgRG9jdW1lbnQpO1xuXG4gICAgdGhpcy50eXBlQnVuZGxlID0gdHlwZUJ1bmRsZTtcbiAgICB0aGlzLmRlZmluaXRpb25zID0gW107XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgR3JhcGhRTCBxdWVyeSBzdHJpbmcgZm9yIHRoZSBEb2N1bWVudCAoZS5nLiBgcXVlcnkgcXVlcnlPbmUgeyAuLi4gfSBxdWVyeSBxdWVyeVR3byB7IC4uLiB9YCkuXG4gICAqXG4gICAqIEByZXR1cm4ge1N0cmluZ30gVGhlIEdyYXBoUUwgcXVlcnkgc3RyaW5nIGZvciB0aGUgRG9jdW1lbnQuXG4gICAqL1xuXG4gIGNyZWF0ZUNsYXNzKERvY3VtZW50LCBbe1xuICAgIGtleTogJ3RvU3RyaW5nJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgICByZXR1cm4gam9pbih0aGlzLmRlZmluaXRpb25zKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGFuIG9wZXJhdGlvbiB0byB0aGUgRG9jdW1lbnQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBvcGVyYXRpb25UeXBlIFRoZSB0eXBlIG9mIHRoZSBvcGVyYXRpb24uIEVpdGhlciAncXVlcnknIG9yICdtdXRhdGlvbicuXG4gICAgICogQHBhcmFtIHsoT3BlcmF0aW9ufFN0cmluZyl9IFtxdWVyeXxxdWVyeU5hbWVdIEVpdGhlciBhbiBpbnN0YW5jZSBvZiBhbiBvcGVyYXRpb25cbiAgICAgKiAgIG9iamVjdCwgb3IgdGhlIG5hbWUgb2YgYW4gb3BlcmF0aW9uLiBCb3RoIGFyZSBvcHRpb25hbC5cbiAgICAgKiBAcGFyYW0ge09iamVjdFtdfSBbdmFyaWFibGVzXSBBIGxpc3Qgb2YgdmFyaWFibGVzIGluIHRoZSBvcGVyYXRpb24uIFNlZSB7QGxpbmsgQ2xpZW50I3ZhcmlhYmxlfS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIFRoZSBxdWVyeSBidWlsZGVyIGNhbGxiYWNrLiBJZiBhbiBvcGVyYXRpb25cbiAgICAgKiAgIGluc3RhbmNlIGlzIHBhc3NlZCwgdGhpcyBjYWxsYmFjayB3aWxsIGJlIGlnbm9yZWQuXG4gICAgICogICBBIHtAbGluayBTZWxlY3Rpb25TZXR9IGlzIGNyZWF0ZWQgdXNpbmcgdGhpcyBjYWxsYmFjay5cbiAgICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2FkZE9wZXJhdGlvbicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGFkZE9wZXJhdGlvbihvcGVyYXRpb25UeXBlKSB7XG4gICAgICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuMiA+IDEgPyBfbGVuMiAtIDEgOiAwKSwgX2tleTIgPSAxOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG4gICAgICAgIGFyZ3NbX2tleTIgLSAxXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gICAgICB9XG5cbiAgICAgIHZhciBvcGVyYXRpb24gPSBleHRyYWN0T3BlcmF0aW9uLmFwcGx5KHVuZGVmaW5lZCwgW3RoaXMudHlwZUJ1bmRsZSwgb3BlcmF0aW9uVHlwZV0uY29uY2F0KGFyZ3MpKTtcblxuICAgICAgaWYgKGlzSW52YWxpZE9wZXJhdGlvbkNvbWJpbmF0aW9uKHRoaXMub3BlcmF0aW9ucy5jb25jYXQob3BlcmF0aW9uKSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBbGwgb3BlcmF0aW9ucyBtdXN0IGJlIHVuaXF1ZWx5IG5hbWVkIG9uIGEgbXVsdGktb3BlcmF0aW9uIGRvY3VtZW50Jyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZGVmaW5pdGlvbnMucHVzaChvcGVyYXRpb24pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBxdWVyeSB0byB0aGUgRG9jdW1lbnQuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGRvY3VtZW50LmFkZFF1ZXJ5KCdteVF1ZXJ5JywgKHJvb3QpID0+IHtcbiAgICAgKiAgIHJvb3QuYWRkKCdjYXQnLCAoY2F0KSA9PiB7XG4gICAgICogICAgY2F0LmFkZCgnbmFtZScpO1xuICAgICAqICAgfSk7XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBAcGFyYW0geyhRdWVyeXxTdHJpbmcpfSBbcXVlcnl8cXVlcnlOYW1lXSBFaXRoZXIgYW4gaW5zdGFuY2Ugb2YgYSBxdWVyeVxuICAgICAqICAgb2JqZWN0LCBvciB0aGUgbmFtZSBvZiBhIHF1ZXJ5LiBCb3RoIGFyZSBvcHRpb25hbC5cbiAgICAgKiBAcGFyYW0ge09iamVjdFtdfSBbdmFyaWFibGVzXSBBIGxpc3Qgb2YgdmFyaWFibGVzIGluIHRoZSBxdWVyeS4gU2VlIHtAbGluayBDbGllbnQjdmFyaWFibGV9LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gVGhlIHF1ZXJ5IGJ1aWxkZXIgY2FsbGJhY2suIElmIGEgcXVlcnlcbiAgICAgKiAgIGluc3RhbmNlIGlzIHBhc3NlZCwgdGhpcyBjYWxsYmFjayB3aWxsIGJlIGlnbm9yZWQuXG4gICAgICogICBBIHtAbGluayBTZWxlY3Rpb25TZXR9IGlzIGNyZWF0ZWQgdXNpbmcgdGhpcyBjYWxsYmFjay5cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnYWRkUXVlcnknLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRRdWVyeSgpIHtcbiAgICAgIGZvciAodmFyIF9sZW4zID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4zKSwgX2tleTMgPSAwOyBfa2V5MyA8IF9sZW4zOyBfa2V5MysrKSB7XG4gICAgICAgIGFyZ3NbX2tleTNdID0gYXJndW1lbnRzW19rZXkzXTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5hZGRPcGVyYXRpb24uYXBwbHkodGhpcywgWydxdWVyeSddLmNvbmNhdChhcmdzKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBhIG11dGF0aW9uIHRvIHRoZSBEb2N1bWVudC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogY29uc3QgaW5wdXQgPSBjbGllbnQudmFyaWFibGUoJ2lucHV0JywgJ0NhdENyZWF0ZUlucHV0IScpO1xuICAgICAqXG4gICAgICogZG9jdW1lbnQuYWRkTXV0YXRpb24oJ215TXV0YXRpb24nLCBbaW5wdXRdLCAocm9vdCkgPT4ge1xuICAgICAqICAgcm9vdC5hZGQoJ2NhdENyZWF0ZScsIHthcmdzOiB7aW5wdXR9fSwgKGNhdENyZWF0ZSkgPT4ge1xuICAgICAqICAgICBjYXRDcmVhdGUuYWRkKCdjYXQnLCAoY2F0KSA9PiB7XG4gICAgICogICAgICAgY2F0LmFkZCgnbmFtZScpO1xuICAgICAqICAgICB9KTtcbiAgICAgKiAgIH0pO1xuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogQHBhcmFtIHsoTXV0YXRpb258U3RyaW5nKX0gW211dGF0aW9ufG11dGF0aW9uTmFtZV0gRWl0aGVyIGFuIGluc3RhbmNlIG9mIGEgbXV0YXRpb25cbiAgICAgKiAgIG9iamVjdCwgb3IgdGhlIG5hbWUgb2YgYSBtdXRhdGlvbi4gQm90aCBhcmUgb3B0aW9uYWwuXG4gICAgICogQHBhcmFtIHtPYmplY3RbXX0gW3ZhcmlhYmxlc10gQSBsaXN0IG9mIHZhcmlhYmxlcyBpbiB0aGUgbXV0YXRpb24uIFNlZSB7QGxpbmsgQ2xpZW50I3ZhcmlhYmxlfS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIFRoZSBtdXRhdGlvbiBidWlsZGVyIGNhbGxiYWNrLiBJZiBhIG11dGF0aW9uXG4gICAgICogICBpbnN0YW5jZSBpcyBwYXNzZWQsIHRoaXMgY2FsbGJhY2sgd2lsbCBiZSBpZ25vcmVkLlxuICAgICAqICAgQSB7QGxpbmsgU2VsZWN0aW9uU2V0fSBpcyBjcmVhdGVkIHVzaW5nIHRoaXMgY2FsbGJhY2suXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2FkZE11dGF0aW9uJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkTXV0YXRpb24oKSB7XG4gICAgICBmb3IgKHZhciBfbGVuNCA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuNCksIF9rZXk0ID0gMDsgX2tleTQgPCBfbGVuNDsgX2tleTQrKykge1xuICAgICAgICBhcmdzW19rZXk0XSA9IGFyZ3VtZW50c1tfa2V5NF07XG4gICAgICB9XG5cbiAgICAgIHRoaXMuYWRkT3BlcmF0aW9uLmFwcGx5KHRoaXMsIFsnbXV0YXRpb24nXS5jb25jYXQoYXJncykpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlZmluZXMgYSBmcmFnbWVudCBvbiB0aGUgRG9jdW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgZnJhZ21lbnQuXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG9uVHlwZSBUaGUgdHlwZSB0aGUgZnJhZ21lbnQgaXMgb24uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2J1aWxkZXJGdW5jdGlvbl0gVGhlIHF1ZXJ5IGJ1aWxkZXIgY2FsbGJhY2suXG4gICAgICogICBBIHtAbGluayBTZWxlY3Rpb25TZXR9IGlzIGNyZWF0ZWQgdXNpbmcgdGhpcyBjYWxsYmFjay5cbiAgICAgKiBAcmV0dXJuIHtGcmFnbWVudFNwcmVhZH0gQSB7QGxpbmsgRnJhZ21lbnRTcHJlYWR9IHRvIGJlIHVzZWQgd2l0aCB7QGxpbmsgU2VsZWN0aW9uU2V0QnVpbGRlciNhZGRGcmFnbWVudH0uXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2RlZmluZUZyYWdtZW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZGVmaW5lRnJhZ21lbnQobmFtZSwgb25UeXBlLCBidWlsZGVyRnVuY3Rpb24pIHtcbiAgICAgIGlmIChmcmFnbWVudE5hbWVJc05vdFVuaXF1ZSh0aGlzLmZyYWdtZW50RGVmaW5pdGlvbnMsIG5hbWUpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQWxsIGZyYWdtZW50cyBtdXN0IGJlIHVuaXF1ZWx5IG5hbWVkIG9uIGEgbXVsdGktZnJhZ21lbnQgZG9jdW1lbnQnKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHNlbGVjdGlvblNldCA9IG5ldyBTZWxlY3Rpb25TZXQodGhpcy50eXBlQnVuZGxlLCBvblR5cGUsIGJ1aWxkZXJGdW5jdGlvbik7XG4gICAgICB2YXIgZnJhZ21lbnQgPSBuZXcgRnJhZ21lbnREZWZpbml0aW9uKG5hbWUsIG9uVHlwZSwgc2VsZWN0aW9uU2V0KTtcblxuICAgICAgdGhpcy5kZWZpbml0aW9ucy5wdXNoKGZyYWdtZW50KTtcblxuICAgICAgcmV0dXJuIGZyYWdtZW50LnNwcmVhZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBbGwgb3BlcmF0aW9ucyAoe0BsaW5rIFF1ZXJ5fSBhbmQge0BsaW5rIE11dGF0aW9ufSkgb24gdGhlIERvY3VtZW50LlxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdvcGVyYXRpb25zJyxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHtcbiAgICAgIHJldHVybiB0aGlzLmRlZmluaXRpb25zLmZpbHRlcihmdW5jdGlvbiAoZGVmaW5pdGlvbikge1xuICAgICAgICByZXR1cm4gT3BlcmF0aW9uLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGRlZmluaXRpb24pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWxsIHtAbGluayBGcmFnbWVudERlZmluaXRpb259cyBvbiB0aGUgRG9jdW1lbnQuXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2ZyYWdtZW50RGVmaW5pdGlvbnMnLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkge1xuICAgICAgcmV0dXJuIHRoaXMuZGVmaW5pdGlvbnMuZmlsdGVyKGZ1bmN0aW9uIChkZWZpbml0aW9uKSB7XG4gICAgICAgIHJldHVybiBGcmFnbWVudERlZmluaXRpb24ucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoZGVmaW5pdGlvbik7XG4gICAgICB9KTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIERvY3VtZW50O1xufSgpO1xuXG4vKipcbiAqIFRoZSBiYXNlIGNsYXNzIHVzZWQgd2hlbiBkZXNlcmlhbGl6aW5nIHJlc3BvbnNlIGRhdGEuXG4gKiBQcm92aWRlcyByaWNoIGZlYXR1cmVzLCBsaWtlIGZ1bmN0aW9ucyB0byBnZW5lcmF0ZSBxdWVyaWVzIHRvIHJlZmV0Y2ggYSBub2RlIG9yIGZldGNoIHRoZSBuZXh0IHBhZ2UuXG4gKlxuICogQGNsYXNzXG4gKi9cbnZhciBHcmFwaE1vZGVsID1cblxuLyoqXG4gKiBAcGFyYW0ge09iamVjdH0gYXR0cnMgQXR0cmlidXRlcyBvbiB0aGUgR3JhcGhNb2RlbC5cbiAqL1xuZnVuY3Rpb24gR3JhcGhNb2RlbChhdHRycykge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIGNsYXNzQ2FsbENoZWNrKHRoaXMsIEdyYXBoTW9kZWwpO1xuXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnYXR0cnMnLCB7IHZhbHVlOiBhdHRycywgZW51bWVyYWJsZTogZmFsc2UgfSk7XG5cbiAgT2JqZWN0LmtleXModGhpcy5hdHRycykuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHtcbiAgICByZXR1cm4gIShrZXkgaW4gX3RoaXMpO1xuICB9KS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICB2YXIgZGVzY3JpcHRvciA9IHZvaWQgMDtcblxuICAgIGlmIChhdHRyc1trZXldID09PSBudWxsKSB7XG4gICAgICBkZXNjcmlwdG9yID0ge1xuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGVzY3JpcHRvciA9IHtcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQkJDEoKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuYXR0cnNba2V5XS52YWx1ZU9mKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfdGhpcywga2V5LCBkZXNjcmlwdG9yKTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIEEgcmVnaXN0cnkgb2YgY2xhc3NlcyB1c2VkIHRvIGRlc2VyaWFsaXplIHRoZSByZXNwb25zZSBkYXRhLiBVc2VzIHtAbGluayBHcmFwaE1vZGVsfSBieSBkZWZhdWx0LlxuICovXG5cbnZhciBDbGFzc1JlZ2lzdHJ5ID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBDbGFzc1JlZ2lzdHJ5KCkge1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIENsYXNzUmVnaXN0cnkpO1xuXG4gICAgdGhpcy5jbGFzc1N0b3JlID0ge307XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgY2xhc3MgZm9yIGEgR3JhcGhRTCB0eXBlIGluIHRoZSByZWdpc3RyeS5cbiAgICpcbiAgICogQHBhcmFtIHtDbGFzc30gY29uc3RydWN0b3IgVGhlIGNvbnN0cnVjdG9yIG9mIHRoZSBjbGFzcy5cbiAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgVGhlIEdyYXBoUUwgdHlwZSBvZiB0aGUgb2JqZWN0IHRvIGRlc2VyaWFsaXplIGludG8gdGhlIGNsYXNzLlxuICAgKi9cblxuICBjcmVhdGVDbGFzcyhDbGFzc1JlZ2lzdHJ5LCBbe1xuICAgIGtleTogJ3JlZ2lzdGVyQ2xhc3NGb3JUeXBlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVnaXN0ZXJDbGFzc0ZvclR5cGUoY29uc3RydWN0b3IsIHR5cGUpIHtcbiAgICAgIHRoaXMuY2xhc3NTdG9yZVt0eXBlXSA9IGNvbnN0cnVjdG9yO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVucmVnaXN0ZXJzIGEgY2xhc3MgZm9yIGEgR3JhcGhRTCB0eXBlIGluIHRoZSByZWdpc3RyeS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFRoZSBHcmFwaFFMIHR5cGUgdG8gdW5yZWdpc3Rlci5cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAndW5yZWdpc3RlckNsYXNzRm9yVHlwZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVucmVnaXN0ZXJDbGFzc0ZvclR5cGUodHlwZSkge1xuICAgICAgZGVsZXRlIHRoaXMuY2xhc3NTdG9yZVt0eXBlXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjbGFzcyBmb3IgdGhlIGdpdmVuIEdyYXBoUUwgdHlwZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFRoZSBHcmFwaFFMIHR5cGUgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJuIHtDbGFzc3xHcmFwaE1vZGVsfSBUaGUgY2xhc3MgZm9yIHRoZSBnaXZlbiBHcmFwaFFMIHR5cGUuIERlZmF1bHRzIHRvIHtAbGluayBHcmFwaE1vZGVsfSBpZiBubyBjbGFzcyBpcyByZWdpc3RlcmVkIGZvciB0aGUgR3JhcGhRTCB0eXBlLlxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdjbGFzc0ZvclR5cGUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjbGFzc0ZvclR5cGUodHlwZSkge1xuICAgICAgcmV0dXJuIHRoaXMuY2xhc3NTdG9yZVt0eXBlXSB8fCBHcmFwaE1vZGVsO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gQ2xhc3NSZWdpc3RyeTtcbn0oKTtcblxuZnVuY3Rpb24gaXNWYWx1ZShhcmcpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcmcpICE9PSAnW29iamVjdCBOdWxsXScgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFyZykgIT09ICdbb2JqZWN0IFVuZGVmaW5lZF0nO1xufVxuXG5mdW5jdGlvbiBpc05vZGVDb250ZXh0KGNvbnRleHQpIHtcbiAgcmV0dXJuIGNvbnRleHQuc2VsZWN0aW9uLnNlbGVjdGlvblNldC50eXBlU2NoZW1hLmltcGxlbWVudHNOb2RlO1xufVxuXG5mdW5jdGlvbiBpc0Nvbm5lY3Rpb24oY29udGV4dCkge1xuICByZXR1cm4gY29udGV4dC5zZWxlY3Rpb24uc2VsZWN0aW9uU2V0LnR5cGVTY2hlbWEubmFtZS5lbmRzV2l0aCgnQ29ubmVjdGlvbicpO1xufVxuXG5mdW5jdGlvbiBuZWFyZXN0Tm9kZShjb250ZXh0KSB7XG4gIGlmIChjb250ZXh0ID09IG51bGwpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfSBlbHNlIGlmIChpc05vZGVDb250ZXh0KGNvbnRleHQpKSB7XG4gICAgcmV0dXJuIGNvbnRleHQ7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG5lYXJlc3ROb2RlKGNvbnRleHQucGFyZW50KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjb250ZXh0c0Zyb21Sb290KGNvbnRleHQpIHtcbiAgaWYgKGNvbnRleHQucGFyZW50KSB7XG4gICAgcmV0dXJuIGNvbnRleHRzRnJvbVJvb3QoY29udGV4dC5wYXJlbnQpLmNvbmNhdChjb250ZXh0KTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gW2NvbnRleHRdO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNvbnRleHRzRnJvbU5lYXJlc3ROb2RlKGNvbnRleHQpIHtcbiAgaWYgKGNvbnRleHQuc2VsZWN0aW9uLnNlbGVjdGlvblNldC50eXBlU2NoZW1hLmltcGxlbWVudHNOb2RlKSB7XG4gICAgcmV0dXJuIFtjb250ZXh0XTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gY29udGV4dHNGcm9tTmVhcmVzdE5vZGUoY29udGV4dC5wYXJlbnQpLmNvbmNhdChjb250ZXh0KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpbml0aWFsaXplRG9jdW1lbnRBbmRWYXJzKGN1cnJlbnRDb250ZXh0LCBjb250ZXh0Q2hhaW4pIHtcbiAgdmFyIGxhc3RJbkNoYWluID0gY29udGV4dENoYWluW2NvbnRleHRDaGFpbi5sZW5ndGggLSAxXTtcbiAgdmFyIGZpcnN0ID0gbGFzdEluQ2hhaW4uc2VsZWN0aW9uLmFyZ3MuZmlyc3Q7XG4gIHZhciB2YXJpYWJsZURlZmluaXRpb25zID0gT2JqZWN0LmtleXMobGFzdEluQ2hhaW4uc2VsZWN0aW9uLmFyZ3MpLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuIGlzVmFyaWFibGUobGFzdEluQ2hhaW4uc2VsZWN0aW9uLmFyZ3Nba2V5XSk7XG4gIH0pLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuIGxhc3RJbkNoYWluLnNlbGVjdGlvbi5hcmdzW2tleV07XG4gIH0pO1xuXG4gIHZhciBmaXJzdFZhciA9IHZhcmlhYmxlRGVmaW5pdGlvbnMuZmluZChmdW5jdGlvbiAoZGVmaW5pdGlvbikge1xuICAgIHJldHVybiBkZWZpbml0aW9uLm5hbWUgPT09ICdmaXJzdCc7XG4gIH0pO1xuXG4gIGlmICghZmlyc3RWYXIpIHtcbiAgICBpZiAoaXNWYXJpYWJsZShmaXJzdCkpIHtcbiAgICAgIGZpcnN0VmFyID0gZmlyc3Q7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZpcnN0VmFyID0gdmFyaWFibGUoJ2ZpcnN0JywgJ0ludCcsIGZpcnN0KTtcbiAgICAgIHZhcmlhYmxlRGVmaW5pdGlvbnMucHVzaChmaXJzdFZhcik7XG4gICAgfVxuICB9XG5cbiAgdmFyIGRvY3VtZW50ID0gbmV3IERvY3VtZW50KGN1cnJlbnRDb250ZXh0LnNlbGVjdGlvbi5zZWxlY3Rpb25TZXQudHlwZUJ1bmRsZSk7XG5cbiAgcmV0dXJuIFtkb2N1bWVudCwgdmFyaWFibGVEZWZpbml0aW9ucywgZmlyc3RWYXJdO1xufVxuXG5mdW5jdGlvbiBhZGROZXh0RmllbGRUbyhjdXJyZW50U2VsZWN0aW9uLCBjb250ZXh0Q2hhaW4sIHBhdGgsIGN1cnNvcikge1xuICAvLyBUaGVyZSBhcmUgYWx3YXlzIGF0IGxlYXN0IHR3by4gV2hlbiB3ZSBzdGFydCwgaXQncyB0aGUgcm9vdCBjb250ZXh0LCBhbmQgdGhlIGZpcnN0IHNldFxuICB2YXIgbmV4dENvbnRleHQgPSBjb250ZXh0Q2hhaW4uc2hpZnQoKTtcblxuICBwYXRoLnB1c2gobmV4dENvbnRleHQuc2VsZWN0aW9uLnJlc3BvbnNlS2V5KTtcblxuICBpZiAoY29udGV4dENoYWluLmxlbmd0aCkge1xuICAgIGN1cnJlbnRTZWxlY3Rpb24uYWRkKG5leHRDb250ZXh0LnNlbGVjdGlvbi5uYW1lLCB7IGFsaWFzOiBuZXh0Q29udGV4dC5zZWxlY3Rpb24uYWxpYXMsIGFyZ3M6IG5leHRDb250ZXh0LnNlbGVjdGlvbi5hcmdzIH0sIGZ1bmN0aW9uIChuZXdTZWxlY3Rpb24pIHtcbiAgICAgIGFkZE5leHRGaWVsZFRvKG5ld1NlbGVjdGlvbiwgY29udGV4dENoYWluLCBwYXRoLCBjdXJzb3IpO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHZhciBlZGdlc0ZpZWxkID0gbmV4dENvbnRleHQuc2VsZWN0aW9uLnNlbGVjdGlvblNldC5zZWxlY3Rpb25zLmZpbmQoZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICByZXR1cm4gZmllbGQubmFtZSA9PT0gJ2VkZ2VzJztcbiAgICB9KTtcbiAgICB2YXIgbm9kZUZpZWxkID0gZWRnZXNGaWVsZC5zZWxlY3Rpb25TZXQuc2VsZWN0aW9ucy5maW5kKGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgcmV0dXJuIGZpZWxkLm5hbWUgPT09ICdub2RlJztcbiAgICB9KTtcbiAgICB2YXIgZmlyc3QgPSB2b2lkIDA7XG5cbiAgICBpZiAoaXNWYXJpYWJsZShuZXh0Q29udGV4dC5zZWxlY3Rpb24uYXJncy5maXJzdCkpIHtcbiAgICAgIGZpcnN0ID0gbmV4dENvbnRleHQuc2VsZWN0aW9uLmFyZ3MuZmlyc3Q7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZpcnN0ID0gdmFyaWFibGUoJ2ZpcnN0JywgJ0ludCcsIG5leHRDb250ZXh0LnNlbGVjdGlvbi5hcmdzLmZpcnN0KTtcbiAgICB9XG5cbiAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgIGFsaWFzOiBuZXh0Q29udGV4dC5zZWxlY3Rpb24uYWxpYXMsXG4gICAgICBhcmdzOiBPYmplY3QuYXNzaWduKHt9LCBuZXh0Q29udGV4dC5zZWxlY3Rpb24uYXJncywgeyBhZnRlcjogY3Vyc29yLCBmaXJzdDogZmlyc3QgfSlcbiAgICB9O1xuXG4gICAgY3VycmVudFNlbGVjdGlvbi5hZGRDb25uZWN0aW9uKG5leHRDb250ZXh0LnNlbGVjdGlvbi5uYW1lLCBvcHRpb25zLCBub2RlRmllbGQuc2VsZWN0aW9uU2V0KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjb2xsZWN0RnJhZ21lbnRzKHNlbGVjdGlvbnMpIHtcbiAgcmV0dXJuIHNlbGVjdGlvbnMucmVkdWNlKGZ1bmN0aW9uIChmcmFnbWVudERlZmluaXRpb25zLCBmaWVsZCkge1xuICAgIGlmIChGcmFnbWVudFNwcmVhZC5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihmaWVsZCkpIHtcbiAgICAgIGZyYWdtZW50RGVmaW5pdGlvbnMucHVzaChmaWVsZC50b0RlZmluaXRpb24oKSk7XG4gICAgfVxuXG4gICAgZnJhZ21lbnREZWZpbml0aW9ucy5wdXNoLmFwcGx5KGZyYWdtZW50RGVmaW5pdGlvbnMsIHRvQ29uc3VtYWJsZUFycmF5KGNvbGxlY3RGcmFnbWVudHMoZmllbGQuc2VsZWN0aW9uU2V0LnNlbGVjdGlvbnMpKSk7XG5cbiAgICByZXR1cm4gZnJhZ21lbnREZWZpbml0aW9ucztcbiAgfSwgW10pO1xufVxuXG5mdW5jdGlvbiBuZXh0UGFnZVF1ZXJ5QW5kUGF0aChjb250ZXh0LCBjdXJzb3IpIHtcbiAgdmFyIG5lYXJlc3ROb2RlQ29udGV4dCA9IG5lYXJlc3ROb2RlKGNvbnRleHQpO1xuXG4gIGlmIChuZWFyZXN0Tm9kZUNvbnRleHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIF9kb2N1bWVudCRkZWZpbml0aW9ucztcblxuICAgICAgdmFyIHBhdGggPSBbXTtcbiAgICAgIHZhciBub2RlVHlwZSA9IG5lYXJlc3ROb2RlQ29udGV4dC5zZWxlY3Rpb24uc2VsZWN0aW9uU2V0LnR5cGVTY2hlbWE7XG4gICAgICB2YXIgbm9kZUlkID0gbmVhcmVzdE5vZGVDb250ZXh0LnJlc3BvbnNlRGF0YS5pZDtcbiAgICAgIHZhciBjb250ZXh0Q2hhaW4gPSBjb250ZXh0c0Zyb21OZWFyZXN0Tm9kZShjb250ZXh0KTtcblxuICAgICAgdmFyIF9pbml0aWFsaXplRG9jdW1lbnRBbiA9IGluaXRpYWxpemVEb2N1bWVudEFuZFZhcnMoY29udGV4dCwgY29udGV4dENoYWluKSxcbiAgICAgICAgICBfaW5pdGlhbGl6ZURvY3VtZW50QW4yID0gc2xpY2VkVG9BcnJheShfaW5pdGlhbGl6ZURvY3VtZW50QW4sIDIpLFxuICAgICAgICAgIGRvY3VtZW50ID0gX2luaXRpYWxpemVEb2N1bWVudEFuMlswXSxcbiAgICAgICAgICB2YXJpYWJsZURlZmluaXRpb25zID0gX2luaXRpYWxpemVEb2N1bWVudEFuMlsxXTtcblxuICAgICAgZG9jdW1lbnQuYWRkUXVlcnkodmFyaWFibGVEZWZpbml0aW9ucywgZnVuY3Rpb24gKHJvb3QpIHtcbiAgICAgICAgcGF0aC5wdXNoKCdub2RlJyk7XG4gICAgICAgIHJvb3QuYWRkKCdub2RlJywgeyBhcmdzOiB7IGlkOiBub2RlSWQgfSB9LCBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgIG5vZGUuYWRkSW5saW5lRnJhZ21lbnRPbihub2RlVHlwZS5uYW1lLCBmdW5jdGlvbiAoZnJhZ21lbnQpIHtcbiAgICAgICAgICAgIGFkZE5leHRGaWVsZFRvKGZyYWdtZW50LCBjb250ZXh0Q2hhaW4uc2xpY2UoMSksIHBhdGgsIGN1cnNvcik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIHZhciBmcmFnbWVudHMgPSBjb2xsZWN0RnJhZ21lbnRzKGRvY3VtZW50Lm9wZXJhdGlvbnNbMF0uc2VsZWN0aW9uU2V0LnNlbGVjdGlvbnMpO1xuXG4gICAgICAoX2RvY3VtZW50JGRlZmluaXRpb25zID0gZG9jdW1lbnQuZGVmaW5pdGlvbnMpLnVuc2hpZnQuYXBwbHkoX2RvY3VtZW50JGRlZmluaXRpb25zLCB0b0NvbnN1bWFibGVBcnJheShmcmFnbWVudHMpKTtcblxuICAgICAgcmV0dXJuIFtkb2N1bWVudCwgcGF0aF07XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIF9kb2N1bWVudCRkZWZpbml0aW9uczI7XG5cbiAgICAgIHZhciBwYXRoID0gW107XG4gICAgICB2YXIgY29udGV4dENoYWluID0gY29udGV4dHNGcm9tUm9vdChjb250ZXh0KTtcblxuICAgICAgdmFyIF9pbml0aWFsaXplRG9jdW1lbnRBbjMgPSBpbml0aWFsaXplRG9jdW1lbnRBbmRWYXJzKGNvbnRleHQsIGNvbnRleHRDaGFpbiksXG4gICAgICAgICAgX2luaXRpYWxpemVEb2N1bWVudEFuNCA9IHNsaWNlZFRvQXJyYXkoX2luaXRpYWxpemVEb2N1bWVudEFuMywgMiksXG4gICAgICAgICAgZG9jdW1lbnQgPSBfaW5pdGlhbGl6ZURvY3VtZW50QW40WzBdLFxuICAgICAgICAgIHZhcmlhYmxlRGVmaW5pdGlvbnMgPSBfaW5pdGlhbGl6ZURvY3VtZW50QW40WzFdO1xuXG4gICAgICBkb2N1bWVudC5hZGRRdWVyeSh2YXJpYWJsZURlZmluaXRpb25zLCBmdW5jdGlvbiAocm9vdCkge1xuICAgICAgICBhZGROZXh0RmllbGRUbyhyb290LCBjb250ZXh0Q2hhaW4uc2xpY2UoMSksIHBhdGgsIGN1cnNvcik7XG4gICAgICB9KTtcblxuICAgICAgdmFyIGZyYWdtZW50cyA9IGNvbGxlY3RGcmFnbWVudHMoZG9jdW1lbnQub3BlcmF0aW9uc1swXS5zZWxlY3Rpb25TZXQuc2VsZWN0aW9ucyk7XG5cbiAgICAgIChfZG9jdW1lbnQkZGVmaW5pdGlvbnMyID0gZG9jdW1lbnQuZGVmaW5pdGlvbnMpLnVuc2hpZnQuYXBwbHkoX2RvY3VtZW50JGRlZmluaXRpb25zMiwgdG9Db25zdW1hYmxlQXJyYXkoZnJhZ21lbnRzKSk7XG5cbiAgICAgIHJldHVybiBbZG9jdW1lbnQsIHBhdGhdO1xuICAgIH07XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFzTmV4dFBhZ2UkMShjb25uZWN0aW9uLCBlZGdlKSB7XG4gIGlmIChlZGdlICE9PSBjb25uZWN0aW9uLmVkZ2VzW2Nvbm5lY3Rpb24uZWRnZXMubGVuZ3RoIC0gMV0pIHtcbiAgICByZXR1cm4gbmV3IFNjYWxhcih0cnVlKTtcbiAgfVxuXG4gIHJldHVybiBjb25uZWN0aW9uLnBhZ2VJbmZvLmhhc05leHRQYWdlO1xufVxuXG5mdW5jdGlvbiBoYXNQcmV2aW91c1BhZ2UoY29ubmVjdGlvbiwgZWRnZSkge1xuICBpZiAoZWRnZSAhPT0gY29ubmVjdGlvbi5lZGdlc1swXSkge1xuICAgIHJldHVybiBuZXcgU2NhbGFyKHRydWUpO1xuICB9XG5cbiAgcmV0dXJuIGNvbm5lY3Rpb24ucGFnZUluZm8uaGFzUHJldmlvdXNQYWdlO1xufVxuXG5mdW5jdGlvbiB0cmFuc2Zvcm1Db25uZWN0aW9ucyh2YXJpYWJsZVZhbHVlcykge1xuICByZXR1cm4gZnVuY3Rpb24gKGNvbnRleHQsIHZhbHVlKSB7XG4gICAgaWYgKGlzQ29ubmVjdGlvbihjb250ZXh0KSkge1xuICAgICAgaWYgKCEodmFsdWUucGFnZUluZm8gJiYgdmFsdWUucGFnZUluZm8uaGFzT3duUHJvcGVydHkoJ2hhc05leHRQYWdlJykgJiYgdmFsdWUucGFnZUluZm8uaGFzT3duUHJvcGVydHkoJ2hhc1ByZXZpb3VzUGFnZScpKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nvbm5lY3Rpb25zIG11c3QgaW5jbHVkZSB0aGUgc2VsZWN0aW9ucyBcInBhZ2VJbmZvIHsgaGFzTmV4dFBhZ2UsIGhhc1ByZXZpb3VzUGFnZSB9XCIuJyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB2YWx1ZS5lZGdlcy5tYXAoZnVuY3Rpb24gKGVkZ2UpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oZWRnZS5ub2RlLCB7XG4gICAgICAgICAgbmV4dFBhZ2VRdWVyeUFuZFBhdGg6IG5leHRQYWdlUXVlcnlBbmRQYXRoKGNvbnRleHQsIGVkZ2UuY3Vyc29yKSxcbiAgICAgICAgICBoYXNOZXh0UGFnZTogaGFzTmV4dFBhZ2UkMSh2YWx1ZSwgZWRnZSksXG4gICAgICAgICAgaGFzUHJldmlvdXNQYWdlOiBoYXNQcmV2aW91c1BhZ2UodmFsdWUsIGVkZ2UpLFxuICAgICAgICAgIHZhcmlhYmxlVmFsdWVzOiB2YXJpYWJsZVZhbHVlc1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICB9O1xufVxuXG4vKiBlc2xpbnQtZGlzYWJsZSBuby13YXJuaW5nLWNvbW1lbnRzICovXG52YXIgRGVjb2RpbmdDb250ZXh0ID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBEZWNvZGluZ0NvbnRleHQoc2VsZWN0aW9uLCByZXNwb25zZURhdGEpIHtcbiAgICB2YXIgcGFyZW50ID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBudWxsO1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIERlY29kaW5nQ29udGV4dCk7XG5cbiAgICB0aGlzLnNlbGVjdGlvbiA9IHNlbGVjdGlvbjtcbiAgICB0aGlzLnJlc3BvbnNlRGF0YSA9IHJlc3BvbnNlRGF0YTtcbiAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICBPYmplY3QuZnJlZXplKHRoaXMpO1xuICB9XG5cbiAgY3JlYXRlQ2xhc3MoRGVjb2RpbmdDb250ZXh0LCBbe1xuICAgIGtleTogJ2NvbnRleHRGb3JPYmplY3RQcm9wZXJ0eScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbnRleHRGb3JPYmplY3RQcm9wZXJ0eShyZXNwb25zZUtleSkge1xuICAgICAgdmFyIG5lc3RlZFNlbGVjdGlvbnMgPSB0aGlzLnNlbGVjdGlvbi5zZWxlY3Rpb25TZXQuc2VsZWN0aW9uc0J5UmVzcG9uc2VLZXlbcmVzcG9uc2VLZXldO1xuICAgICAgdmFyIG5leHRTZWxlY3Rpb24gPSBuZXN0ZWRTZWxlY3Rpb25zICYmIG5lc3RlZFNlbGVjdGlvbnNbMF07XG4gICAgICB2YXIgbmV4dENvbnRleHQgPSB2b2lkIDA7XG5cbiAgICAgIC8vIGZyYWdtZW50IHNwcmVhZHMgb3BlcmF0ZSBpbnNpZGUgdGhlIGN1cnJlbnQgY29udGV4dCwgc28gd2UgcmVjdXJzZSB0byBnZXQgdGhlIHByb3BlclxuICAgICAgLy8gc2VsZWN0aW9uIHNldCwgYnV0IHJldGFpbiB0aGUgY3VycmVudCByZXNwb25zZSBjb250ZXh0XG4gICAgICBpZiAoU3ByZWFkLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKG5leHRTZWxlY3Rpb24pKSB7XG4gICAgICAgIG5leHRDb250ZXh0ID0gbmV3IERlY29kaW5nQ29udGV4dChuZXh0U2VsZWN0aW9uLCB0aGlzLnJlc3BvbnNlRGF0YSwgdGhpcy5wYXJlbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV4dENvbnRleHQgPSBuZXcgRGVjb2RpbmdDb250ZXh0KG5leHRTZWxlY3Rpb24sIHRoaXMucmVzcG9uc2VEYXRhW3Jlc3BvbnNlS2V5XSwgdGhpcyk7XG4gICAgICB9XG5cbiAgICAgIGlmICghbmV4dFNlbGVjdGlvbikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuZXhwZWN0ZWQgcmVzcG9uc2Uga2V5IFwiJyArIHJlc3BvbnNlS2V5ICsgJ1wiLCBub3QgZm91bmQgaW4gc2VsZWN0aW9uIHNldDogJyArIHRoaXMuc2VsZWN0aW9uLnNlbGVjdGlvblNldCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChGaWVsZC5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihuZXh0U2VsZWN0aW9uKSkge1xuICAgICAgICByZXR1cm4gbmV4dENvbnRleHQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbmV4dENvbnRleHQuY29udGV4dEZvck9iamVjdFByb3BlcnR5KHJlc3BvbnNlS2V5KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjb250ZXh0Rm9yQXJyYXlJdGVtJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29udGV4dEZvckFycmF5SXRlbShpdGVtKSB7XG4gICAgICByZXR1cm4gbmV3IERlY29kaW5nQ29udGV4dCh0aGlzLnNlbGVjdGlvbiwgaXRlbSwgdGhpcy5wYXJlbnQpO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gRGVjb2RpbmdDb250ZXh0O1xufSgpO1xuXG5mdW5jdGlvbiBkZWNvZGVBcnJheUl0ZW1zKGNvbnRleHQsIHRyYW5zZm9ybWVycykge1xuICByZXR1cm4gY29udGV4dC5yZXNwb25zZURhdGEubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgcmV0dXJuIGRlY29kZUNvbnRleHQoY29udGV4dC5jb250ZXh0Rm9yQXJyYXlJdGVtKGl0ZW0pLCB0cmFuc2Zvcm1lcnMpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gZGVjb2RlT2JqZWN0VmFsdWVzKGNvbnRleHQsIHRyYW5zZm9ybWVycykge1xuICByZXR1cm4gT2JqZWN0LmtleXMoY29udGV4dC5yZXNwb25zZURhdGEpLnJlZHVjZShmdW5jdGlvbiAoYWNjLCByZXNwb25zZUtleSkge1xuICAgIGFjY1tyZXNwb25zZUtleV0gPSBkZWNvZGVDb250ZXh0KGNvbnRleHQuY29udGV4dEZvck9iamVjdFByb3BlcnR5KHJlc3BvbnNlS2V5KSwgdHJhbnNmb3JtZXJzKTtcblxuICAgIHJldHVybiBhY2M7XG4gIH0sIHt9KTtcbn1cblxuZnVuY3Rpb24gcnVuVHJhbnNmb3JtZXJzKHRyYW5zZm9ybWVycywgY29udGV4dCwgdmFsdWUpIHtcbiAgcmV0dXJuIHRyYW5zZm9ybWVycy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgdHJhbnNmb3JtZXIpIHtcbiAgICByZXR1cm4gdHJhbnNmb3JtZXIoY29udGV4dCwgYWNjKTtcbiAgfSwgdmFsdWUpO1xufVxuXG5mdW5jdGlvbiBkZWNvZGVDb250ZXh0KGNvbnRleHQsIHRyYW5zZm9ybWVycykge1xuICB2YXIgdmFsdWUgPSBjb250ZXh0LnJlc3BvbnNlRGF0YTtcblxuICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICB2YWx1ZSA9IGRlY29kZUFycmF5SXRlbXMoY29udGV4dCwgdHJhbnNmb3JtZXJzKTtcbiAgfSBlbHNlIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcbiAgICB2YWx1ZSA9IGRlY29kZU9iamVjdFZhbHVlcyhjb250ZXh0LCB0cmFuc2Zvcm1lcnMpO1xuICB9XG5cbiAgcmV0dXJuIHJ1blRyYW5zZm9ybWVycyh0cmFuc2Zvcm1lcnMsIGNvbnRleHQsIHZhbHVlKTtcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVSZWZldGNoUXVlcmllcyhjb250ZXh0LCB2YWx1ZSkge1xuICBpZiAoaXNWYWx1ZSh2YWx1ZSkgJiYgaXNOb2RlQ29udGV4dChjb250ZXh0KSkge1xuICAgIHZhbHVlLnJlZmV0Y2hRdWVyeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBuZXcgUXVlcnkoY29udGV4dC5zZWxlY3Rpb24uc2VsZWN0aW9uU2V0LnR5cGVCdW5kbGUsIGZ1bmN0aW9uIChyb290KSB7XG4gICAgICAgIHJvb3QuYWRkKCdub2RlJywgeyBhcmdzOiB7IGlkOiBjb250ZXh0LnJlc3BvbnNlRGF0YS5pZCB9IH0sIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgbm9kZS5hZGRJbmxpbmVGcmFnbWVudE9uKGNvbnRleHQuc2VsZWN0aW9uLnNlbGVjdGlvblNldC50eXBlU2NoZW1hLm5hbWUsIGNvbnRleHQuc2VsZWN0aW9uLnNlbGVjdGlvblNldCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiB2YWx1ZTtcbn1cblxuZnVuY3Rpb24gdHJhbnNmb3JtUG9qb3NUb0NsYXNzZXNXaXRoUmVnaXN0cnkoY2xhc3NSZWdpc3RyeSkge1xuICByZXR1cm4gZnVuY3Rpb24gdHJhbnNmb3JtUG9qb3NUb0NsYXNzZXMoY29udGV4dCwgdmFsdWUpIHtcbiAgICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgICB2YXIgS2xhc3MgPSBjbGFzc1JlZ2lzdHJ5LmNsYXNzRm9yVHlwZShjb250ZXh0LnNlbGVjdGlvbi5zZWxlY3Rpb25TZXQudHlwZVNjaGVtYS5uYW1lKTtcblxuICAgICAgcmV0dXJuIG5ldyBLbGFzcyh2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIHRyYW5zZm9ybVNjYWxhcnMoY29udGV4dCwgdmFsdWUpIHtcbiAgaWYgKGlzVmFsdWUodmFsdWUpKSB7XG4gICAgaWYgKGNvbnRleHQuc2VsZWN0aW9uLnNlbGVjdGlvblNldC50eXBlU2NoZW1hLmtpbmQgPT09ICdTQ0FMQVInKSB7XG4gICAgICByZXR1cm4gbmV3IFNjYWxhcih2YWx1ZSk7XG4gICAgfSBlbHNlIGlmIChjb250ZXh0LnNlbGVjdGlvbi5zZWxlY3Rpb25TZXQudHlwZVNjaGVtYS5raW5kID09PSAnRU5VTScpIHtcbiAgICAgIHJldHVybiBuZXcgRW51bSh2YWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHZhbHVlO1xufVxuXG5mdW5jdGlvbiByZWNvcmRUeXBlSW5mb3JtYXRpb24oY29udGV4dCwgdmFsdWUpIHtcbiAgdmFyIF9jb250ZXh0JHNlbGVjdGlvbiRzZSA9IGNvbnRleHQuc2VsZWN0aW9uLnNlbGVjdGlvblNldCxcbiAgICAgIHR5cGVCdW5kbGUgPSBfY29udGV4dCRzZWxlY3Rpb24kc2UudHlwZUJ1bmRsZSxcbiAgICAgIHR5cGVTY2hlbWEgPSBfY29udGV4dCRzZWxlY3Rpb24kc2UudHlwZVNjaGVtYTtcblxuICBpZiAoaXNWYWx1ZSh2YWx1ZSkpIHtcbiAgICBpZiAodmFsdWUuX190eXBlbmFtZSkge1xuICAgICAgdmFsdWUudHlwZSA9IHNjaGVtYUZvclR5cGUodHlwZUJ1bmRsZSwgdmFsdWUuX190eXBlbmFtZSwgdHlwZVNjaGVtYSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhbHVlLnR5cGUgPSB0eXBlU2NoZW1hO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB2YWx1ZTtcbn1cblxuZnVuY3Rpb24gZGVmYXVsdFRyYW5zZm9ybWVycyhfcmVmKSB7XG4gIHZhciBfcmVmJGNsYXNzUmVnaXN0cnkgPSBfcmVmLmNsYXNzUmVnaXN0cnksXG4gICAgICBjbGFzc1JlZ2lzdHJ5ID0gX3JlZiRjbGFzc1JlZ2lzdHJ5ID09PSB1bmRlZmluZWQgPyBuZXcgQ2xhc3NSZWdpc3RyeSgpIDogX3JlZiRjbGFzc1JlZ2lzdHJ5LFxuICAgICAgdmFyaWFibGVWYWx1ZXMgPSBfcmVmLnZhcmlhYmxlVmFsdWVzO1xuXG4gIHJldHVybiBbdHJhbnNmb3JtU2NhbGFycywgZ2VuZXJhdGVSZWZldGNoUXVlcmllcywgdHJhbnNmb3JtQ29ubmVjdGlvbnModmFyaWFibGVWYWx1ZXMpLCByZWNvcmRUeXBlSW5mb3JtYXRpb24sIHRyYW5zZm9ybVBvam9zVG9DbGFzc2VzV2l0aFJlZ2lzdHJ5KGNsYXNzUmVnaXN0cnkpXTtcbn1cblxuLyoqXG4gKiBBIGZ1bmN0aW9uIHVzZWQgdG8gZGVjb2RlIHRoZSByZXNwb25zZSBkYXRhLlxuICpcbiAqIEBmdW5jdGlvbiBkZWNvZGVcbiAqIEBwYXJhbSB7U2VsZWN0aW9uU2V0fSBzZWxlY3Rpb24gVGhlIHNlbGVjdGlvbiBzZXQgdXNlZCB0byBxdWVyeSB0aGUgcmVzcG9uc2UgZGF0YS5cbiAqIEBwYXJhbSB7T2JqZWN0fSByZXNwb25zZURhdGEgVGhlIHJlc3BvbnNlIGRhdGEgcmV0dXJuZWQuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIE9wdGlvbnMgdG8gdXNlIHdoZW4gZGVjb2RpbmcgaW5jbHVkaW5nOlxuICogICBAcGFyYW0ge0NsYXNzUmVnaXN0cnl9IFtvcHRpb25zLmNsYXNzUmVnaXN0cnldIEEgY2xhc3MgcmVnaXN0cnkgdG8gdXNlIHdoZW4gZGVzZXJpYWxpemluZyB0aGUgZGF0YSBpbnRvIGNsYXNzZXMuXG4gKiBAcmV0dXJuIHtHcmFwaE1vZGVsfSBUaGUgZGVjb2RlZCByZXNwb25zZSBkYXRhLlxuICovXG5mdW5jdGlvbiBkZWNvZGUoc2VsZWN0aW9uLCByZXNwb25zZURhdGEpIHtcbiAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xuXG4gIHZhciB0cmFuc2Zvcm1lcnMgPSBvcHRpb25zLnRyYW5zZm9ybWVycyB8fCBkZWZhdWx0VHJhbnNmb3JtZXJzKG9wdGlvbnMpO1xuICB2YXIgY29udGV4dCA9IG5ldyBEZWNvZGluZ0NvbnRleHQoc2VsZWN0aW9uLCByZXNwb25zZURhdGEpO1xuXG4gIHJldHVybiBkZWNvZGVDb250ZXh0KGNvbnRleHQsIHRyYW5zZm9ybWVycyk7XG59XG5cbmZ1bmN0aW9uIGh0dHBGZXRjaGVyKHVybCkge1xuICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIGZldGNoZXIoZ3JhcGhRTFBhcmFtcywgaGVhZGVycykge1xuICAgIHJldHVybiBmZXRjaCh1cmwsIF9leHRlbmRzKHtcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGdyYXBoUUxQYXJhbXMpLFxuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBtb2RlOiAnY29ycydcbiAgICB9LCBvcHRpb25zLCB7XG4gICAgICBoZWFkZXJzOiBfZXh0ZW5kcyh7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICB9LCBvcHRpb25zLmhlYWRlcnMsIGhlYWRlcnMpXG4gICAgfSkpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICB2YXIgY29udGVudFR5cGUgPSByZXNwb25zZS5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJyk7XG5cbiAgICAgIGlmIChjb250ZW50VHlwZS5pbmRleE9mKCdhcHBsaWNhdGlvbi9qc29uJykgPiAtMSkge1xuICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzcG9uc2UudGV4dCgpLnRoZW4oZnVuY3Rpb24gKHRleHQpIHtcbiAgICAgICAgcmV0dXJuIHsgdGV4dDogdGV4dCB9O1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGhhc05leHRQYWdlKHBhZ2luYXRlZE1vZGVscykge1xuICByZXR1cm4gcGFnaW5hdGVkTW9kZWxzICYmIHBhZ2luYXRlZE1vZGVscy5sZW5ndGggJiYgcGFnaW5hdGVkTW9kZWxzW3BhZ2luYXRlZE1vZGVscy5sZW5ndGggLSAxXS5oYXNOZXh0UGFnZTtcbn1cblxuLyoqXG4gKiBUaGUgQ2xpZW50IGNsYXNzIHVzZWQgdG8gY3JlYXRlIGFuZCBzZW5kIEdyYXBoUUwgZG9jdW1lbnRzLCBmcmFnbWVudHMsIHF1ZXJpZXMgYW5kIG11dGF0aW9ucy5cbiAqL1xuXG52YXIgQ2xpZW50JDIgPSBmdW5jdGlvbiAoKSB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB0eXBlQnVuZGxlIEEgc2V0IG9mIEVTNiBtb2R1bGVzIGdlbmVyYXRlZCBieSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL1Nob3BpZnkvZ3JhcGhxbC1qcy1zY2hlbWF8Z3JhcGhxbC1qcy1zY2hlbWF9LlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBBbiBvcHRpb25zIG9iamVjdC4gTXVzdCBpbmNsdWRlIGVpdGhlciBgdXJsYCBhbmQgb3B0aW9uYWwgYGZldGNoZXJPcHRpb25zYCBPUiBhIGBmZXRjaGVyYCBmdW5jdGlvbi5cbiAgICogICBAcGFyYW0geyhTdHJpbmd8RnVuY3Rpb24pfSBvcHRpb25zLnVybHxmZXRjaGVyIEVpdGhlciB0aGUgVVJMIG9mIHRoZSBHcmFwaFFMIEFQSSBlbmRwb2ludCwgb3IgYSBjdXN0b20gZmV0Y2hlciBmdW5jdGlvbiBmb3IgZnVydGhlciBjdXN0b21pemF0aW9uLlxuICAgKiAgIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5mZXRjaGVyT3B0aW9uc10gQWRkaXRpb25hbCBvcHRpb25zIHRvIHVzZSB3aXRoIGBmZXRjaGAsIGxpa2UgaGVhZGVycy4gRG8gbm90IHNwZWNpZnkgdGhpcyBhcmd1bWVudCBpZiBgZmV0Y2hlcmAgaXMgc3BlY2lmaWVkLlxuICAgKiAgIEBwYXJhbSB7Q2xhc3NSZWdpc3RyeX0gW29wdGlvbnMucmVnaXN0cnk9bmV3IENsYXNzUmVnaXN0cnkoKV0gQSB7QGxpbmsgQ2xhc3NSZWdpc3RyeX0gdXNlZCB0byBkZWNvZGUgdGhlIHJlc3BvbnNlIGRhdGEuXG4gICAqL1xuICBmdW5jdGlvbiBDbGllbnQodHlwZUJ1bmRsZSwgX3JlZikge1xuICAgIHZhciB1cmwgPSBfcmVmLnVybCxcbiAgICAgICAgZmV0Y2hlck9wdGlvbnMgPSBfcmVmLmZldGNoZXJPcHRpb25zLFxuICAgICAgICBmZXRjaGVyID0gX3JlZi5mZXRjaGVyLFxuICAgICAgICBfcmVmJHJlZ2lzdHJ5ID0gX3JlZi5yZWdpc3RyeSxcbiAgICAgICAgcmVnaXN0cnkgPSBfcmVmJHJlZ2lzdHJ5ID09PSB1bmRlZmluZWQgPyBuZXcgQ2xhc3NSZWdpc3RyeSgpIDogX3JlZiRyZWdpc3RyeTtcbiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBDbGllbnQpO1xuXG4gICAgdGhpcy50eXBlQnVuZGxlID0gdHlwZUJ1bmRsZTtcbiAgICB0aGlzLmNsYXNzUmVnaXN0cnkgPSByZWdpc3RyeTtcblxuICAgIGlmICh1cmwgJiYgZmV0Y2hlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdBcmd1bWVudHMgbm90IHN1cHBvcnRlZDogc3VwcGx5IGVpdGhlciBgdXJsYCBhbmQgb3B0aW9uYWwgYGZldGNoZXJPcHRpb25zYCBPUiB1c2UgYSBgZmV0Y2hlcmAgZnVuY3Rpb24gZm9yIGZ1cnRoZXIgY3VzdG9taXphdGlvbi4nKTtcbiAgICB9XG5cbiAgICBpZiAodXJsKSB7XG4gICAgICB0aGlzLmZldGNoZXIgPSBodHRwRmV0Y2hlcih1cmwsIGZldGNoZXJPcHRpb25zKTtcbiAgICB9IGVsc2UgaWYgKGZldGNoZXIpIHtcbiAgICAgIGlmIChmZXRjaGVyT3B0aW9ucykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FyZ3VtZW50cyBub3Qgc3VwcG9ydGVkOiB3aGVuIHNwZWNpZnlpbmcgeW91ciBvd24gYGZldGNoZXJgLCBzZXQgb3B0aW9ucyB0aHJvdWdoIGl0IGFuZCBub3Qgd2l0aCBgZmV0Y2hlck9wdGlvbnNgJyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZmV0Y2hlciA9IGZldGNoZXI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBhcmd1bWVudHM6IG9uZSBvZiBgdXJsYCBvciBgZmV0Y2hlcmAgaXMgbmVlZGVkLicpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgR3JhcGhRTCBkb2N1bWVudC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogY29uc3QgZG9jdW1lbnQgPSBjbGllbnQuZG9jdW1lbnQoKTtcbiAgICpcbiAgICogQHJldHVybiB7RG9jdW1lbnR9IEEgR3JhcGhRTCBkb2N1bWVudC5cbiAgICovXG5cbiAgY3JlYXRlQ2xhc3MoQ2xpZW50LCBbe1xuICAgIGtleTogJ2RvY3VtZW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZG9jdW1lbnQoKSB7XG4gICAgICByZXR1cm4gbmV3IERvY3VtZW50KHRoaXMudHlwZUJ1bmRsZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIEdyYXBoUUwgcXVlcnkuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGNvbnN0IHF1ZXJ5ID0gY2xpZW50LnF1ZXJ5KCdteVF1ZXJ5JywgKHJvb3QpID0+IHtcbiAgICAgKiAgIHJvb3QuYWRkKCdjYXQnLCAoY2F0KSA9PiB7XG4gICAgICogICAgY2F0LmFkZCgnbmFtZScpO1xuICAgICAqICAgfSk7XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gW25hbWVdIEEgbmFtZSBmb3IgdGhlIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSB7VmFyaWFibGVEZWZpbml0aW9uW119IFt2YXJpYWJsZXNdIEEgbGlzdCBvZiB2YXJpYWJsZXMgaW4gdGhlIHF1ZXJ5LiBTZWUge0BsaW5rIENsaWVudCN2YXJpYWJsZX0uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gc2VsZWN0aW9uU2V0Q2FsbGJhY2sgVGhlIHF1ZXJ5IGJ1aWxkZXIgY2FsbGJhY2suXG4gICAgICogICBBIHtAbGluayBTZWxlY3Rpb25TZXR9IGlzIGNyZWF0ZWQgdXNpbmcgdGhpcyBjYWxsYmFjay5cbiAgICAgKiBAcmV0dXJuIHtRdWVyeX0gQSBHcmFwaFFMIHF1ZXJ5LlxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdxdWVyeScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHF1ZXJ5KCkge1xuICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ldyAoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuYXBwbHkoUXVlcnksIFtudWxsXS5jb25jYXQoW3RoaXMudHlwZUJ1bmRsZV0sIGFyZ3MpKSkoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgR3JhcGhRTCBtdXRhdGlvbi5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogY29uc3QgaW5wdXQgPSBjbGllbnQudmFyaWFibGUoJ2lucHV0JywgJ0NhdENyZWF0ZUlucHV0IScpO1xuICAgICAqXG4gICAgICogY29uc3QgbXV0YXRpb24gPSBjbGllbnQubXV0YXRpb24oJ215TXV0YXRpb24nLCBbaW5wdXRdLCAocm9vdCkgPT4ge1xuICAgICAqICAgcm9vdC5hZGQoJ2NhdENyZWF0ZScsIHthcmdzOiB7aW5wdXR9fSwgKGNhdENyZWF0ZSkgPT4ge1xuICAgICAqICAgICBjYXRDcmVhdGUuYWRkKCdjYXQnLCAoY2F0KSA9PiB7XG4gICAgICogICAgICAgY2F0LmFkZCgnbmFtZScpO1xuICAgICAqICAgICB9KTtcbiAgICAgKiAgIH0pO1xuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IFtuYW1lXSBBIG5hbWUgZm9yIHRoZSBtdXRhdGlvbi5cbiAgICAgKiBAcGFyYW0ge1ZhcmlhYmxlRGVmaW5pdGlvbltdfSBbdmFyaWFibGVzXSBBIGxpc3Qgb2YgdmFyaWFibGVzIGluIHRoZSBtdXRhdGlvbi4gU2VlIHtAbGluayBDbGllbnQjdmFyaWFibGV9LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHNlbGVjdGlvblNldENhbGxiYWNrIFRoZSBtdXRhdGlvbiBidWlsZGVyIGNhbGxiYWNrLlxuICAgICAqICAgQSB7QGxpbmsgU2VsZWN0aW9uU2V0fSBpcyBjcmVhdGVkIHVzaW5nIHRoaXMgY2FsbGJhY2suXG4gICAgICogQHJldHVybiB7TXV0YXRpb259IEEgR3JhcGhRTCBtdXRhdGlvbi5cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnbXV0YXRpb24nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBtdXRhdGlvbigpIHtcbiAgICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4yKSwgX2tleTIgPSAwOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG4gICAgICAgIGFyZ3NbX2tleTJdID0gYXJndW1lbnRzW19rZXkyXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ldyAoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuYXBwbHkoTXV0YXRpb24sIFtudWxsXS5jb25jYXQoW3RoaXMudHlwZUJ1bmRsZV0sIGFyZ3MpKSkoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZW5kcyBhIEdyYXBoUUwgb3BlcmF0aW9uIChxdWVyeSBvciBtdXRhdGlvbikgb3IgYSBkb2N1bWVudC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogY2xpZW50LnNlbmQocXVlcnksIHtpZDogJzEyMzQ1J30pLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAqICAgLy8gRG8gc29tZXRoaW5nIHdpdGggdGhlIHJldHVybmVkIHJlc3VsdFxuICAgICAqICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7KFF1ZXJ5fE11dGF0aW9ufERvY3VtZW50fEZ1bmN0aW9uKX0gcmVxdWVzdCBUaGUgb3BlcmF0aW9uIG9yIGRvY3VtZW50IHRvIHNlbmQuIElmIHJlcHJlc2VudGVkXG4gICAgICogYXMgYSBmdW5jdGlvbiwgaXQgbXVzdCByZXR1cm4gYFF1ZXJ5YCwgYE11dGF0aW9uYCwgb3IgYERvY3VtZW50YCBhbmQgcmVjaWV2ZSB0aGUgY2xpZW50IGFzIHRoZSBvbmx5IHBhcmFtLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbdmFyaWFibGVWYWx1ZXNdIFRoZSB2YWx1ZXMgZm9yIHZhcmlhYmxlcyBpbiB0aGUgb3BlcmF0aW9uIG9yIGRvY3VtZW50LlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3RoZXJQcm9wZXJ0aWVzXSBPdGhlciBwcm9wZXJ0aWVzIHRvIHNlbmQgd2l0aCB0aGUgcXVlcnkuIEZvciBleGFtcGxlLCBhIGN1c3RvbSBvcGVyYXRpb24gbmFtZS5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW2hlYWRlcnNdIEFkZGl0aW9uYWwgaGVhZGVycyB0byBiZSBhcHBsaWVkIG9uIGEgcmVxdWVzdCBieSByZXF1ZXN0IGJhc2lzLlxuICAgICAqIEByZXR1cm4ge1Byb21pc2UuPE9iamVjdD59IEEgcHJvbWlzZSByZXNvbHZpbmcgdG8gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHJlc3BvbnNlIGRhdGEuXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ3NlbmQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZW5kKHJlcXVlc3QpIHtcbiAgICAgIHZhciB2YXJpYWJsZVZhbHVlcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogbnVsbDtcblxuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgdmFyIG90aGVyUHJvcGVydGllcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogbnVsbDtcbiAgICAgIHZhciBoZWFkZXJzID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiBudWxsO1xuXG4gICAgICB2YXIgb3BlcmF0aW9uT3JEb2N1bWVudCA9IHZvaWQgMDtcblxuICAgICAgaWYgKEZ1bmN0aW9uLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKHJlcXVlc3QpKSB7XG4gICAgICAgIG9wZXJhdGlvbk9yRG9jdW1lbnQgPSByZXF1ZXN0KHRoaXMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3BlcmF0aW9uT3JEb2N1bWVudCA9IHJlcXVlc3Q7XG4gICAgICB9XG5cbiAgICAgIHZhciBncmFwaFFMUGFyYW1zID0geyBxdWVyeTogb3BlcmF0aW9uT3JEb2N1bWVudC50b1N0cmluZygpIH07XG5cbiAgICAgIGlmICh2YXJpYWJsZVZhbHVlcykge1xuICAgICAgICBncmFwaFFMUGFyYW1zLnZhcmlhYmxlcyA9IHZhcmlhYmxlVmFsdWVzO1xuICAgICAgfVxuXG4gICAgICBPYmplY3QuYXNzaWduKGdyYXBoUUxQYXJhbXMsIG90aGVyUHJvcGVydGllcyk7XG5cbiAgICAgIHZhciBvcGVyYXRpb24gPSB2b2lkIDA7XG5cbiAgICAgIGlmIChPcGVyYXRpb24ucHJvdG90eXBlLmlzUHJvdG90eXBlT2Yob3BlcmF0aW9uT3JEb2N1bWVudCkpIHtcbiAgICAgICAgb3BlcmF0aW9uID0gb3BlcmF0aW9uT3JEb2N1bWVudDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBkb2N1bWVudCA9IG9wZXJhdGlvbk9yRG9jdW1lbnQ7XG5cbiAgICAgICAgaWYgKGRvY3VtZW50Lm9wZXJhdGlvbnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgb3BlcmF0aW9uID0gZG9jdW1lbnQub3BlcmF0aW9uc1swXTtcbiAgICAgICAgfSBlbHNlIGlmIChvdGhlclByb3BlcnRpZXMub3BlcmF0aW9uTmFtZSkge1xuICAgICAgICAgIG9wZXJhdGlvbiA9IGRvY3VtZW50Lm9wZXJhdGlvbnMuZmluZChmdW5jdGlvbiAoZG9jdW1lbnRPcGVyYXRpb24pIHtcbiAgICAgICAgICAgIHJldHVybiBkb2N1bWVudE9wZXJhdGlvbi5uYW1lID09PSBvdGhlclByb3BlcnRpZXMub3BlcmF0aW9uTmFtZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1xcbiAgICAgICAgICBBIGRvY3VtZW50IG11c3QgY29udGFpbiBleGFjdGx5IG9uZSBvcGVyYXRpb24sIG9yIGFuIG9wZXJhdGlvbk5hbWVcXG4gICAgICAgICAgbXVzdCBiZSBzcGVjaWZpZWQuIEV4YW1wbGU6XFxuXFxuICAgICAgICAgICAgY2xpZW50LnNlbmQoZG9jdW1lbnQsIG51bGwsIHtvcGVyYXRpb25OYW1lOiBcXCdteUZhbmN5UXVlcnlcXCd9KTtcXG4gICAgICAgICcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLmZldGNoZXIoZ3JhcGhRTFBhcmFtcywgaGVhZGVycykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICByZXNwb25zZS5tb2RlbCA9IGRlY29kZShvcGVyYXRpb24sIHJlc3BvbnNlLmRhdGEsIHtcbiAgICAgICAgICAgIGNsYXNzUmVnaXN0cnk6IF90aGlzLmNsYXNzUmVnaXN0cnksXG4gICAgICAgICAgICB2YXJpYWJsZVZhbHVlczogdmFyaWFibGVWYWx1ZXNcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZldGNoZXMgdGhlIG5leHQgcGFnZSBvZiBhIHBhZ2luYXRlZCBub2RlIG9yIGFycmF5IG9mIG5vZGVzLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBjbGllbnQuZmV0Y2hOZXh0UGFnZShub2RlLCB7Zmlyc3Q6IDEwfSkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICogICAvLyBEbyBzb21ldGhpbmcgd2l0aCB0aGUgbmV4dCBwYWdlXG4gICAgICogICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogQHBhcmFtIHsoR3JhcGhNb2RlbHxHcmFwaE1vZGVsW10pfSBub2RlT3JOb2RlcyBUaGUgbm9kZSBvciBsaXN0IG9mIG5vZGVzIG9uIHdoaWNoIHRvIGZldGNoIHRoZSBuZXh0IHBhZ2UuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBPcHRpb25zIG9iamVjdCBjb250YWluaW5nOlxuICAgICAqICAgQHBhcmFtIHtJbnRlZ2VyfSBbb3B0aW9ucy5maXJzdF0gVGhlIG51bWJlciBvZiBub2RlcyB0byBxdWVyeSBvbiB0aGUgbmV4dCBwYWdlLiBEZWZhdWx0cyB0byB0aGUgcGFnZSBzaXplIG9mIHRoZSBwcmV2aW91cyBxdWVyeS5cbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlLjxHcmFwaE1vZGVsW10+fSBBIHByb21pc2UgcmVzb2x2aW5nIHdpdGggdGhlIG5leHQgcGFnZSBvZiB7QGxpbmsgR3JhcGhNb2RlbH1zLlxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdmZXRjaE5leHRQYWdlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZmV0Y2hOZXh0UGFnZShub2RlT3JOb2Rlcywgb3B0aW9ucykge1xuICAgICAgdmFyIG5vZGUgPSB2b2lkIDA7XG5cbiAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vZGVPck5vZGVzKSkge1xuICAgICAgICBub2RlID0gbm9kZU9yTm9kZXNbbm9kZU9yTm9kZXMubGVuZ3RoIC0gMV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub2RlID0gbm9kZU9yTm9kZXM7XG4gICAgICB9XG5cbiAgICAgIHZhciBfbm9kZSRuZXh0UGFnZVF1ZXJ5QW4gPSBub2RlLm5leHRQYWdlUXVlcnlBbmRQYXRoKCksXG4gICAgICAgICAgX25vZGUkbmV4dFBhZ2VRdWVyeUFuMiA9IHNsaWNlZFRvQXJyYXkoX25vZGUkbmV4dFBhZ2VRdWVyeUFuLCAyKSxcbiAgICAgICAgICBxdWVyeSA9IF9ub2RlJG5leHRQYWdlUXVlcnlBbjJbMF0sXG4gICAgICAgICAgcGF0aCA9IF9ub2RlJG5leHRQYWdlUXVlcnlBbjJbMV07XG5cbiAgICAgIHZhciB2YXJpYWJsZVZhbHVlcyA9IHZvaWQgMDtcblxuICAgICAgaWYgKG5vZGUudmFyaWFibGVWYWx1ZXMgfHwgb3B0aW9ucykge1xuICAgICAgICB2YXJpYWJsZVZhbHVlcyA9IE9iamVjdC5hc3NpZ24oe30sIG5vZGUudmFyaWFibGVWYWx1ZXMsIG9wdGlvbnMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5zZW5kKHF1ZXJ5LCB2YXJpYWJsZVZhbHVlcykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgcmVzcG9uc2UubW9kZWwgPSBwYXRoLnJlZHVjZShmdW5jdGlvbiAob2JqZWN0LCBrZXkpIHtcbiAgICAgICAgICByZXR1cm4gb2JqZWN0W2tleV07XG4gICAgICAgIH0sIHJlc3BvbnNlLm1vZGVsKTtcblxuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGZXRjaGVzIGFsbCBzdWJzZXF1ZW50IHBhZ2VzIG9mIGEgcGFnaW5hdGVkIGFycmF5IG9mIG5vZGVzLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBjbGllbnQuZmV0Y2hBbGxQYWdlcyhub2Rlcywge3BhZ2VTaXplOiAyMH0pLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAqICAgLy8gRG8gc29tZXRoaW5nIHdpdGggYWxsIHRoZSBtb2RlbHNcbiAgICAgKiAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0dyYXBoTW9kZWxbXX0gcGFnaW5hdGVkTW9kZWxzIFRoZSBsaXN0IG9mIG5vZGVzIG9uIHdoaWNoIHRvIGZldGNoIGFsbCBwYWdlcy5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPcHRpb25zIG9iamVjdCBjb250YWluaW5nOlxuICAgICAqICAgQHBhcmFtIHtJbnRlZ2VyfSBvcHRpb25zLnBhZ2VTaXplIFRoZSBudW1iZXIgb2Ygbm9kZXMgdG8gcXVlcnkgb24gZWFjaCBwYWdlLlxuICAgICAqIEByZXR1cm4ge1Byb21pc2UuPEdyYXBoTW9kZWxbXT59IEEgcHJvbWlzZSByZXNvbHZpbmcgd2l0aCBhbGwgcGFnZXMgb2Yge0BsaW5rIEdyYXBoTW9kZWx9cywgaW5jbHVkaW5nIHRoZSBvcmlnaW5hbCBsaXN0LlxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdmZXRjaEFsbFBhZ2VzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZmV0Y2hBbGxQYWdlcyhwYWdpbmF0ZWRNb2RlbHMsIF9yZWYyKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgdmFyIHBhZ2VTaXplID0gX3JlZjIucGFnZVNpemU7XG5cbiAgICAgIGlmIChoYXNOZXh0UGFnZShwYWdpbmF0ZWRNb2RlbHMpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZldGNoTmV4dFBhZ2UocGFnaW5hdGVkTW9kZWxzLCB7IGZpcnN0OiBwYWdlU2l6ZSB9KS50aGVuKGZ1bmN0aW9uIChfcmVmMykge1xuICAgICAgICAgIHZhciBtb2RlbCA9IF9yZWYzLm1vZGVsO1xuXG4gICAgICAgICAgdmFyIHBhZ2VzID0gcGFnaW5hdGVkTW9kZWxzLmNvbmNhdChtb2RlbCk7XG5cbiAgICAgICAgICByZXR1cm4gX3RoaXMyLmZldGNoQWxsUGFnZXMocGFnZXMsIHsgcGFnZVNpemU6IHBhZ2VTaXplIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShwYWdpbmF0ZWRNb2RlbHMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlZmV0Y2hlcyBhIHtAbGluayBHcmFwaE1vZGVsfSB3aG9zZSB0eXBlIGltcGxlbWVudHMgYE5vZGVgLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBjbGllbnQucmVmZXRjaChub2RlKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgKiAgIC8vIERvIHNvbWV0aGluZyB3aXRoIHRoZSByZWZldGNoZWQgbm9kZVxuICAgICAqICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7R3JhcGhNb2RlbH0gbm9kZVR5cGUgQSB7QGxpbmsgR3JhcGhNb2RlbH0gd2hvc2UgdHlwZSBpbXBsZW1lbnRzIGBOb2RlYC5cbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlLjxHcmFwaE1vZGVsPn0gVGhlIHJlZmV0Y2hlZCB7QGxpbmsgR3JhcGhNb2RlbH0uXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ3JlZmV0Y2gnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZWZldGNoKG5vZGVUeXBlKSB7XG4gICAgICBpZiAoIW5vZGVUeXBlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignXFwnY2xpZW50I3JlZmV0Y2hcXCcgbXVzdCBiZSBjYWxsZWQgd2l0aCBhIG5vbi1udWxsIGluc3RhbmNlIG9mIGEgTm9kZS4nKTtcbiAgICAgIH0gZWxzZSBpZiAoIW5vZGVUeXBlLnR5cGUuaW1wbGVtZW50c05vZGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdcXCdjbGllbnQjcmVmZXRjaFxcJyBtdXN0IGJlIGNhbGxlZCB3aXRoIGEgdHlwZSB0aGF0IGltcGxlbWVudHMgTm9kZS4gUmVjZWl2ZWQgJyArIG5vZGVUeXBlLnR5cGUubmFtZSArICcuJyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLnNlbmQobm9kZVR5cGUucmVmZXRjaFF1ZXJ5KCkpLnRoZW4oZnVuY3Rpb24gKF9yZWY0KSB7XG4gICAgICAgIHZhciBtb2RlbCA9IF9yZWY0Lm1vZGVsO1xuICAgICAgICByZXR1cm4gbW9kZWwubm9kZTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSB2YXJpYWJsZSB0byBiZSB1c2VkIGluIGEge0BsaW5rIFF1ZXJ5fSBvciB7QGxpbmsgTXV0YXRpb259LlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBjb25zdCBpZFZhcmlhYmxlID0gY2xpZW50LnZhcmlhYmxlKCdpZCcsICdJRCEnLCAnMTIzNDUnKTtcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSB2YXJpYWJsZS5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSBUaGUgR3JhcGhRTCB0eXBlIG9mIHRoZSB2YXJpYWJsZS5cbiAgICAgKiBAcGFyYW0geyp9IFtkZWZhdWx0VmFsdWVdIFRoZSBkZWZhdWx0IHZhbHVlIG9mIHRoZSB2YXJpYWJsZS5cbiAgICAgKiBAcmV0dXJuIHtWYXJpYWJsZURlZmluaXRpb259IEEgdmFyaWFibGUgb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgaW4gYSB7QGxpbmsgUXVlcnl9IG9yIHtAbGluayBNdXRhdGlvbn0uXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ3ZhcmlhYmxlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gdmFyaWFibGUkJDEobmFtZSwgdHlwZSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFyaWFibGUobmFtZSwgdHlwZSwgZGVmYXVsdFZhbHVlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGVudW0gdG8gYmUgdXNlZCBpbiBhIHtAbGluayBRdWVyeX0gb3Ige0BsaW5rIE11dGF0aW9ufS5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogY29uc3QgdGl0bGVFbnVtID0gY2xpZW50LmVudW0oJ1RJVExFJyk7XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIGVudW0uXG4gICAgICogQHJldHVybiB7RW51bX0gQW4gZW51bSBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCBpbiBhIHtAbGluayBRdWVyeX0gb3Ige0BsaW5rIE11dGF0aW9ufS5cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnZW51bScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIF9lbnVtKGtleSkge1xuICAgICAgcmV0dXJuIGVudW1GdW5jdGlvbihrZXkpO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gQ2xpZW50O1xufSgpO1xuXG4vKipcbiAqIFRoZSBjbGFzcyB1c2VkIHRvIGNvbmZpZ3VyZSB0aGUgSlMgQnV5IFNESyBDbGllbnQuXG4gKiBAY2xhc3NcbiAqL1xudmFyIENvbmZpZyA9IGZ1bmN0aW9uICgpIHtcbiAgY3JlYXRlQ2xhc3MkMShDb25maWcsIFt7XG4gICAga2V5OiAncmVxdWlyZWRQcm9wZXJ0aWVzJyxcblxuXG4gICAgLyoqXG4gICAgICogUHJvcGVydGllcyB0aGF0IG11c3QgYmUgc2V0IG9uIGluaXRpYWxpemF0aW9uc1xuICAgICAqIEBhdHRyaWJ1dGUgcmVxdWlyZWRQcm9wZXJ0aWVzXG4gICAgICogQGRlZmF1bHQgWydzdG9yZWZyb250QWNjZXNzVG9rZW4nLCAnZG9tYWluJ11cbiAgICAgKiBAdHlwZSBBcnJheVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQkJDEoKSB7XG4gICAgICByZXR1cm4gWydzdG9yZWZyb250QWNjZXNzVG9rZW4nLCAnZG9tYWluJ107XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVwcmVjYXRlZCBwcm9wZXJ0aWVzIHRoYXQgbWFwIGRpcmVjdGx5IHRvIHJlcXVpcmVkIHByb3BlcnRpZXNcbiAgICAgKiBAYXR0cmlidXRlIGRlcHJlY2F0ZWRQcm9wZXJ0aWVzXG4gICAgICogQGRlZmF1bHQgeydhY2Nlc3NUb2tlbic6ICdzdG9yZWZyb250QWNjZXNzVG9rZW4nLCAnYXBpS2V5JzogJ3N0b3JlZnJvbnRBY2Nlc3NUb2tlbid9XG4gICAgICogQHR5cGUgT2JqZWN0XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnZGVwcmVjYXRlZFByb3BlcnRpZXMnLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYWNjZXNzVG9rZW46ICdzdG9yZWZyb250QWNjZXNzVG9rZW4nLFxuICAgICAgICBhcGlLZXk6ICdzdG9yZWZyb250QWNjZXNzVG9rZW4nXG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBjb25zdHJ1Y3RzIENvbmZpZ1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBhdHRycyBBbiBvYmplY3Qgc3BlY2lmeWluZyB0aGUgY29uZmlndXJhdGlvbi4gUmVxdWlyZXMgdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICAgICAqICAgQHBhcmFtIHtTdHJpbmd9IGF0dHJzLnN0b3JlZnJvbnRBY2Nlc3NUb2tlbiBUaGUge0BsaW5rIGh0dHBzOi8vaGVscC5zaG9waWZ5LmNvbS9hcGkvcmVmZXJlbmNlL3N0b3JlZnJvbnRfYWNjZXNzX3Rva2VufFN0b3JlZnJvbnQgYWNjZXNzIHRva2VufSBmb3IgdGhlIHNob3AuXG4gICAgICogICBAcGFyYW0ge1N0cmluZ30gYXR0cnMuZG9tYWluIFRoZSBgbXlzaG9waWZ5YCBkb21haW4gZm9yIHRoZSBzaG9wIChlLmcuIGBncmFwaHFsLm15c2hvcGlmeS5jb21gKS5cbiAgICAgKi9cblxuICB9XSk7XG5cbiAgZnVuY3Rpb24gQ29uZmlnKGF0dHJzKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIGNsYXNzQ2FsbENoZWNrJDEodGhpcywgQ29uZmlnKTtcblxuICAgIE9iamVjdC5rZXlzKHRoaXMuZGVwcmVjYXRlZFByb3BlcnRpZXMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgaWYgKCFhdHRycy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICBjb25zb2xlLndhcm4oJ1tTaG9waWZ5QnV5XSBDb25maWcgcHJvcGVydHkgJyArIGtleSArICcgaXMgZGVwcmVjYXRlZCBhcyBvZiB2MS4wLCBwbGVhc2UgdXNlICcgKyBfdGhpcy5kZXByZWNhdGVkUHJvcGVydGllc1trZXldICsgJyBpbnN0ZWFkLicpO1xuICAgICAgYXR0cnNbX3RoaXMuZGVwcmVjYXRlZFByb3BlcnRpZXNba2V5XV0gPSBhdHRyc1trZXldO1xuICAgIH0pO1xuXG4gICAgdGhpcy5yZXF1aXJlZFByb3BlcnRpZXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICBpZiAoYXR0cnMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICBfdGhpc1trZXldID0gYXR0cnNba2V5XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignbmV3IENvbmZpZygpIHJlcXVpcmVzIHRoZSBvcHRpb24gXFwnJyArIGtleSArICdcXCcnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChhdHRycy5oYXNPd25Qcm9wZXJ0eSgnYXBpVmVyc2lvbicpKSB7XG4gICAgICB0aGlzLmFwaVZlcnNpb24gPSBhdHRycy5hcGlWZXJzaW9uO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFwaVZlcnNpb24gPSAnMjAyNC0wNCc7XG4gICAgfVxuXG4gICAgaWYgKGF0dHJzLmhhc093blByb3BlcnR5KCdzb3VyY2UnKSkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBhdHRycy5zb3VyY2U7XG4gICAgfVxuXG4gICAgaWYgKGF0dHJzLmhhc093blByb3BlcnR5KCdsYW5ndWFnZScpKSB7XG4gICAgICB0aGlzLmxhbmd1YWdlID0gYXR0cnMubGFuZ3VhZ2U7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIENvbmZpZztcbn0oKTtcblxudmFyIElucHV0TWFwcGVyID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBJbnB1dE1hcHBlcigpIHtcbiAgICBjbGFzc0NhbGxDaGVjayQxKHRoaXMsIElucHV0TWFwcGVyKTtcbiAgfVxuXG4gIGNyZWF0ZUNsYXNzJDEoSW5wdXRNYXBwZXIsIFt7XG4gICAga2V5OiAnY3JlYXRlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlKCkge1xuICAgICAgdmFyIGlucHV0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcblxuICAgICAgdmFyIGNhcnRJbnB1dCA9IHt9O1xuXG4gICAgICBpZiAoaW5wdXQucHJlc2VudG1lbnRDdXJyZW5jeUNvZGUpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgY29uc29sZS53YXJuKCdwcmVzZW50bWVudEN1cnJlbmN5Q29kZSBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBDYXJ0IEFQSScpO1xuICAgICAgfVxuXG4gICAgICAvLyBTREsgY2hlY2tvdXQgaW5wdXQgZmllbGRzIHdlIGNhbiBtYXA6XG4gICAgICBpZiAoaW5wdXQubGluZUl0ZW1zICYmIGlucHV0LmxpbmVJdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgY2FydElucHV0LmxpbmVzID0gaW5wdXQubGluZUl0ZW1zLm1hcChmdW5jdGlvbiAobGluZUl0ZW0pIHtcbiAgICAgICAgICBsaW5lSXRlbS5tZXJjaGFuZGlzZUlkID0gbGluZUl0ZW0udmFyaWFudElkO1xuICAgICAgICAgIGRlbGV0ZSBsaW5lSXRlbS52YXJpYW50SWQ7XG5cbiAgICAgICAgICByZXR1cm4gbGluZUl0ZW07XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoaW5wdXQubm90ZSkge1xuICAgICAgICBjYXJ0SW5wdXQubm90ZSA9IGlucHV0Lm5vdGU7XG4gICAgICB9XG5cbiAgICAgIGlmIChpbnB1dC5lbWFpbCkge1xuICAgICAgICBjYXJ0SW5wdXQuYnV5ZXJJZGVudGl0eSA9IHsgZW1haWw6IGlucHV0LmVtYWlsIH07XG4gICAgICB9XG5cbiAgICAgIGlmIChpbnB1dC5zaGlwcGluZ0FkZHJlc3MpIHtcbiAgICAgICAgaWYgKCFjYXJ0SW5wdXQuYnV5ZXJJZGVudGl0eSkge1xuICAgICAgICAgIGNhcnRJbnB1dC5idXllcklkZW50aXR5ID0ge307XG4gICAgICAgIH1cbiAgICAgICAgY2FydElucHV0LmJ1eWVySWRlbnRpdHkuZGVsaXZlcnlBZGRyZXNzUHJlZmVyZW5jZXMgPSBbeyBkZWxpdmVyeUFkZHJlc3M6IGlucHV0LnNoaXBwaW5nQWRkcmVzcyB9XTtcbiAgICAgIH1cblxuICAgICAgaWYgKGlucHV0LmN1c3RvbUF0dHJpYnV0ZXMpIHtcbiAgICAgICAgY2FydElucHV0LmF0dHJpYnV0ZXMgPSBpbnB1dC5jdXN0b21BdHRyaWJ1dGVzO1xuICAgICAgfVxuXG4gICAgICAvLyBGaWVsZHMgdGhhdCBhcmVuJ3QgZG9jdW1lbnRlZCBpbiBTREsgYnV0IGNvdWxkIHN0aWxsIGJlIHBhc3NlZCBpbjpcbiAgICAgIGlmIChpbnB1dC5idXllcklkZW50aXR5KSB7XG4gICAgICAgIGlmICghY2FydElucHV0LmJ1eWVySWRlbnRpdHkpIHtcbiAgICAgICAgICBjYXJ0SW5wdXQuYnV5ZXJJZGVudGl0eSA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGNhcnRJbnB1dC5idXllcklkZW50aXR5LmNvdW50cnlDb2RlID0gaW5wdXQuYnV5ZXJJZGVudGl0eS5jb3VudHJ5Q29kZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGlucHV0LmFsbG93UGFydGlhbEFkZHJlc3Nlcykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICBjb25zb2xlLndhcm4oJ2FsbG93UGFydGlhbEFkZHJlc3NlcyBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBDYXJ0IEFQSScpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY2FydElucHV0O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3VwZGF0ZUF0dHJpYnV0ZXMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVBdHRyaWJ1dGVzKGNoZWNrb3V0SWQsIGlucHV0KSB7XG4gICAgICB2YXIgY2FydEF0dHJpYnV0ZXNVcGRhdGVJbnB1dCA9IHtcbiAgICAgICAgYXR0cmlidXRlczogW10sXG4gICAgICAgIGNhcnRJZDogJydcbiAgICAgIH07XG5cbiAgICAgIHZhciBjYXJ0Tm90ZVVwZGF0ZUlucHV0ID0ge1xuICAgICAgICBjYXJ0SWQ6ICcnLFxuICAgICAgICBub3RlOiAnJ1xuICAgICAgfTtcblxuICAgICAgaWYgKGNoZWNrb3V0SWQpIHtcbiAgICAgICAgY2FydEF0dHJpYnV0ZXNVcGRhdGVJbnB1dC5jYXJ0SWQgPSBjaGVja291dElkO1xuICAgICAgICBjYXJ0Tm90ZVVwZGF0ZUlucHV0LmNhcnRJZCA9IGNoZWNrb3V0SWQ7XG4gICAgICB9XG5cbiAgICAgIGlmIChpbnB1dC5jdXN0b21BdHRyaWJ1dGVzKSB7XG4gICAgICAgIGNhcnRBdHRyaWJ1dGVzVXBkYXRlSW5wdXQuYXR0cmlidXRlcyA9IGlucHV0LmN1c3RvbUF0dHJpYnV0ZXM7XG4gICAgICB9XG5cbiAgICAgIGlmIChpbnB1dC5ub3RlKSB7XG4gICAgICAgIGNhcnROb3RlVXBkYXRlSW5wdXQubm90ZSA9IGlucHV0Lm5vdGU7XG4gICAgICB9XG5cbiAgICAgIGlmIChpbnB1dC5hbGxvd1BhcnRpYWxBZGRyZXNzZXMpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgY29uc29sZS53YXJuKCdhbGxvd1BhcnRpYWxBZGRyZXNzZXMgaXMgbm90IHN1cHBvcnRlZCBieSB0aGUgQ2FydCBBUEknKTtcbiAgICAgIH1cblxuICAgICAgLy8gV2l0aCBjYXJ0LCB3ZSB3aWxsIG5lZWQgdG8gZXhlY3V0ZSB0d28gc2VwYXJhdGUgbXV0YXRpb25zIChvbmUgZm9yIGF0dHJpYnV0ZXMgYW5kIG9uZSBmb3Igbm90ZSlcbiAgICAgIHJldHVybiB7IGNhcnRBdHRyaWJ1dGVzVXBkYXRlSW5wdXQ6IGNhcnRBdHRyaWJ1dGVzVXBkYXRlSW5wdXQsIGNhcnROb3RlVXBkYXRlSW5wdXQ6IGNhcnROb3RlVXBkYXRlSW5wdXQgfTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICd1cGRhdGVFbWFpbCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZUVtYWlsKGNoZWNrb3V0SWQsIGVtYWlsKSB7XG4gICAgICB2YXIgY2FydEJ1eWVySWRlbnRpdHlJbnB1dCA9IHtcbiAgICAgICAgYnV5ZXJJZGVudGl0eTogeyBlbWFpbDogZW1haWwgfSxcbiAgICAgICAgY2FydElkOiBjaGVja291dElkXG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gY2FydEJ1eWVySWRlbnRpdHlJbnB1dDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdhZGRMaW5lSXRlbXMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRMaW5lSXRlbXMoY2hlY2tvdXRJZCwgbGluZUl0ZW1zKSB7XG4gICAgICB2YXIgbGluZXMgPSBBcnJheS5pc0FycmF5KGxpbmVJdGVtcykgPyBsaW5lSXRlbXMgOiBbbGluZUl0ZW1zXTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY2FydElkOiBjaGVja291dElkLFxuICAgICAgICBsaW5lczogbGluZXMubWFwKG1hcExpbmVJdGVtVG9MaW5lKS5maWx0ZXIoQm9vbGVhbilcbiAgICAgIH07XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnYWRkRGlzY291bnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhZGREaXNjb3VudChjaGVja291dElkLCBkaXNjb3VudENvZGVzKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBjYXJ0SWQ6IGNoZWNrb3V0SWQsXG4gICAgICAgIGRpc2NvdW50Q29kZXM6IEFycmF5LmlzQXJyYXkoZGlzY291bnRDb2RlcykgPyBkaXNjb3VudENvZGVzLmZsYXQoKSA6IFtdXG4gICAgICB9O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3JlbW92ZURpc2NvdW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlRGlzY291bnQoY2hlY2tvdXRJZCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY2FydElkOiBjaGVja291dElkLFxuICAgICAgICBkaXNjb3VudENvZGVzOiBbXVxuICAgICAgfTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdhZGRHaWZ0Q2FyZHMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRHaWZ0Q2FyZHMoY2hlY2tvdXRJZCwgZ2lmdENhcmRDb2Rlcykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY2FydElkOiBjaGVja291dElkLFxuICAgICAgICBnaWZ0Q2FyZENvZGVzOiBnaWZ0Q2FyZENvZGVzIHx8IFtdXG4gICAgICB9O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3JlbW92ZUdpZnRDYXJkJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlR2lmdENhcmQoY2hlY2tvdXRJZCwgYXBwbGllZEdpZnRDYXJkSWQpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNhcnRJZDogY2hlY2tvdXRJZCxcbiAgICAgICAgYXBwbGllZEdpZnRDYXJkSWRzOiBhcHBsaWVkR2lmdENhcmRJZCA/IFthcHBsaWVkR2lmdENhcmRJZF0gOiBbXVxuICAgICAgfTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdyZW1vdmVMaW5lSXRlbXMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVMaW5lSXRlbXMoY2hlY2tvdXRJZCwgbGluZUl0ZW1JZHMpIHtcbiAgICAgIHZhciBsaW5lSWRzID0gQXJyYXkuaXNBcnJheShsaW5lSXRlbUlkcykgPyBsaW5lSXRlbUlkcyA6IFtsaW5lSXRlbUlkc107XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNhcnRJZDogY2hlY2tvdXRJZCxcbiAgICAgICAgbGluZUlkczogbGluZUlkc1xuICAgICAgfTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdyZXBsYWNlTGluZUl0ZW1zJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVwbGFjZUxpbmVJdGVtcyhjaGVja291dElkLCBsaW5lSXRlbXMpIHtcbiAgICAgIHZhciBsaW5lcyA9IEFycmF5LmlzQXJyYXkobGluZUl0ZW1zKSA/IGxpbmVJdGVtcyA6IFtsaW5lSXRlbXNdO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBjYXJ0SWQ6IGNoZWNrb3V0SWQsXG4gICAgICAgIGxpbmVzOiBsaW5lcy5tYXAobWFwTGluZUl0ZW1Ub0xpbmUpLmZpbHRlcihCb29sZWFuKVxuICAgICAgfTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICd1cGRhdGVMaW5lSXRlbXMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVMaW5lSXRlbXMoY2hlY2tvdXRJZCwgbGluZUl0ZW1zKSB7XG4gICAgICB2YXIgbGluZXMgPSBBcnJheS5pc0FycmF5KGxpbmVJdGVtcykgPyBsaW5lSXRlbXMgOiBbbGluZUl0ZW1zXTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY2FydElkOiBjaGVja291dElkLFxuICAgICAgICBsaW5lczogbGluZXMubWFwKG1hcExpbmVJdGVtVG9MaW5lKS5maWx0ZXIoQm9vbGVhbilcbiAgICAgIH07XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAndXBkYXRlU2hpcHBpbmdBZGRyZXNzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlU2hpcHBpbmdBZGRyZXNzKGNoZWNrb3V0SWQsIHNoaXBwaW5nQWRkcmVzcykge1xuICAgICAgdmFyIGRlbGl2ZXJ5QWRkcmVzcyA9IHt9O1xuXG4gICAgICBpZiAoc2hpcHBpbmdBZGRyZXNzLmFkZHJlc3MxKSB7XG4gICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGRyZXNzMSA9IHNoaXBwaW5nQWRkcmVzcy5hZGRyZXNzMTtcbiAgICAgIH1cblxuICAgICAgaWYgKHNoaXBwaW5nQWRkcmVzcy5hZGRyZXNzMikge1xuICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkcmVzczIgPSBzaGlwcGluZ0FkZHJlc3MuYWRkcmVzczI7XG4gICAgICB9XG5cbiAgICAgIGlmIChzaGlwcGluZ0FkZHJlc3MuY2l0eSkge1xuICAgICAgICBkZWxpdmVyeUFkZHJlc3MuY2l0eSA9IHNoaXBwaW5nQWRkcmVzcy5jaXR5O1xuICAgICAgfVxuXG4gICAgICBpZiAoc2hpcHBpbmdBZGRyZXNzLmNvbXBhbnkpIHtcbiAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmNvbXBhbnkgPSBzaGlwcGluZ0FkZHJlc3MuY29tcGFueTtcbiAgICAgIH1cblxuICAgICAgaWYgKHNoaXBwaW5nQWRkcmVzcy5jb3VudHJ5KSB7XG4gICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5jb3VudHJ5ID0gc2hpcHBpbmdBZGRyZXNzLmNvdW50cnk7XG4gICAgICB9XG5cbiAgICAgIGlmIChzaGlwcGluZ0FkZHJlc3MuZmlyc3ROYW1lKSB7XG4gICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5maXJzdE5hbWUgPSBzaGlwcGluZ0FkZHJlc3MuZmlyc3ROYW1lO1xuICAgICAgfVxuXG4gICAgICBpZiAoc2hpcHBpbmdBZGRyZXNzLmxhc3ROYW1lKSB7XG4gICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5sYXN0TmFtZSA9IHNoaXBwaW5nQWRkcmVzcy5sYXN0TmFtZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHNoaXBwaW5nQWRkcmVzcy5waG9uZSkge1xuICAgICAgICBkZWxpdmVyeUFkZHJlc3MucGhvbmUgPSBzaGlwcGluZ0FkZHJlc3MucGhvbmU7XG4gICAgICB9XG5cbiAgICAgIGlmIChzaGlwcGluZ0FkZHJlc3MuemlwKSB7XG4gICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy56aXAgPSBzaGlwcGluZ0FkZHJlc3MuemlwO1xuICAgICAgfVxuXG4gICAgICBpZiAoc2hpcHBpbmdBZGRyZXNzLnByb3ZpbmNlKSB7XG4gICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5wcm92aW5jZSA9IHNoaXBwaW5nQWRkcmVzcy5wcm92aW5jZTtcbiAgICAgIH1cblxuICAgICAgdmFyIHdpdGhEZWxpdmVyeUFkZHJlc3MgPSBkZWxpdmVyeUFkZHJlc3MgJiYgT2JqZWN0LmtleXMoZGVsaXZlcnlBZGRyZXNzKS5sZW5ndGggPiAwO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBjYXJ0SWQ6IGNoZWNrb3V0SWQsXG4gICAgICAgIGJ1eWVySWRlbnRpdHk6IHtcbiAgICAgICAgICBkZWxpdmVyeUFkZHJlc3NQcmVmZXJlbmNlczogd2l0aERlbGl2ZXJ5QWRkcmVzcyA/IFt7IGRlbGl2ZXJ5QWRkcmVzczogZGVsaXZlcnlBZGRyZXNzIH1dIDogW11cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIElucHV0TWFwcGVyO1xufSgpO1xuXG5mdW5jdGlvbiBtYXBMaW5lSXRlbVRvTGluZShsaW5lSXRlbSkge1xuICB2YXIgbGluZSA9IHt9O1xuXG4gIGlmICh0eXBlb2YgbGluZUl0ZW0uaWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbGluZS5pZCA9IGxpbmVJdGVtLmlkO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBsaW5lSXRlbS5jdXN0b21BdHRyaWJ1dGVzICE9PSAndW5kZWZpbmVkJykge1xuICAgIGxpbmUuYXR0cmlidXRlcyA9IGxpbmVJdGVtLmN1c3RvbUF0dHJpYnV0ZXM7XG4gIH1cblxuICBpZiAodHlwZW9mIGxpbmVJdGVtLnF1YW50aXR5ICE9PSAndW5kZWZpbmVkJykge1xuICAgIGxpbmUucXVhbnRpdHkgPSBsaW5lSXRlbS5xdWFudGl0eTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgbGluZUl0ZW0udmFyaWFudElkICE9PSAndW5kZWZpbmVkJykge1xuICAgIGxpbmUubWVyY2hhbmRpc2VJZCA9IGxpbmVJdGVtLnZhcmlhbnRJZDtcbiAgfVxuXG4gIGlmIChPYmplY3Qua2V5cyhsaW5lKS5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiBsaW5lO1xufVxuXG52YXIgUmVzb3VyY2UgPSBmdW5jdGlvbiBSZXNvdXJjZShjbGllbnQpIHtcbiAgY2xhc3NDYWxsQ2hlY2skMSh0aGlzLCBSZXNvdXJjZSk7XG5cbiAgdGhpcy5ncmFwaFFMQ2xpZW50ID0gY2xpZW50O1xuICB0aGlzLmlucHV0TWFwcGVyID0gbmV3IElucHV0TWFwcGVyKCk7XG59O1xuXG52YXIgZGVmYXVsdEVycm9ycyA9IFt7IG1lc3NhZ2U6ICdhbiB1bmtub3duIGVycm9yIGhhcyBvY2N1cnJlZC4nIH1dO1xuXG5mdW5jdGlvbiBkZWZhdWx0UmVzb2x2ZXIocGF0aCkge1xuICB2YXIga2V5cyA9IHBhdGguc3BsaXQoJy4nKTtcblxuICByZXR1cm4gZnVuY3Rpb24gKF9yZWYpIHtcbiAgICB2YXIgbW9kZWwgPSBfcmVmLm1vZGVsLFxuICAgICAgICBlcnJvcnMgPSBfcmVmLmVycm9ycztcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgcmVzdWx0ID0ga2V5cy5yZWR1Y2UoZnVuY3Rpb24gKHJlZiwga2V5KSB7XG4gICAgICAgICAgcmV0dXJuIHJlZltrZXldO1xuICAgICAgICB9LCBtb2RlbCk7XG5cbiAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgfSBjYXRjaCAoXykge1xuICAgICAgICBpZiAoZXJyb3JzKSB7XG4gICAgICAgICAgcmVqZWN0KGVycm9ycyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVqZWN0KGRlZmF1bHRFcnJvcnMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGZldGNoUmVzb3VyY2VzRm9yUHJvZHVjdHMocHJvZHVjdE9yUHJvZHVjdCwgY2xpZW50KSB7XG4gIHZhciBwcm9kdWN0cyA9IFtdLmNvbmNhdChwcm9kdWN0T3JQcm9kdWN0KTtcblxuICByZXR1cm4gUHJvbWlzZS5hbGwocHJvZHVjdHMucmVkdWNlKGZ1bmN0aW9uIChwcm9taXNlQWNjLCBwcm9kdWN0KSB7XG5cbiAgICAvLyBJZiB0aGUgZ3JhcGhxbCBxdWVyeSBkb2Vzbid0IGZpbmQgYSBtYXRjaCwgc2tpcCBmZXRjaGluZyB2YXJpYW50cyBhbmQgaW1hZ2VzLlxuICAgIGlmIChwcm9kdWN0ID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gcHJvbWlzZUFjYztcbiAgICB9XG5cbiAgICAvLyBGZXRjaCB0aGUgcmVzdCBvZiB0aGUgaW1hZ2VzIGFuZCB2YXJpYW50cyBmb3IgdGhpcyBwcm9kdWN0XG4gICAgcHJvbWlzZUFjYy5wdXNoKGNsaWVudC5mZXRjaEFsbFBhZ2VzKHByb2R1Y3QuaW1hZ2VzLCB7IHBhZ2VTaXplOiAyNTAgfSkudGhlbihmdW5jdGlvbiAoaW1hZ2VzKSB7XG4gICAgICBwcm9kdWN0LmF0dHJzLmltYWdlcyA9IGltYWdlcztcbiAgICB9KSk7XG5cbiAgICBwcm9taXNlQWNjLnB1c2goY2xpZW50LmZldGNoQWxsUGFnZXMocHJvZHVjdC52YXJpYW50cywgeyBwYWdlU2l6ZTogMjUwIH0pLnRoZW4oZnVuY3Rpb24gKHZhcmlhbnRzKSB7XG4gICAgICBwcm9kdWN0LmF0dHJzLnZhcmlhbnRzID0gdmFyaWFudHM7XG4gICAgfSkpO1xuXG4gICAgcmV0dXJuIHByb21pc2VBY2M7XG4gIH0sIFtdKSk7XG59XG5cbmZ1bmN0aW9uIHBhZ2luYXRlUHJvZHVjdENvbm5lY3Rpb25zQW5kUmVzb2x2ZShjbGllbnQpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChwcm9kdWN0cykge1xuICAgIHJldHVybiBmZXRjaFJlc291cmNlc0ZvclByb2R1Y3RzKHByb2R1Y3RzLCBjbGllbnQpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHByb2R1Y3RzO1xuICAgIH0pO1xuICB9O1xufVxuXG5mdW5jdGlvbiBwYWdpbmF0ZUNvbGxlY3Rpb25zUHJvZHVjdENvbm5lY3Rpb25zQW5kUmVzb2x2ZShjbGllbnQpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChjb2xsZWN0aW9uT3JDb2xsZWN0aW9ucykge1xuICAgIHZhciBjb2xsZWN0aW9ucyA9IFtdLmNvbmNhdChjb2xsZWN0aW9uT3JDb2xsZWN0aW9ucyk7XG5cbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoY29sbGVjdGlvbnMucmVkdWNlKGZ1bmN0aW9uIChwcm9taXNlQWNjLCBjb2xsZWN0aW9uKSB7XG4gICAgICByZXR1cm4gcHJvbWlzZUFjYy5jb25jYXQoZmV0Y2hSZXNvdXJjZXNGb3JQcm9kdWN0cyhjb2xsZWN0aW9uLnByb2R1Y3RzLCBjbGllbnQpKTtcbiAgICB9LCBbXSkpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGNvbGxlY3Rpb25PckNvbGxlY3Rpb25zO1xuICAgIH0pO1xuICB9O1xufVxuXG4vKipcbiAqIEBuYW1lc3BhY2UgUHJvZHVjdEhlbHBlcnNcbiAqL1xudmFyIHByb2R1Y3RIZWxwZXJzID0ge1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSB2YXJpYW50IG9mIGEgcHJvZHVjdCBjb3JyZXNwb25kaW5nIHRvIHRoZSBvcHRpb25zIGdpdmVuLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBjb25zdCBzZWxlY3RlZFZhcmlhbnQgPSBjbGllbnQucHJvZHVjdC5oZWxwZXJzLnZhcmlhbnRGb3JPcHRpb25zKHByb2R1Y3QsIHtcbiAgICogICBzaXplOiBcIlNtYWxsXCIsXG4gICAqICAgY29sb3I6IFwiUmVkXCJcbiAgICogfSk7XG4gICAqXG4gICAqIEBtZW1iZXJvZiBQcm9kdWN0SGVscGVyc1xuICAgKiBAbWV0aG9kIHZhcmlhbnRGb3JPcHRpb25zXG4gICAqIEBwYXJhbSB7R3JhcGhNb2RlbH0gcHJvZHVjdCBUaGUgcHJvZHVjdCB0byBmaW5kIHRoZSB2YXJpYW50IG9uLiBNdXN0IGluY2x1ZGUgYHZhcmlhbnRzYC5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIG9wdGlvbnMgZm9yIHRoZSB2YXJpYW50LlxuICAgKiBAcmV0dXJuIHtHcmFwaE1vZGVsfSBUaGUgdmFyaWFudCBjb3JyZXNwb25kaW5nIHRvIHRoZSBvcHRpb25zIGdpdmVuLlxuICAgKi9cbiAgdmFyaWFudEZvck9wdGlvbnM6IGZ1bmN0aW9uIHZhcmlhbnRGb3JPcHRpb25zKHByb2R1Y3QsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gcHJvZHVjdC52YXJpYW50cy5maW5kKGZ1bmN0aW9uICh2YXJpYW50KSB7XG4gICAgICByZXR1cm4gdmFyaWFudC5zZWxlY3RlZE9wdGlvbnMuZXZlcnkoZnVuY3Rpb24gKHNlbGVjdGVkT3B0aW9uKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zW3NlbGVjdGVkT3B0aW9uLm5hbWVdID09PSBzZWxlY3RlZE9wdGlvbi52YWx1ZS52YWx1ZU9mKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxufTtcblxuZnVuY3Rpb24gcXVlcnkoY2xpZW50KSB7XG4gIHZhciBkb2N1bWVudCA9IGNsaWVudC5kb2N1bWVudCgpO1xuICB2YXIgc3ByZWFkcyA9IHt9O1xuICB2YXIgdmFyaWFibGVzID0ge307XG4gIHZhcmlhYmxlcy5fX2RlZmF1bHRPcGVyYXRpb25fXyA9IHt9O1xuICB2YXJpYWJsZXMuX19kZWZhdWx0T3BlcmF0aW9uX18uaWQgPSBjbGllbnQudmFyaWFibGUoXCJpZFwiLCBcIklEIVwiKTtcbiAgc3ByZWFkcy5WYXJpYW50RnJhZ21lbnQgPSBkb2N1bWVudC5kZWZpbmVGcmFnbWVudChcIlZhcmlhbnRGcmFnbWVudFwiLCBcIlByb2R1Y3RWYXJpYW50XCIsIGZ1bmN0aW9uIChyb290KSB7XG4gICAgcm9vdC5hZGQoXCJpZFwiKTtcbiAgICByb290LmFkZChcInRpdGxlXCIpO1xuICAgIHJvb3QuYWRkKFwicHJpY2VcIiwgZnVuY3Rpb24gKHByaWNlKSB7XG4gICAgICBwcmljZS5hZGQoXCJhbW91bnRcIik7XG4gICAgICBwcmljZS5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJwcmljZVwiLCB7XG4gICAgICBhbGlhczogXCJwcmljZVYyXCJcbiAgICB9LCBmdW5jdGlvbiAocHJpY2UpIHtcbiAgICAgIHByaWNlLmFkZChcImFtb3VudFwiKTtcbiAgICAgIHByaWNlLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcIndlaWdodFwiKTtcbiAgICByb290LmFkZChcImF2YWlsYWJsZUZvclNhbGVcIiwge1xuICAgICAgYWxpYXM6IFwiYXZhaWxhYmxlXCJcbiAgICB9KTtcbiAgICByb290LmFkZChcInNrdVwiKTtcbiAgICByb290LmFkZChcImNvbXBhcmVBdFByaWNlXCIsIGZ1bmN0aW9uIChjb21wYXJlQXRQcmljZSkge1xuICAgICAgY29tcGFyZUF0UHJpY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgY29tcGFyZUF0UHJpY2UuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiY29tcGFyZUF0UHJpY2VcIiwge1xuICAgICAgYWxpYXM6IFwiY29tcGFyZUF0UHJpY2VWMlwiXG4gICAgfSwgZnVuY3Rpb24gKGNvbXBhcmVBdFByaWNlKSB7XG4gICAgICBjb21wYXJlQXRQcmljZS5hZGQoXCJhbW91bnRcIik7XG4gICAgICBjb21wYXJlQXRQcmljZS5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJpbWFnZVwiLCBmdW5jdGlvbiAoaW1hZ2UpIHtcbiAgICAgIGltYWdlLmFkZChcImlkXCIpO1xuICAgICAgaW1hZ2UuYWRkKFwidXJsXCIsIHtcbiAgICAgICAgYWxpYXM6IFwic3JjXCJcbiAgICAgIH0pO1xuICAgICAgaW1hZ2UuYWRkKFwiYWx0VGV4dFwiKTtcbiAgICAgIGltYWdlLmFkZChcIndpZHRoXCIpO1xuICAgICAgaW1hZ2UuYWRkKFwiaGVpZ2h0XCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwic2VsZWN0ZWRPcHRpb25zXCIsIGZ1bmN0aW9uIChzZWxlY3RlZE9wdGlvbnMpIHtcbiAgICAgIHNlbGVjdGVkT3B0aW9ucy5hZGQoXCJuYW1lXCIpO1xuICAgICAgc2VsZWN0ZWRPcHRpb25zLmFkZChcInZhbHVlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwidW5pdFByaWNlXCIsIGZ1bmN0aW9uICh1bml0UHJpY2UpIHtcbiAgICAgIHVuaXRQcmljZS5hZGQoXCJhbW91bnRcIik7XG4gICAgICB1bml0UHJpY2UuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwidW5pdFByaWNlTWVhc3VyZW1lbnRcIiwgZnVuY3Rpb24gKHVuaXRQcmljZU1lYXN1cmVtZW50KSB7XG4gICAgICB1bml0UHJpY2VNZWFzdXJlbWVudC5hZGQoXCJtZWFzdXJlZFR5cGVcIik7XG4gICAgICB1bml0UHJpY2VNZWFzdXJlbWVudC5hZGQoXCJxdWFudGl0eVVuaXRcIik7XG4gICAgICB1bml0UHJpY2VNZWFzdXJlbWVudC5hZGQoXCJxdWFudGl0eVZhbHVlXCIpO1xuICAgICAgdW5pdFByaWNlTWVhc3VyZW1lbnQuYWRkKFwicmVmZXJlbmNlVW5pdFwiKTtcbiAgICAgIHVuaXRQcmljZU1lYXN1cmVtZW50LmFkZChcInJlZmVyZW5jZVZhbHVlXCIpO1xuICAgIH0pO1xuICB9KTtcbiAgc3ByZWFkcy5Qcm9kdWN0RnJhZ21lbnQgPSBkb2N1bWVudC5kZWZpbmVGcmFnbWVudChcIlByb2R1Y3RGcmFnbWVudFwiLCBcIlByb2R1Y3RcIiwgZnVuY3Rpb24gKHJvb3QpIHtcbiAgICByb290LmFkZChcImlkXCIpO1xuICAgIHJvb3QuYWRkKFwiYXZhaWxhYmxlRm9yU2FsZVwiKTtcbiAgICByb290LmFkZChcImNyZWF0ZWRBdFwiKTtcbiAgICByb290LmFkZChcInVwZGF0ZWRBdFwiKTtcbiAgICByb290LmFkZChcImRlc2NyaXB0aW9uSHRtbFwiKTtcbiAgICByb290LmFkZChcImRlc2NyaXB0aW9uXCIpO1xuICAgIHJvb3QuYWRkKFwiaGFuZGxlXCIpO1xuICAgIHJvb3QuYWRkKFwicHJvZHVjdFR5cGVcIik7XG4gICAgcm9vdC5hZGQoXCJ0aXRsZVwiKTtcbiAgICByb290LmFkZChcInZlbmRvclwiKTtcbiAgICByb290LmFkZChcInB1Ymxpc2hlZEF0XCIpO1xuICAgIHJvb3QuYWRkKFwib25saW5lU3RvcmVVcmxcIik7XG4gICAgcm9vdC5hZGQoXCJvcHRpb25zXCIsIGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICBvcHRpb25zLmFkZChcIm5hbWVcIik7XG4gICAgICBvcHRpb25zLmFkZChcInZhbHVlc1wiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImltYWdlc1wiLCB7XG4gICAgICBhcmdzOiB7XG4gICAgICAgIGZpcnN0OiAyNTBcbiAgICAgIH1cbiAgICB9LCBmdW5jdGlvbiAoaW1hZ2VzKSB7XG4gICAgICBpbWFnZXMuYWRkKFwicGFnZUluZm9cIiwgZnVuY3Rpb24gKHBhZ2VJbmZvKSB7XG4gICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc05leHRQYWdlXCIpO1xuICAgICAgICBwYWdlSW5mby5hZGQoXCJoYXNQcmV2aW91c1BhZ2VcIik7XG4gICAgICB9KTtcbiAgICAgIGltYWdlcy5hZGQoXCJlZGdlc1wiLCBmdW5jdGlvbiAoZWRnZXMpIHtcbiAgICAgICAgZWRnZXMuYWRkKFwiY3Vyc29yXCIpO1xuICAgICAgICBlZGdlcy5hZGQoXCJub2RlXCIsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgbm9kZS5hZGQoXCJpZFwiKTtcbiAgICAgICAgICBub2RlLmFkZChcInVybFwiLCB7XG4gICAgICAgICAgICBhbGlhczogXCJzcmNcIlxuICAgICAgICAgIH0pO1xuICAgICAgICAgIG5vZGUuYWRkKFwiYWx0VGV4dFwiKTtcbiAgICAgICAgICBub2RlLmFkZChcIndpZHRoXCIpO1xuICAgICAgICAgIG5vZGUuYWRkKFwiaGVpZ2h0XCIpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwidmFyaWFudHNcIiwge1xuICAgICAgYXJnczoge1xuICAgICAgICBmaXJzdDogMjUwXG4gICAgICB9XG4gICAgfSwgZnVuY3Rpb24gKHZhcmlhbnRzKSB7XG4gICAgICB2YXJpYW50cy5hZGQoXCJwYWdlSW5mb1wiLCBmdW5jdGlvbiAocGFnZUluZm8pIHtcbiAgICAgICAgcGFnZUluZm8uYWRkKFwiaGFzTmV4dFBhZ2VcIik7XG4gICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc1ByZXZpb3VzUGFnZVwiKTtcbiAgICAgIH0pO1xuICAgICAgdmFyaWFudHMuYWRkKFwiZWRnZXNcIiwgZnVuY3Rpb24gKGVkZ2VzKSB7XG4gICAgICAgIGVkZ2VzLmFkZChcImN1cnNvclwiKTtcbiAgICAgICAgZWRnZXMuYWRkKFwibm9kZVwiLCBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgIG5vZGUuYWRkRnJhZ21lbnQoc3ByZWFkcy5WYXJpYW50RnJhZ21lbnQpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbiAgZG9jdW1lbnQuYWRkUXVlcnkoW3ZhcmlhYmxlcy5fX2RlZmF1bHRPcGVyYXRpb25fXy5pZF0sIGZ1bmN0aW9uIChyb290KSB7XG4gICAgcm9vdC5hZGQoXCJub2RlXCIsIHtcbiAgICAgIGFyZ3M6IHtcbiAgICAgICAgaWQ6IHZhcmlhYmxlcy5fX2RlZmF1bHRPcGVyYXRpb25fXy5pZFxuICAgICAgfVxuICAgIH0sIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICBub2RlLmFkZEZyYWdtZW50KHNwcmVhZHMuUHJvZHVjdEZyYWdtZW50KTtcbiAgICB9KTtcbiAgfSk7XG4gIHJldHVybiBkb2N1bWVudDtcbn1cblxuZnVuY3Rpb24gcXVlcnkkMShjbGllbnQpIHtcbiAgdmFyIGRvY3VtZW50ID0gY2xpZW50LmRvY3VtZW50KCk7XG4gIHZhciBzcHJlYWRzID0ge307XG4gIHZhciB2YXJpYWJsZXMgPSB7fTtcbiAgdmFyaWFibGVzLl9fZGVmYXVsdE9wZXJhdGlvbl9fID0ge307XG4gIHZhcmlhYmxlcy5fX2RlZmF1bHRPcGVyYXRpb25fXy5pZHMgPSBjbGllbnQudmFyaWFibGUoXCJpZHNcIiwgXCJbSUQhXSFcIik7XG4gIHNwcmVhZHMuVmFyaWFudEZyYWdtZW50ID0gZG9jdW1lbnQuZGVmaW5lRnJhZ21lbnQoXCJWYXJpYW50RnJhZ21lbnRcIiwgXCJQcm9kdWN0VmFyaWFudFwiLCBmdW5jdGlvbiAocm9vdCkge1xuICAgIHJvb3QuYWRkKFwiaWRcIik7XG4gICAgcm9vdC5hZGQoXCJ0aXRsZVwiKTtcbiAgICByb290LmFkZChcInByaWNlXCIsIGZ1bmN0aW9uIChwcmljZSkge1xuICAgICAgcHJpY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgcHJpY2UuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwicHJpY2VcIiwge1xuICAgICAgYWxpYXM6IFwicHJpY2VWMlwiXG4gICAgfSwgZnVuY3Rpb24gKHByaWNlKSB7XG4gICAgICBwcmljZS5hZGQoXCJhbW91bnRcIik7XG4gICAgICBwcmljZS5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJ3ZWlnaHRcIik7XG4gICAgcm9vdC5hZGQoXCJhdmFpbGFibGVGb3JTYWxlXCIsIHtcbiAgICAgIGFsaWFzOiBcImF2YWlsYWJsZVwiXG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJza3VcIik7XG4gICAgcm9vdC5hZGQoXCJjb21wYXJlQXRQcmljZVwiLCBmdW5jdGlvbiAoY29tcGFyZUF0UHJpY2UpIHtcbiAgICAgIGNvbXBhcmVBdFByaWNlLmFkZChcImFtb3VudFwiKTtcbiAgICAgIGNvbXBhcmVBdFByaWNlLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImNvbXBhcmVBdFByaWNlXCIsIHtcbiAgICAgIGFsaWFzOiBcImNvbXBhcmVBdFByaWNlVjJcIlxuICAgIH0sIGZ1bmN0aW9uIChjb21wYXJlQXRQcmljZSkge1xuICAgICAgY29tcGFyZUF0UHJpY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgY29tcGFyZUF0UHJpY2UuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiaW1hZ2VcIiwgZnVuY3Rpb24gKGltYWdlKSB7XG4gICAgICBpbWFnZS5hZGQoXCJpZFwiKTtcbiAgICAgIGltYWdlLmFkZChcInVybFwiLCB7XG4gICAgICAgIGFsaWFzOiBcInNyY1wiXG4gICAgICB9KTtcbiAgICAgIGltYWdlLmFkZChcImFsdFRleHRcIik7XG4gICAgICBpbWFnZS5hZGQoXCJ3aWR0aFwiKTtcbiAgICAgIGltYWdlLmFkZChcImhlaWdodFwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcInNlbGVjdGVkT3B0aW9uc1wiLCBmdW5jdGlvbiAoc2VsZWN0ZWRPcHRpb25zKSB7XG4gICAgICBzZWxlY3RlZE9wdGlvbnMuYWRkKFwibmFtZVwiKTtcbiAgICAgIHNlbGVjdGVkT3B0aW9ucy5hZGQoXCJ2YWx1ZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcInVuaXRQcmljZVwiLCBmdW5jdGlvbiAodW5pdFByaWNlKSB7XG4gICAgICB1bml0UHJpY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgdW5pdFByaWNlLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcInVuaXRQcmljZU1lYXN1cmVtZW50XCIsIGZ1bmN0aW9uICh1bml0UHJpY2VNZWFzdXJlbWVudCkge1xuICAgICAgdW5pdFByaWNlTWVhc3VyZW1lbnQuYWRkKFwibWVhc3VyZWRUeXBlXCIpO1xuICAgICAgdW5pdFByaWNlTWVhc3VyZW1lbnQuYWRkKFwicXVhbnRpdHlVbml0XCIpO1xuICAgICAgdW5pdFByaWNlTWVhc3VyZW1lbnQuYWRkKFwicXVhbnRpdHlWYWx1ZVwiKTtcbiAgICAgIHVuaXRQcmljZU1lYXN1cmVtZW50LmFkZChcInJlZmVyZW5jZVVuaXRcIik7XG4gICAgICB1bml0UHJpY2VNZWFzdXJlbWVudC5hZGQoXCJyZWZlcmVuY2VWYWx1ZVwiKTtcbiAgICB9KTtcbiAgfSk7XG4gIHNwcmVhZHMuUHJvZHVjdEZyYWdtZW50ID0gZG9jdW1lbnQuZGVmaW5lRnJhZ21lbnQoXCJQcm9kdWN0RnJhZ21lbnRcIiwgXCJQcm9kdWN0XCIsIGZ1bmN0aW9uIChyb290KSB7XG4gICAgcm9vdC5hZGQoXCJpZFwiKTtcbiAgICByb290LmFkZChcImF2YWlsYWJsZUZvclNhbGVcIik7XG4gICAgcm9vdC5hZGQoXCJjcmVhdGVkQXRcIik7XG4gICAgcm9vdC5hZGQoXCJ1cGRhdGVkQXRcIik7XG4gICAgcm9vdC5hZGQoXCJkZXNjcmlwdGlvbkh0bWxcIik7XG4gICAgcm9vdC5hZGQoXCJkZXNjcmlwdGlvblwiKTtcbiAgICByb290LmFkZChcImhhbmRsZVwiKTtcbiAgICByb290LmFkZChcInByb2R1Y3RUeXBlXCIpO1xuICAgIHJvb3QuYWRkKFwidGl0bGVcIik7XG4gICAgcm9vdC5hZGQoXCJ2ZW5kb3JcIik7XG4gICAgcm9vdC5hZGQoXCJwdWJsaXNoZWRBdFwiKTtcbiAgICByb290LmFkZChcIm9ubGluZVN0b3JlVXJsXCIpO1xuICAgIHJvb3QuYWRkKFwib3B0aW9uc1wiLCBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgb3B0aW9ucy5hZGQoXCJuYW1lXCIpO1xuICAgICAgb3B0aW9ucy5hZGQoXCJ2YWx1ZXNcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJpbWFnZXNcIiwge1xuICAgICAgYXJnczoge1xuICAgICAgICBmaXJzdDogMjUwXG4gICAgICB9XG4gICAgfSwgZnVuY3Rpb24gKGltYWdlcykge1xuICAgICAgaW1hZ2VzLmFkZChcInBhZ2VJbmZvXCIsIGZ1bmN0aW9uIChwYWdlSW5mbykge1xuICAgICAgICBwYWdlSW5mby5hZGQoXCJoYXNOZXh0UGFnZVwiKTtcbiAgICAgICAgcGFnZUluZm8uYWRkKFwiaGFzUHJldmlvdXNQYWdlXCIpO1xuICAgICAgfSk7XG4gICAgICBpbWFnZXMuYWRkKFwiZWRnZXNcIiwgZnVuY3Rpb24gKGVkZ2VzKSB7XG4gICAgICAgIGVkZ2VzLmFkZChcImN1cnNvclwiKTtcbiAgICAgICAgZWRnZXMuYWRkKFwibm9kZVwiLCBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgIG5vZGUuYWRkKFwiaWRcIik7XG4gICAgICAgICAgbm9kZS5hZGQoXCJ1cmxcIiwge1xuICAgICAgICAgICAgYWxpYXM6IFwic3JjXCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBub2RlLmFkZChcImFsdFRleHRcIik7XG4gICAgICAgICAgbm9kZS5hZGQoXCJ3aWR0aFwiKTtcbiAgICAgICAgICBub2RlLmFkZChcImhlaWdodFwiKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByb290LmFkZChcInZhcmlhbnRzXCIsIHtcbiAgICAgIGFyZ3M6IHtcbiAgICAgICAgZmlyc3Q6IDI1MFxuICAgICAgfVxuICAgIH0sIGZ1bmN0aW9uICh2YXJpYW50cykge1xuICAgICAgdmFyaWFudHMuYWRkKFwicGFnZUluZm9cIiwgZnVuY3Rpb24gKHBhZ2VJbmZvKSB7XG4gICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc05leHRQYWdlXCIpO1xuICAgICAgICBwYWdlSW5mby5hZGQoXCJoYXNQcmV2aW91c1BhZ2VcIik7XG4gICAgICB9KTtcbiAgICAgIHZhcmlhbnRzLmFkZChcImVkZ2VzXCIsIGZ1bmN0aW9uIChlZGdlcykge1xuICAgICAgICBlZGdlcy5hZGQoXCJjdXJzb3JcIik7XG4gICAgICAgIGVkZ2VzLmFkZChcIm5vZGVcIiwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICBub2RlLmFkZEZyYWdtZW50KHNwcmVhZHMuVmFyaWFudEZyYWdtZW50KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG4gIGRvY3VtZW50LmFkZFF1ZXJ5KFt2YXJpYWJsZXMuX19kZWZhdWx0T3BlcmF0aW9uX18uaWRzXSwgZnVuY3Rpb24gKHJvb3QpIHtcbiAgICByb290LmFkZChcIm5vZGVzXCIsIHtcbiAgICAgIGFyZ3M6IHtcbiAgICAgICAgaWRzOiB2YXJpYWJsZXMuX19kZWZhdWx0T3BlcmF0aW9uX18uaWRzXG4gICAgICB9XG4gICAgfSwgZnVuY3Rpb24gKG5vZGVzKSB7XG4gICAgICBub2Rlcy5hZGRGcmFnbWVudChzcHJlYWRzLlByb2R1Y3RGcmFnbWVudCk7XG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gZG9jdW1lbnQ7XG59XG5cbmZ1bmN0aW9uIHF1ZXJ5JDIoY2xpZW50KSB7XG4gIHZhciBkb2N1bWVudCA9IGNsaWVudC5kb2N1bWVudCgpO1xuICB2YXIgc3ByZWFkcyA9IHt9O1xuICB2YXIgdmFyaWFibGVzID0ge307XG4gIHZhcmlhYmxlcy5fX2RlZmF1bHRPcGVyYXRpb25fXyA9IHt9O1xuICB2YXJpYWJsZXMuX19kZWZhdWx0T3BlcmF0aW9uX18uZmlyc3QgPSBjbGllbnQudmFyaWFibGUoXCJmaXJzdFwiLCBcIkludCFcIik7XG4gIHZhcmlhYmxlcy5fX2RlZmF1bHRPcGVyYXRpb25fXy5xdWVyeSA9IGNsaWVudC52YXJpYWJsZShcInF1ZXJ5XCIsIFwiU3RyaW5nXCIpO1xuICB2YXJpYWJsZXMuX19kZWZhdWx0T3BlcmF0aW9uX18uc29ydEtleSA9IGNsaWVudC52YXJpYWJsZShcInNvcnRLZXlcIiwgXCJQcm9kdWN0U29ydEtleXNcIik7XG4gIHZhcmlhYmxlcy5fX2RlZmF1bHRPcGVyYXRpb25fXy5yZXZlcnNlID0gY2xpZW50LnZhcmlhYmxlKFwicmV2ZXJzZVwiLCBcIkJvb2xlYW5cIik7XG4gIHNwcmVhZHMuVmFyaWFudEZyYWdtZW50ID0gZG9jdW1lbnQuZGVmaW5lRnJhZ21lbnQoXCJWYXJpYW50RnJhZ21lbnRcIiwgXCJQcm9kdWN0VmFyaWFudFwiLCBmdW5jdGlvbiAocm9vdCkge1xuICAgIHJvb3QuYWRkKFwiaWRcIik7XG4gICAgcm9vdC5hZGQoXCJ0aXRsZVwiKTtcbiAgICByb290LmFkZChcInByaWNlXCIsIGZ1bmN0aW9uIChwcmljZSkge1xuICAgICAgcHJpY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgcHJpY2UuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwicHJpY2VcIiwge1xuICAgICAgYWxpYXM6IFwicHJpY2VWMlwiXG4gICAgfSwgZnVuY3Rpb24gKHByaWNlKSB7XG4gICAgICBwcmljZS5hZGQoXCJhbW91bnRcIik7XG4gICAgICBwcmljZS5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJ3ZWlnaHRcIik7XG4gICAgcm9vdC5hZGQoXCJhdmFpbGFibGVGb3JTYWxlXCIsIHtcbiAgICAgIGFsaWFzOiBcImF2YWlsYWJsZVwiXG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJza3VcIik7XG4gICAgcm9vdC5hZGQoXCJjb21wYXJlQXRQcmljZVwiLCBmdW5jdGlvbiAoY29tcGFyZUF0UHJpY2UpIHtcbiAgICAgIGNvbXBhcmVBdFByaWNlLmFkZChcImFtb3VudFwiKTtcbiAgICAgIGNvbXBhcmVBdFByaWNlLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImNvbXBhcmVBdFByaWNlXCIsIHtcbiAgICAgIGFsaWFzOiBcImNvbXBhcmVBdFByaWNlVjJcIlxuICAgIH0sIGZ1bmN0aW9uIChjb21wYXJlQXRQcmljZSkge1xuICAgICAgY29tcGFyZUF0UHJpY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgY29tcGFyZUF0UHJpY2UuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiaW1hZ2VcIiwgZnVuY3Rpb24gKGltYWdlKSB7XG4gICAgICBpbWFnZS5hZGQoXCJpZFwiKTtcbiAgICAgIGltYWdlLmFkZChcInVybFwiLCB7XG4gICAgICAgIGFsaWFzOiBcInNyY1wiXG4gICAgICB9KTtcbiAgICAgIGltYWdlLmFkZChcImFsdFRleHRcIik7XG4gICAgICBpbWFnZS5hZGQoXCJ3aWR0aFwiKTtcbiAgICAgIGltYWdlLmFkZChcImhlaWdodFwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcInNlbGVjdGVkT3B0aW9uc1wiLCBmdW5jdGlvbiAoc2VsZWN0ZWRPcHRpb25zKSB7XG4gICAgICBzZWxlY3RlZE9wdGlvbnMuYWRkKFwibmFtZVwiKTtcbiAgICAgIHNlbGVjdGVkT3B0aW9ucy5hZGQoXCJ2YWx1ZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcInVuaXRQcmljZVwiLCBmdW5jdGlvbiAodW5pdFByaWNlKSB7XG4gICAgICB1bml0UHJpY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgdW5pdFByaWNlLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcInVuaXRQcmljZU1lYXN1cmVtZW50XCIsIGZ1bmN0aW9uICh1bml0UHJpY2VNZWFzdXJlbWVudCkge1xuICAgICAgdW5pdFByaWNlTWVhc3VyZW1lbnQuYWRkKFwibWVhc3VyZWRUeXBlXCIpO1xuICAgICAgdW5pdFByaWNlTWVhc3VyZW1lbnQuYWRkKFwicXVhbnRpdHlVbml0XCIpO1xuICAgICAgdW5pdFByaWNlTWVhc3VyZW1lbnQuYWRkKFwicXVhbnRpdHlWYWx1ZVwiKTtcbiAgICAgIHVuaXRQcmljZU1lYXN1cmVtZW50LmFkZChcInJlZmVyZW5jZVVuaXRcIik7XG4gICAgICB1bml0UHJpY2VNZWFzdXJlbWVudC5hZGQoXCJyZWZlcmVuY2VWYWx1ZVwiKTtcbiAgICB9KTtcbiAgfSk7XG4gIHNwcmVhZHMuUHJvZHVjdEZyYWdtZW50ID0gZG9jdW1lbnQuZGVmaW5lRnJhZ21lbnQoXCJQcm9kdWN0RnJhZ21lbnRcIiwgXCJQcm9kdWN0XCIsIGZ1bmN0aW9uIChyb290KSB7XG4gICAgcm9vdC5hZGQoXCJpZFwiKTtcbiAgICByb290LmFkZChcImF2YWlsYWJsZUZvclNhbGVcIik7XG4gICAgcm9vdC5hZGQoXCJjcmVhdGVkQXRcIik7XG4gICAgcm9vdC5hZGQoXCJ1cGRhdGVkQXRcIik7XG4gICAgcm9vdC5hZGQoXCJkZXNjcmlwdGlvbkh0bWxcIik7XG4gICAgcm9vdC5hZGQoXCJkZXNjcmlwdGlvblwiKTtcbiAgICByb290LmFkZChcImhhbmRsZVwiKTtcbiAgICByb290LmFkZChcInByb2R1Y3RUeXBlXCIpO1xuICAgIHJvb3QuYWRkKFwidGl0bGVcIik7XG4gICAgcm9vdC5hZGQoXCJ2ZW5kb3JcIik7XG4gICAgcm9vdC5hZGQoXCJwdWJsaXNoZWRBdFwiKTtcbiAgICByb290LmFkZChcIm9ubGluZVN0b3JlVXJsXCIpO1xuICAgIHJvb3QuYWRkKFwib3B0aW9uc1wiLCBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgb3B0aW9ucy5hZGQoXCJuYW1lXCIpO1xuICAgICAgb3B0aW9ucy5hZGQoXCJ2YWx1ZXNcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJpbWFnZXNcIiwge1xuICAgICAgYXJnczoge1xuICAgICAgICBmaXJzdDogMjUwXG4gICAgICB9XG4gICAgfSwgZnVuY3Rpb24gKGltYWdlcykge1xuICAgICAgaW1hZ2VzLmFkZChcInBhZ2VJbmZvXCIsIGZ1bmN0aW9uIChwYWdlSW5mbykge1xuICAgICAgICBwYWdlSW5mby5hZGQoXCJoYXNOZXh0UGFnZVwiKTtcbiAgICAgICAgcGFnZUluZm8uYWRkKFwiaGFzUHJldmlvdXNQYWdlXCIpO1xuICAgICAgfSk7XG4gICAgICBpbWFnZXMuYWRkKFwiZWRnZXNcIiwgZnVuY3Rpb24gKGVkZ2VzKSB7XG4gICAgICAgIGVkZ2VzLmFkZChcImN1cnNvclwiKTtcbiAgICAgICAgZWRnZXMuYWRkKFwibm9kZVwiLCBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgIG5vZGUuYWRkKFwiaWRcIik7XG4gICAgICAgICAgbm9kZS5hZGQoXCJ1cmxcIiwge1xuICAgICAgICAgICAgYWxpYXM6IFwic3JjXCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBub2RlLmFkZChcImFsdFRleHRcIik7XG4gICAgICAgICAgbm9kZS5hZGQoXCJ3aWR0aFwiKTtcbiAgICAgICAgICBub2RlLmFkZChcImhlaWdodFwiKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByb290LmFkZChcInZhcmlhbnRzXCIsIHtcbiAgICAgIGFyZ3M6IHtcbiAgICAgICAgZmlyc3Q6IDI1MFxuICAgICAgfVxuICAgIH0sIGZ1bmN0aW9uICh2YXJpYW50cykge1xuICAgICAgdmFyaWFudHMuYWRkKFwicGFnZUluZm9cIiwgZnVuY3Rpb24gKHBhZ2VJbmZvKSB7XG4gICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc05leHRQYWdlXCIpO1xuICAgICAgICBwYWdlSW5mby5hZGQoXCJoYXNQcmV2aW91c1BhZ2VcIik7XG4gICAgICB9KTtcbiAgICAgIHZhcmlhbnRzLmFkZChcImVkZ2VzXCIsIGZ1bmN0aW9uIChlZGdlcykge1xuICAgICAgICBlZGdlcy5hZGQoXCJjdXJzb3JcIik7XG4gICAgICAgIGVkZ2VzLmFkZChcIm5vZGVcIiwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICBub2RlLmFkZEZyYWdtZW50KHNwcmVhZHMuVmFyaWFudEZyYWdtZW50KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG4gIGRvY3VtZW50LmFkZFF1ZXJ5KFt2YXJpYWJsZXMuX19kZWZhdWx0T3BlcmF0aW9uX18uZmlyc3QsIHZhcmlhYmxlcy5fX2RlZmF1bHRPcGVyYXRpb25fXy5xdWVyeSwgdmFyaWFibGVzLl9fZGVmYXVsdE9wZXJhdGlvbl9fLnNvcnRLZXksIHZhcmlhYmxlcy5fX2RlZmF1bHRPcGVyYXRpb25fXy5yZXZlcnNlXSwgZnVuY3Rpb24gKHJvb3QpIHtcbiAgICByb290LmFkZChcInByb2R1Y3RzXCIsIHtcbiAgICAgIGFyZ3M6IHtcbiAgICAgICAgZmlyc3Q6IHZhcmlhYmxlcy5fX2RlZmF1bHRPcGVyYXRpb25fXy5maXJzdCxcbiAgICAgICAgcXVlcnk6IHZhcmlhYmxlcy5fX2RlZmF1bHRPcGVyYXRpb25fXy5xdWVyeSxcbiAgICAgICAgc29ydEtleTogdmFyaWFibGVzLl9fZGVmYXVsdE9wZXJhdGlvbl9fLnNvcnRLZXksXG4gICAgICAgIHJldmVyc2U6IHZhcmlhYmxlcy5fX2RlZmF1bHRPcGVyYXRpb25fXy5yZXZlcnNlXG4gICAgICB9XG4gICAgfSwgZnVuY3Rpb24gKHByb2R1Y3RzKSB7XG4gICAgICBwcm9kdWN0cy5hZGQoXCJwYWdlSW5mb1wiLCBmdW5jdGlvbiAocGFnZUluZm8pIHtcbiAgICAgICAgcGFnZUluZm8uYWRkKFwiaGFzTmV4dFBhZ2VcIik7XG4gICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc1ByZXZpb3VzUGFnZVwiKTtcbiAgICAgIH0pO1xuICAgICAgcHJvZHVjdHMuYWRkKFwiZWRnZXNcIiwgZnVuY3Rpb24gKGVkZ2VzKSB7XG4gICAgICAgIGVkZ2VzLmFkZChcImN1cnNvclwiKTtcbiAgICAgICAgZWRnZXMuYWRkKFwibm9kZVwiLCBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgIG5vZGUuYWRkRnJhZ21lbnQoc3ByZWFkcy5Qcm9kdWN0RnJhZ21lbnQpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIGRvY3VtZW50O1xufVxuXG5mdW5jdGlvbiBxdWVyeSQzKGNsaWVudCkge1xuICB2YXIgZG9jdW1lbnQgPSBjbGllbnQuZG9jdW1lbnQoKTtcbiAgdmFyIHNwcmVhZHMgPSB7fTtcbiAgdmFyIHZhcmlhYmxlcyA9IHt9O1xuICB2YXJpYWJsZXMuX19kZWZhdWx0T3BlcmF0aW9uX18gPSB7fTtcbiAgdmFyaWFibGVzLl9fZGVmYXVsdE9wZXJhdGlvbl9fLmhhbmRsZSA9IGNsaWVudC52YXJpYWJsZShcImhhbmRsZVwiLCBcIlN0cmluZyFcIik7XG4gIHNwcmVhZHMuVmFyaWFudEZyYWdtZW50ID0gZG9jdW1lbnQuZGVmaW5lRnJhZ21lbnQoXCJWYXJpYW50RnJhZ21lbnRcIiwgXCJQcm9kdWN0VmFyaWFudFwiLCBmdW5jdGlvbiAocm9vdCkge1xuICAgIHJvb3QuYWRkKFwiaWRcIik7XG4gICAgcm9vdC5hZGQoXCJ0aXRsZVwiKTtcbiAgICByb290LmFkZChcInByaWNlXCIsIGZ1bmN0aW9uIChwcmljZSkge1xuICAgICAgcHJpY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgcHJpY2UuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwicHJpY2VcIiwge1xuICAgICAgYWxpYXM6IFwicHJpY2VWMlwiXG4gICAgfSwgZnVuY3Rpb24gKHByaWNlKSB7XG4gICAgICBwcmljZS5hZGQoXCJhbW91bnRcIik7XG4gICAgICBwcmljZS5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJ3ZWlnaHRcIik7XG4gICAgcm9vdC5hZGQoXCJhdmFpbGFibGVGb3JTYWxlXCIsIHtcbiAgICAgIGFsaWFzOiBcImF2YWlsYWJsZVwiXG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJza3VcIik7XG4gICAgcm9vdC5hZGQoXCJjb21wYXJlQXRQcmljZVwiLCBmdW5jdGlvbiAoY29tcGFyZUF0UHJpY2UpIHtcbiAgICAgIGNvbXBhcmVBdFByaWNlLmFkZChcImFtb3VudFwiKTtcbiAgICAgIGNvbXBhcmVBdFByaWNlLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImNvbXBhcmVBdFByaWNlXCIsIHtcbiAgICAgIGFsaWFzOiBcImNvbXBhcmVBdFByaWNlVjJcIlxuICAgIH0sIGZ1bmN0aW9uIChjb21wYXJlQXRQcmljZSkge1xuICAgICAgY29tcGFyZUF0UHJpY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgY29tcGFyZUF0UHJpY2UuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiaW1hZ2VcIiwgZnVuY3Rpb24gKGltYWdlKSB7XG4gICAgICBpbWFnZS5hZGQoXCJpZFwiKTtcbiAgICAgIGltYWdlLmFkZChcInVybFwiLCB7XG4gICAgICAgIGFsaWFzOiBcInNyY1wiXG4gICAgICB9KTtcbiAgICAgIGltYWdlLmFkZChcImFsdFRleHRcIik7XG4gICAgICBpbWFnZS5hZGQoXCJ3aWR0aFwiKTtcbiAgICAgIGltYWdlLmFkZChcImhlaWdodFwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcInNlbGVjdGVkT3B0aW9uc1wiLCBmdW5jdGlvbiAoc2VsZWN0ZWRPcHRpb25zKSB7XG4gICAgICBzZWxlY3RlZE9wdGlvbnMuYWRkKFwibmFtZVwiKTtcbiAgICAgIHNlbGVjdGVkT3B0aW9ucy5hZGQoXCJ2YWx1ZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcInVuaXRQcmljZVwiLCBmdW5jdGlvbiAodW5pdFByaWNlKSB7XG4gICAgICB1bml0UHJpY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgdW5pdFByaWNlLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcInVuaXRQcmljZU1lYXN1cmVtZW50XCIsIGZ1bmN0aW9uICh1bml0UHJpY2VNZWFzdXJlbWVudCkge1xuICAgICAgdW5pdFByaWNlTWVhc3VyZW1lbnQuYWRkKFwibWVhc3VyZWRUeXBlXCIpO1xuICAgICAgdW5pdFByaWNlTWVhc3VyZW1lbnQuYWRkKFwicXVhbnRpdHlVbml0XCIpO1xuICAgICAgdW5pdFByaWNlTWVhc3VyZW1lbnQuYWRkKFwicXVhbnRpdHlWYWx1ZVwiKTtcbiAgICAgIHVuaXRQcmljZU1lYXN1cmVtZW50LmFkZChcInJlZmVyZW5jZVVuaXRcIik7XG4gICAgICB1bml0UHJpY2VNZWFzdXJlbWVudC5hZGQoXCJyZWZlcmVuY2VWYWx1ZVwiKTtcbiAgICB9KTtcbiAgfSk7XG4gIHNwcmVhZHMuUHJvZHVjdEZyYWdtZW50ID0gZG9jdW1lbnQuZGVmaW5lRnJhZ21lbnQoXCJQcm9kdWN0RnJhZ21lbnRcIiwgXCJQcm9kdWN0XCIsIGZ1bmN0aW9uIChyb290KSB7XG4gICAgcm9vdC5hZGQoXCJpZFwiKTtcbiAgICByb290LmFkZChcImF2YWlsYWJsZUZvclNhbGVcIik7XG4gICAgcm9vdC5hZGQoXCJjcmVhdGVkQXRcIik7XG4gICAgcm9vdC5hZGQoXCJ1cGRhdGVkQXRcIik7XG4gICAgcm9vdC5hZGQoXCJkZXNjcmlwdGlvbkh0bWxcIik7XG4gICAgcm9vdC5hZGQoXCJkZXNjcmlwdGlvblwiKTtcbiAgICByb290LmFkZChcImhhbmRsZVwiKTtcbiAgICByb290LmFkZChcInByb2R1Y3RUeXBlXCIpO1xuICAgIHJvb3QuYWRkKFwidGl0bGVcIik7XG4gICAgcm9vdC5hZGQoXCJ2ZW5kb3JcIik7XG4gICAgcm9vdC5hZGQoXCJwdWJsaXNoZWRBdFwiKTtcbiAgICByb290LmFkZChcIm9ubGluZVN0b3JlVXJsXCIpO1xuICAgIHJvb3QuYWRkKFwib3B0aW9uc1wiLCBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgb3B0aW9ucy5hZGQoXCJuYW1lXCIpO1xuICAgICAgb3B0aW9ucy5hZGQoXCJ2YWx1ZXNcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJpbWFnZXNcIiwge1xuICAgICAgYXJnczoge1xuICAgICAgICBmaXJzdDogMjUwXG4gICAgICB9XG4gICAgfSwgZnVuY3Rpb24gKGltYWdlcykge1xuICAgICAgaW1hZ2VzLmFkZChcInBhZ2VJbmZvXCIsIGZ1bmN0aW9uIChwYWdlSW5mbykge1xuICAgICAgICBwYWdlSW5mby5hZGQoXCJoYXNOZXh0UGFnZVwiKTtcbiAgICAgICAgcGFnZUluZm8uYWRkKFwiaGFzUHJldmlvdXNQYWdlXCIpO1xuICAgICAgfSk7XG4gICAgICBpbWFnZXMuYWRkKFwiZWRnZXNcIiwgZnVuY3Rpb24gKGVkZ2VzKSB7XG4gICAgICAgIGVkZ2VzLmFkZChcImN1cnNvclwiKTtcbiAgICAgICAgZWRnZXMuYWRkKFwibm9kZVwiLCBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgIG5vZGUuYWRkKFwiaWRcIik7XG4gICAgICAgICAgbm9kZS5hZGQoXCJ1cmxcIiwge1xuICAgICAgICAgICAgYWxpYXM6IFwic3JjXCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBub2RlLmFkZChcImFsdFRleHRcIik7XG4gICAgICAgICAgbm9kZS5hZGQoXCJ3aWR0aFwiKTtcbiAgICAgICAgICBub2RlLmFkZChcImhlaWdodFwiKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByb290LmFkZChcInZhcmlhbnRzXCIsIHtcbiAgICAgIGFyZ3M6IHtcbiAgICAgICAgZmlyc3Q6IDI1MFxuICAgICAgfVxuICAgIH0sIGZ1bmN0aW9uICh2YXJpYW50cykge1xuICAgICAgdmFyaWFudHMuYWRkKFwicGFnZUluZm9cIiwgZnVuY3Rpb24gKHBhZ2VJbmZvKSB7XG4gICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc05leHRQYWdlXCIpO1xuICAgICAgICBwYWdlSW5mby5hZGQoXCJoYXNQcmV2aW91c1BhZ2VcIik7XG4gICAgICB9KTtcbiAgICAgIHZhcmlhbnRzLmFkZChcImVkZ2VzXCIsIGZ1bmN0aW9uIChlZGdlcykge1xuICAgICAgICBlZGdlcy5hZGQoXCJjdXJzb3JcIik7XG4gICAgICAgIGVkZ2VzLmFkZChcIm5vZGVcIiwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICBub2RlLmFkZEZyYWdtZW50KHNwcmVhZHMuVmFyaWFudEZyYWdtZW50KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG4gIGRvY3VtZW50LmFkZFF1ZXJ5KFt2YXJpYWJsZXMuX19kZWZhdWx0T3BlcmF0aW9uX18uaGFuZGxlXSwgZnVuY3Rpb24gKHJvb3QpIHtcbiAgICByb290LmFkZChcInByb2R1Y3RCeUhhbmRsZVwiLCB7XG4gICAgICBhcmdzOiB7XG4gICAgICAgIGhhbmRsZTogdmFyaWFibGVzLl9fZGVmYXVsdE9wZXJhdGlvbl9fLmhhbmRsZVxuICAgICAgfVxuICAgIH0sIGZ1bmN0aW9uIChwcm9kdWN0QnlIYW5kbGUpIHtcbiAgICAgIHByb2R1Y3RCeUhhbmRsZS5hZGRGcmFnbWVudChzcHJlYWRzLlByb2R1Y3RGcmFnbWVudCk7XG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gZG9jdW1lbnQ7XG59XG5cbmZ1bmN0aW9uIHF1ZXJ5JDQoY2xpZW50KSB7XG4gIHZhciBkb2N1bWVudCA9IGNsaWVudC5kb2N1bWVudCgpO1xuICB2YXIgc3ByZWFkcyA9IHt9O1xuICB2YXIgdmFyaWFibGVzID0ge307XG4gIHZhcmlhYmxlcy5fX2RlZmF1bHRPcGVyYXRpb25fXyA9IHt9O1xuICB2YXJpYWJsZXMuX19kZWZhdWx0T3BlcmF0aW9uX18ucHJvZHVjdElkID0gY2xpZW50LnZhcmlhYmxlKFwicHJvZHVjdElkXCIsIFwiSUQhXCIpO1xuICBzcHJlYWRzLlZhcmlhbnRGcmFnbWVudCA9IGRvY3VtZW50LmRlZmluZUZyYWdtZW50KFwiVmFyaWFudEZyYWdtZW50XCIsIFwiUHJvZHVjdFZhcmlhbnRcIiwgZnVuY3Rpb24gKHJvb3QpIHtcbiAgICByb290LmFkZChcImlkXCIpO1xuICAgIHJvb3QuYWRkKFwidGl0bGVcIik7XG4gICAgcm9vdC5hZGQoXCJwcmljZVwiLCBmdW5jdGlvbiAocHJpY2UpIHtcbiAgICAgIHByaWNlLmFkZChcImFtb3VudFwiKTtcbiAgICAgIHByaWNlLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcInByaWNlXCIsIHtcbiAgICAgIGFsaWFzOiBcInByaWNlVjJcIlxuICAgIH0sIGZ1bmN0aW9uIChwcmljZSkge1xuICAgICAgcHJpY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgcHJpY2UuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwid2VpZ2h0XCIpO1xuICAgIHJvb3QuYWRkKFwiYXZhaWxhYmxlRm9yU2FsZVwiLCB7XG4gICAgICBhbGlhczogXCJhdmFpbGFibGVcIlxuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwic2t1XCIpO1xuICAgIHJvb3QuYWRkKFwiY29tcGFyZUF0UHJpY2VcIiwgZnVuY3Rpb24gKGNvbXBhcmVBdFByaWNlKSB7XG4gICAgICBjb21wYXJlQXRQcmljZS5hZGQoXCJhbW91bnRcIik7XG4gICAgICBjb21wYXJlQXRQcmljZS5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJjb21wYXJlQXRQcmljZVwiLCB7XG4gICAgICBhbGlhczogXCJjb21wYXJlQXRQcmljZVYyXCJcbiAgICB9LCBmdW5jdGlvbiAoY29tcGFyZUF0UHJpY2UpIHtcbiAgICAgIGNvbXBhcmVBdFByaWNlLmFkZChcImFtb3VudFwiKTtcbiAgICAgIGNvbXBhcmVBdFByaWNlLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImltYWdlXCIsIGZ1bmN0aW9uIChpbWFnZSkge1xuICAgICAgaW1hZ2UuYWRkKFwiaWRcIik7XG4gICAgICBpbWFnZS5hZGQoXCJ1cmxcIiwge1xuICAgICAgICBhbGlhczogXCJzcmNcIlxuICAgICAgfSk7XG4gICAgICBpbWFnZS5hZGQoXCJhbHRUZXh0XCIpO1xuICAgICAgaW1hZ2UuYWRkKFwid2lkdGhcIik7XG4gICAgICBpbWFnZS5hZGQoXCJoZWlnaHRcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJzZWxlY3RlZE9wdGlvbnNcIiwgZnVuY3Rpb24gKHNlbGVjdGVkT3B0aW9ucykge1xuICAgICAgc2VsZWN0ZWRPcHRpb25zLmFkZChcIm5hbWVcIik7XG4gICAgICBzZWxlY3RlZE9wdGlvbnMuYWRkKFwidmFsdWVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJ1bml0UHJpY2VcIiwgZnVuY3Rpb24gKHVuaXRQcmljZSkge1xuICAgICAgdW5pdFByaWNlLmFkZChcImFtb3VudFwiKTtcbiAgICAgIHVuaXRQcmljZS5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJ1bml0UHJpY2VNZWFzdXJlbWVudFwiLCBmdW5jdGlvbiAodW5pdFByaWNlTWVhc3VyZW1lbnQpIHtcbiAgICAgIHVuaXRQcmljZU1lYXN1cmVtZW50LmFkZChcIm1lYXN1cmVkVHlwZVwiKTtcbiAgICAgIHVuaXRQcmljZU1lYXN1cmVtZW50LmFkZChcInF1YW50aXR5VW5pdFwiKTtcbiAgICAgIHVuaXRQcmljZU1lYXN1cmVtZW50LmFkZChcInF1YW50aXR5VmFsdWVcIik7XG4gICAgICB1bml0UHJpY2VNZWFzdXJlbWVudC5hZGQoXCJyZWZlcmVuY2VVbml0XCIpO1xuICAgICAgdW5pdFByaWNlTWVhc3VyZW1lbnQuYWRkKFwicmVmZXJlbmNlVmFsdWVcIik7XG4gICAgfSk7XG4gIH0pO1xuICBzcHJlYWRzLlByb2R1Y3RGcmFnbWVudCA9IGRvY3VtZW50LmRlZmluZUZyYWdtZW50KFwiUHJvZHVjdEZyYWdtZW50XCIsIFwiUHJvZHVjdFwiLCBmdW5jdGlvbiAocm9vdCkge1xuICAgIHJvb3QuYWRkKFwiaWRcIik7XG4gICAgcm9vdC5hZGQoXCJhdmFpbGFibGVGb3JTYWxlXCIpO1xuICAgIHJvb3QuYWRkKFwiY3JlYXRlZEF0XCIpO1xuICAgIHJvb3QuYWRkKFwidXBkYXRlZEF0XCIpO1xuICAgIHJvb3QuYWRkKFwiZGVzY3JpcHRpb25IdG1sXCIpO1xuICAgIHJvb3QuYWRkKFwiZGVzY3JpcHRpb25cIik7XG4gICAgcm9vdC5hZGQoXCJoYW5kbGVcIik7XG4gICAgcm9vdC5hZGQoXCJwcm9kdWN0VHlwZVwiKTtcbiAgICByb290LmFkZChcInRpdGxlXCIpO1xuICAgIHJvb3QuYWRkKFwidmVuZG9yXCIpO1xuICAgIHJvb3QuYWRkKFwicHVibGlzaGVkQXRcIik7XG4gICAgcm9vdC5hZGQoXCJvbmxpbmVTdG9yZVVybFwiKTtcbiAgICByb290LmFkZChcIm9wdGlvbnNcIiwgZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMuYWRkKFwibmFtZVwiKTtcbiAgICAgIG9wdGlvbnMuYWRkKFwidmFsdWVzXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiaW1hZ2VzXCIsIHtcbiAgICAgIGFyZ3M6IHtcbiAgICAgICAgZmlyc3Q6IDI1MFxuICAgICAgfVxuICAgIH0sIGZ1bmN0aW9uIChpbWFnZXMpIHtcbiAgICAgIGltYWdlcy5hZGQoXCJwYWdlSW5mb1wiLCBmdW5jdGlvbiAocGFnZUluZm8pIHtcbiAgICAgICAgcGFnZUluZm8uYWRkKFwiaGFzTmV4dFBhZ2VcIik7XG4gICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc1ByZXZpb3VzUGFnZVwiKTtcbiAgICAgIH0pO1xuICAgICAgaW1hZ2VzLmFkZChcImVkZ2VzXCIsIGZ1bmN0aW9uIChlZGdlcykge1xuICAgICAgICBlZGdlcy5hZGQoXCJjdXJzb3JcIik7XG4gICAgICAgIGVkZ2VzLmFkZChcIm5vZGVcIiwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICBub2RlLmFkZChcImlkXCIpO1xuICAgICAgICAgIG5vZGUuYWRkKFwidXJsXCIsIHtcbiAgICAgICAgICAgIGFsaWFzOiBcInNyY1wiXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgbm9kZS5hZGQoXCJhbHRUZXh0XCIpO1xuICAgICAgICAgIG5vZGUuYWRkKFwid2lkdGhcIik7XG4gICAgICAgICAgbm9kZS5hZGQoXCJoZWlnaHRcIik7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJ2YXJpYW50c1wiLCB7XG4gICAgICBhcmdzOiB7XG4gICAgICAgIGZpcnN0OiAyNTBcbiAgICAgIH1cbiAgICB9LCBmdW5jdGlvbiAodmFyaWFudHMpIHtcbiAgICAgIHZhcmlhbnRzLmFkZChcInBhZ2VJbmZvXCIsIGZ1bmN0aW9uIChwYWdlSW5mbykge1xuICAgICAgICBwYWdlSW5mby5hZGQoXCJoYXNOZXh0UGFnZVwiKTtcbiAgICAgICAgcGFnZUluZm8uYWRkKFwiaGFzUHJldmlvdXNQYWdlXCIpO1xuICAgICAgfSk7XG4gICAgICB2YXJpYW50cy5hZGQoXCJlZGdlc1wiLCBmdW5jdGlvbiAoZWRnZXMpIHtcbiAgICAgICAgZWRnZXMuYWRkKFwiY3Vyc29yXCIpO1xuICAgICAgICBlZGdlcy5hZGQoXCJub2RlXCIsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgbm9kZS5hZGRGcmFnbWVudChzcHJlYWRzLlZhcmlhbnRGcmFnbWVudCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuICBkb2N1bWVudC5hZGRRdWVyeShbdmFyaWFibGVzLl9fZGVmYXVsdE9wZXJhdGlvbl9fLnByb2R1Y3RJZF0sIGZ1bmN0aW9uIChyb290KSB7XG4gICAgcm9vdC5hZGQoXCJwcm9kdWN0UmVjb21tZW5kYXRpb25zXCIsIHtcbiAgICAgIGFyZ3M6IHtcbiAgICAgICAgcHJvZHVjdElkOiB2YXJpYWJsZXMuX19kZWZhdWx0T3BlcmF0aW9uX18ucHJvZHVjdElkXG4gICAgICB9XG4gICAgfSwgZnVuY3Rpb24gKHByb2R1Y3RSZWNvbW1lbmRhdGlvbnMpIHtcbiAgICAgIHByb2R1Y3RSZWNvbW1lbmRhdGlvbnMuYWRkRnJhZ21lbnQoc3ByZWFkcy5Qcm9kdWN0RnJhZ21lbnQpO1xuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIGRvY3VtZW50O1xufVxuXG4vLyBHcmFwaFFMXG4vKipcbiAqIFRoZSBKUyBCdXkgU0RLIHByb2R1Y3QgcmVzb3VyY2VcbiAqIEBjbGFzc1xuICovXG5cbnZhciBQcm9kdWN0UmVzb3VyY2UgPSBmdW5jdGlvbiAoX1Jlc291cmNlKSB7XG4gIGluaGVyaXRzJDEoUHJvZHVjdFJlc291cmNlLCBfUmVzb3VyY2UpO1xuXG4gIGZ1bmN0aW9uIFByb2R1Y3RSZXNvdXJjZSgpIHtcbiAgICBjbGFzc0NhbGxDaGVjayQxKHRoaXMsIFByb2R1Y3RSZXNvdXJjZSk7XG4gICAgcmV0dXJuIHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4kMSh0aGlzLCAoUHJvZHVjdFJlc291cmNlLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUHJvZHVjdFJlc291cmNlKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH1cblxuICBjcmVhdGVDbGFzcyQxKFByb2R1Y3RSZXNvdXJjZSwgW3tcbiAgICBrZXk6ICdmZXRjaEFsbCcsXG5cblxuICAgIC8qKlxuICAgICAqIEZldGNoZXMgYWxsIHByb2R1Y3RzIG9uIHRoZSBzaG9wLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBjbGllbnQucHJvZHVjdC5mZXRjaEFsbCgpLnRoZW4oKHByb2R1Y3RzKSA9PiB7XG4gICAgICogICAvLyBEbyBzb21ldGhpbmcgd2l0aCB0aGUgcHJvZHVjdHNcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7SW50fSBbcGFnZVNpemVdIFRoZSBudW1iZXIgb2YgcHJvZHVjdHMgdG8gZmV0Y2ggcGVyIHBhZ2VcbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlfEdyYXBoTW9kZWxbXX0gQSBwcm9taXNlIHJlc29sdmluZyB3aXRoIGFuIGFycmF5IG9mIGBHcmFwaE1vZGVsYHMgb2YgdGhlIHByb2R1Y3RzLlxuICAgICAqL1xuICAgIHZhbHVlOiBmdW5jdGlvbiBmZXRjaEFsbCgpIHtcbiAgICAgIHZhciBmaXJzdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogMjA7XG5cbiAgICAgIHJldHVybiB0aGlzLmdyYXBoUUxDbGllbnQuc2VuZChxdWVyeSQyLCB7IGZpcnN0OiBmaXJzdCB9KS50aGVuKGRlZmF1bHRSZXNvbHZlcigncHJvZHVjdHMnKSkudGhlbihwYWdpbmF0ZVByb2R1Y3RDb25uZWN0aW9uc0FuZFJlc29sdmUodGhpcy5ncmFwaFFMQ2xpZW50KSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmV0Y2hlcyBhIHNpbmdsZSBwcm9kdWN0IGJ5IElEIG9uIHRoZSBzaG9wLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBjbGllbnQucHJvZHVjdC5mZXRjaCgnWGs5bE0ySmtOekZtTnpJUTROVElZNFpERmk5RGFHVmphMjkxZEM5bE0ySmtOPT0nKS50aGVuKChwcm9kdWN0KSA9PiB7XG4gICAgICogICAvLyBEbyBzb21ldGhpbmcgd2l0aCB0aGUgcHJvZHVjdFxuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGlkIFRoZSBpZCBvZiB0aGUgcHJvZHVjdCB0byBmZXRjaC5cbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlfEdyYXBoTW9kZWx9IEEgcHJvbWlzZSByZXNvbHZpbmcgd2l0aCBhIGBHcmFwaE1vZGVsYCBvZiB0aGUgcHJvZHVjdC5cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnZmV0Y2gnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBmZXRjaChpZCkge1xuICAgICAgcmV0dXJuIHRoaXMuZ3JhcGhRTENsaWVudC5zZW5kKHF1ZXJ5LCB7IGlkOiBpZCB9KS50aGVuKGRlZmF1bHRSZXNvbHZlcignbm9kZScpKS50aGVuKHBhZ2luYXRlUHJvZHVjdENvbm5lY3Rpb25zQW5kUmVzb2x2ZSh0aGlzLmdyYXBoUUxDbGllbnQpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGZXRjaGVzIG11bHRpcGxlIHByb2R1Y3RzIGJ5IElEIG9uIHRoZSBzaG9wLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBjb25zdCBpZHMgPSBbJ1hrOWxNMkprTnpGbU56SVE0TlRJWTRaREZpOURhR1ZqYTI5MWRDOWxNMkprTj09JywgJ1oybGtPaTh2YzJodmNHbG1lUzlRY205a2RXTjBMemM0TlRjNU9Ea3pPRFE9J107XG4gICAgICogY2xpZW50LnByb2R1Y3QuZmV0Y2hNdWx0aXBsZShpZHMpLnRoZW4oKHByb2R1Y3RzKSA9PiB7XG4gICAgICogICAvLyBEbyBzb21ldGhpbmcgd2l0aCB0aGUgcHJvZHVjdHNcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nW119IGlkcyBUaGUgaWRzIG9mIHRoZSBwcm9kdWN0cyB0byBmZXRjaFxuICAgICAqIEByZXR1cm4ge1Byb21pc2V8R3JhcGhNb2RlbFtdfSBBIHByb21pc2UgcmVzb2x2aW5nIHdpdGggYSBgR3JhcGhNb2RlbGAgb2YgdGhlIHByb2R1Y3QuXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2ZldGNoTXVsdGlwbGUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBmZXRjaE11bHRpcGxlKGlkcykge1xuICAgICAgcmV0dXJuIHRoaXMuZ3JhcGhRTENsaWVudC5zZW5kKHF1ZXJ5JDEsIHsgaWRzOiBpZHMgfSkudGhlbihkZWZhdWx0UmVzb2x2ZXIoJ25vZGVzJykpLnRoZW4ocGFnaW5hdGVQcm9kdWN0Q29ubmVjdGlvbnNBbmRSZXNvbHZlKHRoaXMuZ3JhcGhRTENsaWVudCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZldGNoZXMgYSBzaW5nbGUgcHJvZHVjdCBieSBoYW5kbGUgb24gdGhlIHNob3AuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGNsaWVudC5wcm9kdWN0LmZldGNoQnlIYW5kbGUoJ215LXByb2R1Y3QnKS50aGVuKChwcm9kdWN0KSA9PiB7XG4gICAgICogICAvLyBEbyBzb21ldGhpbmcgd2l0aCB0aGUgcHJvZHVjdFxuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGhhbmRsZSBUaGUgaGFuZGxlIG9mIHRoZSBwcm9kdWN0IHRvIGZldGNoLlxuICAgICAqIEByZXR1cm4ge1Byb21pc2V8R3JhcGhNb2RlbH0gQSBwcm9taXNlIHJlc29sdmluZyB3aXRoIGEgYEdyYXBoTW9kZWxgIG9mIHRoZSBwcm9kdWN0LlxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdmZXRjaEJ5SGFuZGxlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZmV0Y2hCeUhhbmRsZShoYW5kbGUpIHtcbiAgICAgIHJldHVybiB0aGlzLmdyYXBoUUxDbGllbnQuc2VuZChxdWVyeSQzLCB7IGhhbmRsZTogaGFuZGxlIH0pLnRoZW4oZGVmYXVsdFJlc29sdmVyKCdwcm9kdWN0QnlIYW5kbGUnKSkudGhlbihwYWdpbmF0ZVByb2R1Y3RDb25uZWN0aW9uc0FuZFJlc29sdmUodGhpcy5ncmFwaFFMQ2xpZW50KSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmV0Y2hlcyBhbGwgcHJvZHVjdHMgb24gdGhlIHNob3AgdGhhdCBtYXRjaCB0aGUgcXVlcnkuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGNsaWVudC5wcm9kdWN0LmZldGNoUXVlcnkoe2ZpcnN0OiAyMCwgc29ydEtleTogJ0NSRUFURURfQVQnLCByZXZlcnNlOiB0cnVlfSkudGhlbigocHJvZHVjdHMpID0+IHtcbiAgICAgKiAgIC8vIERvIHNvbWV0aGluZyB3aXRoIHRoZSBmaXJzdCAxMCBwcm9kdWN0cyBzb3J0ZWQgYnkgdGl0bGUgaW4gYXNjZW5kaW5nIG9yZGVyXG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW2FyZ3NdIEFuIG9iamVjdCBzcGVjaWZ5aW5nIHRoZSBxdWVyeSBkYXRhIGNvbnRhaW5pbmcgemVybyBvciBtb3JlIG9mOlxuICAgICAqICAgQHBhcmFtIHtJbnR9IFthcmdzLmZpcnN0PTIwXSBUaGUgcmVsYXkgYGZpcnN0YCBwYXJhbS4gVGhpcyBzcGVjaWZpZXMgcGFnZSBzaXplLlxuICAgICAqICAgQHBhcmFtIHtTdHJpbmd9IFthcmdzLnNvcnRLZXk9SURdIFRoZSBrZXkgdG8gc29ydCByZXN1bHRzIGJ5LiBBdmFpbGFibGUgdmFsdWVzIGFyZVxuICAgICAqICAgZG9jdW1lbnRlZCBhcyB7QGxpbmsgaHR0cHM6Ly9oZWxwLnNob3BpZnkuY29tL2FwaS9zdG9yZWZyb250LWFwaS9yZWZlcmVuY2UvZW51bS9wcm9kdWN0c29ydGtleXN8UHJvZHVjdCBTb3J0IEtleXN9LlxuICAgICAqICAgQHBhcmFtIHtTdHJpbmd9IFthcmdzLnF1ZXJ5XSBBIHF1ZXJ5IHN0cmluZy4gU2VlIGZ1bGwgZG9jdW1lbnRhdGlvbiB7QGxpbmsgaHR0cHM6Ly9oZWxwLnNob3BpZnkuY29tL2FwaS9zdG9yZWZyb250LWFwaS9yZWZlcmVuY2Uvb2JqZWN0L3Nob3AjcHJvZHVjdHN8aGVyZX1cbiAgICAgKiAgIEBwYXJhbSB7Qm9vbGVhbn0gW2FyZ3MucmV2ZXJzZV0gV2hldGhlciBvciBub3QgdG8gcmV2ZXJzZSB0aGUgc29ydCBvcmRlciBvZiB0aGUgcmVzdWx0c1xuICAgICAqIEByZXR1cm4ge1Byb21pc2V8R3JhcGhNb2RlbFtdfSBBIHByb21pc2UgcmVzb2x2aW5nIHdpdGggYW4gYXJyYXkgb2YgYEdyYXBoTW9kZWxgcyBvZiB0aGUgcHJvZHVjdHMuXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2ZldGNoUXVlcnknLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBmZXRjaFF1ZXJ5KCkge1xuICAgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuICAgICAgICAgIF9yZWYkZmlyc3QgPSBfcmVmLmZpcnN0LFxuICAgICAgICAgIGZpcnN0ID0gX3JlZiRmaXJzdCA9PT0gdW5kZWZpbmVkID8gMjAgOiBfcmVmJGZpcnN0LFxuICAgICAgICAgIF9yZWYkc29ydEtleSA9IF9yZWYuc29ydEtleSxcbiAgICAgICAgICBzb3J0S2V5ID0gX3JlZiRzb3J0S2V5ID09PSB1bmRlZmluZWQgPyAnSUQnIDogX3JlZiRzb3J0S2V5LFxuICAgICAgICAgIHF1ZXJ5JCQxID0gX3JlZi5xdWVyeSxcbiAgICAgICAgICByZXZlcnNlID0gX3JlZi5yZXZlcnNlO1xuXG4gICAgICByZXR1cm4gdGhpcy5ncmFwaFFMQ2xpZW50LnNlbmQocXVlcnkkMiwge1xuICAgICAgICBmaXJzdDogZmlyc3QsXG4gICAgICAgIHNvcnRLZXk6IHNvcnRLZXksXG4gICAgICAgIHF1ZXJ5OiBxdWVyeSQkMSxcbiAgICAgICAgcmV2ZXJzZTogcmV2ZXJzZVxuICAgICAgfSkudGhlbihkZWZhdWx0UmVzb2x2ZXIoJ3Byb2R1Y3RzJykpLnRoZW4ocGFnaW5hdGVQcm9kdWN0Q29ubmVjdGlvbnNBbmRSZXNvbHZlKHRoaXMuZ3JhcGhRTENsaWVudCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZpbmQgcmVjb21tZW5kZWQgcHJvZHVjdHMgcmVsYXRlZCB0byBhIGdpdmVuIHByb2R1Y3RJZC5cbiAgICAgKiBUbyBsZWFybiBtb3JlIGFib3V0IGhvdyByZWNvbW1lbmRhdGlvbnMgYXJlIGdlbmVyYXRlZCwgc2VlIGh0dHBzOi8vc2hvcGlmeS5kZXYvdGhlbWVzL3Byb2R1Y3QtbWVyY2hhbmRpc2luZy9yZWNvbW1lbmRhdGlvbnMuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGNvbnN0IHByb2R1Y3RJZCAnWGs5bE0ySmtOekZtTnpJUTROVElZNFpERmk5RGFHVmphMjkxZEM5bE0ySmtOPT0nO1xuICAgICAqIGNsaWVudC5wcm9kdWN0LmZldGNoUHJvZHVjdFJlY29tbWVuZGF0aW9ucyhwcm9kdWN0SWQpLnRoZW4oKHByb2R1Y3RzKSA9PiB7XG4gICAgICogICAvLyBEbyBzb21ldGhpbmcgd2l0aCB0aGUgcHJvZHVjdHNcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9kdWN0SWQgVGhlIGlkIG9mIHRoZSBwcm9kdWN0IHRvIGZldGNoLlxuICAgICAqIEByZXR1cm4ge1Byb21pc2V8R3JhcGhNb2RlbFtdfSBBIHByb21pc2UgcmVzb2x2aW5nIHdpdGggYW4gYXJyYXkgb2YgYEdyYXBoTW9kZWxgcyBvZiB0aGUgcHJvZHVjdHMuXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2ZldGNoUmVjb21tZW5kYXRpb25zJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZmV0Y2hSZWNvbW1lbmRhdGlvbnMocHJvZHVjdElkKSB7XG4gICAgICByZXR1cm4gdGhpcy5ncmFwaFFMQ2xpZW50LnNlbmQocXVlcnkkNCwgeyBwcm9kdWN0SWQ6IHByb2R1Y3RJZCB9KS50aGVuKGRlZmF1bHRSZXNvbHZlcigncHJvZHVjdFJlY29tbWVuZGF0aW9ucycpKS50aGVuKHBhZ2luYXRlUHJvZHVjdENvbm5lY3Rpb25zQW5kUmVzb2x2ZSh0aGlzLmdyYXBoUUxDbGllbnQpKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdoZWxwZXJzJyxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHtcbiAgICAgIHJldHVybiBwcm9kdWN0SGVscGVycztcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIFByb2R1Y3RSZXNvdXJjZTtcbn0oUmVzb3VyY2UpO1xuXG5mdW5jdGlvbiBxdWVyeSQ1KGNsaWVudCkge1xuICB2YXIgZG9jdW1lbnQgPSBjbGllbnQuZG9jdW1lbnQoKTtcbiAgdmFyIHNwcmVhZHMgPSB7fTtcbiAgdmFyIHZhcmlhYmxlcyA9IHt9O1xuICB2YXJpYWJsZXMuX19kZWZhdWx0T3BlcmF0aW9uX18gPSB7fTtcbiAgdmFyaWFibGVzLl9fZGVmYXVsdE9wZXJhdGlvbl9fLmlkID0gY2xpZW50LnZhcmlhYmxlKFwiaWRcIiwgXCJJRCFcIik7XG4gIHNwcmVhZHMuQ29sbGVjdGlvbkZyYWdtZW50ID0gZG9jdW1lbnQuZGVmaW5lRnJhZ21lbnQoXCJDb2xsZWN0aW9uRnJhZ21lbnRcIiwgXCJDb2xsZWN0aW9uXCIsIGZ1bmN0aW9uIChyb290KSB7XG4gICAgcm9vdC5hZGQoXCJpZFwiKTtcbiAgICByb290LmFkZChcImhhbmRsZVwiKTtcbiAgICByb290LmFkZChcImRlc2NyaXB0aW9uXCIpO1xuICAgIHJvb3QuYWRkKFwiZGVzY3JpcHRpb25IdG1sXCIpO1xuICAgIHJvb3QuYWRkKFwidXBkYXRlZEF0XCIpO1xuICAgIHJvb3QuYWRkKFwidGl0bGVcIik7XG4gICAgcm9vdC5hZGQoXCJpbWFnZVwiLCBmdW5jdGlvbiAoaW1hZ2UpIHtcbiAgICAgIGltYWdlLmFkZChcImlkXCIpO1xuICAgICAgaW1hZ2UuYWRkKFwidXJsXCIsIHtcbiAgICAgICAgYWxpYXM6IFwic3JjXCJcbiAgICAgIH0pO1xuICAgICAgaW1hZ2UuYWRkKFwiYWx0VGV4dFwiKTtcbiAgICB9KTtcbiAgfSk7XG4gIGRvY3VtZW50LmFkZFF1ZXJ5KFt2YXJpYWJsZXMuX19kZWZhdWx0T3BlcmF0aW9uX18uaWRdLCBmdW5jdGlvbiAocm9vdCkge1xuICAgIHJvb3QuYWRkKFwibm9kZVwiLCB7XG4gICAgICBhcmdzOiB7XG4gICAgICAgIGlkOiB2YXJpYWJsZXMuX19kZWZhdWx0T3BlcmF0aW9uX18uaWRcbiAgICAgIH1cbiAgICB9LCBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgbm9kZS5hZGRGcmFnbWVudChzcHJlYWRzLkNvbGxlY3Rpb25GcmFnbWVudCk7XG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gZG9jdW1lbnQ7XG59XG5cbmZ1bmN0aW9uIHF1ZXJ5JDYoY2xpZW50KSB7XG4gIHZhciBkb2N1bWVudCA9IGNsaWVudC5kb2N1bWVudCgpO1xuICB2YXIgc3ByZWFkcyA9IHt9O1xuICB2YXIgdmFyaWFibGVzID0ge307XG4gIHZhcmlhYmxlcy5fX2RlZmF1bHRPcGVyYXRpb25fXyA9IHt9O1xuICB2YXJpYWJsZXMuX19kZWZhdWx0T3BlcmF0aW9uX18uaWQgPSBjbGllbnQudmFyaWFibGUoXCJpZFwiLCBcIklEIVwiKTtcbiAgdmFyaWFibGVzLl9fZGVmYXVsdE9wZXJhdGlvbl9fLnByb2R1Y3RzRmlyc3QgPSBjbGllbnQudmFyaWFibGUoXCJwcm9kdWN0c0ZpcnN0XCIsIFwiSW50IVwiKTtcbiAgc3ByZWFkcy5WYXJpYW50RnJhZ21lbnQgPSBkb2N1bWVudC5kZWZpbmVGcmFnbWVudChcIlZhcmlhbnRGcmFnbWVudFwiLCBcIlByb2R1Y3RWYXJpYW50XCIsIGZ1bmN0aW9uIChyb290KSB7XG4gICAgcm9vdC5hZGQoXCJpZFwiKTtcbiAgICByb290LmFkZChcInRpdGxlXCIpO1xuICAgIHJvb3QuYWRkKFwicHJpY2VcIiwgZnVuY3Rpb24gKHByaWNlKSB7XG4gICAgICBwcmljZS5hZGQoXCJhbW91bnRcIik7XG4gICAgICBwcmljZS5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJwcmljZVwiLCB7XG4gICAgICBhbGlhczogXCJwcmljZVYyXCJcbiAgICB9LCBmdW5jdGlvbiAocHJpY2UpIHtcbiAgICAgIHByaWNlLmFkZChcImFtb3VudFwiKTtcbiAgICAgIHByaWNlLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcIndlaWdodFwiKTtcbiAgICByb290LmFkZChcImF2YWlsYWJsZUZvclNhbGVcIiwge1xuICAgICAgYWxpYXM6IFwiYXZhaWxhYmxlXCJcbiAgICB9KTtcbiAgICByb290LmFkZChcInNrdVwiKTtcbiAgICByb290LmFkZChcImNvbXBhcmVBdFByaWNlXCIsIGZ1bmN0aW9uIChjb21wYXJlQXRQcmljZSkge1xuICAgICAgY29tcGFyZUF0UHJpY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgY29tcGFyZUF0UHJpY2UuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiY29tcGFyZUF0UHJpY2VcIiwge1xuICAgICAgYWxpYXM6IFwiY29tcGFyZUF0UHJpY2VWMlwiXG4gICAgfSwgZnVuY3Rpb24gKGNvbXBhcmVBdFByaWNlKSB7XG4gICAgICBjb21wYXJlQXRQcmljZS5hZGQoXCJhbW91bnRcIik7XG4gICAgICBjb21wYXJlQXRQcmljZS5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJpbWFnZVwiLCBmdW5jdGlvbiAoaW1hZ2UpIHtcbiAgICAgIGltYWdlLmFkZChcImlkXCIpO1xuICAgICAgaW1hZ2UuYWRkKFwidXJsXCIsIHtcbiAgICAgICAgYWxpYXM6IFwic3JjXCJcbiAgICAgIH0pO1xuICAgICAgaW1hZ2UuYWRkKFwiYWx0VGV4dFwiKTtcbiAgICAgIGltYWdlLmFkZChcIndpZHRoXCIpO1xuICAgICAgaW1hZ2UuYWRkKFwiaGVpZ2h0XCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwic2VsZWN0ZWRPcHRpb25zXCIsIGZ1bmN0aW9uIChzZWxlY3RlZE9wdGlvbnMpIHtcbiAgICAgIHNlbGVjdGVkT3B0aW9ucy5hZGQoXCJuYW1lXCIpO1xuICAgICAgc2VsZWN0ZWRPcHRpb25zLmFkZChcInZhbHVlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwidW5pdFByaWNlXCIsIGZ1bmN0aW9uICh1bml0UHJpY2UpIHtcbiAgICAgIHVuaXRQcmljZS5hZGQoXCJhbW91bnRcIik7XG4gICAgICB1bml0UHJpY2UuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwidW5pdFByaWNlTWVhc3VyZW1lbnRcIiwgZnVuY3Rpb24gKHVuaXRQcmljZU1lYXN1cmVtZW50KSB7XG4gICAgICB1bml0UHJpY2VNZWFzdXJlbWVudC5hZGQoXCJtZWFzdXJlZFR5cGVcIik7XG4gICAgICB1bml0UHJpY2VNZWFzdXJlbWVudC5hZGQoXCJxdWFudGl0eVVuaXRcIik7XG4gICAgICB1bml0UHJpY2VNZWFzdXJlbWVudC5hZGQoXCJxdWFudGl0eVZhbHVlXCIpO1xuICAgICAgdW5pdFByaWNlTWVhc3VyZW1lbnQuYWRkKFwicmVmZXJlbmNlVW5pdFwiKTtcbiAgICAgIHVuaXRQcmljZU1lYXN1cmVtZW50LmFkZChcInJlZmVyZW5jZVZhbHVlXCIpO1xuICAgIH0pO1xuICB9KTtcbiAgc3ByZWFkcy5Db2xsZWN0aW9uRnJhZ21lbnQgPSBkb2N1bWVudC5kZWZpbmVGcmFnbWVudChcIkNvbGxlY3Rpb25GcmFnbWVudFwiLCBcIkNvbGxlY3Rpb25cIiwgZnVuY3Rpb24gKHJvb3QpIHtcbiAgICByb290LmFkZChcImlkXCIpO1xuICAgIHJvb3QuYWRkKFwiaGFuZGxlXCIpO1xuICAgIHJvb3QuYWRkKFwiZGVzY3JpcHRpb25cIik7XG4gICAgcm9vdC5hZGQoXCJkZXNjcmlwdGlvbkh0bWxcIik7XG4gICAgcm9vdC5hZGQoXCJ1cGRhdGVkQXRcIik7XG4gICAgcm9vdC5hZGQoXCJ0aXRsZVwiKTtcbiAgICByb290LmFkZChcImltYWdlXCIsIGZ1bmN0aW9uIChpbWFnZSkge1xuICAgICAgaW1hZ2UuYWRkKFwiaWRcIik7XG4gICAgICBpbWFnZS5hZGQoXCJ1cmxcIiwge1xuICAgICAgICBhbGlhczogXCJzcmNcIlxuICAgICAgfSk7XG4gICAgICBpbWFnZS5hZGQoXCJhbHRUZXh0XCIpO1xuICAgIH0pO1xuICB9KTtcbiAgc3ByZWFkcy5Qcm9kdWN0RnJhZ21lbnQgPSBkb2N1bWVudC5kZWZpbmVGcmFnbWVudChcIlByb2R1Y3RGcmFnbWVudFwiLCBcIlByb2R1Y3RcIiwgZnVuY3Rpb24gKHJvb3QpIHtcbiAgICByb290LmFkZChcImlkXCIpO1xuICAgIHJvb3QuYWRkKFwiYXZhaWxhYmxlRm9yU2FsZVwiKTtcbiAgICByb290LmFkZChcImNyZWF0ZWRBdFwiKTtcbiAgICByb290LmFkZChcInVwZGF0ZWRBdFwiKTtcbiAgICByb290LmFkZChcImRlc2NyaXB0aW9uSHRtbFwiKTtcbiAgICByb290LmFkZChcImRlc2NyaXB0aW9uXCIpO1xuICAgIHJvb3QuYWRkKFwiaGFuZGxlXCIpO1xuICAgIHJvb3QuYWRkKFwicHJvZHVjdFR5cGVcIik7XG4gICAgcm9vdC5hZGQoXCJ0aXRsZVwiKTtcbiAgICByb290LmFkZChcInZlbmRvclwiKTtcbiAgICByb290LmFkZChcInB1Ymxpc2hlZEF0XCIpO1xuICAgIHJvb3QuYWRkKFwib25saW5lU3RvcmVVcmxcIik7XG4gICAgcm9vdC5hZGQoXCJvcHRpb25zXCIsIGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICBvcHRpb25zLmFkZChcIm5hbWVcIik7XG4gICAgICBvcHRpb25zLmFkZChcInZhbHVlc1wiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImltYWdlc1wiLCB7XG4gICAgICBhcmdzOiB7XG4gICAgICAgIGZpcnN0OiAyNTBcbiAgICAgIH1cbiAgICB9LCBmdW5jdGlvbiAoaW1hZ2VzKSB7XG4gICAgICBpbWFnZXMuYWRkKFwicGFnZUluZm9cIiwgZnVuY3Rpb24gKHBhZ2VJbmZvKSB7XG4gICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc05leHRQYWdlXCIpO1xuICAgICAgICBwYWdlSW5mby5hZGQoXCJoYXNQcmV2aW91c1BhZ2VcIik7XG4gICAgICB9KTtcbiAgICAgIGltYWdlcy5hZGQoXCJlZGdlc1wiLCBmdW5jdGlvbiAoZWRnZXMpIHtcbiAgICAgICAgZWRnZXMuYWRkKFwiY3Vyc29yXCIpO1xuICAgICAgICBlZGdlcy5hZGQoXCJub2RlXCIsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgbm9kZS5hZGQoXCJpZFwiKTtcbiAgICAgICAgICBub2RlLmFkZChcInVybFwiLCB7XG4gICAgICAgICAgICBhbGlhczogXCJzcmNcIlxuICAgICAgICAgIH0pO1xuICAgICAgICAgIG5vZGUuYWRkKFwiYWx0VGV4dFwiKTtcbiAgICAgICAgICBub2RlLmFkZChcIndpZHRoXCIpO1xuICAgICAgICAgIG5vZGUuYWRkKFwiaGVpZ2h0XCIpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwidmFyaWFudHNcIiwge1xuICAgICAgYXJnczoge1xuICAgICAgICBmaXJzdDogMjUwXG4gICAgICB9XG4gICAgfSwgZnVuY3Rpb24gKHZhcmlhbnRzKSB7XG4gICAgICB2YXJpYW50cy5hZGQoXCJwYWdlSW5mb1wiLCBmdW5jdGlvbiAocGFnZUluZm8pIHtcbiAgICAgICAgcGFnZUluZm8uYWRkKFwiaGFzTmV4dFBhZ2VcIik7XG4gICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc1ByZXZpb3VzUGFnZVwiKTtcbiAgICAgIH0pO1xuICAgICAgdmFyaWFudHMuYWRkKFwiZWRnZXNcIiwgZnVuY3Rpb24gKGVkZ2VzKSB7XG4gICAgICAgIGVkZ2VzLmFkZChcImN1cnNvclwiKTtcbiAgICAgICAgZWRnZXMuYWRkKFwibm9kZVwiLCBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgIG5vZGUuYWRkRnJhZ21lbnQoc3ByZWFkcy5WYXJpYW50RnJhZ21lbnQpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbiAgZG9jdW1lbnQuYWRkUXVlcnkoW3ZhcmlhYmxlcy5fX2RlZmF1bHRPcGVyYXRpb25fXy5pZCwgdmFyaWFibGVzLl9fZGVmYXVsdE9wZXJhdGlvbl9fLnByb2R1Y3RzRmlyc3RdLCBmdW5jdGlvbiAocm9vdCkge1xuICAgIHJvb3QuYWRkKFwibm9kZVwiLCB7XG4gICAgICBhcmdzOiB7XG4gICAgICAgIGlkOiB2YXJpYWJsZXMuX19kZWZhdWx0T3BlcmF0aW9uX18uaWRcbiAgICAgIH1cbiAgICB9LCBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgbm9kZS5hZGRGcmFnbWVudChzcHJlYWRzLkNvbGxlY3Rpb25GcmFnbWVudCk7XG4gICAgICBub2RlLmFkZElubGluZUZyYWdtZW50T24oXCJDb2xsZWN0aW9uXCIsIGZ1bmN0aW9uIChDb2xsZWN0aW9uKSB7XG4gICAgICAgIENvbGxlY3Rpb24uYWRkKFwicHJvZHVjdHNcIiwge1xuICAgICAgICAgIGFyZ3M6IHtcbiAgICAgICAgICAgIGZpcnN0OiB2YXJpYWJsZXMuX19kZWZhdWx0T3BlcmF0aW9uX18ucHJvZHVjdHNGaXJzdFxuICAgICAgICAgIH1cbiAgICAgICAgfSwgZnVuY3Rpb24gKHByb2R1Y3RzKSB7XG4gICAgICAgICAgcHJvZHVjdHMuYWRkKFwicGFnZUluZm9cIiwgZnVuY3Rpb24gKHBhZ2VJbmZvKSB7XG4gICAgICAgICAgICBwYWdlSW5mby5hZGQoXCJoYXNOZXh0UGFnZVwiKTtcbiAgICAgICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc1ByZXZpb3VzUGFnZVwiKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBwcm9kdWN0cy5hZGQoXCJlZGdlc1wiLCBmdW5jdGlvbiAoZWRnZXMpIHtcbiAgICAgICAgICAgIGVkZ2VzLmFkZChcImN1cnNvclwiKTtcbiAgICAgICAgICAgIGVkZ2VzLmFkZChcIm5vZGVcIiwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgICAgbm9kZS5hZGRGcmFnbWVudChzcHJlYWRzLlByb2R1Y3RGcmFnbWVudCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG4gIHJldHVybiBkb2N1bWVudDtcbn1cblxuZnVuY3Rpb24gcXVlcnkkNyhjbGllbnQpIHtcbiAgdmFyIGRvY3VtZW50ID0gY2xpZW50LmRvY3VtZW50KCk7XG4gIHZhciBzcHJlYWRzID0ge307XG4gIHZhciB2YXJpYWJsZXMgPSB7fTtcbiAgdmFyaWFibGVzLl9fZGVmYXVsdE9wZXJhdGlvbl9fID0ge307XG4gIHZhcmlhYmxlcy5fX2RlZmF1bHRPcGVyYXRpb25fXy5maXJzdCA9IGNsaWVudC52YXJpYWJsZShcImZpcnN0XCIsIFwiSW50IVwiKTtcbiAgdmFyaWFibGVzLl9fZGVmYXVsdE9wZXJhdGlvbl9fLnF1ZXJ5ID0gY2xpZW50LnZhcmlhYmxlKFwicXVlcnlcIiwgXCJTdHJpbmdcIik7XG4gIHZhcmlhYmxlcy5fX2RlZmF1bHRPcGVyYXRpb25fXy5zb3J0S2V5ID0gY2xpZW50LnZhcmlhYmxlKFwic29ydEtleVwiLCBcIkNvbGxlY3Rpb25Tb3J0S2V5c1wiKTtcbiAgdmFyaWFibGVzLl9fZGVmYXVsdE9wZXJhdGlvbl9fLnJldmVyc2UgPSBjbGllbnQudmFyaWFibGUoXCJyZXZlcnNlXCIsIFwiQm9vbGVhblwiKTtcbiAgc3ByZWFkcy5Db2xsZWN0aW9uRnJhZ21lbnQgPSBkb2N1bWVudC5kZWZpbmVGcmFnbWVudChcIkNvbGxlY3Rpb25GcmFnbWVudFwiLCBcIkNvbGxlY3Rpb25cIiwgZnVuY3Rpb24gKHJvb3QpIHtcbiAgICByb290LmFkZChcImlkXCIpO1xuICAgIHJvb3QuYWRkKFwiaGFuZGxlXCIpO1xuICAgIHJvb3QuYWRkKFwiZGVzY3JpcHRpb25cIik7XG4gICAgcm9vdC5hZGQoXCJkZXNjcmlwdGlvbkh0bWxcIik7XG4gICAgcm9vdC5hZGQoXCJ1cGRhdGVkQXRcIik7XG4gICAgcm9vdC5hZGQoXCJ0aXRsZVwiKTtcbiAgICByb290LmFkZChcImltYWdlXCIsIGZ1bmN0aW9uIChpbWFnZSkge1xuICAgICAgaW1hZ2UuYWRkKFwiaWRcIik7XG4gICAgICBpbWFnZS5hZGQoXCJ1cmxcIiwge1xuICAgICAgICBhbGlhczogXCJzcmNcIlxuICAgICAgfSk7XG4gICAgICBpbWFnZS5hZGQoXCJhbHRUZXh0XCIpO1xuICAgIH0pO1xuICB9KTtcbiAgZG9jdW1lbnQuYWRkUXVlcnkoW3ZhcmlhYmxlcy5fX2RlZmF1bHRPcGVyYXRpb25fXy5maXJzdCwgdmFyaWFibGVzLl9fZGVmYXVsdE9wZXJhdGlvbl9fLnF1ZXJ5LCB2YXJpYWJsZXMuX19kZWZhdWx0T3BlcmF0aW9uX18uc29ydEtleSwgdmFyaWFibGVzLl9fZGVmYXVsdE9wZXJhdGlvbl9fLnJldmVyc2VdLCBmdW5jdGlvbiAocm9vdCkge1xuICAgIHJvb3QuYWRkKFwiY29sbGVjdGlvbnNcIiwge1xuICAgICAgYXJnczoge1xuICAgICAgICBmaXJzdDogdmFyaWFibGVzLl9fZGVmYXVsdE9wZXJhdGlvbl9fLmZpcnN0LFxuICAgICAgICBxdWVyeTogdmFyaWFibGVzLl9fZGVmYXVsdE9wZXJhdGlvbl9fLnF1ZXJ5LFxuICAgICAgICBzb3J0S2V5OiB2YXJpYWJsZXMuX19kZWZhdWx0T3BlcmF0aW9uX18uc29ydEtleSxcbiAgICAgICAgcmV2ZXJzZTogdmFyaWFibGVzLl9fZGVmYXVsdE9wZXJhdGlvbl9fLnJldmVyc2VcbiAgICAgIH1cbiAgICB9LCBmdW5jdGlvbiAoY29sbGVjdGlvbnMpIHtcbiAgICAgIGNvbGxlY3Rpb25zLmFkZChcInBhZ2VJbmZvXCIsIGZ1bmN0aW9uIChwYWdlSW5mbykge1xuICAgICAgICBwYWdlSW5mby5hZGQoXCJoYXNOZXh0UGFnZVwiKTtcbiAgICAgICAgcGFnZUluZm8uYWRkKFwiaGFzUHJldmlvdXNQYWdlXCIpO1xuICAgICAgfSk7XG4gICAgICBjb2xsZWN0aW9ucy5hZGQoXCJlZGdlc1wiLCBmdW5jdGlvbiAoZWRnZXMpIHtcbiAgICAgICAgZWRnZXMuYWRkKFwiY3Vyc29yXCIpO1xuICAgICAgICBlZGdlcy5hZGQoXCJub2RlXCIsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgbm9kZS5hZGRGcmFnbWVudChzcHJlYWRzLkNvbGxlY3Rpb25GcmFnbWVudCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gZG9jdW1lbnQ7XG59XG5cbmZ1bmN0aW9uIHF1ZXJ5JDgoY2xpZW50KSB7XG4gIHZhciBkb2N1bWVudCA9IGNsaWVudC5kb2N1bWVudCgpO1xuICB2YXIgc3ByZWFkcyA9IHt9O1xuICB2YXIgdmFyaWFibGVzID0ge307XG4gIHZhcmlhYmxlcy5fX2RlZmF1bHRPcGVyYXRpb25fXyA9IHt9O1xuICB2YXJpYWJsZXMuX19kZWZhdWx0T3BlcmF0aW9uX18uZmlyc3QgPSBjbGllbnQudmFyaWFibGUoXCJmaXJzdFwiLCBcIkludCFcIik7XG4gIHZhcmlhYmxlcy5fX2RlZmF1bHRPcGVyYXRpb25fXy5xdWVyeSA9IGNsaWVudC52YXJpYWJsZShcInF1ZXJ5XCIsIFwiU3RyaW5nXCIpO1xuICB2YXJpYWJsZXMuX19kZWZhdWx0T3BlcmF0aW9uX18uc29ydEtleSA9IGNsaWVudC52YXJpYWJsZShcInNvcnRLZXlcIiwgXCJDb2xsZWN0aW9uU29ydEtleXNcIik7XG4gIHZhcmlhYmxlcy5fX2RlZmF1bHRPcGVyYXRpb25fXy5yZXZlcnNlID0gY2xpZW50LnZhcmlhYmxlKFwicmV2ZXJzZVwiLCBcIkJvb2xlYW5cIik7XG4gIHZhcmlhYmxlcy5fX2RlZmF1bHRPcGVyYXRpb25fXy5wcm9kdWN0c0ZpcnN0ID0gY2xpZW50LnZhcmlhYmxlKFwicHJvZHVjdHNGaXJzdFwiLCBcIkludCFcIik7XG4gIHNwcmVhZHMuVmFyaWFudEZyYWdtZW50ID0gZG9jdW1lbnQuZGVmaW5lRnJhZ21lbnQoXCJWYXJpYW50RnJhZ21lbnRcIiwgXCJQcm9kdWN0VmFyaWFudFwiLCBmdW5jdGlvbiAocm9vdCkge1xuICAgIHJvb3QuYWRkKFwiaWRcIik7XG4gICAgcm9vdC5hZGQoXCJ0aXRsZVwiKTtcbiAgICByb290LmFkZChcInByaWNlXCIsIGZ1bmN0aW9uIChwcmljZSkge1xuICAgICAgcHJpY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgcHJpY2UuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwicHJpY2VcIiwge1xuICAgICAgYWxpYXM6IFwicHJpY2VWMlwiXG4gICAgfSwgZnVuY3Rpb24gKHByaWNlKSB7XG4gICAgICBwcmljZS5hZGQoXCJhbW91bnRcIik7XG4gICAgICBwcmljZS5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJ3ZWlnaHRcIik7XG4gICAgcm9vdC5hZGQoXCJhdmFpbGFibGVGb3JTYWxlXCIsIHtcbiAgICAgIGFsaWFzOiBcImF2YWlsYWJsZVwiXG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJza3VcIik7XG4gICAgcm9vdC5hZGQoXCJjb21wYXJlQXRQcmljZVwiLCBmdW5jdGlvbiAoY29tcGFyZUF0UHJpY2UpIHtcbiAgICAgIGNvbXBhcmVBdFByaWNlLmFkZChcImFtb3VudFwiKTtcbiAgICAgIGNvbXBhcmVBdFByaWNlLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImNvbXBhcmVBdFByaWNlXCIsIHtcbiAgICAgIGFsaWFzOiBcImNvbXBhcmVBdFByaWNlVjJcIlxuICAgIH0sIGZ1bmN0aW9uIChjb21wYXJlQXRQcmljZSkge1xuICAgICAgY29tcGFyZUF0UHJpY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgY29tcGFyZUF0UHJpY2UuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiaW1hZ2VcIiwgZnVuY3Rpb24gKGltYWdlKSB7XG4gICAgICBpbWFnZS5hZGQoXCJpZFwiKTtcbiAgICAgIGltYWdlLmFkZChcInVybFwiLCB7XG4gICAgICAgIGFsaWFzOiBcInNyY1wiXG4gICAgICB9KTtcbiAgICAgIGltYWdlLmFkZChcImFsdFRleHRcIik7XG4gICAgICBpbWFnZS5hZGQoXCJ3aWR0aFwiKTtcbiAgICAgIGltYWdlLmFkZChcImhlaWdodFwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcInNlbGVjdGVkT3B0aW9uc1wiLCBmdW5jdGlvbiAoc2VsZWN0ZWRPcHRpb25zKSB7XG4gICAgICBzZWxlY3RlZE9wdGlvbnMuYWRkKFwibmFtZVwiKTtcbiAgICAgIHNlbGVjdGVkT3B0aW9ucy5hZGQoXCJ2YWx1ZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcInVuaXRQcmljZVwiLCBmdW5jdGlvbiAodW5pdFByaWNlKSB7XG4gICAgICB1bml0UHJpY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgdW5pdFByaWNlLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcInVuaXRQcmljZU1lYXN1cmVtZW50XCIsIGZ1bmN0aW9uICh1bml0UHJpY2VNZWFzdXJlbWVudCkge1xuICAgICAgdW5pdFByaWNlTWVhc3VyZW1lbnQuYWRkKFwibWVhc3VyZWRUeXBlXCIpO1xuICAgICAgdW5pdFByaWNlTWVhc3VyZW1lbnQuYWRkKFwicXVhbnRpdHlVbml0XCIpO1xuICAgICAgdW5pdFByaWNlTWVhc3VyZW1lbnQuYWRkKFwicXVhbnRpdHlWYWx1ZVwiKTtcbiAgICAgIHVuaXRQcmljZU1lYXN1cmVtZW50LmFkZChcInJlZmVyZW5jZVVuaXRcIik7XG4gICAgICB1bml0UHJpY2VNZWFzdXJlbWVudC5hZGQoXCJyZWZlcmVuY2VWYWx1ZVwiKTtcbiAgICB9KTtcbiAgfSk7XG4gIHNwcmVhZHMuQ29sbGVjdGlvbkZyYWdtZW50ID0gZG9jdW1lbnQuZGVmaW5lRnJhZ21lbnQoXCJDb2xsZWN0aW9uRnJhZ21lbnRcIiwgXCJDb2xsZWN0aW9uXCIsIGZ1bmN0aW9uIChyb290KSB7XG4gICAgcm9vdC5hZGQoXCJpZFwiKTtcbiAgICByb290LmFkZChcImhhbmRsZVwiKTtcbiAgICByb290LmFkZChcImRlc2NyaXB0aW9uXCIpO1xuICAgIHJvb3QuYWRkKFwiZGVzY3JpcHRpb25IdG1sXCIpO1xuICAgIHJvb3QuYWRkKFwidXBkYXRlZEF0XCIpO1xuICAgIHJvb3QuYWRkKFwidGl0bGVcIik7XG4gICAgcm9vdC5hZGQoXCJpbWFnZVwiLCBmdW5jdGlvbiAoaW1hZ2UpIHtcbiAgICAgIGltYWdlLmFkZChcImlkXCIpO1xuICAgICAgaW1hZ2UuYWRkKFwidXJsXCIsIHtcbiAgICAgICAgYWxpYXM6IFwic3JjXCJcbiAgICAgIH0pO1xuICAgICAgaW1hZ2UuYWRkKFwiYWx0VGV4dFwiKTtcbiAgICB9KTtcbiAgfSk7XG4gIHNwcmVhZHMuUHJvZHVjdEZyYWdtZW50ID0gZG9jdW1lbnQuZGVmaW5lRnJhZ21lbnQoXCJQcm9kdWN0RnJhZ21lbnRcIiwgXCJQcm9kdWN0XCIsIGZ1bmN0aW9uIChyb290KSB7XG4gICAgcm9vdC5hZGQoXCJpZFwiKTtcbiAgICByb290LmFkZChcImF2YWlsYWJsZUZvclNhbGVcIik7XG4gICAgcm9vdC5hZGQoXCJjcmVhdGVkQXRcIik7XG4gICAgcm9vdC5hZGQoXCJ1cGRhdGVkQXRcIik7XG4gICAgcm9vdC5hZGQoXCJkZXNjcmlwdGlvbkh0bWxcIik7XG4gICAgcm9vdC5hZGQoXCJkZXNjcmlwdGlvblwiKTtcbiAgICByb290LmFkZChcImhhbmRsZVwiKTtcbiAgICByb290LmFkZChcInByb2R1Y3RUeXBlXCIpO1xuICAgIHJvb3QuYWRkKFwidGl0bGVcIik7XG4gICAgcm9vdC5hZGQoXCJ2ZW5kb3JcIik7XG4gICAgcm9vdC5hZGQoXCJwdWJsaXNoZWRBdFwiKTtcbiAgICByb290LmFkZChcIm9ubGluZVN0b3JlVXJsXCIpO1xuICAgIHJvb3QuYWRkKFwib3B0aW9uc1wiLCBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgb3B0aW9ucy5hZGQoXCJuYW1lXCIpO1xuICAgICAgb3B0aW9ucy5hZGQoXCJ2YWx1ZXNcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJpbWFnZXNcIiwge1xuICAgICAgYXJnczoge1xuICAgICAgICBmaXJzdDogMjUwXG4gICAgICB9XG4gICAgfSwgZnVuY3Rpb24gKGltYWdlcykge1xuICAgICAgaW1hZ2VzLmFkZChcInBhZ2VJbmZvXCIsIGZ1bmN0aW9uIChwYWdlSW5mbykge1xuICAgICAgICBwYWdlSW5mby5hZGQoXCJoYXNOZXh0UGFnZVwiKTtcbiAgICAgICAgcGFnZUluZm8uYWRkKFwiaGFzUHJldmlvdXNQYWdlXCIpO1xuICAgICAgfSk7XG4gICAgICBpbWFnZXMuYWRkKFwiZWRnZXNcIiwgZnVuY3Rpb24gKGVkZ2VzKSB7XG4gICAgICAgIGVkZ2VzLmFkZChcImN1cnNvclwiKTtcbiAgICAgICAgZWRnZXMuYWRkKFwibm9kZVwiLCBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgIG5vZGUuYWRkKFwiaWRcIik7XG4gICAgICAgICAgbm9kZS5hZGQoXCJ1cmxcIiwge1xuICAgICAgICAgICAgYWxpYXM6IFwic3JjXCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBub2RlLmFkZChcImFsdFRleHRcIik7XG4gICAgICAgICAgbm9kZS5hZGQoXCJ3aWR0aFwiKTtcbiAgICAgICAgICBub2RlLmFkZChcImhlaWdodFwiKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByb290LmFkZChcInZhcmlhbnRzXCIsIHtcbiAgICAgIGFyZ3M6IHtcbiAgICAgICAgZmlyc3Q6IDI1MFxuICAgICAgfVxuICAgIH0sIGZ1bmN0aW9uICh2YXJpYW50cykge1xuICAgICAgdmFyaWFudHMuYWRkKFwicGFnZUluZm9cIiwgZnVuY3Rpb24gKHBhZ2VJbmZvKSB7XG4gICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc05leHRQYWdlXCIpO1xuICAgICAgICBwYWdlSW5mby5hZGQoXCJoYXNQcmV2aW91c1BhZ2VcIik7XG4gICAgICB9KTtcbiAgICAgIHZhcmlhbnRzLmFkZChcImVkZ2VzXCIsIGZ1bmN0aW9uIChlZGdlcykge1xuICAgICAgICBlZGdlcy5hZGQoXCJjdXJzb3JcIik7XG4gICAgICAgIGVkZ2VzLmFkZChcIm5vZGVcIiwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICBub2RlLmFkZEZyYWdtZW50KHNwcmVhZHMuVmFyaWFudEZyYWdtZW50KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG4gIGRvY3VtZW50LmFkZFF1ZXJ5KFt2YXJpYWJsZXMuX19kZWZhdWx0T3BlcmF0aW9uX18uZmlyc3QsIHZhcmlhYmxlcy5fX2RlZmF1bHRPcGVyYXRpb25fXy5xdWVyeSwgdmFyaWFibGVzLl9fZGVmYXVsdE9wZXJhdGlvbl9fLnNvcnRLZXksIHZhcmlhYmxlcy5fX2RlZmF1bHRPcGVyYXRpb25fXy5yZXZlcnNlLCB2YXJpYWJsZXMuX19kZWZhdWx0T3BlcmF0aW9uX18ucHJvZHVjdHNGaXJzdF0sIGZ1bmN0aW9uIChyb290KSB7XG4gICAgcm9vdC5hZGQoXCJjb2xsZWN0aW9uc1wiLCB7XG4gICAgICBhcmdzOiB7XG4gICAgICAgIGZpcnN0OiB2YXJpYWJsZXMuX19kZWZhdWx0T3BlcmF0aW9uX18uZmlyc3QsXG4gICAgICAgIHF1ZXJ5OiB2YXJpYWJsZXMuX19kZWZhdWx0T3BlcmF0aW9uX18ucXVlcnksXG4gICAgICAgIHNvcnRLZXk6IHZhcmlhYmxlcy5fX2RlZmF1bHRPcGVyYXRpb25fXy5zb3J0S2V5LFxuICAgICAgICByZXZlcnNlOiB2YXJpYWJsZXMuX19kZWZhdWx0T3BlcmF0aW9uX18ucmV2ZXJzZVxuICAgICAgfVxuICAgIH0sIGZ1bmN0aW9uIChjb2xsZWN0aW9ucykge1xuICAgICAgY29sbGVjdGlvbnMuYWRkKFwicGFnZUluZm9cIiwgZnVuY3Rpb24gKHBhZ2VJbmZvKSB7XG4gICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc05leHRQYWdlXCIpO1xuICAgICAgICBwYWdlSW5mby5hZGQoXCJoYXNQcmV2aW91c1BhZ2VcIik7XG4gICAgICB9KTtcbiAgICAgIGNvbGxlY3Rpb25zLmFkZChcImVkZ2VzXCIsIGZ1bmN0aW9uIChlZGdlcykge1xuICAgICAgICBlZGdlcy5hZGQoXCJjdXJzb3JcIik7XG4gICAgICAgIGVkZ2VzLmFkZChcIm5vZGVcIiwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICBub2RlLmFkZEZyYWdtZW50KHNwcmVhZHMuQ29sbGVjdGlvbkZyYWdtZW50KTtcbiAgICAgICAgICBub2RlLmFkZChcInByb2R1Y3RzXCIsIHtcbiAgICAgICAgICAgIGFyZ3M6IHtcbiAgICAgICAgICAgICAgZmlyc3Q6IHZhcmlhYmxlcy5fX2RlZmF1bHRPcGVyYXRpb25fXy5wcm9kdWN0c0ZpcnN0XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSwgZnVuY3Rpb24gKHByb2R1Y3RzKSB7XG4gICAgICAgICAgICBwcm9kdWN0cy5hZGQoXCJwYWdlSW5mb1wiLCBmdW5jdGlvbiAocGFnZUluZm8pIHtcbiAgICAgICAgICAgICAgcGFnZUluZm8uYWRkKFwiaGFzTmV4dFBhZ2VcIik7XG4gICAgICAgICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc1ByZXZpb3VzUGFnZVwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcHJvZHVjdHMuYWRkKFwiZWRnZXNcIiwgZnVuY3Rpb24gKGVkZ2VzKSB7XG4gICAgICAgICAgICAgIGVkZ2VzLmFkZChcImN1cnNvclwiKTtcbiAgICAgICAgICAgICAgZWRnZXMuYWRkKFwibm9kZVwiLCBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgICAgIG5vZGUuYWRkRnJhZ21lbnQoc3ByZWFkcy5Qcm9kdWN0RnJhZ21lbnQpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIGRvY3VtZW50O1xufVxuXG5mdW5jdGlvbiBxdWVyeSQ5KGNsaWVudCkge1xuICB2YXIgZG9jdW1lbnQgPSBjbGllbnQuZG9jdW1lbnQoKTtcbiAgdmFyIHNwcmVhZHMgPSB7fTtcbiAgdmFyIHZhcmlhYmxlcyA9IHt9O1xuICB2YXJpYWJsZXMuX19kZWZhdWx0T3BlcmF0aW9uX18gPSB7fTtcbiAgdmFyaWFibGVzLl9fZGVmYXVsdE9wZXJhdGlvbl9fLmhhbmRsZSA9IGNsaWVudC52YXJpYWJsZShcImhhbmRsZVwiLCBcIlN0cmluZyFcIik7XG4gIHNwcmVhZHMuVmFyaWFudEZyYWdtZW50ID0gZG9jdW1lbnQuZGVmaW5lRnJhZ21lbnQoXCJWYXJpYW50RnJhZ21lbnRcIiwgXCJQcm9kdWN0VmFyaWFudFwiLCBmdW5jdGlvbiAocm9vdCkge1xuICAgIHJvb3QuYWRkKFwiaWRcIik7XG4gICAgcm9vdC5hZGQoXCJ0aXRsZVwiKTtcbiAgICByb290LmFkZChcInByaWNlXCIsIGZ1bmN0aW9uIChwcmljZSkge1xuICAgICAgcHJpY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgcHJpY2UuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwicHJpY2VcIiwge1xuICAgICAgYWxpYXM6IFwicHJpY2VWMlwiXG4gICAgfSwgZnVuY3Rpb24gKHByaWNlKSB7XG4gICAgICBwcmljZS5hZGQoXCJhbW91bnRcIik7XG4gICAgICBwcmljZS5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJ3ZWlnaHRcIik7XG4gICAgcm9vdC5hZGQoXCJhdmFpbGFibGVGb3JTYWxlXCIsIHtcbiAgICAgIGFsaWFzOiBcImF2YWlsYWJsZVwiXG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJza3VcIik7XG4gICAgcm9vdC5hZGQoXCJjb21wYXJlQXRQcmljZVwiLCBmdW5jdGlvbiAoY29tcGFyZUF0UHJpY2UpIHtcbiAgICAgIGNvbXBhcmVBdFByaWNlLmFkZChcImFtb3VudFwiKTtcbiAgICAgIGNvbXBhcmVBdFByaWNlLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImNvbXBhcmVBdFByaWNlXCIsIHtcbiAgICAgIGFsaWFzOiBcImNvbXBhcmVBdFByaWNlVjJcIlxuICAgIH0sIGZ1bmN0aW9uIChjb21wYXJlQXRQcmljZSkge1xuICAgICAgY29tcGFyZUF0UHJpY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgY29tcGFyZUF0UHJpY2UuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiaW1hZ2VcIiwgZnVuY3Rpb24gKGltYWdlKSB7XG4gICAgICBpbWFnZS5hZGQoXCJpZFwiKTtcbiAgICAgIGltYWdlLmFkZChcInVybFwiLCB7XG4gICAgICAgIGFsaWFzOiBcInNyY1wiXG4gICAgICB9KTtcbiAgICAgIGltYWdlLmFkZChcImFsdFRleHRcIik7XG4gICAgICBpbWFnZS5hZGQoXCJ3aWR0aFwiKTtcbiAgICAgIGltYWdlLmFkZChcImhlaWdodFwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcInNlbGVjdGVkT3B0aW9uc1wiLCBmdW5jdGlvbiAoc2VsZWN0ZWRPcHRpb25zKSB7XG4gICAgICBzZWxlY3RlZE9wdGlvbnMuYWRkKFwibmFtZVwiKTtcbiAgICAgIHNlbGVjdGVkT3B0aW9ucy5hZGQoXCJ2YWx1ZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcInVuaXRQcmljZVwiLCBmdW5jdGlvbiAodW5pdFByaWNlKSB7XG4gICAgICB1bml0UHJpY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgdW5pdFByaWNlLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcInVuaXRQcmljZU1lYXN1cmVtZW50XCIsIGZ1bmN0aW9uICh1bml0UHJpY2VNZWFzdXJlbWVudCkge1xuICAgICAgdW5pdFByaWNlTWVhc3VyZW1lbnQuYWRkKFwibWVhc3VyZWRUeXBlXCIpO1xuICAgICAgdW5pdFByaWNlTWVhc3VyZW1lbnQuYWRkKFwicXVhbnRpdHlVbml0XCIpO1xuICAgICAgdW5pdFByaWNlTWVhc3VyZW1lbnQuYWRkKFwicXVhbnRpdHlWYWx1ZVwiKTtcbiAgICAgIHVuaXRQcmljZU1lYXN1cmVtZW50LmFkZChcInJlZmVyZW5jZVVuaXRcIik7XG4gICAgICB1bml0UHJpY2VNZWFzdXJlbWVudC5hZGQoXCJyZWZlcmVuY2VWYWx1ZVwiKTtcbiAgICB9KTtcbiAgfSk7XG4gIHNwcmVhZHMuUHJvZHVjdEZyYWdtZW50ID0gZG9jdW1lbnQuZGVmaW5lRnJhZ21lbnQoXCJQcm9kdWN0RnJhZ21lbnRcIiwgXCJQcm9kdWN0XCIsIGZ1bmN0aW9uIChyb290KSB7XG4gICAgcm9vdC5hZGQoXCJpZFwiKTtcbiAgICByb290LmFkZChcImF2YWlsYWJsZUZvclNhbGVcIik7XG4gICAgcm9vdC5hZGQoXCJjcmVhdGVkQXRcIik7XG4gICAgcm9vdC5hZGQoXCJ1cGRhdGVkQXRcIik7XG4gICAgcm9vdC5hZGQoXCJkZXNjcmlwdGlvbkh0bWxcIik7XG4gICAgcm9vdC5hZGQoXCJkZXNjcmlwdGlvblwiKTtcbiAgICByb290LmFkZChcImhhbmRsZVwiKTtcbiAgICByb290LmFkZChcInByb2R1Y3RUeXBlXCIpO1xuICAgIHJvb3QuYWRkKFwidGl0bGVcIik7XG4gICAgcm9vdC5hZGQoXCJ2ZW5kb3JcIik7XG4gICAgcm9vdC5hZGQoXCJwdWJsaXNoZWRBdFwiKTtcbiAgICByb290LmFkZChcIm9ubGluZVN0b3JlVXJsXCIpO1xuICAgIHJvb3QuYWRkKFwib3B0aW9uc1wiLCBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgb3B0aW9ucy5hZGQoXCJuYW1lXCIpO1xuICAgICAgb3B0aW9ucy5hZGQoXCJ2YWx1ZXNcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJpbWFnZXNcIiwge1xuICAgICAgYXJnczoge1xuICAgICAgICBmaXJzdDogMjUwXG4gICAgICB9XG4gICAgfSwgZnVuY3Rpb24gKGltYWdlcykge1xuICAgICAgaW1hZ2VzLmFkZChcInBhZ2VJbmZvXCIsIGZ1bmN0aW9uIChwYWdlSW5mbykge1xuICAgICAgICBwYWdlSW5mby5hZGQoXCJoYXNOZXh0UGFnZVwiKTtcbiAgICAgICAgcGFnZUluZm8uYWRkKFwiaGFzUHJldmlvdXNQYWdlXCIpO1xuICAgICAgfSk7XG4gICAgICBpbWFnZXMuYWRkKFwiZWRnZXNcIiwgZnVuY3Rpb24gKGVkZ2VzKSB7XG4gICAgICAgIGVkZ2VzLmFkZChcImN1cnNvclwiKTtcbiAgICAgICAgZWRnZXMuYWRkKFwibm9kZVwiLCBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgIG5vZGUuYWRkKFwiaWRcIik7XG4gICAgICAgICAgbm9kZS5hZGQoXCJ1cmxcIiwge1xuICAgICAgICAgICAgYWxpYXM6IFwic3JjXCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBub2RlLmFkZChcImFsdFRleHRcIik7XG4gICAgICAgICAgbm9kZS5hZGQoXCJ3aWR0aFwiKTtcbiAgICAgICAgICBub2RlLmFkZChcImhlaWdodFwiKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByb290LmFkZChcInZhcmlhbnRzXCIsIHtcbiAgICAgIGFyZ3M6IHtcbiAgICAgICAgZmlyc3Q6IDI1MFxuICAgICAgfVxuICAgIH0sIGZ1bmN0aW9uICh2YXJpYW50cykge1xuICAgICAgdmFyaWFudHMuYWRkKFwicGFnZUluZm9cIiwgZnVuY3Rpb24gKHBhZ2VJbmZvKSB7XG4gICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc05leHRQYWdlXCIpO1xuICAgICAgICBwYWdlSW5mby5hZGQoXCJoYXNQcmV2aW91c1BhZ2VcIik7XG4gICAgICB9KTtcbiAgICAgIHZhcmlhbnRzLmFkZChcImVkZ2VzXCIsIGZ1bmN0aW9uIChlZGdlcykge1xuICAgICAgICBlZGdlcy5hZGQoXCJjdXJzb3JcIik7XG4gICAgICAgIGVkZ2VzLmFkZChcIm5vZGVcIiwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICBub2RlLmFkZEZyYWdtZW50KHNwcmVhZHMuVmFyaWFudEZyYWdtZW50KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG4gIHNwcmVhZHMuQ29sbGVjdGlvbkZyYWdtZW50ID0gZG9jdW1lbnQuZGVmaW5lRnJhZ21lbnQoXCJDb2xsZWN0aW9uRnJhZ21lbnRcIiwgXCJDb2xsZWN0aW9uXCIsIGZ1bmN0aW9uIChyb290KSB7XG4gICAgcm9vdC5hZGQoXCJpZFwiKTtcbiAgICByb290LmFkZChcImhhbmRsZVwiKTtcbiAgICByb290LmFkZChcImRlc2NyaXB0aW9uXCIpO1xuICAgIHJvb3QuYWRkKFwiZGVzY3JpcHRpb25IdG1sXCIpO1xuICAgIHJvb3QuYWRkKFwidXBkYXRlZEF0XCIpO1xuICAgIHJvb3QuYWRkKFwidGl0bGVcIik7XG4gICAgcm9vdC5hZGQoXCJpbWFnZVwiLCBmdW5jdGlvbiAoaW1hZ2UpIHtcbiAgICAgIGltYWdlLmFkZChcImlkXCIpO1xuICAgICAgaW1hZ2UuYWRkKFwidXJsXCIsIHtcbiAgICAgICAgYWxpYXM6IFwic3JjXCJcbiAgICAgIH0pO1xuICAgICAgaW1hZ2UuYWRkKFwiYWx0VGV4dFwiKTtcbiAgICB9KTtcbiAgfSk7XG4gIHNwcmVhZHMuQ29sbGVjdGlvbnNQcm9kdWN0c0ZyYWdtZW50ID0gZG9jdW1lbnQuZGVmaW5lRnJhZ21lbnQoXCJDb2xsZWN0aW9uc1Byb2R1Y3RzRnJhZ21lbnRcIiwgXCJDb2xsZWN0aW9uXCIsIGZ1bmN0aW9uIChyb290KSB7XG4gICAgcm9vdC5hZGQoXCJwcm9kdWN0c1wiLCB7XG4gICAgICBhcmdzOiB7XG4gICAgICAgIGZpcnN0OiAyMFxuICAgICAgfVxuICAgIH0sIGZ1bmN0aW9uIChwcm9kdWN0cykge1xuICAgICAgcHJvZHVjdHMuYWRkKFwicGFnZUluZm9cIiwgZnVuY3Rpb24gKHBhZ2VJbmZvKSB7XG4gICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc05leHRQYWdlXCIpO1xuICAgICAgICBwYWdlSW5mby5hZGQoXCJoYXNQcmV2aW91c1BhZ2VcIik7XG4gICAgICB9KTtcbiAgICAgIHByb2R1Y3RzLmFkZChcImVkZ2VzXCIsIGZ1bmN0aW9uIChlZGdlcykge1xuICAgICAgICBlZGdlcy5hZGQoXCJjdXJzb3JcIik7XG4gICAgICAgIGVkZ2VzLmFkZChcIm5vZGVcIiwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICBub2RlLmFkZEZyYWdtZW50KHNwcmVhZHMuUHJvZHVjdEZyYWdtZW50KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG4gIGRvY3VtZW50LmFkZFF1ZXJ5KFt2YXJpYWJsZXMuX19kZWZhdWx0T3BlcmF0aW9uX18uaGFuZGxlXSwgZnVuY3Rpb24gKHJvb3QpIHtcbiAgICByb290LmFkZChcImNvbGxlY3Rpb25CeUhhbmRsZVwiLCB7XG4gICAgICBhcmdzOiB7XG4gICAgICAgIGhhbmRsZTogdmFyaWFibGVzLl9fZGVmYXVsdE9wZXJhdGlvbl9fLmhhbmRsZVxuICAgICAgfVxuICAgIH0sIGZ1bmN0aW9uIChjb2xsZWN0aW9uQnlIYW5kbGUpIHtcbiAgICAgIGNvbGxlY3Rpb25CeUhhbmRsZS5hZGRGcmFnbWVudChzcHJlYWRzLkNvbGxlY3Rpb25GcmFnbWVudCk7XG4gICAgICBjb2xsZWN0aW9uQnlIYW5kbGUuYWRkRnJhZ21lbnQoc3ByZWFkcy5Db2xsZWN0aW9uc1Byb2R1Y3RzRnJhZ21lbnQpO1xuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIGRvY3VtZW50O1xufVxuXG4vLyBHcmFwaFFMXG4vKipcbiAqIFRoZSBKUyBCdXkgU0RLIGNvbGxlY3Rpb24gcmVzb3VyY2VcbiAqIEBjbGFzc1xuICovXG5cbnZhciBDb2xsZWN0aW9uUmVzb3VyY2UgPSBmdW5jdGlvbiAoX1Jlc291cmNlKSB7XG4gIGluaGVyaXRzJDEoQ29sbGVjdGlvblJlc291cmNlLCBfUmVzb3VyY2UpO1xuXG4gIGZ1bmN0aW9uIENvbGxlY3Rpb25SZXNvdXJjZSgpIHtcbiAgICBjbGFzc0NhbGxDaGVjayQxKHRoaXMsIENvbGxlY3Rpb25SZXNvdXJjZSk7XG4gICAgcmV0dXJuIHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4kMSh0aGlzLCAoQ29sbGVjdGlvblJlc291cmNlLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQ29sbGVjdGlvblJlc291cmNlKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH1cblxuICBjcmVhdGVDbGFzcyQxKENvbGxlY3Rpb25SZXNvdXJjZSwgW3tcbiAgICBrZXk6ICdmZXRjaEFsbCcsXG5cblxuICAgIC8qKlxuICAgICAqIEZldGNoZXMgYWxsIGNvbGxlY3Rpb25zIG9uIHRoZSBzaG9wLCBub3QgaW5jbHVkaW5nIHByb2R1Y3RzLlxuICAgICAqIFRvIGZldGNoIGNvbGxlY3Rpb25zIHdpdGggcHJvZHVjdHMgdXNlIFtmZXRjaEFsbHNXaXRoUHJvZHVjdHNde0BsaW5rIENsaWVudCNmZXRjaEFsbHNXaXRoUHJvZHVjdHN9LlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBjbGllbnQuY29sbGVjdGlvbi5mZXRjaEFsbCgpLnRoZW4oKGNvbGxlY3Rpb25zKSA9PiB7XG4gICAgICogICAvLyBEbyBzb21ldGhpbmcgd2l0aCB0aGUgY29sbGVjdGlvbnNcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge1Byb21pc2V8R3JhcGhNb2RlbFtdfSBBIHByb21pc2UgcmVzb2x2aW5nIHdpdGggYW4gYXJyYXkgb2YgYEdyYXBoTW9kZWxgcyBvZiB0aGUgY29sbGVjdGlvbnMuXG4gICAgICovXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGZldGNoQWxsKCkge1xuICAgICAgdmFyIGZpcnN0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAyMDtcblxuICAgICAgcmV0dXJuIHRoaXMuZ3JhcGhRTENsaWVudC5zZW5kKHF1ZXJ5JDcsIHsgZmlyc3Q6IGZpcnN0IH0pLnRoZW4oZGVmYXVsdFJlc29sdmVyKCdjb2xsZWN0aW9ucycpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGZXRjaGVzIGFsbCBjb2xsZWN0aW9ucyBvbiB0aGUgc2hvcCwgaW5jbHVkaW5nIHByb2R1Y3RzLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBjbGllbnQuY29sbGVjdGlvbi5mZXRjaEFsbFdpdGhQcm9kdWN0cygpLnRoZW4oKGNvbGxlY3Rpb25zKSA9PiB7XG4gICAgICogICAvLyBEbyBzb21ldGhpbmcgd2l0aCB0aGUgY29sbGVjdGlvbnNcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge1Byb21pc2V8R3JhcGhNb2RlbFtdfSBBIHByb21pc2UgcmVzb2x2aW5nIHdpdGggYW4gYXJyYXkgb2YgYEdyYXBoTW9kZWxgcyBvZiB0aGUgY29sbGVjdGlvbnMuXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2ZldGNoQWxsV2l0aFByb2R1Y3RzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZmV0Y2hBbGxXaXRoUHJvZHVjdHMoKSB7XG4gICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG4gICAgICAgICAgX3JlZiRmaXJzdCA9IF9yZWYuZmlyc3QsXG4gICAgICAgICAgZmlyc3QgPSBfcmVmJGZpcnN0ID09PSB1bmRlZmluZWQgPyAyMCA6IF9yZWYkZmlyc3QsXG4gICAgICAgICAgX3JlZiRwcm9kdWN0c0ZpcnN0ID0gX3JlZi5wcm9kdWN0c0ZpcnN0LFxuICAgICAgICAgIHByb2R1Y3RzRmlyc3QgPSBfcmVmJHByb2R1Y3RzRmlyc3QgPT09IHVuZGVmaW5lZCA/IDIwIDogX3JlZiRwcm9kdWN0c0ZpcnN0O1xuXG4gICAgICByZXR1cm4gdGhpcy5ncmFwaFFMQ2xpZW50LnNlbmQocXVlcnkkOCwgeyBmaXJzdDogZmlyc3QsIHByb2R1Y3RzRmlyc3Q6IHByb2R1Y3RzRmlyc3QgfSkudGhlbihkZWZhdWx0UmVzb2x2ZXIoJ2NvbGxlY3Rpb25zJykpLnRoZW4ocGFnaW5hdGVDb2xsZWN0aW9uc1Byb2R1Y3RDb25uZWN0aW9uc0FuZFJlc29sdmUodGhpcy5ncmFwaFFMQ2xpZW50KSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmV0Y2hlcyBhIHNpbmdsZSBjb2xsZWN0aW9uIGJ5IElEIG9uIHRoZSBzaG9wLCBub3QgaW5jbHVkaW5nIHByb2R1Y3RzLlxuICAgICAqIFRvIGZldGNoIHRoZSBjb2xsZWN0aW9uIHdpdGggcHJvZHVjdHMgdXNlIFtmZXRjaFdpdGhQcm9kdWN0c117QGxpbmsgQ2xpZW50I2ZldGNoV2l0aFByb2R1Y3RzfS5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogY2xpZW50LmNvbGxlY3Rpb24uZmV0Y2goJ1hrOWxNMkprTnpGbU56SVE0TlRJWTRaREZpWlRVeVpUVXdOVEUyTUROaFpqZz09JykudGhlbigoY29sbGVjdGlvbikgPT4ge1xuICAgICAqICAgLy8gRG8gc29tZXRoaW5nIHdpdGggdGhlIGNvbGxlY3Rpb25cbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBpZCBUaGUgaWQgb2YgdGhlIGNvbGxlY3Rpb24gdG8gZmV0Y2guXG4gICAgICogQHJldHVybiB7UHJvbWlzZXxHcmFwaE1vZGVsfSBBIHByb21pc2UgcmVzb2x2aW5nIHdpdGggYSBgR3JhcGhNb2RlbGAgb2YgdGhlIGNvbGxlY3Rpb24uXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2ZldGNoJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZmV0Y2goaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmdyYXBoUUxDbGllbnQuc2VuZChxdWVyeSQ1LCB7IGlkOiBpZCB9KS50aGVuKGRlZmF1bHRSZXNvbHZlcignbm9kZScpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGZXRjaGVzIGEgc2luZ2xlIGNvbGxlY3Rpb24gYnkgSUQgb24gdGhlIHNob3AsIGluY2x1ZGluZyBwcm9kdWN0cy5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogY2xpZW50LmNvbGxlY3Rpb24uZmV0Y2hXaXRoUHJvZHVjdHMoJ1hrOWxNMkprTnpGbU56SVE0TlRJWTRaREZpWlRVeVpUVXdOVEUyTUROaFpqZz09JykudGhlbigoY29sbGVjdGlvbikgPT4ge1xuICAgICAqICAgLy8gRG8gc29tZXRoaW5nIHdpdGggdGhlIGNvbGxlY3Rpb25cbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBpZCBUaGUgaWQgb2YgdGhlIGNvbGxlY3Rpb24gdG8gZmV0Y2guXG4gICAgICogQHJldHVybiB7UHJvbWlzZXxHcmFwaE1vZGVsfSBBIHByb21pc2UgcmVzb2x2aW5nIHdpdGggYSBgR3JhcGhNb2RlbGAgb2YgdGhlIGNvbGxlY3Rpb24uXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2ZldGNoV2l0aFByb2R1Y3RzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZmV0Y2hXaXRoUHJvZHVjdHMoaWQpIHtcbiAgICAgIHZhciBfcmVmMiA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge30sXG4gICAgICAgICAgX3JlZjIkcHJvZHVjdHNGaXJzdCA9IF9yZWYyLnByb2R1Y3RzRmlyc3QsXG4gICAgICAgICAgcHJvZHVjdHNGaXJzdCA9IF9yZWYyJHByb2R1Y3RzRmlyc3QgPT09IHVuZGVmaW5lZCA/IDIwIDogX3JlZjIkcHJvZHVjdHNGaXJzdDtcblxuICAgICAgcmV0dXJuIHRoaXMuZ3JhcGhRTENsaWVudC5zZW5kKHF1ZXJ5JDYsIHsgaWQ6IGlkLCBwcm9kdWN0c0ZpcnN0OiBwcm9kdWN0c0ZpcnN0IH0pLnRoZW4oZGVmYXVsdFJlc29sdmVyKCdub2RlJykpLnRoZW4ocGFnaW5hdGVDb2xsZWN0aW9uc1Byb2R1Y3RDb25uZWN0aW9uc0FuZFJlc29sdmUodGhpcy5ncmFwaFFMQ2xpZW50KSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmV0Y2hlcyBhIGNvbGxlY3Rpb24gYnkgaGFuZGxlIG9uIHRoZSBzaG9wLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBjbGllbnQuY29sbGVjdGlvbi5mZXRjaEJ5SGFuZGxlKCdteS1jb2xsZWN0aW9uJykudGhlbigoY29sbGVjdGlvbikgPT4ge1xuICAgICAqICAgLy8gRG8gc29tZXRoaW5nIHdpdGggdGhlIGNvbGxlY3Rpb25cbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBoYW5kbGUgVGhlIGhhbmRsZSBvZiB0aGUgY29sbGVjdGlvbiB0byBmZXRjaC5cbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlfEdyYXBoTW9kZWx9IEEgcHJvbWlzZSByZXNvbHZpbmcgd2l0aCBhIGBHcmFwaE1vZGVsYCBvZiB0aGUgY29sbGVjdGlvbi5cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnZmV0Y2hCeUhhbmRsZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGZldGNoQnlIYW5kbGUoaGFuZGxlKSB7XG4gICAgICByZXR1cm4gdGhpcy5ncmFwaFFMQ2xpZW50LnNlbmQocXVlcnkkOSwgeyBoYW5kbGU6IGhhbmRsZSB9KS50aGVuKGRlZmF1bHRSZXNvbHZlcignY29sbGVjdGlvbkJ5SGFuZGxlJykpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZldGNoZXMgYWxsIGNvbGxlY3Rpb25zIG9uIHRoZSBzaG9wIHRoYXQgbWF0Y2ggdGhlIHF1ZXJ5LlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBjbGllbnQuY29sbGVjdGlvbi5mZXRjaFF1ZXJ5KHtmaXJzdDogMjAsIHNvcnRLZXk6ICdDUkVBVEVEX0FUJywgcmV2ZXJzZTogdHJ1ZX0pLnRoZW4oKGNvbGxlY3Rpb25zKSA9PiB7XG4gICAgICogICAvLyBEbyBzb21ldGhpbmcgd2l0aCB0aGUgZmlyc3QgMTAgY29sbGVjdGlvbnMgc29ydGVkIGJ5IHRpdGxlIGluIGFzY2VuZGluZyBvcmRlclxuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFthcmdzXSBBbiBvYmplY3Qgc3BlY2lmeWluZyB0aGUgcXVlcnkgZGF0YSBjb250YWluaW5nIHplcm8gb3IgbW9yZSBvZjpcbiAgICAgKiAgIEBwYXJhbSB7SW50fSBbYXJncy5maXJzdD0yMF0gVGhlIHJlbGF5IGBmaXJzdGAgcGFyYW0uIFRoaXMgc3BlY2lmaWVzIHBhZ2Ugc2l6ZS5cbiAgICAgKiAgIEBwYXJhbSB7U3RyaW5nfSBbYXJncy5zb3J0S2V5PUlEXSBUaGUga2V5IHRvIHNvcnQgcmVzdWx0cyBieS4gQXZhaWxhYmxlIHZhbHVlcyBhcmVcbiAgICAgKiAgIGRvY3VtZW50ZWQgYXMge0BsaW5rIGh0dHBzOi8vaGVscC5zaG9waWZ5LmNvbS9hcGkvc3RvcmVmcm9udC1hcGkvcmVmZXJlbmNlL2VudW0vY29sbGVjdGlvbnNvcnRrZXlzfENvbGxlY3Rpb24gU29ydCBLZXlzfS5cbiAgICAgKiAgIEBwYXJhbSB7U3RyaW5nfSBbYXJncy5xdWVyeV0gQSBxdWVyeSBzdHJpbmcuIFNlZSBmdWxsIGRvY3VtZW50YXRpb24ge0BsaW5rIGh0dHBzOi8vaGVscC5zaG9waWZ5LmNvbS9hcGkvc3RvcmVmcm9udC1hcGkvcmVmZXJlbmNlL29iamVjdC9zaG9wI2NvbGxlY3Rpb25zfGhlcmV9XG4gICAgICogICBAcGFyYW0ge0Jvb2xlYW59IFthcmdzLnJldmVyc2VdIFdoZXRoZXIgb3Igbm90IHRvIHJldmVyc2UgdGhlIHNvcnQgb3JkZXIgb2YgdGhlIHJlc3VsdHNcbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlfEdyYXBoTW9kZWxbXX0gQSBwcm9taXNlIHJlc29sdmluZyB3aXRoIGFuIGFycmF5IG9mIGBHcmFwaE1vZGVsYHMgb2YgdGhlIGNvbGxlY3Rpb25zLlxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdmZXRjaFF1ZXJ5JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZmV0Y2hRdWVyeSgpIHtcbiAgICAgIHZhciBfcmVmMyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG4gICAgICAgICAgX3JlZjMkZmlyc3QgPSBfcmVmMy5maXJzdCxcbiAgICAgICAgICBmaXJzdCA9IF9yZWYzJGZpcnN0ID09PSB1bmRlZmluZWQgPyAyMCA6IF9yZWYzJGZpcnN0LFxuICAgICAgICAgIF9yZWYzJHNvcnRLZXkgPSBfcmVmMy5zb3J0S2V5LFxuICAgICAgICAgIHNvcnRLZXkgPSBfcmVmMyRzb3J0S2V5ID09PSB1bmRlZmluZWQgPyAnSUQnIDogX3JlZjMkc29ydEtleSxcbiAgICAgICAgICBxdWVyeSA9IF9yZWYzLnF1ZXJ5LFxuICAgICAgICAgIHJldmVyc2UgPSBfcmVmMy5yZXZlcnNlO1xuXG4gICAgICByZXR1cm4gdGhpcy5ncmFwaFFMQ2xpZW50LnNlbmQocXVlcnkkNywge1xuICAgICAgICBmaXJzdDogZmlyc3QsXG4gICAgICAgIHNvcnRLZXk6IHNvcnRLZXksXG4gICAgICAgIHF1ZXJ5OiBxdWVyeSxcbiAgICAgICAgcmV2ZXJzZTogcmV2ZXJzZVxuICAgICAgfSkudGhlbihkZWZhdWx0UmVzb2x2ZXIoJ2NvbGxlY3Rpb25zJykpO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gQ29sbGVjdGlvblJlc291cmNlO1xufShSZXNvdXJjZSk7XG5cbmZ1bmN0aW9uIHF1ZXJ5JDEwKGNsaWVudCkge1xuICB2YXIgZG9jdW1lbnQgPSBjbGllbnQuZG9jdW1lbnQoKTtcbiAgZG9jdW1lbnQuYWRkUXVlcnkoZnVuY3Rpb24gKHJvb3QpIHtcbiAgICByb290LmFkZChcInNob3BcIiwgZnVuY3Rpb24gKHNob3ApIHtcbiAgICAgIHNob3AuYWRkKFwicGF5bWVudFNldHRpbmdzXCIsIGZ1bmN0aW9uIChwYXltZW50U2V0dGluZ3MpIHtcbiAgICAgICAgcGF5bWVudFNldHRpbmdzLmFkZChcImVuYWJsZWRQcmVzZW50bWVudEN1cnJlbmNpZXNcIik7XG4gICAgICB9KTtcbiAgICAgIHNob3AuYWRkKFwiZGVzY3JpcHRpb25cIik7XG4gICAgICBzaG9wLmFkZChcIm1vbmV5Rm9ybWF0XCIpO1xuICAgICAgc2hvcC5hZGQoXCJuYW1lXCIpO1xuICAgICAgc2hvcC5hZGQoXCJwcmltYXJ5RG9tYWluXCIsIGZ1bmN0aW9uIChwcmltYXJ5RG9tYWluKSB7XG4gICAgICAgIHByaW1hcnlEb21haW4uYWRkKFwiaG9zdFwiKTtcbiAgICAgICAgcHJpbWFyeURvbWFpbi5hZGQoXCJzc2xFbmFibGVkXCIpO1xuICAgICAgICBwcmltYXJ5RG9tYWluLmFkZChcInVybFwiKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIGRvY3VtZW50O1xufVxuXG5mdW5jdGlvbiBxdWVyeSQxMShjbGllbnQpIHtcbiAgdmFyIGRvY3VtZW50ID0gY2xpZW50LmRvY3VtZW50KCk7XG4gIHZhciBzcHJlYWRzID0ge307XG4gIHNwcmVhZHMuUG9saWN5RnJhZ21lbnQgPSBkb2N1bWVudC5kZWZpbmVGcmFnbWVudChcIlBvbGljeUZyYWdtZW50XCIsIFwiU2hvcFBvbGljeVwiLCBmdW5jdGlvbiAocm9vdCkge1xuICAgIHJvb3QuYWRkKFwiaWRcIik7XG4gICAgcm9vdC5hZGQoXCJ0aXRsZVwiKTtcbiAgICByb290LmFkZChcInVybFwiKTtcbiAgICByb290LmFkZChcImJvZHlcIik7XG4gIH0pO1xuICBkb2N1bWVudC5hZGRRdWVyeShmdW5jdGlvbiAocm9vdCkge1xuICAgIHJvb3QuYWRkKFwic2hvcFwiLCBmdW5jdGlvbiAoc2hvcCkge1xuICAgICAgc2hvcC5hZGQoXCJwcml2YWN5UG9saWN5XCIsIGZ1bmN0aW9uIChwcml2YWN5UG9saWN5KSB7XG4gICAgICAgIHByaXZhY3lQb2xpY3kuYWRkRnJhZ21lbnQoc3ByZWFkcy5Qb2xpY3lGcmFnbWVudCk7XG4gICAgICB9KTtcbiAgICAgIHNob3AuYWRkKFwidGVybXNPZlNlcnZpY2VcIiwgZnVuY3Rpb24gKHRlcm1zT2ZTZXJ2aWNlKSB7XG4gICAgICAgIHRlcm1zT2ZTZXJ2aWNlLmFkZEZyYWdtZW50KHNwcmVhZHMuUG9saWN5RnJhZ21lbnQpO1xuICAgICAgfSk7XG4gICAgICBzaG9wLmFkZChcInJlZnVuZFBvbGljeVwiLCBmdW5jdGlvbiAocmVmdW5kUG9saWN5KSB7XG4gICAgICAgIHJlZnVuZFBvbGljeS5hZGRGcmFnbWVudChzcHJlYWRzLlBvbGljeUZyYWdtZW50KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIGRvY3VtZW50O1xufVxuXG4vLyBHcmFwaFFMXG4vKipcbiAqIFRoZSBKUyBCdXkgU0RLIHNob3AgcmVzb3VyY2VcbiAqIEBjbGFzc1xuICovXG5cbnZhciBTaG9wUmVzb3VyY2UgPSBmdW5jdGlvbiAoX1Jlc291cmNlKSB7XG4gIGluaGVyaXRzJDEoU2hvcFJlc291cmNlLCBfUmVzb3VyY2UpO1xuXG4gIGZ1bmN0aW9uIFNob3BSZXNvdXJjZSgpIHtcbiAgICBjbGFzc0NhbGxDaGVjayQxKHRoaXMsIFNob3BSZXNvdXJjZSk7XG4gICAgcmV0dXJuIHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4kMSh0aGlzLCAoU2hvcFJlc291cmNlLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoU2hvcFJlc291cmNlKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH1cblxuICBjcmVhdGVDbGFzcyQxKFNob3BSZXNvdXJjZSwgW3tcbiAgICBrZXk6ICdmZXRjaEluZm8nLFxuXG5cbiAgICAvKipcbiAgICAgKiBGZXRjaGVzIHNob3AgaW5mb3JtYXRpb24gKGBjdXJyZW5jeUNvZGVgLCBgZGVzY3JpcHRpb25gLCBgbW9uZXlGb3JtYXRgLCBgbmFtZWAsIGFuZCBgcHJpbWFyeURvbWFpbmApLlxuICAgICAqIFNlZSB0aGUge0BsaW5rIGh0dHBzOi8vaGVscC5zaG9waWZ5LmNvbS9hcGkvc3RvcmVmcm9udC1hcGkvcmVmZXJlbmNlL29iamVjdC9zaG9wfFN0b3JlZnJvbnQgQVBJIHJlZmVyZW5jZX0gZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGNsaWVudC5zaG9wLmZldGNoSW5mbygpLnRoZW4oKHNob3ApID0+IHtcbiAgICAgKiAgIC8vIERvIHNvbWV0aGluZyB3aXRoIHRoZSBzaG9wXG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlfEdyYXBoTW9kZWx9IEEgcHJvbWlzZSByZXNvbHZpbmcgd2l0aCBhIGBHcmFwaE1vZGVsYCBvZiB0aGUgc2hvcC5cbiAgICAgKi9cbiAgICB2YWx1ZTogZnVuY3Rpb24gZmV0Y2hJbmZvKCkge1xuICAgICAgcmV0dXJuIHRoaXMuZ3JhcGhRTENsaWVudC5zZW5kKHF1ZXJ5JDEwKS50aGVuKGRlZmF1bHRSZXNvbHZlcignc2hvcCcpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGZXRjaGVzIHNob3AgcG9saWNpZXMgKHByaXZhY3kgcG9saWN5LCB0ZXJtcyBvZiBzZXJ2aWNlIGFuZCByZWZ1bmQgcG9saWN5KS5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogY2xpZW50LnNob3AuZmV0Y2hQb2xpY2llcygpLnRoZW4oKHNob3ApID0+IHtcbiAgICAgKiAgIC8vIERvIHNvbWV0aGluZyB3aXRoIHRoZSBzaG9wXG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlfEdyYXBoTW9kZWx9IEEgcHJvbWlzZSByZXNvbHZpbmcgd2l0aCBhIGBHcmFwaE1vZGVsYCBvZiB0aGUgc2hvcC5cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnZmV0Y2hQb2xpY2llcycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGZldGNoUG9saWNpZXMoKSB7XG4gICAgICByZXR1cm4gdGhpcy5ncmFwaFFMQ2xpZW50LnNlbmQocXVlcnkkMTEpLnRoZW4oZGVmYXVsdFJlc29sdmVyKCdzaG9wJykpO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gU2hvcFJlc291cmNlO1xufShSZXNvdXJjZSk7XG5cbmZ1bmN0aW9uIGdldERpc2NvdW50QWxsb2NhdGlvbklkKGRpc2NvdW50QWxsb2NhdGlvbikge1xuICB2YXIgZGlzY291bnRBcHAgPSBkaXNjb3VudEFsbG9jYXRpb24uZGlzY291bnRBcHBsaWNhdGlvbjtcbiAgdmFyIGRpc2NvdW50SWQgPSBkaXNjb3VudEFsbG9jYXRpb24uY29kZSB8fCBkaXNjb3VudEFsbG9jYXRpb24udGl0bGUgfHwgZGlzY291bnRBcHAuY29kZSB8fCBkaXNjb3VudEFwcC50aXRsZTtcblxuICBpZiAoIWRpc2NvdW50SWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0Rpc2NvdW50IGFsbG9jYXRpb24gbXVzdCBoYXZlIGVpdGhlciBjb2RlIG9yIHRpdGxlIGluIGRpc2NvdW50QXBwbGljYXRpb246ICcgKyBKU09OLnN0cmluZ2lmeShkaXNjb3VudEFsbG9jYXRpb24pKTtcbiAgfVxuXG4gIHJldHVybiBkaXNjb3VudElkO1xufVxuXG5mdW5jdGlvbiBnZXREaXNjb3VudEFwcGxpY2F0aW9uSWQoZGlzY291bnRBcHBsaWNhdGlvbikge1xuICB2YXIgZGlzY291bnRJZCA9IGRpc2NvdW50QXBwbGljYXRpb24uY29kZSB8fCBkaXNjb3VudEFwcGxpY2F0aW9uLnRpdGxlO1xuXG4gIGlmICghZGlzY291bnRJZCkge1xuICAgIHRocm93IG5ldyBFcnJvcignRGlzY291bnQgYXBwbGljYXRpb24gbXVzdCBoYXZlIGVpdGhlciBjb2RlIG9yIHRpdGxlOiAnICsgSlNPTi5zdHJpbmdpZnkoZGlzY291bnRBcHBsaWNhdGlvbikpO1xuICB9XG5cbiAgcmV0dXJuIGRpc2NvdW50SWQ7XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRUb0NoZWNrb3V0RGlzY291bnRBcHBsaWNhdGlvblR5cGUoY2FydExpbmVJdGVtcywgY2FydE9yZGVyTGV2ZWxEaXNjb3VudEFsbG9jYXRpb25zKSB7XG4gIC8vIEZvciBlYWNoIGRpc2NvdW50IGFsbG9jYXRpb24sIG1vdmUgdGhlIGNvZGUvdGl0bGUgZmllbGQgdG8gYmUgaW5zaWRlIHRoZSBkaXNjb3VudEFwcGxpY2F0aW9uIGZpZWxkXG4gIC8vIFRoaXMgaXMgYmVjYXVzZSB0aGUgY29kZS90aXRsZSBmaWVsZCBpcyBwYXJ0IG9mIHRoZSBkaXNjb3VudCBhbGxvY2F0aW9uIGZvciBhIENhcnQsIGJ1dCBwYXJ0IG9mXG4gIC8vIHRoZSBkaXNjb3VudCBhcHBsaWNhdGlvbiBmb3IgYSBjaGVja291dFxuICBmb3IgKHZhciBpID0gMDsgaSA8IGNhcnRMaW5lSXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgZGlzY291bnRBbGxvY2F0aW9ucyA9IGNhcnRMaW5lSXRlbXNbaV0uZGlzY291bnRBbGxvY2F0aW9ucztcblxuXG4gICAgaWYgKCFkaXNjb3VudEFsbG9jYXRpb25zKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IGRpc2NvdW50QWxsb2NhdGlvbnMubGVuZ3RoOyBqKyspIHtcbiAgICAgIHZhciBhbGxvY2F0aW9uID0gZGlzY291bnRBbGxvY2F0aW9uc1tqXTtcbiAgICAgIHZhciBuZXdEaXNjb3VudEFwcGxpY2F0aW9uID0gT2JqZWN0LmFzc2lnbih7fSwgYWxsb2NhdGlvbi5kaXNjb3VudEFwcGxpY2F0aW9uIHx8IHt9LCBhbGxvY2F0aW9uLmNvZGUgPyB7IGNvZGU6IGFsbG9jYXRpb24uY29kZSB9IDogbnVsbCwgYWxsb2NhdGlvbi50aXRsZSA/IHsgdGl0bGU6IGFsbG9jYXRpb24udGl0bGUgfSA6IG51bGwpO1xuXG4gICAgICB2YXIgbmV3QWxsb2NhdGlvbiA9IE9iamVjdC5hc3NpZ24oe30sIGFsbG9jYXRpb24pO1xuXG4gICAgICBkZWxldGUgbmV3QWxsb2NhdGlvbi5jb2RlO1xuICAgICAgZGVsZXRlIG5ld0FsbG9jYXRpb24udGl0bGU7XG4gICAgICBuZXdBbGxvY2F0aW9uLmRpc2NvdW50QXBwbGljYXRpb24gPSBuZXdEaXNjb3VudEFwcGxpY2F0aW9uO1xuXG4gICAgICBkaXNjb3VudEFsbG9jYXRpb25zW2pdID0gbmV3QWxsb2NhdGlvbjtcbiAgICB9XG4gIH1cblxuICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgY2FydE9yZGVyTGV2ZWxEaXNjb3VudEFsbG9jYXRpb25zLmxlbmd0aDsgX2krKykge1xuICAgIHZhciBfYWxsb2NhdGlvbiA9IGNhcnRPcmRlckxldmVsRGlzY291bnRBbGxvY2F0aW9uc1tfaV07XG4gICAgdmFyIF9uZXdEaXNjb3VudEFwcGxpY2F0aW9uID0gT2JqZWN0LmFzc2lnbih7fSwgX2FsbG9jYXRpb24uZGlzY291bnRBcHBsaWNhdGlvbiB8fCB7fSwgX2FsbG9jYXRpb24uY29kZSA/IHsgY29kZTogX2FsbG9jYXRpb24uY29kZSB9IDogbnVsbCwgX2FsbG9jYXRpb24udGl0bGUgPyB7IHRpdGxlOiBfYWxsb2NhdGlvbi50aXRsZSB9IDogbnVsbCk7XG5cbiAgICB2YXIgX25ld0FsbG9jYXRpb24gPSBPYmplY3QuYXNzaWduKHt9LCBfYWxsb2NhdGlvbik7XG5cbiAgICBkZWxldGUgX25ld0FsbG9jYXRpb24uY29kZTtcbiAgICBkZWxldGUgX25ld0FsbG9jYXRpb24udGl0bGU7XG4gICAgX25ld0FsbG9jYXRpb24uZGlzY291bnRBcHBsaWNhdGlvbiA9IF9uZXdEaXNjb3VudEFwcGxpY2F0aW9uO1xuXG4gICAgY2FydE9yZGVyTGV2ZWxEaXNjb3VudEFsbG9jYXRpb25zW19pXSA9IF9uZXdBbGxvY2F0aW9uO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdyb3VwT3JkZXJMZXZlbERpc2NvdW50QWxsb2NhdGlvbnNCeURpc2NvdW50SWQoY2FydERpc2NvdW50QWxsb2NhdGlvbnMpIHtcbiAgcmV0dXJuIGNhcnREaXNjb3VudEFsbG9jYXRpb25zLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBkaXNjb3VudEFsbG9jYXRpb24pIHtcbiAgICB2YXIgaWQgPSBnZXREaXNjb3VudEFsbG9jYXRpb25JZChkaXNjb3VudEFsbG9jYXRpb24pO1xuICAgIHZhciBrZXkgPSBpZC50b0xvd2VyQ2FzZSgpO1xuXG4gICAgYWNjLnNldChrZXksIFtdLmNvbmNhdCh0b0NvbnN1bWFibGVBcnJheSQxKGFjYy5nZXQoa2V5KSB8fCBbXSksIFtkaXNjb3VudEFsbG9jYXRpb25dKSk7XG5cbiAgICByZXR1cm4gYWNjO1xuICB9LCBuZXcgTWFwKCkpO1xufVxuXG5mdW5jdGlvbiBmaW5kTGluZUlkRm9yRWFjaE9yZGVyTGV2ZWxEaXNjb3VudEFsbG9jYXRpb24oY2FydExpbmVzLCBvcmRlckxldmVsRGlzY291bnRBbGxvY2F0aW9ucykge1xuICBpZiAoIWNhcnRMaW5lcy5sZW5ndGggfHwgIW9yZGVyTGV2ZWxEaXNjb3VudEFsbG9jYXRpb25zLmxlbmd0aCkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIGlmIChvcmRlckxldmVsRGlzY291bnRBbGxvY2F0aW9ucy5sZW5ndGggJSBjYXJ0TGluZXMubGVuZ3RoICE9PSAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIG51bWJlciBvZiBvcmRlci1sZXZlbCBkaXNjb3VudCBhbGxvY2F0aW9ucy4gRm9yIGVhY2ggb3JkZXItbGV2ZWwgZGlzY291bnQsIHRoZXJlIG11c3QgYmUgMSBvcmRlci1sZXZlbCBkaXNjb3VudCBhbGxvY2F0aW9uIGZvciBlYWNoIGxpbmUgaXRlbS4gXFxuICAgICAgTnVtYmVyIG9mIGxpbmUgaXRlbXM6ICcgKyBjYXJ0TGluZXMubGVuZ3RoICsgJy4gTnVtYmVyIG9mIGRpc2NvdW50IGFsbG9jYXRpb25zOiAnICsgb3JkZXJMZXZlbERpc2NvdW50QWxsb2NhdGlvbnMubGVuZ3RoKTtcbiAgfVxuXG4gIC8vIE1heSBoYXZlIG11bHRpcGxlIG9yZGVyLWxldmVsIGRpc2NvdW50IGFsbG9jYXRpb25zIGZvciBhIGdpdmVuIGxpbmUgaXRlbVxuICB2YXIgZGlzY291bnRJZFRvRGlzY291bnRBbGxvY2F0aW9uc01hcCA9IGdyb3VwT3JkZXJMZXZlbERpc2NvdW50QWxsb2NhdGlvbnNCeURpc2NvdW50SWQob3JkZXJMZXZlbERpc2NvdW50QWxsb2NhdGlvbnMpO1xuXG4gIC8vIFNvcnQgZWFjaCBhcnJheSB3aXRoaW4gdGhlIE1hcCBieSBkaXNjb3VudGVkQW1vdW50IHNvIHRoYXQgdGhlIGxvd2VzdCBkaXNjb3VudGVkIGFtb3VudCBhcHBlYXJzIGZpcnN0XG4gIGRpc2NvdW50SWRUb0Rpc2NvdW50QWxsb2NhdGlvbnNNYXAuZm9yRWFjaChmdW5jdGlvbiAoYWxsb2NhdGlvbnMpIHtcbiAgICBhbGxvY2F0aW9ucy5zb3J0KGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7XG4gICAgICByZXR1cm4gZmlyc3QuZGlzY291bnRlZEFtb3VudC5hbW91bnQgLSBzZWNvbmQuZGlzY291bnRlZEFtb3VudC5hbW91bnQ7XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIFNvcnQgY2FydCBsaW5lIGl0ZW1zIHNvIHRoYXQgdGhlIGl0ZW0gd2l0aCB0aGUgbG93ZXN0IGNvc3QgKGFmdGVyIGxpbmUtbGV2ZWwgZGlzY291bnRzKSBhcHBlYXJzIGZpcnN0XG4gIHZhciBzb3J0ZWRDYXJ0TGluZUl0ZW1zID0gW10uY29uY2F0KHRvQ29uc3VtYWJsZUFycmF5JDEoY2FydExpbmVzKSkuc29ydChmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkge1xuICAgIHJldHVybiBmaXJzdC5jb3N0LnRvdGFsQW1vdW50LmFtb3VudCAtIHNlY29uZC5jb3N0LnRvdGFsQW1vdW50LmFtb3VudDtcbiAgfSk7XG5cbiAgLy8gRm9yIGVhY2ggZGlzY291bnQsIHRoZSBkaXNjb3VudCBhbGxvY2F0aW9uIHdpdGggdGhlIHNtYWxsZXN0IGFtb3VudCBzaG91bGQgYmUgYXBwbGllZFxuICAvLyB0byB0aGUgaXRlbSB3aXRoIHRoZSBsb3dlc3QgY29zdCAoYWZ0ZXIgbGluZS1sZXZlbCBkaXNjb3VudHMpXG4gIHJldHVybiBBcnJheS5mcm9tKGRpc2NvdW50SWRUb0Rpc2NvdW50QWxsb2NhdGlvbnNNYXAudmFsdWVzKCkpLmZsYXRNYXAoZnVuY3Rpb24gKGFsbG9jYXRpb25zKSB7XG4gICAgcmV0dXJuIHNvcnRlZENhcnRMaW5lSXRlbXMubWFwKGZ1bmN0aW9uIChsaW5lSXRlbSwgaW5kZXgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlkOiBsaW5lSXRlbS5pZCxcbiAgICAgICAgZGlzY291bnRBbGxvY2F0aW9uOiB7XG4gICAgICAgICAgZGlzY291bnRlZEFtb3VudDogYWxsb2NhdGlvbnNbaW5kZXhdLmRpc2NvdW50ZWRBbW91bnQsXG4gICAgICAgICAgZGlzY291bnRBcHBsaWNhdGlvbjogYWxsb2NhdGlvbnNbaW5kZXhdLmRpc2NvdW50QXBwbGljYXRpb25cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGRpc2NvdW50TWFwcGVyKF9yZWYpIHtcbiAgdmFyIGNhcnRMaW5lSXRlbXMgPSBfcmVmLmNhcnRMaW5lSXRlbXMsXG4gICAgICBjYXJ0RGlzY291bnRBbGxvY2F0aW9ucyA9IF9yZWYuY2FydERpc2NvdW50QWxsb2NhdGlvbnMsXG4gICAgICBjYXJ0RGlzY291bnRDb2RlcyA9IF9yZWYuY2FydERpc2NvdW50Q29kZXM7XG5cbiAgdmFyIGhhc0Rpc2NvdW50QWxsb2NhdGlvbnMgPSBmYWxzZTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGNhcnRMaW5lSXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgZGlzY291bnRBbGxvY2F0aW9ucyA9IGNhcnRMaW5lSXRlbXNbaV0uZGlzY291bnRBbGxvY2F0aW9ucztcblxuXG4gICAgaWYgKGRpc2NvdW50QWxsb2NhdGlvbnMgJiYgZGlzY291bnRBbGxvY2F0aW9ucy5sZW5ndGgpIHtcbiAgICAgIGhhc0Rpc2NvdW50QWxsb2NhdGlvbnMgPSB0cnVlO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIGlmICghaGFzRGlzY291bnRBbGxvY2F0aW9ucyAmJiAhY2FydERpc2NvdW50QWxsb2NhdGlvbnMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRpc2NvdW50QXBwbGljYXRpb25zOiBbXSxcbiAgICAgIGNhcnRMaW5lc1dpdGhBbGxEaXNjb3VudEFsbG9jYXRpb25zOiBjYXJ0TGluZUl0ZW1zXG4gICAgfTtcbiAgfVxuXG4gIC8vIEZvciBlYWNoIGRpc2NvdW50IGFsbG9jYXRpb24sIG1vdmUgdGhlIGNvZGUvdGl0bGUgZmllbGQgdG8gYmUgaW5zaWRlIHRoZSBkaXNjb3VudEFwcGxpY2F0aW9uLlxuICAvLyBUaGlzIGlzIGJlY2F1c2UgdGhlIGNvZGUvdGl0bGUgZmllbGQgaXMgcGFydCBvZiB0aGUgZGlzY291bnQgYWxsb2NhdGlvbiBmb3IgYSBDYXJ0LCBidXQgcGFydCBvZlxuICAvLyB0aGUgZGlzY291bnQgYXBwbGljYXRpb24gZm9yIGEgQ2hlY2tvdXRcbiAgLy9cbiAgLy8gQ0FSVCBFWEFNUExFOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IENIRUNLT1VUIEVYQU1QTEU6XG4gIC8vIFwiY2FydFwiOiB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFwiY2hlY2tvdXRcIjoge1xuICAvLyAgIFwiZGlzY291bnRBbGxvY2F0aW9uc1wiOiBbICAgICAgICAgICAgICAgICAgICAgfCAgIFwiZGlzY291bnRBcHBsaWNhdGlvbnNcIjoge1xuICAvLyAgICAgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIFwibm9kZXNcIjogW1xuICAvLyAgICAgICBcImRpc2NvdW50ZWRBbW91bnRcIjogeyAgICAgICAgICAgICAgICAgICAgfCAgICAgICB7XG4gIC8vICAgICAgICAgXCJhbW91bnRcIjogXCIxOC4wXCIsICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgICBcInRhcmdldFNlbGVjdGlvblwiOiBcIkFMTFwiLFxuICAvLyAgICAgICAgIFwiY3VycmVuY3lDb2RlXCI6IFwiQ0FEXCIgICAgICAgICAgICAgICAgICB8ICAgICAgICAgXCJhbGxvY2F0aW9uTWV0aG9kXCI6IFwiRUFDSFwiLFxuICAvLyAgICAgICB9LCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgICBcInRhcmdldFR5cGVcIjogXCJTSElQUElOR19MSU5FXCIsXG4gIC8vICAgICAgIFwiZGlzY291bnRBcHBsaWNhdGlvblwiOiB7ICAgICAgICAgICAgICAgICB8ICAgICAgICAgXCJ2YWx1ZVwiOiB7XG4gIC8vICAgICAgICAgXCJ0YXJnZXRUeXBlXCI6IFwiU0hJUFBJTkdfTElORVwiLCAgICAgICAgIHwgICAgICAgICAgIFwicGVyY2VudGFnZVwiOiAxMDAuMFxuICAvLyAgICAgICAgIFwiYWxsb2NhdGlvbk1ldGhvZFwiOiBcIkVBQ0hcIiwgICAgICAgICAgICB8ICAgICAgICAgfSxcbiAgLy8gICAgICAgICBcInRhcmdldFNlbGVjdGlvblwiOiBcIkFMTFwiLCAgICAgICAgICAgICAgfCAgICAgICAgIFwiY29kZVwiOiBcIkZSRUVTSElQUElOR0FMTENPVU5UUklFU1wiLFxuICAvLyAgICAgICAgIFwidmFsdWVcIjogeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgIFwiYXBwbGljYWJsZVwiOiB0cnVlXG4gIC8vICAgICAgICAgICBcInBlcmNlbnRhZ2VcIjogMTAwLjAgICAgICAgICAgICAgICAgICB8ICAgICAgIH1cbiAgLy8gICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICBdXG4gIC8vICAgICAgIH0sICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgIH0sXG4gIC8vICAgICAgIFwiY29kZVwiOiBcIkZSRUVTSElQUElOR0FMTENPVU5UUklFU1wiICAgICAgIHwgfVxuICAvLyAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgLy8gICBdICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gIC8vICAgXCJkaXNjb3VudENvZGVzXCI6IFsgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gIC8vICAgICB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAvLyAgICAgICBcImNvZGVcIjogXCJGUkVFU0hJUFBJTkdBTExDT1VOVFJJRVNcIiwgICAgICB8XG4gIC8vICAgICAgIFwiYXBwbGljYWJsZVwiOiB0cnVlICAgICAgICAgICAgICAgICAgICAgICB8XG4gIC8vICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAvLyAgIF0sICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgLy8gfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gIGNvbnZlcnRUb0NoZWNrb3V0RGlzY291bnRBcHBsaWNhdGlvblR5cGUoY2FydExpbmVJdGVtcywgY2FydERpc2NvdW50QWxsb2NhdGlvbnMpO1xuXG4gIC8vIFdoaWxlIGJvdGggdGhlIENhcnQgYW5kIENoZWNrb3V0IEFQSSByZXR1cm4gZGlzY291bnQgYWxsb2NhdGlvbnMgZm9yIGxpbmUgaXRlbXMgYW5kIHRoZXJlZm9yZSBhcHBlYXIgc2ltaWxhciwgdGhleSBhcmVcbiAgLy8gc3Vic3RhbnRpYWxseSBkaWZmZXJlbnQgaW4gaG93IHRoZXkgaGFuZGxlIG9yZGVyLWxldmVsIGRpc2NvdW50cy5cbiAgLy9cbiAgLy8gVGhlIENoZWNrb3V0IEFQSSBPTkxZIHJldHVybnMgZGlzY291bnQgYWxsb2NhdGlvbnMgYXMgYSBmaWVsZCBvbiBsaW5lIGl0ZW1zIChmb3IgYm90aCBwcm9kdWN0LWxldmVsIGFuZCBvcmRlci1sZXZlbCBkaXNjb3VudHMpLlxuICAvLyBTaGlwcGluZyBkaXNjb3VudHMgYXJlIG9ubHkgcmV0dXJuZWQgYXMgcGFydCBvZiBgY2hlY2tvdXQuZGlzY291bnRBcHBsaWNhdGlvbnNgIChhbmQgZG8gTk9UIGhhdmUgYW55IGRpc2NvdW50IGFsbG9jYXRpb25zKS5cbiAgLy9cbiAgLy8gVW5saWtlIHRoZSBDaGVja291dCBBUEksIHRoZSBDYXJ0IEFQSSByZXR1cm5zIGRpZmZlcmVudCB0eXBlcyBvZiBkaXNjb3VudCBhbGxvY2F0aW9ucyBpbiAyIGRpZmZlcmVudCBwbGFjZXM6XG4gIC8vIDEuIERpc2NvdW50IGFsbG9jYXRpb25zIGFzIGEgZmllbGQgb24gbGluZSBpdGVtcyAoZm9yIHByb2R1Y3QtbGV2ZWwgZGlzY291bnRzKVxuICAvLyAyLiBEaXNjb3VudCBhbGxvY2F0aW9ucyBhcyBhIGZpZWxkIG9uIHRoZSBDYXJ0IGl0c2VsZiAoZm9yIG9yZGVyLWxldmVsIGRpc2NvdW50cyBhbmQgc2hpcHBpbmcgZGlzY291bnRzKVxuICAvL1xuICAvLyBUaGVyZWZvcmUsIHRvIG1hcCB0aGUgQ2FydCBBUEkgcGF5bG9hZCB0byB0aGUgZXF1aXZhbGVudCBDaGVja291dCBBUEkgcGF5bG9hZCwgd2UgbmVlZCB0byBnbyB0aHJvdWdoIGFsbCBvZiB0aGUgb3JkZXItbGV2ZWwgZGlzY291bnRcbiAgLy8gYWxsb2NhdGlvbnMgb24gdGhlICpDYXJ0KiwgYW5kIGRldGVybWluZSB3aGljaCBsaW5lIGl0ZW0gdGhlIGRpc2NvdW50IGlzIGFsbG9jYXRlZCB0by4gQnV0IGZpcnN0LCB3ZSBtdXN0IGdvIHRocm91Z2ggdGhlIGNhcnQtbGV2ZWxcbiAgLy8gZGlzY291bnQgYWxsb2NhdGlvbnMgdG8gc3BsaXQgdGhlbSBpbnRvIG9yZGVyLWxldmVsIGFuZCBzaGlwcGluZy1sZXZlbCBkaXNjb3VudCBhbGxvY2F0aW9ucy5cbiAgLy8gICAgIC0gT05MWSB0aGUgb3JkZXItbGV2ZWwgZGlzY291bnQgYWxsb2NhdGlvbnMgZ28gb250byBsaW5lIGl0ZW1zLlxuXG4gIHZhciBfY2FydERpc2NvdW50QWxsb2NhdGkgPSBjYXJ0RGlzY291bnRBbGxvY2F0aW9ucy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgZGlzY291bnRBbGxvY2F0aW9uKSB7XG4gICAgaWYgKGRpc2NvdW50QWxsb2NhdGlvbi5kaXNjb3VudEFwcGxpY2F0aW9uLnRhcmdldFR5cGUgPT09ICdTSElQUElOR19MSU5FJykge1xuICAgICAgYWNjWzBdLnB1c2goZGlzY291bnRBbGxvY2F0aW9uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYWNjWzFdLnB1c2goZGlzY291bnRBbGxvY2F0aW9uKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYWNjO1xuICB9LCBbW10sIFtdXSksXG4gICAgICBfY2FydERpc2NvdW50QWxsb2NhdGkyID0gc2xpY2VkVG9BcnJheSQxKF9jYXJ0RGlzY291bnRBbGxvY2F0aSwgMiksXG4gICAgICBzaGlwcGluZ0Rpc2NvdW50QWxsb2NhdGlvbnMgPSBfY2FydERpc2NvdW50QWxsb2NhdGkyWzBdLFxuICAgICAgb3JkZXJMZXZlbERpc2NvdW50QWxsb2NhdGlvbnMgPSBfY2FydERpc2NvdW50QWxsb2NhdGkyWzFdO1xuXG4gIHZhciBjYXJ0TGluZXNXaXRoQWxsRGlzY291bnRBbGxvY2F0aW9ucyA9IG1lcmdlQ2FydE9yZGVyTGV2ZWxEaXNjb3VudEFsbG9jYXRpb25zVG9DYXJ0TGluZURpc2NvdW50QWxsb2NhdGlvbnMoe1xuICAgIGxpbmVJdGVtczogY2FydExpbmVJdGVtcyxcbiAgICBvcmRlckxldmVsRGlzY291bnRBbGxvY2F0aW9uc0ZvckxpbmVzOiBmaW5kTGluZUlkRm9yRWFjaE9yZGVyTGV2ZWxEaXNjb3VudEFsbG9jYXRpb24oY2FydExpbmVJdGVtcywgb3JkZXJMZXZlbERpc2NvdW50QWxsb2NhdGlvbnMpXG4gIH0pO1xuXG4gIC8vIFRoZSBDYXJ0IEFQSSBhbmQgQ2hlY2tvdXQgQVBJIGhhdmUgYWxtb3N0IGlkZW50aWNhbCBmaWVsZHMgZm9yIGRpc2NvdW50IGFwcGxpY2F0aW9ucywgYnV0IHRoZSBgdmFsdWVgIGZpZWxkJ3MgYmVoYXZpb3VyIChmb3IgZml4ZWQtYW1vdW50IGRpc2NvdW50cylcbiAgLy8gaXMgZGlmZmVyZW50LlxuICAvL1xuICAvLyBXaXRoIHRoZSBDaGVja291dCBBUEksIHRoZSBgdmFsdWVgIGZpZWxkIG9mIGEgZGlzY291bnQgYXBwbGljYXRpb24gaXMgZXF1YWwgdG8gdGhlIFNVTSBvZiBhbGwgb2YgdGhlIGBhbGxvY2F0ZWRBbW91bnRgcyBvZiBhbGwgb2YgdGhlIGRpc2NvdW50IGFsbG9jYXRpb25zXG4gIC8vIGZvciB0aGF0IGRpc2NvdW50LlxuICAvLyBXaXRoIHRoZSBDYXJ0IEFQSSwgdGhlIGB2YWx1ZWAgZmllbGQgb2YgYSBkaXNjb3VudCBhcHBsaWNhdGlvbiBpcyBhbHdheXMgZXF1YWwgdG8gdGhlIGBhbGxvY2F0ZWRBbW91bnRgIG9mIHRoZSBkaXNjb3VudCBhbGxvY2F0aW9uIHRoYXQgdGhlIGRpc2NvdW50XG4gIC8vIGFwcGxpY2F0aW9uIGlzIGluc2lkZSBvZi4gVGhlcmVmb3JlLCB0byBtYXAgdGhpcyB0byB0aGUgZXF1aXZhbGVudCBDaGVja291dCBBUEkgcGF5bG9hZCwgd2UgbmVlZCB0byBmaW5kIGFsbCBvZiB0aGUgZGlzY291bnQgYWxsb2NhdGlvbnMgZm9yIHRoZSBzYW1lXG4gIC8vIGRpc2NvdW50LCBhbmQgc3VtIHVwIGFsbCBvZiB0aGUgYWxsb2NhdGVkIGFtb3VudHMgdG8gZGV0ZXJtaW5lIHRoZSBUT1RBTCB2YWx1ZSBvZiB0aGUgZGlzY291bnQuXG4gIHZhciBkaXNjb3VudElkVG9EaXNjb3VudEFwcGxpY2F0aW9uTWFwID0gZ2VuZXJhdGVEaXNjb3VudEFwcGxpY2F0aW9ucyhjYXJ0TGluZXNXaXRoQWxsRGlzY291bnRBbGxvY2F0aW9ucywgc2hpcHBpbmdEaXNjb3VudEFsbG9jYXRpb25zLCBjYXJ0RGlzY291bnRDb2Rlcyk7XG5cbiAgcmV0dXJuIHtcbiAgICBkaXNjb3VudEFwcGxpY2F0aW9uczogQXJyYXkuZnJvbShkaXNjb3VudElkVG9EaXNjb3VudEFwcGxpY2F0aW9uTWFwLnZhbHVlcygpKSxcbiAgICBjYXJ0TGluZXNXaXRoQWxsRGlzY291bnRBbGxvY2F0aW9uczogY2FydExpbmVzV2l0aEFsbERpc2NvdW50QWxsb2NhdGlvbnNcbiAgfTtcbn1cblxuZnVuY3Rpb24gbWVyZ2VDYXJ0T3JkZXJMZXZlbERpc2NvdW50QWxsb2NhdGlvbnNUb0NhcnRMaW5lRGlzY291bnRBbGxvY2F0aW9ucyhfcmVmMikge1xuICB2YXIgbGluZUl0ZW1zID0gX3JlZjIubGluZUl0ZW1zLFxuICAgICAgb3JkZXJMZXZlbERpc2NvdW50QWxsb2NhdGlvbnNGb3JMaW5lcyA9IF9yZWYyLm9yZGVyTGV2ZWxEaXNjb3VudEFsbG9jYXRpb25zRm9yTGluZXM7XG5cbiAgcmV0dXJuIGxpbmVJdGVtcy5tYXAoZnVuY3Rpb24gKGxpbmUpIHtcbiAgICB2YXIgbGluZUl0ZW1JZCA9IGxpbmUuaWQ7XG4gICAgLy8gQ291bGQgaGF2ZSBtdWx0aXBsZSBvcmRlci1sZXZlbCBkaXNjb3VudCBhbGxvY2F0aW9ucyBmb3IgYSBnaXZlbiBsaW5lIGl0ZW1cbiAgICB2YXIgb3JkZXJMZXZlbERpc2NvdW50QWxsb2NhdGlvbnNGb3JMaW5lID0gb3JkZXJMZXZlbERpc2NvdW50QWxsb2NhdGlvbnNGb3JMaW5lcy5maWx0ZXIoZnVuY3Rpb24gKF9yZWYzKSB7XG4gICAgICB2YXIgaWQgPSBfcmVmMy5pZDtcbiAgICAgIHJldHVybiBpZCA9PT0gbGluZUl0ZW1JZDtcbiAgICB9KS5tYXAoZnVuY3Rpb24gKF9yZWY0KSB7XG4gICAgICB2YXIgZGlzY291bnRBbGxvY2F0aW9uID0gX3JlZjQuZGlzY291bnRBbGxvY2F0aW9uO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGlzY291bnRlZEFtb3VudDogZGlzY291bnRBbGxvY2F0aW9uLmRpc2NvdW50ZWRBbW91bnQsXG4gICAgICAgIGRpc2NvdW50QXBwbGljYXRpb246IGRpc2NvdW50QWxsb2NhdGlvbi5kaXNjb3VudEFwcGxpY2F0aW9uXG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgdmFyIG1lcmdlZERpc2NvdW50QWxsb2NhdGlvbnMgPSAobGluZS5kaXNjb3VudEFsbG9jYXRpb25zIHx8IFtdKS5jb25jYXQob3JkZXJMZXZlbERpc2NvdW50QWxsb2NhdGlvbnNGb3JMaW5lKTtcbiAgICB2YXIgcmVzdWx0ID0gT2JqZWN0LmFzc2lnbih7fSwgbGluZSwge1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9uczogbWVyZ2VkRGlzY291bnRBbGxvY2F0aW9uc1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlRGlzY291bnRBcHBsaWNhdGlvbnMoY2FydExpbmVzV2l0aEFsbERpc2NvdW50QWxsb2NhdGlvbnMsIHNoaXBwaW5nRGlzY291bnRBbGxvY2F0aW9ucywgZGlzY291bnRDb2Rlcykge1xuICB2YXIgZGlzY291bnRJZFRvRGlzY291bnRBcHBsaWNhdGlvbk1hcCA9IG5ldyBNYXAoKTtcblxuICBpZiAoIWNhcnRMaW5lc1dpdGhBbGxEaXNjb3VudEFsbG9jYXRpb25zKSB7XG4gICAgcmV0dXJuIGRpc2NvdW50SWRUb0Rpc2NvdW50QXBwbGljYXRpb25NYXA7XG4gIH1cblxuICBjYXJ0TGluZXNXaXRoQWxsRGlzY291bnRBbGxvY2F0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmNSkge1xuICAgIHZhciBkaXNjb3VudEFsbG9jYXRpb25zID0gX3JlZjUuZGlzY291bnRBbGxvY2F0aW9ucztcblxuICAgIGlmICghZGlzY291bnRBbGxvY2F0aW9ucykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGRpc2NvdW50QWxsb2NhdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoZGlzY291bnRBbGxvY2F0aW9uKSB7XG4gICAgICBjcmVhdGVDaGVja291dERpc2NvdW50QXBwbGljYXRpb25Gcm9tQ2FydERpc2NvdW50QWxsb2NhdGlvbihkaXNjb3VudEFsbG9jYXRpb24sIGRpc2NvdW50SWRUb0Rpc2NvdW50QXBwbGljYXRpb25NYXAsIGRpc2NvdW50Q29kZXMpO1xuICAgIH0pO1xuICB9KTtcblxuICBzaGlwcGluZ0Rpc2NvdW50QWxsb2NhdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoZGlzY291bnRBbGxvY2F0aW9uKSB7XG4gICAgY3JlYXRlQ2hlY2tvdXREaXNjb3VudEFwcGxpY2F0aW9uRnJvbUNhcnREaXNjb3VudEFsbG9jYXRpb24oZGlzY291bnRBbGxvY2F0aW9uLCBkaXNjb3VudElkVG9EaXNjb3VudEFwcGxpY2F0aW9uTWFwLCBkaXNjb3VudENvZGVzKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGRpc2NvdW50SWRUb0Rpc2NvdW50QXBwbGljYXRpb25NYXA7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUNoZWNrb3V0RGlzY291bnRBcHBsaWNhdGlvbkZyb21DYXJ0RGlzY291bnRBbGxvY2F0aW9uKGRpc2NvdW50QWxsb2NhdGlvbiwgZGlzY291bnRJZFRvRGlzY291bnRBcHBsaWNhdGlvbk1hcCwgZGlzY291bnRDb2Rlcykge1xuICB2YXIgZGlzY291bnRBcHAgPSBkaXNjb3VudEFsbG9jYXRpb24uZGlzY291bnRBcHBsaWNhdGlvbjtcbiAgdmFyIGRpc2NvdW50SWQgPSBnZXREaXNjb3VudEFsbG9jYXRpb25JZChkaXNjb3VudEFsbG9jYXRpb24pO1xuXG4gIGlmICghZGlzY291bnRJZCkge1xuICAgIHRocm93IG5ldyBFcnJvcignRGlzY291bnQgYWxsb2NhdGlvbiBtdXN0IGhhdmUgZWl0aGVyIGNvZGUgb3IgdGl0bGUgaW4gZGlzY291bnRBcHBsaWNhdGlvbjogJyArIEpTT04uc3RyaW5naWZ5KGRpc2NvdW50QWxsb2NhdGlvbikpO1xuICB9XG5cbiAgaWYgKGRpc2NvdW50SWRUb0Rpc2NvdW50QXBwbGljYXRpb25NYXAuaGFzKGRpc2NvdW50SWQudG9Mb3dlckNhc2UoKSkpIHtcbiAgICB2YXIgZXhpc3RpbmdEaXNjb3VudEFwcGxpY2F0aW9uID0gZGlzY291bnRJZFRvRGlzY291bnRBcHBsaWNhdGlvbk1hcC5nZXQoZGlzY291bnRJZC50b0xvd2VyQ2FzZSgpKTtcblxuICAgIC8vIGlmIGV4aXN0aW5nRGlzY291bnRBcHBsaWNhdGlvbi52YWx1ZSBpcyBhbiBhbW91bnQgcmF0aGVyIHRoYW4gYSBwZXJjZW50YWdlIGRpc2NvdW50XG4gICAgaWYgKGV4aXN0aW5nRGlzY291bnRBcHBsaWNhdGlvbi52YWx1ZSAmJiAnYW1vdW50JyBpbiBleGlzdGluZ0Rpc2NvdW50QXBwbGljYXRpb24udmFsdWUpIHtcbiAgICAgIGV4aXN0aW5nRGlzY291bnRBcHBsaWNhdGlvbi52YWx1ZSA9IHtcbiAgICAgICAgYW1vdW50OiAoTnVtYmVyKGV4aXN0aW5nRGlzY291bnRBcHBsaWNhdGlvbi52YWx1ZS5hbW91bnQpICsgTnVtYmVyKGRpc2NvdW50QWxsb2NhdGlvbi5kaXNjb3VudGVkQW1vdW50LmFtb3VudCkpLnRvRml4ZWQoMiksXG4gICAgICAgIGN1cnJlbmN5Q29kZTogZXhpc3RpbmdEaXNjb3VudEFwcGxpY2F0aW9uLnZhbHVlLmN1cnJlbmN5Q29kZSxcbiAgICAgICAgdHlwZTogZXhpc3RpbmdEaXNjb3VudEFwcGxpY2F0aW9uLnZhbHVlLnR5cGVcbiAgICAgIH07XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHZhciBkaXNjb3VudEFwcGxpY2F0aW9uID0ge1xuICAgICAgX190eXBlbmFtZTogJ0Rpc2NvdW50QXBwbGljYXRpb24nLFxuICAgICAgdGFyZ2V0U2VsZWN0aW9uOiBkaXNjb3VudEFwcC50YXJnZXRTZWxlY3Rpb24sXG4gICAgICBhbGxvY2F0aW9uTWV0aG9kOiBkaXNjb3VudEFwcC5hbGxvY2F0aW9uTWV0aG9kLFxuICAgICAgdGFyZ2V0VHlwZTogZGlzY291bnRBcHAudGFyZ2V0VHlwZSxcbiAgICAgIHZhbHVlOiBkaXNjb3VudEFwcC52YWx1ZSxcbiAgICAgIGhhc05leHRQYWdlOiBmYWxzZSxcbiAgICAgIGhhc1ByZXZpb3VzUGFnZTogZmFsc2VcbiAgICB9O1xuXG4gICAgaWYgKCdjb2RlJyBpbiBkaXNjb3VudEFsbG9jYXRpb24uZGlzY291bnRBcHBsaWNhdGlvbikge1xuICAgICAgdmFyIGRpc2NvdW50Q29kZSA9IGRpc2NvdW50Q29kZXMuZmluZChmdW5jdGlvbiAoX3JlZjYpIHtcbiAgICAgICAgdmFyIGNvZGUgPSBfcmVmNi5jb2RlO1xuICAgICAgICByZXR1cm4gY29kZS50b0xvd2VyQ2FzZSgpID09PSBkaXNjb3VudElkLnRvTG93ZXJDYXNlKCk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKCFkaXNjb3VudENvZGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdEaXNjb3VudCBjb2RlICcgKyBkaXNjb3VudElkICsgJyBub3QgZm91bmQgaW4gY2FydCBkaXNjb3VudCBjb2Rlcy4gRGlzY291bnQgY29kZXM6ICcgKyBKU09OLnN0cmluZ2lmeShkaXNjb3VudENvZGVzKSk7XG4gICAgICB9XG4gICAgICBkaXNjb3VudEFwcGxpY2F0aW9uID0gT2JqZWN0LmFzc2lnbih7fSwgZGlzY291bnRBcHBsaWNhdGlvbiwge1xuICAgICAgICBjb2RlOiBkaXNjb3VudEFsbG9jYXRpb24uZGlzY291bnRBcHBsaWNhdGlvbi5jb2RlLFxuICAgICAgICBhcHBsaWNhYmxlOiBkaXNjb3VudENvZGUuYXBwbGljYWJsZSxcbiAgICAgICAgdHlwZToge1xuICAgICAgICAgIGZpZWxkQmFzZVR5cGVzOiB7XG4gICAgICAgICAgICBhcHBsaWNhYmxlOiAnQm9vbGVhbicsXG4gICAgICAgICAgICBjb2RlOiAnU3RyaW5nJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgaW1wbGVtZW50c05vZGU6IGZhbHNlLFxuICAgICAgICAgIGtpbmQ6ICdPQkpFQ1QnLFxuICAgICAgICAgIG5hbWU6ICdEaXNjb3VudEFwcGxpY2F0aW9uJ1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGlzY291bnRBcHBsaWNhdGlvbiA9IE9iamVjdC5hc3NpZ24oe30sIGRpc2NvdW50QXBwbGljYXRpb24sIHtcbiAgICAgICAgdGl0bGU6IGRpc2NvdW50QWxsb2NhdGlvbi5kaXNjb3VudEFwcGxpY2F0aW9uLnRpdGxlLFxuICAgICAgICB0eXBlOiB7XG4gICAgICAgICAgZmllbGRCYXNlVHlwZXM6IHtcbiAgICAgICAgICAgIGFwcGxpY2FibGU6ICdCb29sZWFuJyxcbiAgICAgICAgICAgIHRpdGxlOiAnU3RyaW5nJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgaW1wbGVtZW50c05vZGU6IGZhbHNlLFxuICAgICAgICAgIGtpbmQ6ICdPQkpFQ1QnLFxuICAgICAgICAgIG5hbWU6ICdEaXNjb3VudEFwcGxpY2F0aW9uJ1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBkaXNjb3VudElkVG9EaXNjb3VudEFwcGxpY2F0aW9uTWFwLnNldChkaXNjb3VudElkLnRvTG93ZXJDYXNlKCksIGRpc2NvdW50QXBwbGljYXRpb24pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldFZhcmlhbnRUeXBlKCkge1xuICByZXR1cm4ge1xuICAgIG5hbWU6ICdQcm9kdWN0VmFyaWFudCcsXG4gICAga2luZDogJ09CSkVDVCcsXG4gICAgZmllbGRCYXNlVHlwZXM6IHtcbiAgICAgIGF2YWlsYWJsZUZvclNhbGU6ICdCb29sZWFuJyxcbiAgICAgIGNvbXBhcmVBdFByaWNlOiAnTW9uZXlWMicsXG4gICAgICBpZDogJ0lEJyxcbiAgICAgIGltYWdlOiAnSW1hZ2UnLFxuICAgICAgcHJpY2U6ICdNb25leVYyJyxcbiAgICAgIHByb2R1Y3Q6ICdQcm9kdWN0JyxcbiAgICAgIHNlbGVjdGVkT3B0aW9uczogJ1NlbGVjdGVkT3B0aW9uJyxcbiAgICAgIHNrdTogJ1N0cmluZycsXG4gICAgICB0aXRsZTogJ1N0cmluZycsXG4gICAgICB1bml0UHJpY2U6ICdNb25leVYyJyxcbiAgICAgIHVuaXRQcmljZU1lYXN1cmVtZW50OiAnVW5pdFByaWNlTWVhc3VyZW1lbnQnLFxuICAgICAgd2VpZ2h0OiAnRmxvYXQnXG4gICAgfSxcbiAgICBpbXBsZW1lbnRzTm9kZTogdHJ1ZVxuICB9O1xufVxuXG5mdW5jdGlvbiBnZXRMaW5lSXRlbVR5cGUoKSB7XG4gIHJldHVybiB7XG4gICAgbmFtZTogJ0NoZWNrb3V0TGluZUl0ZW0nLFxuICAgIGtpbmQ6ICdPQkpFQ1QnLFxuICAgIGZpZWxkQmFzZVR5cGVzOiB7XG4gICAgICBjdXN0b21BdHRyaWJ1dGVzOiAnQXR0cmlidXRlJyxcbiAgICAgIGRpc2NvdW50QWxsb2NhdGlvbnM6ICdPYmplY3RbXScsXG4gICAgICBpZDogJ0lEJyxcbiAgICAgIHF1YW50aXR5OiAnSW50JyxcbiAgICAgIHRpdGxlOiAnU3RyaW5nJyxcbiAgICAgIHZhcmlhbnQ6ICdNZXJjaGFuZGlzZSdcbiAgICB9LFxuICAgIGltcGxlbWVudHNOb2RlOiB0cnVlXG4gIH07XG59XG5cbmZ1bmN0aW9uIGdldERpc2NvdW50QWxsb2NhdGlvblR5cGUoKSB7XG4gIHJldHVybiB7XG4gICAgZmllbGRCYXNlVHlwZXM6IHtcbiAgICAgIGFsbG9jYXRlZEFtb3VudDogJ01vbmV5VjInLFxuICAgICAgZGlzY291bnRBcHBsaWNhdGlvbjogJ0Rpc2NvdW50QXBwbGljYXRpb24nXG4gICAgfSxcbiAgICBpbXBsZW1lbnRzTm9kZTogZmFsc2UsXG4gICAga2luZDogJ09CSkVDVCcsXG4gICAgbmFtZTogJ0Rpc2NvdW50QWxsb2NhdGlvbidcbiAgfTtcbn1cblxuZnVuY3Rpb24gbWFwVmFyaWFudChtZXJjaGFuZGlzZSkge1xuICAvLyBDb3B5IGFsbCBwcm9wZXJ0aWVzIGV4Y2VwdCAncHJvZHVjdCdcbiAgdmFyIHJlc3VsdCA9IHt9O1xuXG4gIGZvciAodmFyIGtleSBpbiBtZXJjaGFuZGlzZSkge1xuICAgIGlmIChtZXJjaGFuZGlzZS5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIGtleSAhPT0gJ3Byb2R1Y3QnKSB7XG4gICAgICByZXN1bHRba2V5XSA9IG1lcmNoYW5kaXNlW2tleV07XG4gICAgfVxuICB9XG5cbiAgLy8gVGhlIGFjdHVhbCBDYXJ0IG1lcmNoYW5kaXNlIGFuZCBDaGVja291dCB2YXJpYW50IG9iamVjdHMgbWFwIGNsZWFubHkgdG8gZWFjaCBvdGhlcixcbiAgLy8gYnV0IHRoZSBTREsgd2Fzbid0IGZldGNoaW5nIHRoZSB0aXRsZSBmcm9tIHRoZSBwcm9kdWN0IG9iamVjdCwgc28gd2UgbmVlZCB0byByZW1vdmUgaXRcbiAgdmFyIHByb2R1Y3RXaXRob3V0VGl0bGUgPSB7fTtcblxuICBpZiAobWVyY2hhbmRpc2UucHJvZHVjdCkge1xuICAgIGZvciAodmFyIF9rZXkgaW4gbWVyY2hhbmRpc2UucHJvZHVjdCkge1xuICAgICAgaWYgKG1lcmNoYW5kaXNlLnByb2R1Y3QuaGFzT3duUHJvcGVydHkoX2tleSkgJiYgX2tleSAhPT0gJ3RpdGxlJykge1xuICAgICAgICBwcm9kdWN0V2l0aG91dFRpdGxlW19rZXldID0gbWVyY2hhbmRpc2UucHJvZHVjdFtfa2V5XTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBBZGQgYWRkaXRpb25hbCBwcm9wZXJ0aWVzXG4gIHJlc3VsdC5wcmljZVYyID0gbWVyY2hhbmRpc2UucHJpY2U7XG4gIHJlc3VsdC5jb21wYXJlQXRQcmljZVYyID0gbWVyY2hhbmRpc2UuY29tcGFyZUF0UHJpY2U7XG4gIHJlc3VsdC5wcm9kdWN0ID0gcHJvZHVjdFdpdGhvdXRUaXRsZTtcbiAgcmVzdWx0LnR5cGUgPSBnZXRWYXJpYW50VHlwZSgpO1xuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIG1hcERpc2NvdW50QWxsb2NhdGlvbnMoZGlzY291bnRBbGxvY2F0aW9ucywgZGlzY291bnRBcHBsaWNhdGlvbnMpIHtcbiAgaWYgKCFkaXNjb3VudEFsbG9jYXRpb25zKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgdmFyIHJlc3VsdCA9IFtdO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgZGlzY291bnRBbGxvY2F0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBhbGxvY2F0aW9uID0gZGlzY291bnRBbGxvY2F0aW9uc1tpXTtcbiAgICB2YXIgYXBwbGljYXRpb24gPSBudWxsO1xuXG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBkaXNjb3VudEFwcGxpY2F0aW9ucy5sZW5ndGg7IGorKykge1xuICAgICAgaWYgKGdldERpc2NvdW50QWxsb2NhdGlvbklkKGFsbG9jYXRpb24pID09PSBnZXREaXNjb3VudEFwcGxpY2F0aW9uSWQoZGlzY291bnRBcHBsaWNhdGlvbnNbal0pKSB7XG4gICAgICAgIGFwcGxpY2F0aW9uID0gZGlzY291bnRBcHBsaWNhdGlvbnNbal07XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghYXBwbGljYXRpb24pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBkaXNjb3VudCBhcHBsaWNhdGlvbiBmb3IgYWxsb2NhdGlvbjogJyArIEpTT04uc3RyaW5naWZ5KGFsbG9jYXRpb24pKTtcbiAgICB9XG5cbiAgICB2YXIgZGlzY291bnRBcHAgPSBPYmplY3QuYXNzaWduKHt9LCBhcHBsaWNhdGlvbik7XG5cbiAgICByZXN1bHQucHVzaCh7XG4gICAgICBhbGxvY2F0ZWRBbW91bnQ6IGFsbG9jYXRpb24uZGlzY291bnRlZEFtb3VudCxcbiAgICAgIGRpc2NvdW50QXBwbGljYXRpb246IGRpc2NvdW50QXBwLFxuICAgICAgdHlwZTogZ2V0RGlzY291bnRBbGxvY2F0aW9uVHlwZSgpXG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBtYXBMaW5lSXRlbXMobGluZXMsIGRpc2NvdW50QXBwbGljYXRpb25zKSB7XG4gIHZhciBza2lwRGlzY291bnRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBmYWxzZTtcblxuICBpZiAoIWxpbmVzIHx8ICFBcnJheS5pc0FycmF5KGxpbmVzKSkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIHZhciByZXN1bHQgPSBbXTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGxpbmUgPSBsaW5lc1tpXTtcblxuICAgIGlmICghbGluZSB8fCAhbGluZS5tZXJjaGFuZGlzZSB8fCAhbGluZS5tZXJjaGFuZGlzZS5wcm9kdWN0KSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICB2YXIgdmFyaWFudCA9IG1hcFZhcmlhbnQobGluZS5tZXJjaGFuZGlzZSk7XG5cbiAgICB2YXIgZGlzY291bnRBbGxvY2F0aW9ucyA9IFtdO1xuXG4gICAgaWYgKCFza2lwRGlzY291bnRzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBkaXNjb3VudEFsbG9jYXRpb25zID0gbWFwRGlzY291bnRBbGxvY2F0aW9ucyhsaW5lLmRpc2NvdW50QWxsb2NhdGlvbnMgfHwgW10sIGRpc2NvdW50QXBwbGljYXRpb25zKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIG1hcHBpbmcgZGlzY291bnQgYWxsb2NhdGlvbnM6JywgZXJyb3IubWVzc2FnZSk7XG4gICAgICAgIGRpc2NvdW50QWxsb2NhdGlvbnMgPSBbXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXN1bHQucHVzaCh7XG4gICAgICBjdXN0b21BdHRyaWJ1dGVzOiBsaW5lLmF0dHJpYnV0ZXMsXG4gICAgICBkaXNjb3VudEFsbG9jYXRpb25zOiBkaXNjb3VudEFsbG9jYXRpb25zLFxuICAgICAgaWQ6IGxpbmUuaWQsXG4gICAgICBxdWFudGl0eTogbGluZS5xdWFudGl0eSxcbiAgICAgIHRpdGxlOiBsaW5lLm1lcmNoYW5kaXNlLnByb2R1Y3QudGl0bGUsXG4gICAgICB2YXJpYW50OiB2YXJpYW50LFxuICAgICAgaGFzTmV4dFBhZ2U6IGZhbHNlLFxuICAgICAgaGFzUHJldmlvdXNQYWdlOiBmYWxzZSxcbiAgICAgIHZhcmlhYmxlVmFsdWVzOiBsaW5lLnZhcmlhYmxlVmFsdWVzLFxuICAgICAgdHlwZTogZ2V0TGluZUl0ZW1UeXBlKClcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIG1hcERpc2NvdW50c0FuZExpbmVzKGNhcnQpIHtcbiAgaWYgKCFjYXJ0KSB7XG4gICAgcmV0dXJuIHsgZGlzY291bnRBcHBsaWNhdGlvbnM6IFtdLCBjYXJ0TGluZXNXaXRoRGlzY291bnRzOiBbXSB9O1xuICB9XG5cbiAgdmFyIGRpc2NvdW50TWFwcGluZ1Jlc3VsdCA9IHZvaWQgMDtcbiAgdmFyIGRpc2NvdW50TWFwcGluZ0ZhaWxlZCA9IGZhbHNlO1xuXG4gIHRyeSB7XG4gICAgZGlzY291bnRNYXBwaW5nUmVzdWx0ID0gZGlzY291bnRNYXBwZXIoe1xuICAgICAgY2FydExpbmVJdGVtczogY2FydC5saW5lcyB8fCBbXSxcbiAgICAgIGNhcnREaXNjb3VudEFsbG9jYXRpb25zOiBjYXJ0LmRpc2NvdW50QWxsb2NhdGlvbnMgfHwgW10sXG4gICAgICBjYXJ0RGlzY291bnRDb2RlczogY2FydC5kaXNjb3VudENvZGVzIHx8IFtdXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBtYXBwaW5nIGRpc2NvdW50czonLCBlcnJvci5tZXNzYWdlKTtcbiAgICBkaXNjb3VudE1hcHBpbmdGYWlsZWQgPSB0cnVlO1xuICB9XG5cbiAgdmFyIG1hcHBlZExpbmVzID0gdm9pZCAwO1xuXG4gIGlmIChkaXNjb3VudE1hcHBpbmdGYWlsZWQpIHtcbiAgICAvLyBXaGVuIGRpc2NvdW50IG1hcHBpbmcgZmFpbHMsIHN0aWxsIG1hcCB0aGUgbGluZXMgYnV0IHdpdGhvdXQgYW55IGRpc2NvdW50IGFsbG9jYXRpb25zXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5ld2xpbmUtYWZ0ZXItdmFyXG4gICAgdmFyIGxpbmVzV2l0aENsZWFyZWREaXNjb3VudHMgPSAoY2FydC5saW5lcyB8fCBbXSkubWFwKGZ1bmN0aW9uIChsaW5lKSB7XG4gICAgICB2YXIgbGluZUNvcHkgPSBPYmplY3QuYXNzaWduKHt9LCBsaW5lKTtcblxuICAgICAgbGluZUNvcHkuZGlzY291bnRBbGxvY2F0aW9ucyA9IFtdO1xuXG4gICAgICByZXR1cm4gbGluZUNvcHk7XG4gICAgfSk7XG4gICAgbWFwcGVkTGluZXMgPSBtYXBMaW5lSXRlbXMobGluZXNXaXRoQ2xlYXJlZERpc2NvdW50cywgW10sIHRydWUpO1xuICB9IGVsc2Uge1xuICAgIC8vIE5vcm1hbCBwYXRoIHdoZW4gZGlzY291bnQgbWFwcGluZyBzdWNjZWVkc1xuICAgIG1hcHBlZExpbmVzID0gbWFwTGluZUl0ZW1zKGRpc2NvdW50TWFwcGluZ1Jlc3VsdC5jYXJ0TGluZXNXaXRoQWxsRGlzY291bnRBbGxvY2F0aW9ucyB8fCBbXSwgZGlzY291bnRNYXBwaW5nUmVzdWx0LmRpc2NvdW50QXBwbGljYXRpb25zIHx8IFtdKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZGlzY291bnRBcHBsaWNhdGlvbnM6IGRpc2NvdW50TWFwcGluZ0ZhaWxlZCA/IFtdIDogZGlzY291bnRNYXBwaW5nUmVzdWx0ICYmIGRpc2NvdW50TWFwcGluZ1Jlc3VsdC5kaXNjb3VudEFwcGxpY2F0aW9ucyB8fCBbXSxcbiAgICBjYXJ0TGluZXNXaXRoRGlzY291bnRzOiBtYXBwZWRMaW5lc1xuICB9O1xufVxuXG4vLyBOT1RFOiBmaWVsZHMgc3VjaCBhcyBhdmFpbGFibGVTaGlwcGluZ1JhdGVzIGFyZSBub3QgaW5jbHVkZWQgYmVjYXVzZSB0aGV5IGFyZSBub3QgcXVlcmllZCBieSB0aGUgSlMgQnV5IFNES1xudmFyIFVOU1VQUE9SVEVEX0ZJRUxEUyA9IHtcbiAgY29tcGxldGVkQXQ6IG51bGwsXG4gIG9yZGVyOiBudWxsLFxuICBvcmRlclN0YXR1c1VybDogbnVsbCxcbiAgcmVhZHk6IGZhbHNlLFxuICByZXF1aXJlc1NoaXBwaW5nOiB0cnVlLFxuICBzaGlwcGluZ0xpbmU6IG51bGwsXG4gIHRheEV4ZW1wdDogZmFsc2UsXG4gIHRheGVzSW5jbHVkZWQ6IGZhbHNlXG59O1xuXG5mdW5jdGlvbiBtYXBDYXJ0UGF5bG9hZChjYXJ0KSB7XG4gIGlmICghY2FydCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdmFyIHJlc3VsdCA9IG1hcERpc2NvdW50c0FuZExpbmVzKGNhcnQpO1xuICB2YXIgZGlzY291bnRBcHBsaWNhdGlvbnMgPSByZXN1bHQuZGlzY291bnRBcHBsaWNhdGlvbnM7XG4gIHZhciBjYXJ0TGluZXNXaXRoRGlzY291bnRzID0gcmVzdWx0LmNhcnRMaW5lc1dpdGhEaXNjb3VudHM7XG5cbiAgdmFyIGJ1eWVySWRlbnRpdHkgPSB7XG4gICAgY291bnRyeUNvZGU6IGNhcnQuYnV5ZXJJZGVudGl0eSAmJiBjYXJ0LmJ1eWVySWRlbnRpdHkuY291bnRyeUNvZGVcbiAgfTtcblxuICB2YXIgZW1haWwgPSBudWxsO1xuXG4gIGlmIChjYXJ0LmJ1eWVySWRlbnRpdHkgJiYgY2FydC5idXllcklkZW50aXR5LmVtYWlsKSB7XG4gICAgZW1haWwgPSBjYXJ0LmJ1eWVySWRlbnRpdHkuZW1haWw7XG4gIH1cblxuICB2YXIgc2hpcHBpbmdBZGRyZXNzID0gbnVsbDtcblxuICBpZiAoY2FydC5idXllcklkZW50aXR5ICYmIGNhcnQuYnV5ZXJJZGVudGl0eS5kZWxpdmVyeUFkZHJlc3NQcmVmZXJlbmNlcyAmJiBjYXJ0LmJ1eWVySWRlbnRpdHkuZGVsaXZlcnlBZGRyZXNzUHJlZmVyZW5jZXMubGVuZ3RoKSB7XG4gICAgc2hpcHBpbmdBZGRyZXNzID0gY2FydC5idXllcklkZW50aXR5LmRlbGl2ZXJ5QWRkcmVzc1ByZWZlcmVuY2VzWzBdO1xuICB9XG5cbiAgdmFyIGN1cnJlbmN5Q29kZSA9IG51bGw7XG4gIHZhciB0b3RhbEFtb3VudCA9IG51bGw7XG4gIHZhciB0b3RhbFRheEFtb3VudCA9IG51bGw7XG4gIHZhciB0b3RhbER1dHlBbW91bnQgPSBudWxsO1xuICB2YXIgY2hlY2tvdXRDaGFyZ2VBbW91bnQgPSBudWxsO1xuXG4gIGlmIChjYXJ0LmNvc3QpIHtcbiAgICBpZiAoY2FydC5jb3N0LnRvdGFsQW1vdW50KSB7XG4gICAgICBjdXJyZW5jeUNvZGUgPSBjYXJ0LmNvc3QudG90YWxBbW91bnQuY3VycmVuY3lDb2RlO1xuICAgICAgdG90YWxBbW91bnQgPSBjYXJ0LmNvc3QudG90YWxBbW91bnQ7XG4gICAgfVxuICAgIGlmIChjYXJ0LmNvc3QudG90YWxUYXhBbW91bnQpIHtcbiAgICAgIHRvdGFsVGF4QW1vdW50ID0gY2FydC5jb3N0LnRvdGFsVGF4QW1vdW50O1xuICAgIH1cbiAgICBpZiAoY2FydC5jb3N0LnRvdGFsRHV0eUFtb3VudCkge1xuICAgICAgdG90YWxEdXR5QW1vdW50ID0gY2FydC5jb3N0LnRvdGFsRHV0eUFtb3VudDtcbiAgICB9XG4gICAgaWYgKGNhcnQuY29zdC5jaGVja291dENoYXJnZUFtb3VudCkge1xuICAgICAgY2hlY2tvdXRDaGFyZ2VBbW91bnQgPSBjYXJ0LmNvc3QuY2hlY2tvdXRDaGFyZ2VBbW91bnQ7XG4gICAgfVxuICB9XG5cbiAgdmFyIGFwcGxpZWRHaWZ0Q2FyZHMgPSBjYXJ0LmFwcGxpZWRHaWZ0Q2FyZHMgfHwgW107XG4gIHZhciB0b3RhbFByaWNlID0gbnVsbDtcblxuICAvLyBUaGlzIGZpZWxkIHdpbGwgYmUgZGVmaW5lZCBpbiB0aGUgQVBJLCBidXQgd2UncmUgbWFraW5nIGl0IFwib3B0aW9uYWxcIiBoZXJlIHNvIHRoYXQgb3VyXG4gIC8vIHVuaXQgdGVzdHMgZm9yIG90aGVyIGZpZWxkcyB3b3JrIHdoaWxlIG9ubHkgcGFzc2luZyBpbiB0aGUgcmVsZXZhbnQgZmllbGRzXG4gIGlmICh0b3RhbEFtb3VudCkge1xuICAgIHRvdGFsUHJpY2UgPSBjYWxjdWxhdGVUb3RhbFByaWNlKGNhcnQsIHRvdGFsQW1vdW50KTtcbiAgfVxuXG4gIHZhciBzdWJ0b3RhbFByaWNlID0gbnVsbDtcblxuICAvLyBUaGlzIGZpZWxkIHdpbGwgYmUgZGVmaW5lZCBpbiB0aGUgQVBJLCBidXQgd2UncmUgbWFraW5nIGl0IFwib3B0aW9uYWxcIiBoZXJlIHNvIHRoYXQgb3VyXG4gIC8vIHVuaXQgdGVzdHMgZm9yIG90aGVyIGZpZWxkcyB3b3JrIHdoaWxlIG9ubHkgcGFzc2luZyBpbiB0aGUgcmVsZXZhbnQgZmllbGRzXG4gIGlmICh0b3RhbFByaWNlKSB7XG4gICAgc3VidG90YWxQcmljZSA9IGNhbGN1bGF0ZVN1YnRvdGFsUHJpY2UodG90YWxQcmljZSwgdG90YWxEdXR5QW1vdW50LCB0b3RhbFRheEFtb3VudCk7XG4gIH1cblxuICB2YXIgd2ViVXJsID0gY2FydC5jaGVja291dFVybDtcblxuICBpZiAod2ViVXJsKSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhciB1cmwgPSBuZXcgVVJMKHdlYlVybCk7XG5cbiAgICAgIGlmICghdXJsLnNlYXJjaFBhcmFtcy5oYXMoJ19mZCcpIHx8IHVybC5zZWFyY2hQYXJhbXMuZ2V0KCdfZmQnKSAhPT0gJzAnKSB7XG4gICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdfZmQnLCAnMCcpO1xuICAgICAgICB3ZWJVcmwgPSB1cmwudG9TdHJpbmcoKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gSWYgVVJMIHBhcnNpbmcgZmFpbHMsIHJldHVybiB0aGUgb3JpZ2luYWwgVVJMIHVuY2hhbmdlZFxuICAgICAgLy8gcmF0aGVyIHRoYW4gcmlzayBicmVha2luZyB0aGUgY2hlY2tvdXQgZmxvd1xuICAgIH1cbiAgfVxuXG4gIHZhciBjaGVja291dFBheWxvYWQgPSBPYmplY3QuYXNzaWduKHtcbiAgICBhcHBsaWVkR2lmdENhcmRzOiBhcHBsaWVkR2lmdENhcmRzLFxuICAgIGJ1eWVySWRlbnRpdHk6IGJ1eWVySWRlbnRpdHksXG4gICAgY3JlYXRlZEF0OiBjYXJ0LmNyZWF0ZWRBdCxcbiAgICBjdXJyZW5jeUNvZGU6IGN1cnJlbmN5Q29kZSxcbiAgICBjdXN0b21BdHRyaWJ1dGVzOiBjYXJ0LmF0dHJpYnV0ZXMsXG4gICAgZGlzY291bnRBcHBsaWNhdGlvbnM6IGRpc2NvdW50QXBwbGljYXRpb25zLFxuICAgIGVtYWlsOiBlbWFpbCxcbiAgICBpZDogY2FydC5pZCxcbiAgICBsaW5lSXRlbXM6IGNhcnRMaW5lc1dpdGhEaXNjb3VudHMsXG4gICAgbGluZUl0ZW1zU3VidG90YWxQcmljZTogY2hlY2tvdXRDaGFyZ2VBbW91bnQsXG4gICAgbm90ZTogY2FydC5ub3RlLFxuICAgIHBheW1lbnREdWU6IHRvdGFsQW1vdW50LFxuICAgIHBheW1lbnREdWVWMjogdG90YWxBbW91bnQsXG4gICAgc2hpcHBpbmdBZGRyZXNzOiBzaGlwcGluZ0FkZHJlc3MsXG4gICAgc3VidG90YWxQcmljZTogc3VidG90YWxQcmljZSxcbiAgICBzdWJ0b3RhbFByaWNlVjI6IHN1YnRvdGFsUHJpY2UsXG4gICAgdG90YWxQcmljZTogdG90YWxQcmljZSxcbiAgICB0b3RhbFByaWNlVjI6IHRvdGFsUHJpY2UsXG4gICAgdG90YWxUYXg6IHRvdGFsVGF4QW1vdW50IHx8IGdldERlZmF1bHRNb25leU9iamVjdChjdXJyZW5jeUNvZGUsIHRvdGFsQW1vdW50KSxcbiAgICB0b3RhbFRheFYyOiB0b3RhbFRheEFtb3VudCB8fCBnZXREZWZhdWx0TW9uZXlPYmplY3QoY3VycmVuY3lDb2RlLCB0b3RhbEFtb3VudCksXG4gICAgdXBkYXRlZEF0OiBjYXJ0LnVwZGF0ZWRBdCxcbiAgICB3ZWJVcmw6IHdlYlVybFxuICB9LCBVTlNVUFBPUlRFRF9GSUVMRFMpO1xuXG4gIG5vcm1hbGl6ZUNhcnRNb25leUZpZWxkRGVjaW1hbFBsYWNlcyhjaGVja291dFBheWxvYWQpO1xuXG4gIHJldHVybiBjaGVja291dFBheWxvYWQ7XG59XG5cbi8qKlxuICpcbiAqIEBkZXNjcmlwdGlvbiBOb3JtYWxpemUgYWxsIGN1cnJlbmN5IGZpZWxkcyBpbiB0aGUgY2hlY2tvdXQgcGF5bG9hZCB0byBjb250YWluXG4gKiB0aGUgc2FtZSBudW1iZXIgb2YgZGVjaW1hbCBwbGFjZXMgdGhhdCB3b3VsZCBiZSByZXR1cm5lZCBieSB0aGUgc3RvcmVmcm9udCBBUEkuXG4gKlxuICogSW4gdGhlIHN0b3JlZnJvbnQgQVBJLCBjdXJyZW5jeSBhbW91bnRzIGFyZSByZXR1cm5lZCBhcyBhIHN0cmluZyB0aGF0IGNvbnRhaW5zXG4gKiAxIGRlY2ltYWwgcGxhY2UgKGlmIHRoZSAybmQgZGVjaW1hbCBwbGFjZSBpcyAwKSBvciBlbHNlIDIgZGVjaW1hbCBwbGFjZXMuXG4gKlxuICogSW4gb3VyIG1hcHBpbmcgZnVuY3Rpb25zLCB3ZSBhcmUgdHlwaWNhbGx5IGNvbnZlcnRpbmcgdG8gc3RyaW5ncyB3aXRoIDIgZGVjaW1hbFxuICogcGxhY2VzLiBJbiBjYXNlIGFueSBjbGllbnRzIG9mIHRoZSBKUyBCdXkgU0RLIGFyZSByZWx5aW5nIG9ubHkgYSBzaW5nbGUgZGVjaW1hbFxuICogcGxhY2UgYmVpbmcgcmV0dXJuZWQgaW4gc29tZSBjYXNlcywgd2Ugd2FudCB0byBub3JtYWxpemUgdGhlIGRlY2ltYWwgcGxhY2VzLlxuICovXG5mdW5jdGlvbiBub3JtYWxpemVDYXJ0TW9uZXlGaWVsZERlY2ltYWxQbGFjZXMoY2hlY2tvdXQpIHtcbiAgLy8gVGhlIGZpZWxkcyB0aGF0IHdlIGhhdmUgbWFwcGVkIHRoZSBjdXJyZW5jeSBmb3IgKHRoYXQgd2UgdGhlcmVmb3JlIG5lZWQgdG8gbm9ybWFsaXplKVxuICAvLyBhcmU6IGRpc2NvdW50QXBwbGljYXRpb24gYW1vdW50cywgc3VidG90YWxQcmljZSwgYW5kIHRvdGFsUHJpY2UuXG5cbiAgaWYgKGNoZWNrb3V0LmRpc2NvdW50QXBwbGljYXRpb25zKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGVja291dC5kaXNjb3VudEFwcGxpY2F0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHR5cGVvZiBjaGVja291dC5kaXNjb3VudEFwcGxpY2F0aW9uc1tpXS52YWx1ZS5wZXJjZW50YWdlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgdmFyIGRpc2NvdW50QXBwbGljYXRpb25BbW91bnQgPSBjaGVja291dC5kaXNjb3VudEFwcGxpY2F0aW9uc1tpXS52YWx1ZS5hbW91bnQudG9TdHJpbmcoKTtcblxuICAgICAgaWYgKCFzaG91bGRSZXR1cm5XaXRoT25lRGVjaW1hbFBsYWNlKGRpc2NvdW50QXBwbGljYXRpb25BbW91bnQpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjaGVja291dC5kaXNjb3VudEFwcGxpY2F0aW9uc1tpXS52YWx1ZS5hbW91bnQgPSBjb252ZXJ0VG9PbmVEZWNpbWFsUGxhY2UoZGlzY291bnRBcHBsaWNhdGlvbkFtb3VudCk7XG4gICAgfVxuICB9XG5cbiAgaWYgKGNoZWNrb3V0LmxpbmVJdGVtcykge1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBjaGVja291dC5saW5lSXRlbXMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNoZWNrb3V0LmxpbmVJdGVtc1tfaV0uZGlzY291bnRBbGxvY2F0aW9ucy5sZW5ndGg7IGorKykge1xuICAgICAgICB2YXIgZGlzY291bnRBcHBsaWNhdGlvbiA9IGNoZWNrb3V0LmxpbmVJdGVtc1tfaV0uZGlzY291bnRBbGxvY2F0aW9uc1tqXS5kaXNjb3VudEFwcGxpY2F0aW9uO1xuXG4gICAgICAgIGlmICh0eXBlb2YgZGlzY291bnRBcHBsaWNhdGlvbi52YWx1ZS5wZXJjZW50YWdlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIF9kaXNjb3VudEFwcGxpY2F0aW9uQW1vdW50ID0gZGlzY291bnRBcHBsaWNhdGlvbi52YWx1ZS5hbW91bnQudG9TdHJpbmcoKTtcblxuICAgICAgICBpZiAoIXNob3VsZFJldHVybldpdGhPbmVEZWNpbWFsUGxhY2UoX2Rpc2NvdW50QXBwbGljYXRpb25BbW91bnQpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBkaXNjb3VudEFwcGxpY2F0aW9uLnZhbHVlLmFtb3VudCA9IGNvbnZlcnRUb09uZURlY2ltYWxQbGFjZShfZGlzY291bnRBcHBsaWNhdGlvbkFtb3VudCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKGNoZWNrb3V0LnN1YnRvdGFsUHJpY2UpIHtcbiAgICBpZiAoc2hvdWxkUmV0dXJuV2l0aE9uZURlY2ltYWxQbGFjZShjaGVja291dC5zdWJ0b3RhbFByaWNlLmFtb3VudCkpIHtcbiAgICAgIGNoZWNrb3V0LnN1YnRvdGFsUHJpY2UuYW1vdW50ID0gY29udmVydFRvT25lRGVjaW1hbFBsYWNlKGNoZWNrb3V0LnN1YnRvdGFsUHJpY2UuYW1vdW50KTtcbiAgICAgIGNoZWNrb3V0LnN1YnRvdGFsUHJpY2VWMi5hbW91bnQgPSBjb252ZXJ0VG9PbmVEZWNpbWFsUGxhY2UoY2hlY2tvdXQuc3VidG90YWxQcmljZVYyLmFtb3VudCk7XG4gICAgfVxuICB9XG5cbiAgaWYgKGNoZWNrb3V0LnRvdGFsUHJpY2UpIHtcbiAgICBpZiAoc2hvdWxkUmV0dXJuV2l0aE9uZURlY2ltYWxQbGFjZShjaGVja291dC50b3RhbFByaWNlLmFtb3VudCkpIHtcbiAgICAgIGNoZWNrb3V0LnRvdGFsUHJpY2UuYW1vdW50ID0gY29udmVydFRvT25lRGVjaW1hbFBsYWNlKGNoZWNrb3V0LnRvdGFsUHJpY2UuYW1vdW50KTtcbiAgICAgIGNoZWNrb3V0LnRvdGFsUHJpY2VWMi5hbW91bnQgPSBjb252ZXJ0VG9PbmVEZWNpbWFsUGxhY2UoY2hlY2tvdXQudG90YWxQcmljZVYyLmFtb3VudCk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIFdoZXRoZXIgdGhlIFNGIEFQSSB3b3VsZCByZXR1cm4gdGhpcyBhbW91bnQgd2l0aCAxIGRlY2ltYWwgcGxhY2VcbiAqIChhcyBvcHBvc2VkIHRvIDIgZGVjaW1hbCBwbGFjZXMpLiBTZWUgbm9ybWFsaXplQ2FydE1vbmV5RmllbGREZWNpbWFsUGxhY2VzXG4gKiBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAqIEBwYXJhbSB7c3RyaW5nfSBjdXJyZW5jeSBmaWVsZCB0byBjaGVja1xuICogQHJldHVybnMge2Jvb2xlYW59IHdoZXRoZXIgdGhlIFNGIEFQSSB3b3VsZCByZXR1cm4gdGhpcyBhbW91bnQgd2l0aCAxIGRlY2ltYWwgcGxhY2VcbiAqL1xuZnVuY3Rpb24gc2hvdWxkUmV0dXJuV2l0aE9uZURlY2ltYWxQbGFjZShhbW91bnQpIHtcbiAgaWYgKCFhbW91bnQgfHwgIWFtb3VudC50b1N0cmluZygpLmluY2x1ZGVzKCcuJykpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB2YXIgY3VycmVuY3lEZWNpbWFscyA9IGFtb3VudC50b1N0cmluZygpLnNwbGl0KCcuJylbMV07XG5cbiAgaWYgKGN1cnJlbmN5RGVjaW1hbHMubGVuZ3RoID09PSAyICYmIGN1cnJlbmN5RGVjaW1hbHNbMV0gPT09ICcwJykge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBjb252ZXJ0VG9PbmVEZWNpbWFsUGxhY2Uoc3RyaW5nQW1vdW50KSB7XG4gIHJldHVybiBwYXJzZUZsb2F0KHN0cmluZ0Ftb3VudCkudG9GaXhlZCgxKTtcbn1cblxuZnVuY3Rpb24gZ2V0RGVmYXVsdE1vbmV5T2JqZWN0KGN1cnJlbmN5Q29kZSwgdG90YWxBbW91bnQpIHtcbiAgcmV0dXJuIHtcbiAgICBhbW91bnQ6ICcwLjAnLFxuICAgIGN1cnJlbmN5Q29kZTogY3VycmVuY3lDb2RlLFxuICAgIHR5cGU6IHRvdGFsQW1vdW50ICYmIHRvdGFsQW1vdW50LnR5cGVcbiAgfTtcbn1cblxuZnVuY3Rpb24gY2FsY3VsYXRlVG90YWxQcmljZShjYXJ0LCB0b3RhbEFtb3VudCkge1xuICBpZiAoIWNhcnQuYXBwbGllZEdpZnRDYXJkcyB8fCAhY2FydC5hcHBsaWVkR2lmdENhcmRzLmxlbmd0aCkge1xuICAgIHJldHVybiB0b3RhbEFtb3VudDtcbiAgfVxuXG4gIC8vIEFzc3VtaW5nIGNhcnQncyB0b3RhbEFtb3VudCB3aWxsIGhhdmUgdGhlIHNhbWUgY3VycmVuY3kgY29kZSBhcyBnaWZ0IGNhcmRzJyBwcmVzZW50bWVudEFtb3VudFVzZWRcbiAgdmFyIGdpZnRDYXJkVG90YWwgPSAwO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgY2FydC5hcHBsaWVkR2lmdENhcmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgZ2lmdENhcmRUb3RhbCArPSBwYXJzZUZsb2F0KGNhcnQuYXBwbGllZEdpZnRDYXJkc1tpXS5wcmVzZW50bWVudEFtb3VudFVzZWQuYW1vdW50KTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgYW1vdW50OiAocGFyc2VGbG9hdCh0b3RhbEFtb3VudC5hbW91bnQpICsgZ2lmdENhcmRUb3RhbCkudG9GaXhlZCgyKSxcbiAgICBjdXJyZW5jeUNvZGU6IHRvdGFsQW1vdW50LmN1cnJlbmN5Q29kZSxcbiAgICB0eXBlOiB0b3RhbEFtb3VudC50eXBlXG4gIH07XG59XG5cbmZ1bmN0aW9uIGNhbGN1bGF0ZVN1YnRvdGFsUHJpY2UodG90YWxQcmljZSwgdG90YWxEdXR5QW1vdW50LCB0b3RhbFRheEFtb3VudCkge1xuICB2YXIgZHV0eUFtb3VudCA9IHRvdGFsRHV0eUFtb3VudCA/IHRvdGFsRHV0eUFtb3VudC5hbW91bnQgOiAwO1xuICB2YXIgdGF4QW1vdW50ID0gdG90YWxUYXhBbW91bnQgPyB0b3RhbFRheEFtb3VudC5hbW91bnQgOiAwO1xuXG4gIHJldHVybiB7XG4gICAgYW1vdW50OiAocGFyc2VGbG9hdCh0b3RhbFByaWNlLmFtb3VudCkgLSBwYXJzZUZsb2F0KGR1dHlBbW91bnQpIC0gcGFyc2VGbG9hdCh0YXhBbW91bnQpKS50b0ZpeGVkKDIpLFxuICAgIGN1cnJlbmN5Q29kZTogdG90YWxQcmljZS5jdXJyZW5jeUNvZGUsXG4gICAgdHlwZTogdG90YWxQcmljZS50eXBlXG4gIH07XG59XG5cbnZhciBDYXJ0RXJyb3JDb2RlVG9DaGVja291dEVycm9yQ29kZSA9IHtcbiAgQUREUkVTU19GSUVMRF9DT05UQUlOU19FTU9KSVM6ICdOT1RfU1VQUE9SVEVEJyxcbiAgQUREUkVTU19GSUVMRF9DT05UQUlOU19IVE1MX1RBR1M6ICdOT1RfU1VQUE9SVEVEJyxcbiAgQUREUkVTU19GSUVMRF9DT05UQUlOU19VUkw6ICdOT1RfU1VQUE9SVEVEJyxcbiAgQUREUkVTU19GSUVMRF9ET0VTX05PVF9NQVRDSF9FWFBFQ1RFRF9QQVRURVJOOiAnTk9UX1NVUFBPUlRFRCcsXG4gIEFERFJFU1NfRklFTERfSVNfUkVRVUlSRUQ6ICdQUkVTRU5UJyxcbiAgQUREUkVTU19GSUVMRF9JU19UT09fTE9ORzogJ1RPT19MT05HJyxcbiAgSU5WQUxJRDogJ0lOVkFMSUQnLFxuICBJTlZBTElEX0NPTVBBTllfTE9DQVRJT046ICdJTlZBTElEJyxcbiAgSU5WQUxJRF9ERUxJVkVSWV9HUk9VUDogJ0lOVkFMSUQnLFxuICBJTlZBTElEX0RFTElWRVJZX09QVElPTjogJ0lOVkFMSUQnLFxuICBJTlZBTElEX0lOQ1JFTUVOVDogJ0lOVkFMSUQnLFxuICBJTlZBTElEX01FUkNIQU5ESVNFX0xJTkU6ICdMSU5FX0lURU1fTk9UX0ZPVU5EJyxcbiAgSU5WQUxJRF9NRVRBRklFTERTOiAnSU5WQUxJRCcsXG4gIElOVkFMSURfUEFZTUVOVDogJ0lOVkFMSUQnLFxuICBJTlZBTElEX1BBWU1FTlRfRU1QVFlfQ0FSVDogJ0lOVkFMSUQnLFxuICBJTlZBTElEX1pJUF9DT0RFX0ZPUl9DT1VOVFJZOiAnSU5WQUxJRF9GT1JfQ09VTlRSWScsXG4gIElOVkFMSURfWklQX0NPREVfRk9SX1BST1ZJTkNFOiAnSU5WQUxJRF9GT1JfQ09VTlRSWV9BTkRfUFJPVklOQ0UnLFxuICBMRVNTX1RIQU46ICdMRVNTX1RIQU4nLFxuICBNQVhJTVVNX0VYQ0VFREVEOiAnTk9UX0VOT1VHSF9JTl9TVE9DSycsXG4gIE1JTklNVU1fTk9UX01FVDogJ0dSRUFURVJfVEhBTl9PUl9FUVVBTF9UTycsXG4gIE1JU1NJTkdfQ1VTVE9NRVJfQUNDRVNTX1RPS0VOOiAnUFJFU0VOVCcsXG4gIE1JU1NJTkdfRElTQ09VTlRfQ09ERTogJ1BSRVNFTlQnLFxuICBNSVNTSU5HX05PVEU6ICdQUkVTRU5UJyxcbiAgTk9URV9UT09fTE9ORzogJ1RPT19MT05HJyxcbiAgUEFZTUVOVF9NRVRIT0RfTk9UX1NVUFBPUlRFRDogJ05PVF9TVVBQT1JURUQnLFxuICBQUk9WSU5DRV9OT1RfRk9VTkQ6ICdJTlZBTElEX1BST1ZJTkNFX0lOX0NPVU5UUlknLFxuICBVTlNQRUNJRklFRF9BRERSRVNTX0VSUk9SOiAnSU5WQUxJRCcsXG4gIFZBTElEQVRJT05fQ1VTVE9NOiAnSU5WQUxJRCcsXG4gIFpJUF9DT0RFX05PVF9TVVBQT1JURUQ6ICdOT1RfU1VQUE9SVEVEJ1xufTtcblxudmFyIENhcnRXYXJuaW5nQ29kZVRvQ2hlY2tvdXRFcnJvckNvZGUgPSB7XG4gIE1FUkNIQU5ESVNFX05PVF9FTk9VR0hfU1RPQ0s6ICdOT1RfRU5PVUdIX0lOX1NUT0NLJyxcbiAgTUVSQ0hBTkRJU0VfT1VUX09GX1NUT0NLOiAnTk9UX0VOT1VHSF9JTl9TVE9DSycsXG4gIFBBWU1FTlRTX0dJRlRfQ0FSRFNfVU5BVkFJTEFCTEU6ICdOT1RfU1VQUE9SVEVEJ1xufTtcblxuZnVuY3Rpb24gdXNlckVycm9yc01hcHBlcih1c2VyRXJyb3JzKSB7XG4gIHJldHVybiB1c2VyRXJyb3JzLm1hcChmdW5jdGlvbiAoX3JlZikge1xuICAgIHZhciBjb2RlID0gX3JlZi5jb2RlLFxuICAgICAgICBmaWVsZCA9IF9yZWYuZmllbGQsXG4gICAgICAgIG1lc3NhZ2UgPSBfcmVmLm1lc3NhZ2U7XG4gICAgcmV0dXJuIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZmluZWRcbiAgICAgIGNvZGU6IGNvZGUgPyBDYXJ0RXJyb3JDb2RlVG9DaGVja291dEVycm9yQ29kZVtjb2RlXSA6IHVuZGVmaW5lZCxcbiAgICAgIGZpZWxkOiBmaWVsZCxcbiAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VcbiAgICB9O1xuICB9KTtcbn1cblxuZnVuY3Rpb24gd2FybmluZ3NNYXBwZXIod2FybmluZ3MpIHtcbiAgcmV0dXJuIHdhcm5pbmdzLm1hcChmdW5jdGlvbiAoX3JlZjIpIHtcbiAgICB2YXIgY29kZSA9IF9yZWYyLmNvZGUsXG4gICAgICAgIG1lc3NhZ2UgPSBfcmVmMi5tZXNzYWdlO1xuICAgIHJldHVybiB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZpbmVkXG4gICAgICBjb2RlOiBjb2RlID8gQ2FydFdhcm5pbmdDb2RlVG9DaGVja291dEVycm9yQ29kZVtjb2RlXSA6IHVuZGVmaW5lZCxcbiAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VcbiAgICB9O1xuICB9KTtcbn1cblxuZnVuY3Rpb24gY2hlY2tvdXRVc2VyRXJyb3JzTWFwcGVyKHVzZXJFcnJvcnMsIHdhcm5pbmdzKSB7XG4gIHZhciBoYXNVc2VyRXJyb3JzID0gdXNlckVycm9ycyAmJiB1c2VyRXJyb3JzLmxlbmd0aDtcbiAgdmFyIGhhc1dhcm5pbmdzID0gd2FybmluZ3MgJiYgd2FybmluZ3MubGVuZ3RoO1xuXG4gIGlmICghaGFzVXNlckVycm9ycyAmJiAhaGFzV2FybmluZ3MpIHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICB2YXIgY2hlY2tvdXRVc2VyRXJyb3JzID0gaGFzVXNlckVycm9ycyA/IHVzZXJFcnJvcnNNYXBwZXIodXNlckVycm9ycykgOiBbXTtcbiAgdmFyIGNoZWNrb3V0V2FybmluZ3MgPSBoYXNXYXJuaW5ncyA/IHdhcm5pbmdzTWFwcGVyKHdhcm5pbmdzKSA6IFtdO1xuXG4gIHJldHVybiBbXS5jb25jYXQodG9Db25zdW1hYmxlQXJyYXkkMShjaGVja291dFVzZXJFcnJvcnMpLCB0b0NvbnN1bWFibGVBcnJheSQxKGNoZWNrb3V0V2FybmluZ3MpKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQ2FydE11dGF0aW9uKG11dGF0aW9uUm9vdEtleSwgY2xpZW50KSB7XG4gIHJldHVybiBmdW5jdGlvbiAoX3JlZikge1xuICAgIHZhciBfcmVmJGRhdGEgPSBfcmVmLmRhdGEsXG4gICAgICAgIGRhdGEgPSBfcmVmJGRhdGEgPT09IHVuZGVmaW5lZCA/IHt9IDogX3JlZiRkYXRhLFxuICAgICAgICBlcnJvcnMgPSBfcmVmLmVycm9ycyxcbiAgICAgICAgX3JlZiRtb2RlbCA9IF9yZWYubW9kZWwsXG4gICAgICAgIG1vZGVsID0gX3JlZiRtb2RlbCA9PT0gdW5kZWZpbmVkID8ge30gOiBfcmVmJG1vZGVsO1xuXG4gICAgdmFyIHJvb3REYXRhID0gZGF0YVttdXRhdGlvblJvb3RLZXldO1xuICAgIHZhciByb290TW9kZWwgPSBtb2RlbFttdXRhdGlvblJvb3RLZXldO1xuXG4gICAgaWYgKHJvb3REYXRhICYmIHJvb3REYXRhLmNhcnQpIHtcbiAgICAgIHJldHVybiBjbGllbnQuZmV0Y2hBbGxQYWdlcyhyb290TW9kZWwuY2FydC5saW5lcywgeyBwYWdlU2l6ZTogMjUwIH0pLnRoZW4oZnVuY3Rpb24gKGxpbmVzKSB7XG4gICAgICAgIHJvb3RNb2RlbC5jYXJ0LmF0dHJzLmxpbmVzID0gbGluZXM7XG4gICAgICAgIHZhciBjaGVja291dFVzZXJFcnJvcnMgPSBjaGVja291dFVzZXJFcnJvcnNNYXBwZXIocm9vdERhdGEudXNlckVycm9ycywgcm9vdERhdGEud2FybmluZ3MpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIG1hcENhcnRQYXlsb2FkKHJvb3RNb2RlbC5jYXJ0LCBtdXRhdGlvblJvb3RLZXkpLCB7IHVzZXJFcnJvcnM6IGNoZWNrb3V0VXNlckVycm9ycywgZXJyb3JzOiByb290TW9kZWwuY2FydC5lcnJvcnMgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKGVycm9ycyAmJiBlcnJvcnMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKEpTT04uc3RyaW5naWZ5KGVycm9ycykpKTtcbiAgICB9XG5cbiAgICBpZiAocm9vdERhdGEgJiYgKHJvb3REYXRhLnVzZXJFcnJvcnMubGVuZ3RoIHx8IHJvb3REYXRhLndhcm5pbmdzLmxlbmd0aCkpIHtcbiAgICAgIHZhciBjaGVja291dFVzZXJFcnJvcnMgPSBjaGVja291dFVzZXJFcnJvcnNNYXBwZXIocm9vdERhdGEudXNlckVycm9ycywgcm9vdERhdGEud2FybmluZ3MpO1xuXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoY2hlY2tvdXRVc2VyRXJyb3JzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdUaGUgJyArIG11dGF0aW9uUm9vdEtleSArICcgbXV0YXRpb24gZmFpbGVkIGR1ZSB0byBhbiB1bmtub3duIGVycm9yLicpKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gcXVlcnkkMTIoY2xpZW50KSB7XG4gIHZhciBkb2N1bWVudCA9IGNsaWVudC5kb2N1bWVudCgpO1xuICB2YXIgc3ByZWFkcyA9IHt9O1xuICB2YXIgdmFyaWFibGVzID0ge307XG4gIHZhcmlhYmxlcy5DYXJ0ID0ge307XG4gIHZhcmlhYmxlcy5DYXJ0LmlkID0gY2xpZW50LnZhcmlhYmxlKFwiaWRcIiwgXCJJRCFcIik7XG4gIHNwcmVhZHMuQ2FydExpbmVGcmFnbWVudCA9IGRvY3VtZW50LmRlZmluZUZyYWdtZW50KFwiQ2FydExpbmVGcmFnbWVudFwiLCBcIkJhc2VDYXJ0TGluZVwiLCBmdW5jdGlvbiAocm9vdCkge1xuICAgIHJvb3QuYWRkKFwiaWRcIik7XG4gICAgcm9vdC5hZGQoXCJtZXJjaGFuZGlzZVwiLCBmdW5jdGlvbiAobWVyY2hhbmRpc2UpIHtcbiAgICAgIG1lcmNoYW5kaXNlLmFkZElubGluZUZyYWdtZW50T24oXCJQcm9kdWN0VmFyaWFudFwiLCBmdW5jdGlvbiAoUHJvZHVjdFZhcmlhbnQpIHtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwiaWRcIik7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcInRpdGxlXCIpO1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJpbWFnZVwiLCBmdW5jdGlvbiAoaW1hZ2UpIHtcbiAgICAgICAgICBpbWFnZS5hZGQoXCJpZFwiKTtcbiAgICAgICAgICBpbWFnZS5hZGQoXCJ1cmxcIiwge1xuICAgICAgICAgICAgYWxpYXM6IFwic3JjXCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpbWFnZS5hZGQoXCJhbHRUZXh0XCIpO1xuICAgICAgICAgIGltYWdlLmFkZChcIndpZHRoXCIpO1xuICAgICAgICAgIGltYWdlLmFkZChcImhlaWdodFwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcInByb2R1Y3RcIiwgZnVuY3Rpb24gKHByb2R1Y3QpIHtcbiAgICAgICAgICBwcm9kdWN0LmFkZChcImlkXCIpO1xuICAgICAgICAgIHByb2R1Y3QuYWRkKFwiaGFuZGxlXCIpO1xuICAgICAgICAgIHByb2R1Y3QuYWRkKFwidGl0bGVcIik7XG4gICAgICAgIH0pO1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJ3ZWlnaHRcIik7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcImF2YWlsYWJsZUZvclNhbGVcIiwge1xuICAgICAgICAgIGFsaWFzOiBcImF2YWlsYWJsZVwiXG4gICAgICAgIH0pO1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJza3VcIik7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcInNlbGVjdGVkT3B0aW9uc1wiLCBmdW5jdGlvbiAoc2VsZWN0ZWRPcHRpb25zKSB7XG4gICAgICAgICAgc2VsZWN0ZWRPcHRpb25zLmFkZChcIm5hbWVcIik7XG4gICAgICAgICAgc2VsZWN0ZWRPcHRpb25zLmFkZChcInZhbHVlXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwiY29tcGFyZUF0UHJpY2VcIiwgZnVuY3Rpb24gKGNvbXBhcmVBdFByaWNlKSB7XG4gICAgICAgICAgY29tcGFyZUF0UHJpY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICAgIGNvbXBhcmVBdFByaWNlLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcInByaWNlXCIsIGZ1bmN0aW9uIChwcmljZSkge1xuICAgICAgICAgIHByaWNlLmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgICBwcmljZS5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICAgIH0pO1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJ1bml0UHJpY2VcIiwgZnVuY3Rpb24gKHVuaXRQcmljZSkge1xuICAgICAgICAgIHVuaXRQcmljZS5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgICAgdW5pdFByaWNlLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcInVuaXRQcmljZU1lYXN1cmVtZW50XCIsIGZ1bmN0aW9uICh1bml0UHJpY2VNZWFzdXJlbWVudCkge1xuICAgICAgICAgIHVuaXRQcmljZU1lYXN1cmVtZW50LmFkZChcIm1lYXN1cmVkVHlwZVwiKTtcbiAgICAgICAgICB1bml0UHJpY2VNZWFzdXJlbWVudC5hZGQoXCJxdWFudGl0eVVuaXRcIik7XG4gICAgICAgICAgdW5pdFByaWNlTWVhc3VyZW1lbnQuYWRkKFwicXVhbnRpdHlWYWx1ZVwiKTtcbiAgICAgICAgICB1bml0UHJpY2VNZWFzdXJlbWVudC5hZGQoXCJyZWZlcmVuY2VVbml0XCIpO1xuICAgICAgICAgIHVuaXRQcmljZU1lYXN1cmVtZW50LmFkZChcInJlZmVyZW5jZVZhbHVlXCIpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwicXVhbnRpdHlcIik7XG4gICAgcm9vdC5hZGQoXCJhdHRyaWJ1dGVzXCIsIGZ1bmN0aW9uIChhdHRyaWJ1dGVzKSB7XG4gICAgICBhdHRyaWJ1dGVzLmFkZChcImtleVwiKTtcbiAgICAgIGF0dHJpYnV0ZXMuYWRkKFwidmFsdWVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJjb3N0XCIsIGZ1bmN0aW9uIChjb3N0KSB7XG4gICAgICBjb3N0LmFkZChcInRvdGFsQW1vdW50XCIsIGZ1bmN0aW9uICh0b3RhbEFtb3VudCkge1xuICAgICAgICB0b3RhbEFtb3VudC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIHRvdGFsQW1vdW50LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgY29zdC5hZGQoXCJzdWJ0b3RhbEFtb3VudFwiLCBmdW5jdGlvbiAoc3VidG90YWxBbW91bnQpIHtcbiAgICAgICAgc3VidG90YWxBbW91bnQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICBzdWJ0b3RhbEFtb3VudC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGNvc3QuYWRkKFwiYW1vdW50UGVyUXVhbnRpdHlcIiwgZnVuY3Rpb24gKGFtb3VudFBlclF1YW50aXR5KSB7XG4gICAgICAgIGFtb3VudFBlclF1YW50aXR5LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgYW1vdW50UGVyUXVhbnRpdHkuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBjb3N0LmFkZChcImNvbXBhcmVBdEFtb3VudFBlclF1YW50aXR5XCIsIGZ1bmN0aW9uIChjb21wYXJlQXRBbW91bnRQZXJRdWFudGl0eSkge1xuICAgICAgICBjb21wYXJlQXRBbW91bnRQZXJRdWFudGl0eS5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIGNvbXBhcmVBdEFtb3VudFBlclF1YW50aXR5LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiZGlzY291bnRBbGxvY2F0aW9uc1wiLCBmdW5jdGlvbiAoZGlzY291bnRBbGxvY2F0aW9ucykge1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGQoXCJkaXNjb3VudGVkQW1vdW50XCIsIGZ1bmN0aW9uIChkaXNjb3VudGVkQW1vdW50KSB7XG4gICAgICAgIGRpc2NvdW50ZWRBbW91bnQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICBkaXNjb3VudGVkQW1vdW50LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGQoXCJkaXNjb3VudEFwcGxpY2F0aW9uXCIsIGZ1bmN0aW9uIChkaXNjb3VudEFwcGxpY2F0aW9uKSB7XG4gICAgICAgIGRpc2NvdW50QXBwbGljYXRpb24uYWRkKFwidGFyZ2V0VHlwZVwiKTtcbiAgICAgICAgZGlzY291bnRBcHBsaWNhdGlvbi5hZGQoXCJhbGxvY2F0aW9uTWV0aG9kXCIpO1xuICAgICAgICBkaXNjb3VudEFwcGxpY2F0aW9uLmFkZChcInRhcmdldFNlbGVjdGlvblwiKTtcbiAgICAgICAgZGlzY291bnRBcHBsaWNhdGlvbi5hZGQoXCJ2YWx1ZVwiLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICB2YWx1ZS5hZGRJbmxpbmVGcmFnbWVudE9uKFwiUHJpY2luZ1BlcmNlbnRhZ2VWYWx1ZVwiLCBmdW5jdGlvbiAoUHJpY2luZ1BlcmNlbnRhZ2VWYWx1ZSkge1xuICAgICAgICAgICAgUHJpY2luZ1BlcmNlbnRhZ2VWYWx1ZS5hZGQoXCJwZXJjZW50YWdlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHZhbHVlLmFkZElubGluZUZyYWdtZW50T24oXCJNb25leVYyXCIsIGZ1bmN0aW9uIChNb25leVYyKSB7XG4gICAgICAgICAgICBNb25leVYyLmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgICAgIE1vbmV5VjIuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGRJbmxpbmVGcmFnbWVudE9uKFwiQ2FydENvZGVEaXNjb3VudEFsbG9jYXRpb25cIiwgZnVuY3Rpb24gKENhcnRDb2RlRGlzY291bnRBbGxvY2F0aW9uKSB7XG4gICAgICAgIENhcnRDb2RlRGlzY291bnRBbGxvY2F0aW9uLmFkZChcImNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGRpc2NvdW50QWxsb2NhdGlvbnMuYWRkSW5saW5lRnJhZ21lbnRPbihcIkNhcnRBdXRvbWF0aWNEaXNjb3VudEFsbG9jYXRpb25cIiwgZnVuY3Rpb24gKENhcnRBdXRvbWF0aWNEaXNjb3VudEFsbG9jYXRpb24pIHtcbiAgICAgICAgQ2FydEF1dG9tYXRpY0Rpc2NvdW50QWxsb2NhdGlvbi5hZGQoXCJ0aXRsZVwiKTtcbiAgICAgIH0pO1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGRJbmxpbmVGcmFnbWVudE9uKFwiQ2FydEN1c3RvbURpc2NvdW50QWxsb2NhdGlvblwiLCBmdW5jdGlvbiAoQ2FydEN1c3RvbURpc2NvdW50QWxsb2NhdGlvbikge1xuICAgICAgICBDYXJ0Q3VzdG9tRGlzY291bnRBbGxvY2F0aW9uLmFkZChcInRpdGxlXCIpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuICBzcHJlYWRzLkFwcGxpZWRHaWZ0Q2FyZEZyYWdtZW50ID0gZG9jdW1lbnQuZGVmaW5lRnJhZ21lbnQoXCJBcHBsaWVkR2lmdENhcmRGcmFnbWVudFwiLCBcIkFwcGxpZWRHaWZ0Q2FyZFwiLCBmdW5jdGlvbiAocm9vdCkge1xuICAgIHJvb3QuYWRkKFwiYW1vdW50VXNlZFwiLCBmdW5jdGlvbiAoYW1vdW50VXNlZCkge1xuICAgICAgYW1vdW50VXNlZC5hZGQoXCJhbW91bnRcIik7XG4gICAgICBhbW91bnRVc2VkLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImFtb3VudFVzZWRcIiwge1xuICAgICAgYWxpYXM6IFwiYW1vdW50VXNlZFYyXCJcbiAgICB9LCBmdW5jdGlvbiAoYW1vdW50VXNlZCkge1xuICAgICAgYW1vdW50VXNlZC5hZGQoXCJhbW91bnRcIik7XG4gICAgICBhbW91bnRVc2VkLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImJhbGFuY2VcIiwgZnVuY3Rpb24gKGJhbGFuY2UpIHtcbiAgICAgIGJhbGFuY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgYmFsYW5jZS5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJiYWxhbmNlXCIsIHtcbiAgICAgIGFsaWFzOiBcImJhbGFuY2VWMlwiXG4gICAgfSwgZnVuY3Rpb24gKGJhbGFuY2UpIHtcbiAgICAgIGJhbGFuY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgYmFsYW5jZS5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJwcmVzZW50bWVudEFtb3VudFVzZWRcIiwgZnVuY3Rpb24gKHByZXNlbnRtZW50QW1vdW50VXNlZCkge1xuICAgICAgcHJlc2VudG1lbnRBbW91bnRVc2VkLmFkZChcImFtb3VudFwiKTtcbiAgICAgIHByZXNlbnRtZW50QW1vdW50VXNlZC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJpZFwiKTtcbiAgICByb290LmFkZChcImxhc3RDaGFyYWN0ZXJzXCIpO1xuICB9KTtcbiAgc3ByZWFkcy5DYXJ0RnJhZ21lbnQgPSBkb2N1bWVudC5kZWZpbmVGcmFnbWVudChcIkNhcnRGcmFnbWVudFwiLCBcIkNhcnRcIiwgZnVuY3Rpb24gKHJvb3QpIHtcbiAgICByb290LmFkZChcImlkXCIpO1xuICAgIHJvb3QuYWRkKFwiY3JlYXRlZEF0XCIpO1xuICAgIHJvb3QuYWRkKFwidXBkYXRlZEF0XCIpO1xuICAgIHJvb3QuYWRkKFwibGluZXNcIiwge1xuICAgICAgYXJnczoge1xuICAgICAgICBmaXJzdDogMjUwXG4gICAgICB9XG4gICAgfSwgZnVuY3Rpb24gKGxpbmVzKSB7XG4gICAgICBsaW5lcy5hZGQoXCJwYWdlSW5mb1wiLCBmdW5jdGlvbiAocGFnZUluZm8pIHtcbiAgICAgICAgcGFnZUluZm8uYWRkKFwiaGFzTmV4dFBhZ2VcIik7XG4gICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc1ByZXZpb3VzUGFnZVwiKTtcbiAgICAgIH0pO1xuICAgICAgbGluZXMuYWRkKFwiZWRnZXNcIiwgZnVuY3Rpb24gKGVkZ2VzKSB7XG4gICAgICAgIGVkZ2VzLmFkZChcImN1cnNvclwiKTtcbiAgICAgICAgZWRnZXMuYWRkKFwibm9kZVwiLCBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgIG5vZGUuYWRkRnJhZ21lbnQoc3ByZWFkcy5DYXJ0TGluZUZyYWdtZW50KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImF0dHJpYnV0ZXNcIiwgZnVuY3Rpb24gKGF0dHJpYnV0ZXMpIHtcbiAgICAgIGF0dHJpYnV0ZXMuYWRkKFwia2V5XCIpO1xuICAgICAgYXR0cmlidXRlcy5hZGQoXCJ2YWx1ZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImNvc3RcIiwgZnVuY3Rpb24gKGNvc3QpIHtcbiAgICAgIGNvc3QuYWRkKFwiY2hlY2tvdXRDaGFyZ2VBbW91bnRcIiwgZnVuY3Rpb24gKGNoZWNrb3V0Q2hhcmdlQW1vdW50KSB7XG4gICAgICAgIGNoZWNrb3V0Q2hhcmdlQW1vdW50LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgY2hlY2tvdXRDaGFyZ2VBbW91bnQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBjb3N0LmFkZChcInRvdGFsQW1vdW50XCIsIGZ1bmN0aW9uICh0b3RhbEFtb3VudCkge1xuICAgICAgICB0b3RhbEFtb3VudC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIHRvdGFsQW1vdW50LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgY29zdC5hZGQoXCJzdWJ0b3RhbEFtb3VudFwiLCBmdW5jdGlvbiAoc3VidG90YWxBbW91bnQpIHtcbiAgICAgICAgc3VidG90YWxBbW91bnQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICBzdWJ0b3RhbEFtb3VudC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGNvc3QuYWRkKFwidG90YWxUYXhBbW91bnRcIiwgZnVuY3Rpb24gKHRvdGFsVGF4QW1vdW50KSB7XG4gICAgICAgIHRvdGFsVGF4QW1vdW50LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgdG90YWxUYXhBbW91bnQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBjb3N0LmFkZChcInRvdGFsRHV0eUFtb3VudFwiLCBmdW5jdGlvbiAodG90YWxEdXR5QW1vdW50KSB7XG4gICAgICAgIHRvdGFsRHV0eUFtb3VudC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIHRvdGFsRHV0eUFtb3VudC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImNoZWNrb3V0VXJsXCIpO1xuICAgIHJvb3QuYWRkKFwiZGlzY291bnRDb2Rlc1wiLCBmdW5jdGlvbiAoZGlzY291bnRDb2Rlcykge1xuICAgICAgZGlzY291bnRDb2Rlcy5hZGQoXCJhcHBsaWNhYmxlXCIpO1xuICAgICAgZGlzY291bnRDb2Rlcy5hZGQoXCJjb2RlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiZGlzY291bnRBbGxvY2F0aW9uc1wiLCBmdW5jdGlvbiAoZGlzY291bnRBbGxvY2F0aW9ucykge1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGQoXCJkaXNjb3VudGVkQW1vdW50XCIsIGZ1bmN0aW9uIChkaXNjb3VudGVkQW1vdW50KSB7XG4gICAgICAgIGRpc2NvdW50ZWRBbW91bnQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICBkaXNjb3VudGVkQW1vdW50LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGQoXCJkaXNjb3VudEFwcGxpY2F0aW9uXCIsIGZ1bmN0aW9uIChkaXNjb3VudEFwcGxpY2F0aW9uKSB7XG4gICAgICAgIGRpc2NvdW50QXBwbGljYXRpb24uYWRkKFwidGFyZ2V0VHlwZVwiKTtcbiAgICAgICAgZGlzY291bnRBcHBsaWNhdGlvbi5hZGQoXCJhbGxvY2F0aW9uTWV0aG9kXCIpO1xuICAgICAgICBkaXNjb3VudEFwcGxpY2F0aW9uLmFkZChcInRhcmdldFNlbGVjdGlvblwiKTtcbiAgICAgICAgZGlzY291bnRBcHBsaWNhdGlvbi5hZGQoXCJ2YWx1ZVwiLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICB2YWx1ZS5hZGRJbmxpbmVGcmFnbWVudE9uKFwiUHJpY2luZ1BlcmNlbnRhZ2VWYWx1ZVwiLCBmdW5jdGlvbiAoUHJpY2luZ1BlcmNlbnRhZ2VWYWx1ZSkge1xuICAgICAgICAgICAgUHJpY2luZ1BlcmNlbnRhZ2VWYWx1ZS5hZGQoXCJwZXJjZW50YWdlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHZhbHVlLmFkZElubGluZUZyYWdtZW50T24oXCJNb25leVYyXCIsIGZ1bmN0aW9uIChNb25leVYyKSB7XG4gICAgICAgICAgICBNb25leVYyLmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgICAgIE1vbmV5VjIuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGRJbmxpbmVGcmFnbWVudE9uKFwiQ2FydENvZGVEaXNjb3VudEFsbG9jYXRpb25cIiwgZnVuY3Rpb24gKENhcnRDb2RlRGlzY291bnRBbGxvY2F0aW9uKSB7XG4gICAgICAgIENhcnRDb2RlRGlzY291bnRBbGxvY2F0aW9uLmFkZChcImNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGRpc2NvdW50QWxsb2NhdGlvbnMuYWRkSW5saW5lRnJhZ21lbnRPbihcIkNhcnRBdXRvbWF0aWNEaXNjb3VudEFsbG9jYXRpb25cIiwgZnVuY3Rpb24gKENhcnRBdXRvbWF0aWNEaXNjb3VudEFsbG9jYXRpb24pIHtcbiAgICAgICAgQ2FydEF1dG9tYXRpY0Rpc2NvdW50QWxsb2NhdGlvbi5hZGQoXCJ0aXRsZVwiKTtcbiAgICAgIH0pO1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGRJbmxpbmVGcmFnbWVudE9uKFwiQ2FydEN1c3RvbURpc2NvdW50QWxsb2NhdGlvblwiLCBmdW5jdGlvbiAoQ2FydEN1c3RvbURpc2NvdW50QWxsb2NhdGlvbikge1xuICAgICAgICBDYXJ0Q3VzdG9tRGlzY291bnRBbGxvY2F0aW9uLmFkZChcInRpdGxlXCIpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJidXllcklkZW50aXR5XCIsIGZ1bmN0aW9uIChidXllcklkZW50aXR5KSB7XG4gICAgICBidXllcklkZW50aXR5LmFkZChcImNvdW50cnlDb2RlXCIpO1xuICAgICAgYnV5ZXJJZGVudGl0eS5hZGQoXCJwcmVmZXJlbmNlc1wiLCBmdW5jdGlvbiAocHJlZmVyZW5jZXMpIHtcbiAgICAgICAgcHJlZmVyZW5jZXMuYWRkKFwiZGVsaXZlcnlcIiwgZnVuY3Rpb24gKGRlbGl2ZXJ5KSB7XG4gICAgICAgICAgZGVsaXZlcnkuYWRkKFwiY29vcmRpbmF0ZXNcIiwgZnVuY3Rpb24gKGNvb3JkaW5hdGVzKSB7XG4gICAgICAgICAgICBjb29yZGluYXRlcy5hZGQoXCJsYXRpdHVkZVwiKTtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzLmFkZChcImxvbmdpdHVkZVwiKTtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzLmFkZChcImNvdW50cnlDb2RlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGRlbGl2ZXJ5LmFkZChcImRlbGl2ZXJ5TWV0aG9kXCIpO1xuICAgICAgICAgIGRlbGl2ZXJ5LmFkZChcInBpY2t1cEhhbmRsZVwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHByZWZlcmVuY2VzLmFkZChcIndhbGxldFwiKTtcbiAgICAgIH0pO1xuICAgICAgYnV5ZXJJZGVudGl0eS5hZGQoXCJlbWFpbFwiKTtcbiAgICAgIGJ1eWVySWRlbnRpdHkuYWRkKFwicGhvbmVcIik7XG4gICAgICBidXllcklkZW50aXR5LmFkZChcImN1c3RvbWVyXCIsIGZ1bmN0aW9uIChjdXN0b21lcikge1xuICAgICAgICBjdXN0b21lci5hZGQoXCJlbWFpbFwiKTtcbiAgICAgIH0pO1xuICAgICAgYnV5ZXJJZGVudGl0eS5hZGQoXCJkZWxpdmVyeUFkZHJlc3NQcmVmZXJlbmNlc1wiLCBmdW5jdGlvbiAoZGVsaXZlcnlBZGRyZXNzUHJlZmVyZW5jZXMpIHtcbiAgICAgICAgZGVsaXZlcnlBZGRyZXNzUHJlZmVyZW5jZXMuYWRkSW5saW5lRnJhZ21lbnRPbihcIk1haWxpbmdBZGRyZXNzXCIsIGZ1bmN0aW9uIChNYWlsaW5nQWRkcmVzcykge1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImFkZHJlc3MxXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImFkZHJlc3MyXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImNpdHlcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwiY29tcGFueVwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJjb3VudHJ5XCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImNvdW50cnlDb2RlVjJcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwiZmlyc3ROYW1lXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImZvcm1hdHRlZFwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJmb3JtYXR0ZWRBcmVhXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImxhc3ROYW1lXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImxhdGl0dWRlXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImxvbmdpdHVkZVwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJuYW1lXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcInBob25lXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcInByb3ZpbmNlXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcInByb3ZpbmNlQ29kZVwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJ6aXBcIik7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJkZWxpdmVyeUdyb3Vwc1wiLCB7XG4gICAgICBhcmdzOiB7XG4gICAgICAgIGZpcnN0OiAxMFxuICAgICAgfVxuICAgIH0sIGZ1bmN0aW9uIChkZWxpdmVyeUdyb3Vwcykge1xuICAgICAgZGVsaXZlcnlHcm91cHMuYWRkKFwicGFnZUluZm9cIiwgZnVuY3Rpb24gKHBhZ2VJbmZvKSB7XG4gICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc05leHRQYWdlXCIpO1xuICAgICAgICBwYWdlSW5mby5hZGQoXCJoYXNQcmV2aW91c1BhZ2VcIik7XG4gICAgICB9KTtcbiAgICAgIGRlbGl2ZXJ5R3JvdXBzLmFkZChcImVkZ2VzXCIsIGZ1bmN0aW9uIChlZGdlcykge1xuICAgICAgICBlZGdlcy5hZGQoXCJub2RlXCIsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgbm9kZS5hZGQoXCJpZFwiKTtcbiAgICAgICAgICBub2RlLmFkZChcImRlbGl2ZXJ5QWRkcmVzc1wiLCBmdW5jdGlvbiAoZGVsaXZlcnlBZGRyZXNzKSB7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwiYWRkcmVzczJcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwiYWRkcmVzczFcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwiY2l0eVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJjb21wYW55XCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcImNvdW50cnlcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwiY291bnRyeUNvZGVWMlwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJmaXJzdE5hbWVcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwiZm9ybWF0dGVkXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcImZvcm1hdHRlZEFyZWFcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwibGFzdE5hbWVcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwibGF0aXR1ZGVcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwibG9uZ2l0dWRlXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcIm5hbWVcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwicGhvbmVcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwicHJvdmluY2VcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwicHJvdmluY2VDb2RlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIG5vZGUuYWRkKFwiZGVsaXZlcnlPcHRpb25zXCIsIGZ1bmN0aW9uIChkZWxpdmVyeU9wdGlvbnMpIHtcbiAgICAgICAgICAgIGRlbGl2ZXJ5T3B0aW9ucy5hZGQoXCJjb2RlXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlPcHRpb25zLmFkZChcImRlbGl2ZXJ5TWV0aG9kVHlwZVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5T3B0aW9ucy5hZGQoXCJkZXNjcmlwdGlvblwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5T3B0aW9ucy5hZGQoXCJlc3RpbWF0ZWRDb3N0XCIsIGZ1bmN0aW9uIChlc3RpbWF0ZWRDb3N0KSB7XG4gICAgICAgICAgICAgIGVzdGltYXRlZENvc3QuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICAgICAgICBlc3RpbWF0ZWRDb3N0LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZGVsaXZlcnlPcHRpb25zLmFkZChcImhhbmRsZVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5T3B0aW9ucy5hZGQoXCJ0aXRsZVwiKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBub2RlLmFkZChcInNlbGVjdGVkRGVsaXZlcnlPcHRpb25cIiwgZnVuY3Rpb24gKHNlbGVjdGVkRGVsaXZlcnlPcHRpb24pIHtcbiAgICAgICAgICAgIHNlbGVjdGVkRGVsaXZlcnlPcHRpb24uYWRkKFwiY29kZVwiKTtcbiAgICAgICAgICAgIHNlbGVjdGVkRGVsaXZlcnlPcHRpb24uYWRkKFwiZGVsaXZlcnlNZXRob2RUeXBlXCIpO1xuICAgICAgICAgICAgc2VsZWN0ZWREZWxpdmVyeU9wdGlvbi5hZGQoXCJkZXNjcmlwdGlvblwiKTtcbiAgICAgICAgICAgIHNlbGVjdGVkRGVsaXZlcnlPcHRpb24uYWRkKFwiZXN0aW1hdGVkQ29zdFwiLCBmdW5jdGlvbiAoZXN0aW1hdGVkQ29zdCkge1xuICAgICAgICAgICAgICBlc3RpbWF0ZWRDb3N0LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgICAgICAgZXN0aW1hdGVkQ29zdC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNlbGVjdGVkRGVsaXZlcnlPcHRpb24uYWRkKFwiaGFuZGxlXCIpO1xuICAgICAgICAgICAgc2VsZWN0ZWREZWxpdmVyeU9wdGlvbi5hZGQoXCJ0aXRsZVwiKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBub2RlLmFkZChcImNhcnRMaW5lc1wiLCB7XG4gICAgICAgICAgICBhcmdzOiB7XG4gICAgICAgICAgICAgIGZpcnN0OiAyNTBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LCBmdW5jdGlvbiAoY2FydExpbmVzKSB7XG4gICAgICAgICAgICBjYXJ0TGluZXMuYWRkKFwicGFnZUluZm9cIiwgZnVuY3Rpb24gKHBhZ2VJbmZvKSB7XG4gICAgICAgICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc05leHRQYWdlXCIpO1xuICAgICAgICAgICAgICBwYWdlSW5mby5hZGQoXCJoYXNQcmV2aW91c1BhZ2VcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNhcnRMaW5lcy5hZGQoXCJlZGdlc1wiLCBmdW5jdGlvbiAoZWRnZXMpIHtcbiAgICAgICAgICAgICAgZWRnZXMuYWRkKFwiY3Vyc29yXCIpO1xuICAgICAgICAgICAgICBlZGdlcy5hZGQoXCJub2RlXCIsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5hZGQoXCJpZFwiKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImFwcGxpZWRHaWZ0Q2FyZHNcIiwgZnVuY3Rpb24gKGFwcGxpZWRHaWZ0Q2FyZHMpIHtcbiAgICAgIGFwcGxpZWRHaWZ0Q2FyZHMuYWRkRnJhZ21lbnQoc3ByZWFkcy5BcHBsaWVkR2lmdENhcmRGcmFnbWVudCk7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJub3RlXCIpO1xuICB9KTtcbiAgZG9jdW1lbnQuYWRkUXVlcnkoXCJDYXJ0XCIsIFt2YXJpYWJsZXMuQ2FydC5pZF0sIGZ1bmN0aW9uIChyb290KSB7XG4gICAgcm9vdC5hZGQoXCJjYXJ0XCIsIHtcbiAgICAgIGFyZ3M6IHtcbiAgICAgICAgaWQ6IHZhcmlhYmxlcy5DYXJ0LmlkXG4gICAgICB9XG4gICAgfSwgZnVuY3Rpb24gKGNhcnQpIHtcbiAgICAgIGNhcnQuYWRkRnJhZ21lbnQoc3ByZWFkcy5DYXJ0RnJhZ21lbnQpO1xuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIGRvY3VtZW50O1xufVxuXG5mdW5jdGlvbiBxdWVyeSQxMyhjbGllbnQpIHtcbiAgdmFyIGRvY3VtZW50ID0gY2xpZW50LmRvY3VtZW50KCk7XG4gIHZhciBzcHJlYWRzID0ge307XG4gIHZhciB2YXJpYWJsZXMgPSB7fTtcbiAgdmFyaWFibGVzLkNhcnRDcmVhdGUgPSB7fTtcbiAgdmFyaWFibGVzLkNhcnRDcmVhdGUuaW5wdXQgPSBjbGllbnQudmFyaWFibGUoXCJpbnB1dFwiLCBcIkNhcnRJbnB1dCFcIik7XG4gIHNwcmVhZHMuQ2FydExpbmVGcmFnbWVudCA9IGRvY3VtZW50LmRlZmluZUZyYWdtZW50KFwiQ2FydExpbmVGcmFnbWVudFwiLCBcIkJhc2VDYXJ0TGluZVwiLCBmdW5jdGlvbiAocm9vdCkge1xuICAgIHJvb3QuYWRkKFwiaWRcIik7XG4gICAgcm9vdC5hZGQoXCJtZXJjaGFuZGlzZVwiLCBmdW5jdGlvbiAobWVyY2hhbmRpc2UpIHtcbiAgICAgIG1lcmNoYW5kaXNlLmFkZElubGluZUZyYWdtZW50T24oXCJQcm9kdWN0VmFyaWFudFwiLCBmdW5jdGlvbiAoUHJvZHVjdFZhcmlhbnQpIHtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwiaWRcIik7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcInRpdGxlXCIpO1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJpbWFnZVwiLCBmdW5jdGlvbiAoaW1hZ2UpIHtcbiAgICAgICAgICBpbWFnZS5hZGQoXCJpZFwiKTtcbiAgICAgICAgICBpbWFnZS5hZGQoXCJ1cmxcIiwge1xuICAgICAgICAgICAgYWxpYXM6IFwic3JjXCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpbWFnZS5hZGQoXCJhbHRUZXh0XCIpO1xuICAgICAgICAgIGltYWdlLmFkZChcIndpZHRoXCIpO1xuICAgICAgICAgIGltYWdlLmFkZChcImhlaWdodFwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcInByb2R1Y3RcIiwgZnVuY3Rpb24gKHByb2R1Y3QpIHtcbiAgICAgICAgICBwcm9kdWN0LmFkZChcImlkXCIpO1xuICAgICAgICAgIHByb2R1Y3QuYWRkKFwiaGFuZGxlXCIpO1xuICAgICAgICAgIHByb2R1Y3QuYWRkKFwidGl0bGVcIik7XG4gICAgICAgIH0pO1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJ3ZWlnaHRcIik7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcImF2YWlsYWJsZUZvclNhbGVcIiwge1xuICAgICAgICAgIGFsaWFzOiBcImF2YWlsYWJsZVwiXG4gICAgICAgIH0pO1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJza3VcIik7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcInNlbGVjdGVkT3B0aW9uc1wiLCBmdW5jdGlvbiAoc2VsZWN0ZWRPcHRpb25zKSB7XG4gICAgICAgICAgc2VsZWN0ZWRPcHRpb25zLmFkZChcIm5hbWVcIik7XG4gICAgICAgICAgc2VsZWN0ZWRPcHRpb25zLmFkZChcInZhbHVlXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwiY29tcGFyZUF0UHJpY2VcIiwgZnVuY3Rpb24gKGNvbXBhcmVBdFByaWNlKSB7XG4gICAgICAgICAgY29tcGFyZUF0UHJpY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICAgIGNvbXBhcmVBdFByaWNlLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcInByaWNlXCIsIGZ1bmN0aW9uIChwcmljZSkge1xuICAgICAgICAgIHByaWNlLmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgICBwcmljZS5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICAgIH0pO1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJ1bml0UHJpY2VcIiwgZnVuY3Rpb24gKHVuaXRQcmljZSkge1xuICAgICAgICAgIHVuaXRQcmljZS5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgICAgdW5pdFByaWNlLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcInVuaXRQcmljZU1lYXN1cmVtZW50XCIsIGZ1bmN0aW9uICh1bml0UHJpY2VNZWFzdXJlbWVudCkge1xuICAgICAgICAgIHVuaXRQcmljZU1lYXN1cmVtZW50LmFkZChcIm1lYXN1cmVkVHlwZVwiKTtcbiAgICAgICAgICB1bml0UHJpY2VNZWFzdXJlbWVudC5hZGQoXCJxdWFudGl0eVVuaXRcIik7XG4gICAgICAgICAgdW5pdFByaWNlTWVhc3VyZW1lbnQuYWRkKFwicXVhbnRpdHlWYWx1ZVwiKTtcbiAgICAgICAgICB1bml0UHJpY2VNZWFzdXJlbWVudC5hZGQoXCJyZWZlcmVuY2VVbml0XCIpO1xuICAgICAgICAgIHVuaXRQcmljZU1lYXN1cmVtZW50LmFkZChcInJlZmVyZW5jZVZhbHVlXCIpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwicXVhbnRpdHlcIik7XG4gICAgcm9vdC5hZGQoXCJhdHRyaWJ1dGVzXCIsIGZ1bmN0aW9uIChhdHRyaWJ1dGVzKSB7XG4gICAgICBhdHRyaWJ1dGVzLmFkZChcImtleVwiKTtcbiAgICAgIGF0dHJpYnV0ZXMuYWRkKFwidmFsdWVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJjb3N0XCIsIGZ1bmN0aW9uIChjb3N0KSB7XG4gICAgICBjb3N0LmFkZChcInRvdGFsQW1vdW50XCIsIGZ1bmN0aW9uICh0b3RhbEFtb3VudCkge1xuICAgICAgICB0b3RhbEFtb3VudC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIHRvdGFsQW1vdW50LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgY29zdC5hZGQoXCJzdWJ0b3RhbEFtb3VudFwiLCBmdW5jdGlvbiAoc3VidG90YWxBbW91bnQpIHtcbiAgICAgICAgc3VidG90YWxBbW91bnQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICBzdWJ0b3RhbEFtb3VudC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGNvc3QuYWRkKFwiYW1vdW50UGVyUXVhbnRpdHlcIiwgZnVuY3Rpb24gKGFtb3VudFBlclF1YW50aXR5KSB7XG4gICAgICAgIGFtb3VudFBlclF1YW50aXR5LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgYW1vdW50UGVyUXVhbnRpdHkuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBjb3N0LmFkZChcImNvbXBhcmVBdEFtb3VudFBlclF1YW50aXR5XCIsIGZ1bmN0aW9uIChjb21wYXJlQXRBbW91bnRQZXJRdWFudGl0eSkge1xuICAgICAgICBjb21wYXJlQXRBbW91bnRQZXJRdWFudGl0eS5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIGNvbXBhcmVBdEFtb3VudFBlclF1YW50aXR5LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiZGlzY291bnRBbGxvY2F0aW9uc1wiLCBmdW5jdGlvbiAoZGlzY291bnRBbGxvY2F0aW9ucykge1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGQoXCJkaXNjb3VudGVkQW1vdW50XCIsIGZ1bmN0aW9uIChkaXNjb3VudGVkQW1vdW50KSB7XG4gICAgICAgIGRpc2NvdW50ZWRBbW91bnQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICBkaXNjb3VudGVkQW1vdW50LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGQoXCJkaXNjb3VudEFwcGxpY2F0aW9uXCIsIGZ1bmN0aW9uIChkaXNjb3VudEFwcGxpY2F0aW9uKSB7XG4gICAgICAgIGRpc2NvdW50QXBwbGljYXRpb24uYWRkKFwidGFyZ2V0VHlwZVwiKTtcbiAgICAgICAgZGlzY291bnRBcHBsaWNhdGlvbi5hZGQoXCJhbGxvY2F0aW9uTWV0aG9kXCIpO1xuICAgICAgICBkaXNjb3VudEFwcGxpY2F0aW9uLmFkZChcInRhcmdldFNlbGVjdGlvblwiKTtcbiAgICAgICAgZGlzY291bnRBcHBsaWNhdGlvbi5hZGQoXCJ2YWx1ZVwiLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICB2YWx1ZS5hZGRJbmxpbmVGcmFnbWVudE9uKFwiUHJpY2luZ1BlcmNlbnRhZ2VWYWx1ZVwiLCBmdW5jdGlvbiAoUHJpY2luZ1BlcmNlbnRhZ2VWYWx1ZSkge1xuICAgICAgICAgICAgUHJpY2luZ1BlcmNlbnRhZ2VWYWx1ZS5hZGQoXCJwZXJjZW50YWdlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHZhbHVlLmFkZElubGluZUZyYWdtZW50T24oXCJNb25leVYyXCIsIGZ1bmN0aW9uIChNb25leVYyKSB7XG4gICAgICAgICAgICBNb25leVYyLmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgICAgIE1vbmV5VjIuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGRJbmxpbmVGcmFnbWVudE9uKFwiQ2FydENvZGVEaXNjb3VudEFsbG9jYXRpb25cIiwgZnVuY3Rpb24gKENhcnRDb2RlRGlzY291bnRBbGxvY2F0aW9uKSB7XG4gICAgICAgIENhcnRDb2RlRGlzY291bnRBbGxvY2F0aW9uLmFkZChcImNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGRpc2NvdW50QWxsb2NhdGlvbnMuYWRkSW5saW5lRnJhZ21lbnRPbihcIkNhcnRBdXRvbWF0aWNEaXNjb3VudEFsbG9jYXRpb25cIiwgZnVuY3Rpb24gKENhcnRBdXRvbWF0aWNEaXNjb3VudEFsbG9jYXRpb24pIHtcbiAgICAgICAgQ2FydEF1dG9tYXRpY0Rpc2NvdW50QWxsb2NhdGlvbi5hZGQoXCJ0aXRsZVwiKTtcbiAgICAgIH0pO1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGRJbmxpbmVGcmFnbWVudE9uKFwiQ2FydEN1c3RvbURpc2NvdW50QWxsb2NhdGlvblwiLCBmdW5jdGlvbiAoQ2FydEN1c3RvbURpc2NvdW50QWxsb2NhdGlvbikge1xuICAgICAgICBDYXJ0Q3VzdG9tRGlzY291bnRBbGxvY2F0aW9uLmFkZChcInRpdGxlXCIpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuICBzcHJlYWRzLkFwcGxpZWRHaWZ0Q2FyZEZyYWdtZW50ID0gZG9jdW1lbnQuZGVmaW5lRnJhZ21lbnQoXCJBcHBsaWVkR2lmdENhcmRGcmFnbWVudFwiLCBcIkFwcGxpZWRHaWZ0Q2FyZFwiLCBmdW5jdGlvbiAocm9vdCkge1xuICAgIHJvb3QuYWRkKFwiYW1vdW50VXNlZFwiLCBmdW5jdGlvbiAoYW1vdW50VXNlZCkge1xuICAgICAgYW1vdW50VXNlZC5hZGQoXCJhbW91bnRcIik7XG4gICAgICBhbW91bnRVc2VkLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImFtb3VudFVzZWRcIiwge1xuICAgICAgYWxpYXM6IFwiYW1vdW50VXNlZFYyXCJcbiAgICB9LCBmdW5jdGlvbiAoYW1vdW50VXNlZCkge1xuICAgICAgYW1vdW50VXNlZC5hZGQoXCJhbW91bnRcIik7XG4gICAgICBhbW91bnRVc2VkLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImJhbGFuY2VcIiwgZnVuY3Rpb24gKGJhbGFuY2UpIHtcbiAgICAgIGJhbGFuY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgYmFsYW5jZS5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJiYWxhbmNlXCIsIHtcbiAgICAgIGFsaWFzOiBcImJhbGFuY2VWMlwiXG4gICAgfSwgZnVuY3Rpb24gKGJhbGFuY2UpIHtcbiAgICAgIGJhbGFuY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgYmFsYW5jZS5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJwcmVzZW50bWVudEFtb3VudFVzZWRcIiwgZnVuY3Rpb24gKHByZXNlbnRtZW50QW1vdW50VXNlZCkge1xuICAgICAgcHJlc2VudG1lbnRBbW91bnRVc2VkLmFkZChcImFtb3VudFwiKTtcbiAgICAgIHByZXNlbnRtZW50QW1vdW50VXNlZC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJpZFwiKTtcbiAgICByb290LmFkZChcImxhc3RDaGFyYWN0ZXJzXCIpO1xuICB9KTtcbiAgc3ByZWFkcy5DYXJ0RnJhZ21lbnQgPSBkb2N1bWVudC5kZWZpbmVGcmFnbWVudChcIkNhcnRGcmFnbWVudFwiLCBcIkNhcnRcIiwgZnVuY3Rpb24gKHJvb3QpIHtcbiAgICByb290LmFkZChcImlkXCIpO1xuICAgIHJvb3QuYWRkKFwiY3JlYXRlZEF0XCIpO1xuICAgIHJvb3QuYWRkKFwidXBkYXRlZEF0XCIpO1xuICAgIHJvb3QuYWRkKFwibGluZXNcIiwge1xuICAgICAgYXJnczoge1xuICAgICAgICBmaXJzdDogMjUwXG4gICAgICB9XG4gICAgfSwgZnVuY3Rpb24gKGxpbmVzKSB7XG4gICAgICBsaW5lcy5hZGQoXCJwYWdlSW5mb1wiLCBmdW5jdGlvbiAocGFnZUluZm8pIHtcbiAgICAgICAgcGFnZUluZm8uYWRkKFwiaGFzTmV4dFBhZ2VcIik7XG4gICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc1ByZXZpb3VzUGFnZVwiKTtcbiAgICAgIH0pO1xuICAgICAgbGluZXMuYWRkKFwiZWRnZXNcIiwgZnVuY3Rpb24gKGVkZ2VzKSB7XG4gICAgICAgIGVkZ2VzLmFkZChcImN1cnNvclwiKTtcbiAgICAgICAgZWRnZXMuYWRkKFwibm9kZVwiLCBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgIG5vZGUuYWRkRnJhZ21lbnQoc3ByZWFkcy5DYXJ0TGluZUZyYWdtZW50KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImF0dHJpYnV0ZXNcIiwgZnVuY3Rpb24gKGF0dHJpYnV0ZXMpIHtcbiAgICAgIGF0dHJpYnV0ZXMuYWRkKFwia2V5XCIpO1xuICAgICAgYXR0cmlidXRlcy5hZGQoXCJ2YWx1ZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImNvc3RcIiwgZnVuY3Rpb24gKGNvc3QpIHtcbiAgICAgIGNvc3QuYWRkKFwiY2hlY2tvdXRDaGFyZ2VBbW91bnRcIiwgZnVuY3Rpb24gKGNoZWNrb3V0Q2hhcmdlQW1vdW50KSB7XG4gICAgICAgIGNoZWNrb3V0Q2hhcmdlQW1vdW50LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgY2hlY2tvdXRDaGFyZ2VBbW91bnQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBjb3N0LmFkZChcInRvdGFsQW1vdW50XCIsIGZ1bmN0aW9uICh0b3RhbEFtb3VudCkge1xuICAgICAgICB0b3RhbEFtb3VudC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIHRvdGFsQW1vdW50LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgY29zdC5hZGQoXCJzdWJ0b3RhbEFtb3VudFwiLCBmdW5jdGlvbiAoc3VidG90YWxBbW91bnQpIHtcbiAgICAgICAgc3VidG90YWxBbW91bnQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICBzdWJ0b3RhbEFtb3VudC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGNvc3QuYWRkKFwidG90YWxUYXhBbW91bnRcIiwgZnVuY3Rpb24gKHRvdGFsVGF4QW1vdW50KSB7XG4gICAgICAgIHRvdGFsVGF4QW1vdW50LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgdG90YWxUYXhBbW91bnQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBjb3N0LmFkZChcInRvdGFsRHV0eUFtb3VudFwiLCBmdW5jdGlvbiAodG90YWxEdXR5QW1vdW50KSB7XG4gICAgICAgIHRvdGFsRHV0eUFtb3VudC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIHRvdGFsRHV0eUFtb3VudC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImNoZWNrb3V0VXJsXCIpO1xuICAgIHJvb3QuYWRkKFwiZGlzY291bnRDb2Rlc1wiLCBmdW5jdGlvbiAoZGlzY291bnRDb2Rlcykge1xuICAgICAgZGlzY291bnRDb2Rlcy5hZGQoXCJhcHBsaWNhYmxlXCIpO1xuICAgICAgZGlzY291bnRDb2Rlcy5hZGQoXCJjb2RlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiZGlzY291bnRBbGxvY2F0aW9uc1wiLCBmdW5jdGlvbiAoZGlzY291bnRBbGxvY2F0aW9ucykge1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGQoXCJkaXNjb3VudGVkQW1vdW50XCIsIGZ1bmN0aW9uIChkaXNjb3VudGVkQW1vdW50KSB7XG4gICAgICAgIGRpc2NvdW50ZWRBbW91bnQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICBkaXNjb3VudGVkQW1vdW50LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGQoXCJkaXNjb3VudEFwcGxpY2F0aW9uXCIsIGZ1bmN0aW9uIChkaXNjb3VudEFwcGxpY2F0aW9uKSB7XG4gICAgICAgIGRpc2NvdW50QXBwbGljYXRpb24uYWRkKFwidGFyZ2V0VHlwZVwiKTtcbiAgICAgICAgZGlzY291bnRBcHBsaWNhdGlvbi5hZGQoXCJhbGxvY2F0aW9uTWV0aG9kXCIpO1xuICAgICAgICBkaXNjb3VudEFwcGxpY2F0aW9uLmFkZChcInRhcmdldFNlbGVjdGlvblwiKTtcbiAgICAgICAgZGlzY291bnRBcHBsaWNhdGlvbi5hZGQoXCJ2YWx1ZVwiLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICB2YWx1ZS5hZGRJbmxpbmVGcmFnbWVudE9uKFwiUHJpY2luZ1BlcmNlbnRhZ2VWYWx1ZVwiLCBmdW5jdGlvbiAoUHJpY2luZ1BlcmNlbnRhZ2VWYWx1ZSkge1xuICAgICAgICAgICAgUHJpY2luZ1BlcmNlbnRhZ2VWYWx1ZS5hZGQoXCJwZXJjZW50YWdlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHZhbHVlLmFkZElubGluZUZyYWdtZW50T24oXCJNb25leVYyXCIsIGZ1bmN0aW9uIChNb25leVYyKSB7XG4gICAgICAgICAgICBNb25leVYyLmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgICAgIE1vbmV5VjIuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGRJbmxpbmVGcmFnbWVudE9uKFwiQ2FydENvZGVEaXNjb3VudEFsbG9jYXRpb25cIiwgZnVuY3Rpb24gKENhcnRDb2RlRGlzY291bnRBbGxvY2F0aW9uKSB7XG4gICAgICAgIENhcnRDb2RlRGlzY291bnRBbGxvY2F0aW9uLmFkZChcImNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGRpc2NvdW50QWxsb2NhdGlvbnMuYWRkSW5saW5lRnJhZ21lbnRPbihcIkNhcnRBdXRvbWF0aWNEaXNjb3VudEFsbG9jYXRpb25cIiwgZnVuY3Rpb24gKENhcnRBdXRvbWF0aWNEaXNjb3VudEFsbG9jYXRpb24pIHtcbiAgICAgICAgQ2FydEF1dG9tYXRpY0Rpc2NvdW50QWxsb2NhdGlvbi5hZGQoXCJ0aXRsZVwiKTtcbiAgICAgIH0pO1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGRJbmxpbmVGcmFnbWVudE9uKFwiQ2FydEN1c3RvbURpc2NvdW50QWxsb2NhdGlvblwiLCBmdW5jdGlvbiAoQ2FydEN1c3RvbURpc2NvdW50QWxsb2NhdGlvbikge1xuICAgICAgICBDYXJ0Q3VzdG9tRGlzY291bnRBbGxvY2F0aW9uLmFkZChcInRpdGxlXCIpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJidXllcklkZW50aXR5XCIsIGZ1bmN0aW9uIChidXllcklkZW50aXR5KSB7XG4gICAgICBidXllcklkZW50aXR5LmFkZChcImNvdW50cnlDb2RlXCIpO1xuICAgICAgYnV5ZXJJZGVudGl0eS5hZGQoXCJwcmVmZXJlbmNlc1wiLCBmdW5jdGlvbiAocHJlZmVyZW5jZXMpIHtcbiAgICAgICAgcHJlZmVyZW5jZXMuYWRkKFwiZGVsaXZlcnlcIiwgZnVuY3Rpb24gKGRlbGl2ZXJ5KSB7XG4gICAgICAgICAgZGVsaXZlcnkuYWRkKFwiY29vcmRpbmF0ZXNcIiwgZnVuY3Rpb24gKGNvb3JkaW5hdGVzKSB7XG4gICAgICAgICAgICBjb29yZGluYXRlcy5hZGQoXCJsYXRpdHVkZVwiKTtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzLmFkZChcImxvbmdpdHVkZVwiKTtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzLmFkZChcImNvdW50cnlDb2RlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGRlbGl2ZXJ5LmFkZChcImRlbGl2ZXJ5TWV0aG9kXCIpO1xuICAgICAgICAgIGRlbGl2ZXJ5LmFkZChcInBpY2t1cEhhbmRsZVwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHByZWZlcmVuY2VzLmFkZChcIndhbGxldFwiKTtcbiAgICAgIH0pO1xuICAgICAgYnV5ZXJJZGVudGl0eS5hZGQoXCJlbWFpbFwiKTtcbiAgICAgIGJ1eWVySWRlbnRpdHkuYWRkKFwicGhvbmVcIik7XG4gICAgICBidXllcklkZW50aXR5LmFkZChcImN1c3RvbWVyXCIsIGZ1bmN0aW9uIChjdXN0b21lcikge1xuICAgICAgICBjdXN0b21lci5hZGQoXCJlbWFpbFwiKTtcbiAgICAgIH0pO1xuICAgICAgYnV5ZXJJZGVudGl0eS5hZGQoXCJkZWxpdmVyeUFkZHJlc3NQcmVmZXJlbmNlc1wiLCBmdW5jdGlvbiAoZGVsaXZlcnlBZGRyZXNzUHJlZmVyZW5jZXMpIHtcbiAgICAgICAgZGVsaXZlcnlBZGRyZXNzUHJlZmVyZW5jZXMuYWRkSW5saW5lRnJhZ21lbnRPbihcIk1haWxpbmdBZGRyZXNzXCIsIGZ1bmN0aW9uIChNYWlsaW5nQWRkcmVzcykge1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImFkZHJlc3MxXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImFkZHJlc3MyXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImNpdHlcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwiY29tcGFueVwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJjb3VudHJ5XCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImNvdW50cnlDb2RlVjJcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwiZmlyc3ROYW1lXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImZvcm1hdHRlZFwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJmb3JtYXR0ZWRBcmVhXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImxhc3ROYW1lXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImxhdGl0dWRlXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImxvbmdpdHVkZVwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJuYW1lXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcInBob25lXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcInByb3ZpbmNlXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcInByb3ZpbmNlQ29kZVwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJ6aXBcIik7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJkZWxpdmVyeUdyb3Vwc1wiLCB7XG4gICAgICBhcmdzOiB7XG4gICAgICAgIGZpcnN0OiAxMFxuICAgICAgfVxuICAgIH0sIGZ1bmN0aW9uIChkZWxpdmVyeUdyb3Vwcykge1xuICAgICAgZGVsaXZlcnlHcm91cHMuYWRkKFwicGFnZUluZm9cIiwgZnVuY3Rpb24gKHBhZ2VJbmZvKSB7XG4gICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc05leHRQYWdlXCIpO1xuICAgICAgICBwYWdlSW5mby5hZGQoXCJoYXNQcmV2aW91c1BhZ2VcIik7XG4gICAgICB9KTtcbiAgICAgIGRlbGl2ZXJ5R3JvdXBzLmFkZChcImVkZ2VzXCIsIGZ1bmN0aW9uIChlZGdlcykge1xuICAgICAgICBlZGdlcy5hZGQoXCJub2RlXCIsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgbm9kZS5hZGQoXCJpZFwiKTtcbiAgICAgICAgICBub2RlLmFkZChcImRlbGl2ZXJ5QWRkcmVzc1wiLCBmdW5jdGlvbiAoZGVsaXZlcnlBZGRyZXNzKSB7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwiYWRkcmVzczJcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwiYWRkcmVzczFcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwiY2l0eVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJjb21wYW55XCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcImNvdW50cnlcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwiY291bnRyeUNvZGVWMlwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJmaXJzdE5hbWVcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwiZm9ybWF0dGVkXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcImZvcm1hdHRlZEFyZWFcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwibGFzdE5hbWVcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwibGF0aXR1ZGVcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwibG9uZ2l0dWRlXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcIm5hbWVcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwicGhvbmVcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwicHJvdmluY2VcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwicHJvdmluY2VDb2RlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIG5vZGUuYWRkKFwiZGVsaXZlcnlPcHRpb25zXCIsIGZ1bmN0aW9uIChkZWxpdmVyeU9wdGlvbnMpIHtcbiAgICAgICAgICAgIGRlbGl2ZXJ5T3B0aW9ucy5hZGQoXCJjb2RlXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlPcHRpb25zLmFkZChcImRlbGl2ZXJ5TWV0aG9kVHlwZVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5T3B0aW9ucy5hZGQoXCJkZXNjcmlwdGlvblwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5T3B0aW9ucy5hZGQoXCJlc3RpbWF0ZWRDb3N0XCIsIGZ1bmN0aW9uIChlc3RpbWF0ZWRDb3N0KSB7XG4gICAgICAgICAgICAgIGVzdGltYXRlZENvc3QuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICAgICAgICBlc3RpbWF0ZWRDb3N0LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZGVsaXZlcnlPcHRpb25zLmFkZChcImhhbmRsZVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5T3B0aW9ucy5hZGQoXCJ0aXRsZVwiKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBub2RlLmFkZChcInNlbGVjdGVkRGVsaXZlcnlPcHRpb25cIiwgZnVuY3Rpb24gKHNlbGVjdGVkRGVsaXZlcnlPcHRpb24pIHtcbiAgICAgICAgICAgIHNlbGVjdGVkRGVsaXZlcnlPcHRpb24uYWRkKFwiY29kZVwiKTtcbiAgICAgICAgICAgIHNlbGVjdGVkRGVsaXZlcnlPcHRpb24uYWRkKFwiZGVsaXZlcnlNZXRob2RUeXBlXCIpO1xuICAgICAgICAgICAgc2VsZWN0ZWREZWxpdmVyeU9wdGlvbi5hZGQoXCJkZXNjcmlwdGlvblwiKTtcbiAgICAgICAgICAgIHNlbGVjdGVkRGVsaXZlcnlPcHRpb24uYWRkKFwiZXN0aW1hdGVkQ29zdFwiLCBmdW5jdGlvbiAoZXN0aW1hdGVkQ29zdCkge1xuICAgICAgICAgICAgICBlc3RpbWF0ZWRDb3N0LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgICAgICAgZXN0aW1hdGVkQ29zdC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNlbGVjdGVkRGVsaXZlcnlPcHRpb24uYWRkKFwiaGFuZGxlXCIpO1xuICAgICAgICAgICAgc2VsZWN0ZWREZWxpdmVyeU9wdGlvbi5hZGQoXCJ0aXRsZVwiKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBub2RlLmFkZChcImNhcnRMaW5lc1wiLCB7XG4gICAgICAgICAgICBhcmdzOiB7XG4gICAgICAgICAgICAgIGZpcnN0OiAyNTBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LCBmdW5jdGlvbiAoY2FydExpbmVzKSB7XG4gICAgICAgICAgICBjYXJ0TGluZXMuYWRkKFwicGFnZUluZm9cIiwgZnVuY3Rpb24gKHBhZ2VJbmZvKSB7XG4gICAgICAgICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc05leHRQYWdlXCIpO1xuICAgICAgICAgICAgICBwYWdlSW5mby5hZGQoXCJoYXNQcmV2aW91c1BhZ2VcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNhcnRMaW5lcy5hZGQoXCJlZGdlc1wiLCBmdW5jdGlvbiAoZWRnZXMpIHtcbiAgICAgICAgICAgICAgZWRnZXMuYWRkKFwiY3Vyc29yXCIpO1xuICAgICAgICAgICAgICBlZGdlcy5hZGQoXCJub2RlXCIsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5hZGQoXCJpZFwiKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImFwcGxpZWRHaWZ0Q2FyZHNcIiwgZnVuY3Rpb24gKGFwcGxpZWRHaWZ0Q2FyZHMpIHtcbiAgICAgIGFwcGxpZWRHaWZ0Q2FyZHMuYWRkRnJhZ21lbnQoc3ByZWFkcy5BcHBsaWVkR2lmdENhcmRGcmFnbWVudCk7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJub3RlXCIpO1xuICB9KTtcbiAgc3ByZWFkcy5DYXJ0VXNlckVycm9yRnJhZ21lbnQgPSBkb2N1bWVudC5kZWZpbmVGcmFnbWVudChcIkNhcnRVc2VyRXJyb3JGcmFnbWVudFwiLCBcIkNhcnRVc2VyRXJyb3JcIiwgZnVuY3Rpb24gKHJvb3QpIHtcbiAgICByb290LmFkZChcImZpZWxkXCIpO1xuICAgIHJvb3QuYWRkKFwibWVzc2FnZVwiKTtcbiAgICByb290LmFkZChcImNvZGVcIik7XG4gIH0pO1xuICBzcHJlYWRzLkNhcnRXYXJuaW5nRnJhZ21lbnQgPSBkb2N1bWVudC5kZWZpbmVGcmFnbWVudChcIkNhcnRXYXJuaW5nRnJhZ21lbnRcIiwgXCJDYXJ0V2FybmluZ1wiLCBmdW5jdGlvbiAocm9vdCkge1xuICAgIHJvb3QuYWRkKFwiY29kZVwiKTtcbiAgICByb290LmFkZChcIm1lc3NhZ2VcIik7XG4gIH0pO1xuICBkb2N1bWVudC5hZGRNdXRhdGlvbihcIkNhcnRDcmVhdGVcIiwgW3ZhcmlhYmxlcy5DYXJ0Q3JlYXRlLmlucHV0XSwgZnVuY3Rpb24gKHJvb3QpIHtcbiAgICByb290LmFkZChcImNhcnRDcmVhdGVcIiwge1xuICAgICAgYXJnczoge1xuICAgICAgICBpbnB1dDogdmFyaWFibGVzLkNhcnRDcmVhdGUuaW5wdXRcbiAgICAgIH1cbiAgICB9LCBmdW5jdGlvbiAoY2FydENyZWF0ZSkge1xuICAgICAgY2FydENyZWF0ZS5hZGQoXCJjYXJ0XCIsIGZ1bmN0aW9uIChjYXJ0KSB7XG4gICAgICAgIGNhcnQuYWRkRnJhZ21lbnQoc3ByZWFkcy5DYXJ0RnJhZ21lbnQpO1xuICAgICAgfSk7XG4gICAgICBjYXJ0Q3JlYXRlLmFkZChcInVzZXJFcnJvcnNcIiwgZnVuY3Rpb24gKHVzZXJFcnJvcnMpIHtcbiAgICAgICAgdXNlckVycm9ycy5hZGRGcmFnbWVudChzcHJlYWRzLkNhcnRVc2VyRXJyb3JGcmFnbWVudCk7XG4gICAgICB9KTtcbiAgICAgIGNhcnRDcmVhdGUuYWRkKFwid2FybmluZ3NcIiwgZnVuY3Rpb24gKHdhcm5pbmdzKSB7XG4gICAgICAgIHdhcm5pbmdzLmFkZEZyYWdtZW50KHNwcmVhZHMuQ2FydFdhcm5pbmdGcmFnbWVudCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG4gIHJldHVybiBkb2N1bWVudDtcbn1cblxuZnVuY3Rpb24gcXVlcnkkMTQoY2xpZW50KSB7XG4gIHZhciBkb2N1bWVudCA9IGNsaWVudC5kb2N1bWVudCgpO1xuICB2YXIgc3ByZWFkcyA9IHt9O1xuICB2YXIgdmFyaWFibGVzID0ge307XG4gIHZhcmlhYmxlcy5DYXJ0QXR0cmlidXRlc1VwZGF0ZSA9IHt9O1xuICB2YXJpYWJsZXMuQ2FydEF0dHJpYnV0ZXNVcGRhdGUuYXR0cmlidXRlcyA9IGNsaWVudC52YXJpYWJsZShcImF0dHJpYnV0ZXNcIiwgXCJbQXR0cmlidXRlSW5wdXQhXSFcIik7XG4gIHZhcmlhYmxlcy5DYXJ0QXR0cmlidXRlc1VwZGF0ZS5jYXJ0SWQgPSBjbGllbnQudmFyaWFibGUoXCJjYXJ0SWRcIiwgXCJJRCFcIik7XG4gIHNwcmVhZHMuQ2FydExpbmVGcmFnbWVudCA9IGRvY3VtZW50LmRlZmluZUZyYWdtZW50KFwiQ2FydExpbmVGcmFnbWVudFwiLCBcIkJhc2VDYXJ0TGluZVwiLCBmdW5jdGlvbiAocm9vdCkge1xuICAgIHJvb3QuYWRkKFwiaWRcIik7XG4gICAgcm9vdC5hZGQoXCJtZXJjaGFuZGlzZVwiLCBmdW5jdGlvbiAobWVyY2hhbmRpc2UpIHtcbiAgICAgIG1lcmNoYW5kaXNlLmFkZElubGluZUZyYWdtZW50T24oXCJQcm9kdWN0VmFyaWFudFwiLCBmdW5jdGlvbiAoUHJvZHVjdFZhcmlhbnQpIHtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwiaWRcIik7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcInRpdGxlXCIpO1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJpbWFnZVwiLCBmdW5jdGlvbiAoaW1hZ2UpIHtcbiAgICAgICAgICBpbWFnZS5hZGQoXCJpZFwiKTtcbiAgICAgICAgICBpbWFnZS5hZGQoXCJ1cmxcIiwge1xuICAgICAgICAgICAgYWxpYXM6IFwic3JjXCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpbWFnZS5hZGQoXCJhbHRUZXh0XCIpO1xuICAgICAgICAgIGltYWdlLmFkZChcIndpZHRoXCIpO1xuICAgICAgICAgIGltYWdlLmFkZChcImhlaWdodFwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcInByb2R1Y3RcIiwgZnVuY3Rpb24gKHByb2R1Y3QpIHtcbiAgICAgICAgICBwcm9kdWN0LmFkZChcImlkXCIpO1xuICAgICAgICAgIHByb2R1Y3QuYWRkKFwiaGFuZGxlXCIpO1xuICAgICAgICAgIHByb2R1Y3QuYWRkKFwidGl0bGVcIik7XG4gICAgICAgIH0pO1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJ3ZWlnaHRcIik7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcImF2YWlsYWJsZUZvclNhbGVcIiwge1xuICAgICAgICAgIGFsaWFzOiBcImF2YWlsYWJsZVwiXG4gICAgICAgIH0pO1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJza3VcIik7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcInNlbGVjdGVkT3B0aW9uc1wiLCBmdW5jdGlvbiAoc2VsZWN0ZWRPcHRpb25zKSB7XG4gICAgICAgICAgc2VsZWN0ZWRPcHRpb25zLmFkZChcIm5hbWVcIik7XG4gICAgICAgICAgc2VsZWN0ZWRPcHRpb25zLmFkZChcInZhbHVlXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwiY29tcGFyZUF0UHJpY2VcIiwgZnVuY3Rpb24gKGNvbXBhcmVBdFByaWNlKSB7XG4gICAgICAgICAgY29tcGFyZUF0UHJpY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICAgIGNvbXBhcmVBdFByaWNlLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcInByaWNlXCIsIGZ1bmN0aW9uIChwcmljZSkge1xuICAgICAgICAgIHByaWNlLmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgICBwcmljZS5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICAgIH0pO1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJ1bml0UHJpY2VcIiwgZnVuY3Rpb24gKHVuaXRQcmljZSkge1xuICAgICAgICAgIHVuaXRQcmljZS5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgICAgdW5pdFByaWNlLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcInVuaXRQcmljZU1lYXN1cmVtZW50XCIsIGZ1bmN0aW9uICh1bml0UHJpY2VNZWFzdXJlbWVudCkge1xuICAgICAgICAgIHVuaXRQcmljZU1lYXN1cmVtZW50LmFkZChcIm1lYXN1cmVkVHlwZVwiKTtcbiAgICAgICAgICB1bml0UHJpY2VNZWFzdXJlbWVudC5hZGQoXCJxdWFudGl0eVVuaXRcIik7XG4gICAgICAgICAgdW5pdFByaWNlTWVhc3VyZW1lbnQuYWRkKFwicXVhbnRpdHlWYWx1ZVwiKTtcbiAgICAgICAgICB1bml0UHJpY2VNZWFzdXJlbWVudC5hZGQoXCJyZWZlcmVuY2VVbml0XCIpO1xuICAgICAgICAgIHVuaXRQcmljZU1lYXN1cmVtZW50LmFkZChcInJlZmVyZW5jZVZhbHVlXCIpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwicXVhbnRpdHlcIik7XG4gICAgcm9vdC5hZGQoXCJhdHRyaWJ1dGVzXCIsIGZ1bmN0aW9uIChhdHRyaWJ1dGVzKSB7XG4gICAgICBhdHRyaWJ1dGVzLmFkZChcImtleVwiKTtcbiAgICAgIGF0dHJpYnV0ZXMuYWRkKFwidmFsdWVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJjb3N0XCIsIGZ1bmN0aW9uIChjb3N0KSB7XG4gICAgICBjb3N0LmFkZChcInRvdGFsQW1vdW50XCIsIGZ1bmN0aW9uICh0b3RhbEFtb3VudCkge1xuICAgICAgICB0b3RhbEFtb3VudC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIHRvdGFsQW1vdW50LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgY29zdC5hZGQoXCJzdWJ0b3RhbEFtb3VudFwiLCBmdW5jdGlvbiAoc3VidG90YWxBbW91bnQpIHtcbiAgICAgICAgc3VidG90YWxBbW91bnQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICBzdWJ0b3RhbEFtb3VudC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGNvc3QuYWRkKFwiYW1vdW50UGVyUXVhbnRpdHlcIiwgZnVuY3Rpb24gKGFtb3VudFBlclF1YW50aXR5KSB7XG4gICAgICAgIGFtb3VudFBlclF1YW50aXR5LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgYW1vdW50UGVyUXVhbnRpdHkuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBjb3N0LmFkZChcImNvbXBhcmVBdEFtb3VudFBlclF1YW50aXR5XCIsIGZ1bmN0aW9uIChjb21wYXJlQXRBbW91bnRQZXJRdWFudGl0eSkge1xuICAgICAgICBjb21wYXJlQXRBbW91bnRQZXJRdWFudGl0eS5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIGNvbXBhcmVBdEFtb3VudFBlclF1YW50aXR5LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiZGlzY291bnRBbGxvY2F0aW9uc1wiLCBmdW5jdGlvbiAoZGlzY291bnRBbGxvY2F0aW9ucykge1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGQoXCJkaXNjb3VudGVkQW1vdW50XCIsIGZ1bmN0aW9uIChkaXNjb3VudGVkQW1vdW50KSB7XG4gICAgICAgIGRpc2NvdW50ZWRBbW91bnQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICBkaXNjb3VudGVkQW1vdW50LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGQoXCJkaXNjb3VudEFwcGxpY2F0aW9uXCIsIGZ1bmN0aW9uIChkaXNjb3VudEFwcGxpY2F0aW9uKSB7XG4gICAgICAgIGRpc2NvdW50QXBwbGljYXRpb24uYWRkKFwidGFyZ2V0VHlwZVwiKTtcbiAgICAgICAgZGlzY291bnRBcHBsaWNhdGlvbi5hZGQoXCJhbGxvY2F0aW9uTWV0aG9kXCIpO1xuICAgICAgICBkaXNjb3VudEFwcGxpY2F0aW9uLmFkZChcInRhcmdldFNlbGVjdGlvblwiKTtcbiAgICAgICAgZGlzY291bnRBcHBsaWNhdGlvbi5hZGQoXCJ2YWx1ZVwiLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICB2YWx1ZS5hZGRJbmxpbmVGcmFnbWVudE9uKFwiUHJpY2luZ1BlcmNlbnRhZ2VWYWx1ZVwiLCBmdW5jdGlvbiAoUHJpY2luZ1BlcmNlbnRhZ2VWYWx1ZSkge1xuICAgICAgICAgICAgUHJpY2luZ1BlcmNlbnRhZ2VWYWx1ZS5hZGQoXCJwZXJjZW50YWdlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHZhbHVlLmFkZElubGluZUZyYWdtZW50T24oXCJNb25leVYyXCIsIGZ1bmN0aW9uIChNb25leVYyKSB7XG4gICAgICAgICAgICBNb25leVYyLmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgICAgIE1vbmV5VjIuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGRJbmxpbmVGcmFnbWVudE9uKFwiQ2FydENvZGVEaXNjb3VudEFsbG9jYXRpb25cIiwgZnVuY3Rpb24gKENhcnRDb2RlRGlzY291bnRBbGxvY2F0aW9uKSB7XG4gICAgICAgIENhcnRDb2RlRGlzY291bnRBbGxvY2F0aW9uLmFkZChcImNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGRpc2NvdW50QWxsb2NhdGlvbnMuYWRkSW5saW5lRnJhZ21lbnRPbihcIkNhcnRBdXRvbWF0aWNEaXNjb3VudEFsbG9jYXRpb25cIiwgZnVuY3Rpb24gKENhcnRBdXRvbWF0aWNEaXNjb3VudEFsbG9jYXRpb24pIHtcbiAgICAgICAgQ2FydEF1dG9tYXRpY0Rpc2NvdW50QWxsb2NhdGlvbi5hZGQoXCJ0aXRsZVwiKTtcbiAgICAgIH0pO1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGRJbmxpbmVGcmFnbWVudE9uKFwiQ2FydEN1c3RvbURpc2NvdW50QWxsb2NhdGlvblwiLCBmdW5jdGlvbiAoQ2FydEN1c3RvbURpc2NvdW50QWxsb2NhdGlvbikge1xuICAgICAgICBDYXJ0Q3VzdG9tRGlzY291bnRBbGxvY2F0aW9uLmFkZChcInRpdGxlXCIpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuICBzcHJlYWRzLkFwcGxpZWRHaWZ0Q2FyZEZyYWdtZW50ID0gZG9jdW1lbnQuZGVmaW5lRnJhZ21lbnQoXCJBcHBsaWVkR2lmdENhcmRGcmFnbWVudFwiLCBcIkFwcGxpZWRHaWZ0Q2FyZFwiLCBmdW5jdGlvbiAocm9vdCkge1xuICAgIHJvb3QuYWRkKFwiYW1vdW50VXNlZFwiLCBmdW5jdGlvbiAoYW1vdW50VXNlZCkge1xuICAgICAgYW1vdW50VXNlZC5hZGQoXCJhbW91bnRcIik7XG4gICAgICBhbW91bnRVc2VkLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImFtb3VudFVzZWRcIiwge1xuICAgICAgYWxpYXM6IFwiYW1vdW50VXNlZFYyXCJcbiAgICB9LCBmdW5jdGlvbiAoYW1vdW50VXNlZCkge1xuICAgICAgYW1vdW50VXNlZC5hZGQoXCJhbW91bnRcIik7XG4gICAgICBhbW91bnRVc2VkLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImJhbGFuY2VcIiwgZnVuY3Rpb24gKGJhbGFuY2UpIHtcbiAgICAgIGJhbGFuY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgYmFsYW5jZS5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJiYWxhbmNlXCIsIHtcbiAgICAgIGFsaWFzOiBcImJhbGFuY2VWMlwiXG4gICAgfSwgZnVuY3Rpb24gKGJhbGFuY2UpIHtcbiAgICAgIGJhbGFuY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgYmFsYW5jZS5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJwcmVzZW50bWVudEFtb3VudFVzZWRcIiwgZnVuY3Rpb24gKHByZXNlbnRtZW50QW1vdW50VXNlZCkge1xuICAgICAgcHJlc2VudG1lbnRBbW91bnRVc2VkLmFkZChcImFtb3VudFwiKTtcbiAgICAgIHByZXNlbnRtZW50QW1vdW50VXNlZC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJpZFwiKTtcbiAgICByb290LmFkZChcImxhc3RDaGFyYWN0ZXJzXCIpO1xuICB9KTtcbiAgc3ByZWFkcy5DYXJ0RnJhZ21lbnQgPSBkb2N1bWVudC5kZWZpbmVGcmFnbWVudChcIkNhcnRGcmFnbWVudFwiLCBcIkNhcnRcIiwgZnVuY3Rpb24gKHJvb3QpIHtcbiAgICByb290LmFkZChcImlkXCIpO1xuICAgIHJvb3QuYWRkKFwiY3JlYXRlZEF0XCIpO1xuICAgIHJvb3QuYWRkKFwidXBkYXRlZEF0XCIpO1xuICAgIHJvb3QuYWRkKFwibGluZXNcIiwge1xuICAgICAgYXJnczoge1xuICAgICAgICBmaXJzdDogMjUwXG4gICAgICB9XG4gICAgfSwgZnVuY3Rpb24gKGxpbmVzKSB7XG4gICAgICBsaW5lcy5hZGQoXCJwYWdlSW5mb1wiLCBmdW5jdGlvbiAocGFnZUluZm8pIHtcbiAgICAgICAgcGFnZUluZm8uYWRkKFwiaGFzTmV4dFBhZ2VcIik7XG4gICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc1ByZXZpb3VzUGFnZVwiKTtcbiAgICAgIH0pO1xuICAgICAgbGluZXMuYWRkKFwiZWRnZXNcIiwgZnVuY3Rpb24gKGVkZ2VzKSB7XG4gICAgICAgIGVkZ2VzLmFkZChcImN1cnNvclwiKTtcbiAgICAgICAgZWRnZXMuYWRkKFwibm9kZVwiLCBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgIG5vZGUuYWRkRnJhZ21lbnQoc3ByZWFkcy5DYXJ0TGluZUZyYWdtZW50KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImF0dHJpYnV0ZXNcIiwgZnVuY3Rpb24gKGF0dHJpYnV0ZXMpIHtcbiAgICAgIGF0dHJpYnV0ZXMuYWRkKFwia2V5XCIpO1xuICAgICAgYXR0cmlidXRlcy5hZGQoXCJ2YWx1ZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImNvc3RcIiwgZnVuY3Rpb24gKGNvc3QpIHtcbiAgICAgIGNvc3QuYWRkKFwiY2hlY2tvdXRDaGFyZ2VBbW91bnRcIiwgZnVuY3Rpb24gKGNoZWNrb3V0Q2hhcmdlQW1vdW50KSB7XG4gICAgICAgIGNoZWNrb3V0Q2hhcmdlQW1vdW50LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgY2hlY2tvdXRDaGFyZ2VBbW91bnQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBjb3N0LmFkZChcInRvdGFsQW1vdW50XCIsIGZ1bmN0aW9uICh0b3RhbEFtb3VudCkge1xuICAgICAgICB0b3RhbEFtb3VudC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIHRvdGFsQW1vdW50LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgY29zdC5hZGQoXCJzdWJ0b3RhbEFtb3VudFwiLCBmdW5jdGlvbiAoc3VidG90YWxBbW91bnQpIHtcbiAgICAgICAgc3VidG90YWxBbW91bnQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICBzdWJ0b3RhbEFtb3VudC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGNvc3QuYWRkKFwidG90YWxUYXhBbW91bnRcIiwgZnVuY3Rpb24gKHRvdGFsVGF4QW1vdW50KSB7XG4gICAgICAgIHRvdGFsVGF4QW1vdW50LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgdG90YWxUYXhBbW91bnQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBjb3N0LmFkZChcInRvdGFsRHV0eUFtb3VudFwiLCBmdW5jdGlvbiAodG90YWxEdXR5QW1vdW50KSB7XG4gICAgICAgIHRvdGFsRHV0eUFtb3VudC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIHRvdGFsRHV0eUFtb3VudC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImNoZWNrb3V0VXJsXCIpO1xuICAgIHJvb3QuYWRkKFwiZGlzY291bnRDb2Rlc1wiLCBmdW5jdGlvbiAoZGlzY291bnRDb2Rlcykge1xuICAgICAgZGlzY291bnRDb2Rlcy5hZGQoXCJhcHBsaWNhYmxlXCIpO1xuICAgICAgZGlzY291bnRDb2Rlcy5hZGQoXCJjb2RlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiZGlzY291bnRBbGxvY2F0aW9uc1wiLCBmdW5jdGlvbiAoZGlzY291bnRBbGxvY2F0aW9ucykge1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGQoXCJkaXNjb3VudGVkQW1vdW50XCIsIGZ1bmN0aW9uIChkaXNjb3VudGVkQW1vdW50KSB7XG4gICAgICAgIGRpc2NvdW50ZWRBbW91bnQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICBkaXNjb3VudGVkQW1vdW50LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGQoXCJkaXNjb3VudEFwcGxpY2F0aW9uXCIsIGZ1bmN0aW9uIChkaXNjb3VudEFwcGxpY2F0aW9uKSB7XG4gICAgICAgIGRpc2NvdW50QXBwbGljYXRpb24uYWRkKFwidGFyZ2V0VHlwZVwiKTtcbiAgICAgICAgZGlzY291bnRBcHBsaWNhdGlvbi5hZGQoXCJhbGxvY2F0aW9uTWV0aG9kXCIpO1xuICAgICAgICBkaXNjb3VudEFwcGxpY2F0aW9uLmFkZChcInRhcmdldFNlbGVjdGlvblwiKTtcbiAgICAgICAgZGlzY291bnRBcHBsaWNhdGlvbi5hZGQoXCJ2YWx1ZVwiLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICB2YWx1ZS5hZGRJbmxpbmVGcmFnbWVudE9uKFwiUHJpY2luZ1BlcmNlbnRhZ2VWYWx1ZVwiLCBmdW5jdGlvbiAoUHJpY2luZ1BlcmNlbnRhZ2VWYWx1ZSkge1xuICAgICAgICAgICAgUHJpY2luZ1BlcmNlbnRhZ2VWYWx1ZS5hZGQoXCJwZXJjZW50YWdlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHZhbHVlLmFkZElubGluZUZyYWdtZW50T24oXCJNb25leVYyXCIsIGZ1bmN0aW9uIChNb25leVYyKSB7XG4gICAgICAgICAgICBNb25leVYyLmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgICAgIE1vbmV5VjIuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGRJbmxpbmVGcmFnbWVudE9uKFwiQ2FydENvZGVEaXNjb3VudEFsbG9jYXRpb25cIiwgZnVuY3Rpb24gKENhcnRDb2RlRGlzY291bnRBbGxvY2F0aW9uKSB7XG4gICAgICAgIENhcnRDb2RlRGlzY291bnRBbGxvY2F0aW9uLmFkZChcImNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGRpc2NvdW50QWxsb2NhdGlvbnMuYWRkSW5saW5lRnJhZ21lbnRPbihcIkNhcnRBdXRvbWF0aWNEaXNjb3VudEFsbG9jYXRpb25cIiwgZnVuY3Rpb24gKENhcnRBdXRvbWF0aWNEaXNjb3VudEFsbG9jYXRpb24pIHtcbiAgICAgICAgQ2FydEF1dG9tYXRpY0Rpc2NvdW50QWxsb2NhdGlvbi5hZGQoXCJ0aXRsZVwiKTtcbiAgICAgIH0pO1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGRJbmxpbmVGcmFnbWVudE9uKFwiQ2FydEN1c3RvbURpc2NvdW50QWxsb2NhdGlvblwiLCBmdW5jdGlvbiAoQ2FydEN1c3RvbURpc2NvdW50QWxsb2NhdGlvbikge1xuICAgICAgICBDYXJ0Q3VzdG9tRGlzY291bnRBbGxvY2F0aW9uLmFkZChcInRpdGxlXCIpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJidXllcklkZW50aXR5XCIsIGZ1bmN0aW9uIChidXllcklkZW50aXR5KSB7XG4gICAgICBidXllcklkZW50aXR5LmFkZChcImNvdW50cnlDb2RlXCIpO1xuICAgICAgYnV5ZXJJZGVudGl0eS5hZGQoXCJwcmVmZXJlbmNlc1wiLCBmdW5jdGlvbiAocHJlZmVyZW5jZXMpIHtcbiAgICAgICAgcHJlZmVyZW5jZXMuYWRkKFwiZGVsaXZlcnlcIiwgZnVuY3Rpb24gKGRlbGl2ZXJ5KSB7XG4gICAgICAgICAgZGVsaXZlcnkuYWRkKFwiY29vcmRpbmF0ZXNcIiwgZnVuY3Rpb24gKGNvb3JkaW5hdGVzKSB7XG4gICAgICAgICAgICBjb29yZGluYXRlcy5hZGQoXCJsYXRpdHVkZVwiKTtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzLmFkZChcImxvbmdpdHVkZVwiKTtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzLmFkZChcImNvdW50cnlDb2RlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGRlbGl2ZXJ5LmFkZChcImRlbGl2ZXJ5TWV0aG9kXCIpO1xuICAgICAgICAgIGRlbGl2ZXJ5LmFkZChcInBpY2t1cEhhbmRsZVwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHByZWZlcmVuY2VzLmFkZChcIndhbGxldFwiKTtcbiAgICAgIH0pO1xuICAgICAgYnV5ZXJJZGVudGl0eS5hZGQoXCJlbWFpbFwiKTtcbiAgICAgIGJ1eWVySWRlbnRpdHkuYWRkKFwicGhvbmVcIik7XG4gICAgICBidXllcklkZW50aXR5LmFkZChcImN1c3RvbWVyXCIsIGZ1bmN0aW9uIChjdXN0b21lcikge1xuICAgICAgICBjdXN0b21lci5hZGQoXCJlbWFpbFwiKTtcbiAgICAgIH0pO1xuICAgICAgYnV5ZXJJZGVudGl0eS5hZGQoXCJkZWxpdmVyeUFkZHJlc3NQcmVmZXJlbmNlc1wiLCBmdW5jdGlvbiAoZGVsaXZlcnlBZGRyZXNzUHJlZmVyZW5jZXMpIHtcbiAgICAgICAgZGVsaXZlcnlBZGRyZXNzUHJlZmVyZW5jZXMuYWRkSW5saW5lRnJhZ21lbnRPbihcIk1haWxpbmdBZGRyZXNzXCIsIGZ1bmN0aW9uIChNYWlsaW5nQWRkcmVzcykge1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImFkZHJlc3MxXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImFkZHJlc3MyXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImNpdHlcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwiY29tcGFueVwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJjb3VudHJ5XCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImNvdW50cnlDb2RlVjJcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwiZmlyc3ROYW1lXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImZvcm1hdHRlZFwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJmb3JtYXR0ZWRBcmVhXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImxhc3ROYW1lXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImxhdGl0dWRlXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImxvbmdpdHVkZVwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJuYW1lXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcInBob25lXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcInByb3ZpbmNlXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcInByb3ZpbmNlQ29kZVwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJ6aXBcIik7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJkZWxpdmVyeUdyb3Vwc1wiLCB7XG4gICAgICBhcmdzOiB7XG4gICAgICAgIGZpcnN0OiAxMFxuICAgICAgfVxuICAgIH0sIGZ1bmN0aW9uIChkZWxpdmVyeUdyb3Vwcykge1xuICAgICAgZGVsaXZlcnlHcm91cHMuYWRkKFwicGFnZUluZm9cIiwgZnVuY3Rpb24gKHBhZ2VJbmZvKSB7XG4gICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc05leHRQYWdlXCIpO1xuICAgICAgICBwYWdlSW5mby5hZGQoXCJoYXNQcmV2aW91c1BhZ2VcIik7XG4gICAgICB9KTtcbiAgICAgIGRlbGl2ZXJ5R3JvdXBzLmFkZChcImVkZ2VzXCIsIGZ1bmN0aW9uIChlZGdlcykge1xuICAgICAgICBlZGdlcy5hZGQoXCJub2RlXCIsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgbm9kZS5hZGQoXCJpZFwiKTtcbiAgICAgICAgICBub2RlLmFkZChcImRlbGl2ZXJ5QWRkcmVzc1wiLCBmdW5jdGlvbiAoZGVsaXZlcnlBZGRyZXNzKSB7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwiYWRkcmVzczJcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwiYWRkcmVzczFcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwiY2l0eVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJjb21wYW55XCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcImNvdW50cnlcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwiY291bnRyeUNvZGVWMlwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJmaXJzdE5hbWVcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwiZm9ybWF0dGVkXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcImZvcm1hdHRlZEFyZWFcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwibGFzdE5hbWVcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwibGF0aXR1ZGVcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwibG9uZ2l0dWRlXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcIm5hbWVcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwicGhvbmVcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwicHJvdmluY2VcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwicHJvdmluY2VDb2RlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIG5vZGUuYWRkKFwiZGVsaXZlcnlPcHRpb25zXCIsIGZ1bmN0aW9uIChkZWxpdmVyeU9wdGlvbnMpIHtcbiAgICAgICAgICAgIGRlbGl2ZXJ5T3B0aW9ucy5hZGQoXCJjb2RlXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlPcHRpb25zLmFkZChcImRlbGl2ZXJ5TWV0aG9kVHlwZVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5T3B0aW9ucy5hZGQoXCJkZXNjcmlwdGlvblwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5T3B0aW9ucy5hZGQoXCJlc3RpbWF0ZWRDb3N0XCIsIGZ1bmN0aW9uIChlc3RpbWF0ZWRDb3N0KSB7XG4gICAgICAgICAgICAgIGVzdGltYXRlZENvc3QuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICAgICAgICBlc3RpbWF0ZWRDb3N0LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZGVsaXZlcnlPcHRpb25zLmFkZChcImhhbmRsZVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5T3B0aW9ucy5hZGQoXCJ0aXRsZVwiKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBub2RlLmFkZChcInNlbGVjdGVkRGVsaXZlcnlPcHRpb25cIiwgZnVuY3Rpb24gKHNlbGVjdGVkRGVsaXZlcnlPcHRpb24pIHtcbiAgICAgICAgICAgIHNlbGVjdGVkRGVsaXZlcnlPcHRpb24uYWRkKFwiY29kZVwiKTtcbiAgICAgICAgICAgIHNlbGVjdGVkRGVsaXZlcnlPcHRpb24uYWRkKFwiZGVsaXZlcnlNZXRob2RUeXBlXCIpO1xuICAgICAgICAgICAgc2VsZWN0ZWREZWxpdmVyeU9wdGlvbi5hZGQoXCJkZXNjcmlwdGlvblwiKTtcbiAgICAgICAgICAgIHNlbGVjdGVkRGVsaXZlcnlPcHRpb24uYWRkKFwiZXN0aW1hdGVkQ29zdFwiLCBmdW5jdGlvbiAoZXN0aW1hdGVkQ29zdCkge1xuICAgICAgICAgICAgICBlc3RpbWF0ZWRDb3N0LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgICAgICAgZXN0aW1hdGVkQ29zdC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNlbGVjdGVkRGVsaXZlcnlPcHRpb24uYWRkKFwiaGFuZGxlXCIpO1xuICAgICAgICAgICAgc2VsZWN0ZWREZWxpdmVyeU9wdGlvbi5hZGQoXCJ0aXRsZVwiKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBub2RlLmFkZChcImNhcnRMaW5lc1wiLCB7XG4gICAgICAgICAgICBhcmdzOiB7XG4gICAgICAgICAgICAgIGZpcnN0OiAyNTBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LCBmdW5jdGlvbiAoY2FydExpbmVzKSB7XG4gICAgICAgICAgICBjYXJ0TGluZXMuYWRkKFwicGFnZUluZm9cIiwgZnVuY3Rpb24gKHBhZ2VJbmZvKSB7XG4gICAgICAgICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc05leHRQYWdlXCIpO1xuICAgICAgICAgICAgICBwYWdlSW5mby5hZGQoXCJoYXNQcmV2aW91c1BhZ2VcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNhcnRMaW5lcy5hZGQoXCJlZGdlc1wiLCBmdW5jdGlvbiAoZWRnZXMpIHtcbiAgICAgICAgICAgICAgZWRnZXMuYWRkKFwiY3Vyc29yXCIpO1xuICAgICAgICAgICAgICBlZGdlcy5hZGQoXCJub2RlXCIsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5hZGQoXCJpZFwiKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImFwcGxpZWRHaWZ0Q2FyZHNcIiwgZnVuY3Rpb24gKGFwcGxpZWRHaWZ0Q2FyZHMpIHtcbiAgICAgIGFwcGxpZWRHaWZ0Q2FyZHMuYWRkRnJhZ21lbnQoc3ByZWFkcy5BcHBsaWVkR2lmdENhcmRGcmFnbWVudCk7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJub3RlXCIpO1xuICB9KTtcbiAgc3ByZWFkcy5DYXJ0VXNlckVycm9yRnJhZ21lbnQgPSBkb2N1bWVudC5kZWZpbmVGcmFnbWVudChcIkNhcnRVc2VyRXJyb3JGcmFnbWVudFwiLCBcIkNhcnRVc2VyRXJyb3JcIiwgZnVuY3Rpb24gKHJvb3QpIHtcbiAgICByb290LmFkZChcImZpZWxkXCIpO1xuICAgIHJvb3QuYWRkKFwibWVzc2FnZVwiKTtcbiAgICByb290LmFkZChcImNvZGVcIik7XG4gIH0pO1xuICBzcHJlYWRzLkNhcnRXYXJuaW5nRnJhZ21lbnQgPSBkb2N1bWVudC5kZWZpbmVGcmFnbWVudChcIkNhcnRXYXJuaW5nRnJhZ21lbnRcIiwgXCJDYXJ0V2FybmluZ1wiLCBmdW5jdGlvbiAocm9vdCkge1xuICAgIHJvb3QuYWRkKFwiY29kZVwiKTtcbiAgICByb290LmFkZChcIm1lc3NhZ2VcIik7XG4gIH0pO1xuICBkb2N1bWVudC5hZGRNdXRhdGlvbihcIkNhcnRBdHRyaWJ1dGVzVXBkYXRlXCIsIFt2YXJpYWJsZXMuQ2FydEF0dHJpYnV0ZXNVcGRhdGUuYXR0cmlidXRlcywgdmFyaWFibGVzLkNhcnRBdHRyaWJ1dGVzVXBkYXRlLmNhcnRJZF0sIGZ1bmN0aW9uIChyb290KSB7XG4gICAgcm9vdC5hZGQoXCJjYXJ0QXR0cmlidXRlc1VwZGF0ZVwiLCB7XG4gICAgICBhcmdzOiB7XG4gICAgICAgIGF0dHJpYnV0ZXM6IHZhcmlhYmxlcy5DYXJ0QXR0cmlidXRlc1VwZGF0ZS5hdHRyaWJ1dGVzLFxuICAgICAgICBjYXJ0SWQ6IHZhcmlhYmxlcy5DYXJ0QXR0cmlidXRlc1VwZGF0ZS5jYXJ0SWRcbiAgICAgIH1cbiAgICB9LCBmdW5jdGlvbiAoY2FydEF0dHJpYnV0ZXNVcGRhdGUpIHtcbiAgICAgIGNhcnRBdHRyaWJ1dGVzVXBkYXRlLmFkZChcImNhcnRcIiwgZnVuY3Rpb24gKGNhcnQpIHtcbiAgICAgICAgY2FydC5hZGRGcmFnbWVudChzcHJlYWRzLkNhcnRGcmFnbWVudCk7XG4gICAgICB9KTtcbiAgICAgIGNhcnRBdHRyaWJ1dGVzVXBkYXRlLmFkZChcInVzZXJFcnJvcnNcIiwgZnVuY3Rpb24gKHVzZXJFcnJvcnMpIHtcbiAgICAgICAgdXNlckVycm9ycy5hZGRGcmFnbWVudChzcHJlYWRzLkNhcnRVc2VyRXJyb3JGcmFnbWVudCk7XG4gICAgICB9KTtcbiAgICAgIGNhcnRBdHRyaWJ1dGVzVXBkYXRlLmFkZChcIndhcm5pbmdzXCIsIGZ1bmN0aW9uICh3YXJuaW5ncykge1xuICAgICAgICB3YXJuaW5ncy5hZGRGcmFnbWVudChzcHJlYWRzLkNhcnRXYXJuaW5nRnJhZ21lbnQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gZG9jdW1lbnQ7XG59XG5cbmZ1bmN0aW9uIHF1ZXJ5JDE1KGNsaWVudCkge1xuICB2YXIgZG9jdW1lbnQgPSBjbGllbnQuZG9jdW1lbnQoKTtcbiAgdmFyIHNwcmVhZHMgPSB7fTtcbiAgdmFyIHZhcmlhYmxlcyA9IHt9O1xuICB2YXJpYWJsZXMuQ2FydEJ1eWVySWRlbnRpdHlVcGRhdGUgPSB7fTtcbiAgdmFyaWFibGVzLkNhcnRCdXllcklkZW50aXR5VXBkYXRlLmJ1eWVySWRlbnRpdHkgPSBjbGllbnQudmFyaWFibGUoXCJidXllcklkZW50aXR5XCIsIFwiQ2FydEJ1eWVySWRlbnRpdHlJbnB1dCFcIik7XG4gIHZhcmlhYmxlcy5DYXJ0QnV5ZXJJZGVudGl0eVVwZGF0ZS5jYXJ0SWQgPSBjbGllbnQudmFyaWFibGUoXCJjYXJ0SWRcIiwgXCJJRCFcIik7XG4gIHNwcmVhZHMuQ2FydExpbmVGcmFnbWVudCA9IGRvY3VtZW50LmRlZmluZUZyYWdtZW50KFwiQ2FydExpbmVGcmFnbWVudFwiLCBcIkJhc2VDYXJ0TGluZVwiLCBmdW5jdGlvbiAocm9vdCkge1xuICAgIHJvb3QuYWRkKFwiaWRcIik7XG4gICAgcm9vdC5hZGQoXCJtZXJjaGFuZGlzZVwiLCBmdW5jdGlvbiAobWVyY2hhbmRpc2UpIHtcbiAgICAgIG1lcmNoYW5kaXNlLmFkZElubGluZUZyYWdtZW50T24oXCJQcm9kdWN0VmFyaWFudFwiLCBmdW5jdGlvbiAoUHJvZHVjdFZhcmlhbnQpIHtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwiaWRcIik7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcInRpdGxlXCIpO1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJpbWFnZVwiLCBmdW5jdGlvbiAoaW1hZ2UpIHtcbiAgICAgICAgICBpbWFnZS5hZGQoXCJpZFwiKTtcbiAgICAgICAgICBpbWFnZS5hZGQoXCJ1cmxcIiwge1xuICAgICAgICAgICAgYWxpYXM6IFwic3JjXCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpbWFnZS5hZGQoXCJhbHRUZXh0XCIpO1xuICAgICAgICAgIGltYWdlLmFkZChcIndpZHRoXCIpO1xuICAgICAgICAgIGltYWdlLmFkZChcImhlaWdodFwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcInByb2R1Y3RcIiwgZnVuY3Rpb24gKHByb2R1Y3QpIHtcbiAgICAgICAgICBwcm9kdWN0LmFkZChcImlkXCIpO1xuICAgICAgICAgIHByb2R1Y3QuYWRkKFwiaGFuZGxlXCIpO1xuICAgICAgICAgIHByb2R1Y3QuYWRkKFwidGl0bGVcIik7XG4gICAgICAgIH0pO1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJ3ZWlnaHRcIik7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcImF2YWlsYWJsZUZvclNhbGVcIiwge1xuICAgICAgICAgIGFsaWFzOiBcImF2YWlsYWJsZVwiXG4gICAgICAgIH0pO1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJza3VcIik7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcInNlbGVjdGVkT3B0aW9uc1wiLCBmdW5jdGlvbiAoc2VsZWN0ZWRPcHRpb25zKSB7XG4gICAgICAgICAgc2VsZWN0ZWRPcHRpb25zLmFkZChcIm5hbWVcIik7XG4gICAgICAgICAgc2VsZWN0ZWRPcHRpb25zLmFkZChcInZhbHVlXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwiY29tcGFyZUF0UHJpY2VcIiwgZnVuY3Rpb24gKGNvbXBhcmVBdFByaWNlKSB7XG4gICAgICAgICAgY29tcGFyZUF0UHJpY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICAgIGNvbXBhcmVBdFByaWNlLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcInByaWNlXCIsIGZ1bmN0aW9uIChwcmljZSkge1xuICAgICAgICAgIHByaWNlLmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgICBwcmljZS5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICAgIH0pO1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJ1bml0UHJpY2VcIiwgZnVuY3Rpb24gKHVuaXRQcmljZSkge1xuICAgICAgICAgIHVuaXRQcmljZS5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgICAgdW5pdFByaWNlLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcInVuaXRQcmljZU1lYXN1cmVtZW50XCIsIGZ1bmN0aW9uICh1bml0UHJpY2VNZWFzdXJlbWVudCkge1xuICAgICAgICAgIHVuaXRQcmljZU1lYXN1cmVtZW50LmFkZChcIm1lYXN1cmVkVHlwZVwiKTtcbiAgICAgICAgICB1bml0UHJpY2VNZWFzdXJlbWVudC5hZGQoXCJxdWFudGl0eVVuaXRcIik7XG4gICAgICAgICAgdW5pdFByaWNlTWVhc3VyZW1lbnQuYWRkKFwicXVhbnRpdHlWYWx1ZVwiKTtcbiAgICAgICAgICB1bml0UHJpY2VNZWFzdXJlbWVudC5hZGQoXCJyZWZlcmVuY2VVbml0XCIpO1xuICAgICAgICAgIHVuaXRQcmljZU1lYXN1cmVtZW50LmFkZChcInJlZmVyZW5jZVZhbHVlXCIpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwicXVhbnRpdHlcIik7XG4gICAgcm9vdC5hZGQoXCJhdHRyaWJ1dGVzXCIsIGZ1bmN0aW9uIChhdHRyaWJ1dGVzKSB7XG4gICAgICBhdHRyaWJ1dGVzLmFkZChcImtleVwiKTtcbiAgICAgIGF0dHJpYnV0ZXMuYWRkKFwidmFsdWVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJjb3N0XCIsIGZ1bmN0aW9uIChjb3N0KSB7XG4gICAgICBjb3N0LmFkZChcInRvdGFsQW1vdW50XCIsIGZ1bmN0aW9uICh0b3RhbEFtb3VudCkge1xuICAgICAgICB0b3RhbEFtb3VudC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIHRvdGFsQW1vdW50LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgY29zdC5hZGQoXCJzdWJ0b3RhbEFtb3VudFwiLCBmdW5jdGlvbiAoc3VidG90YWxBbW91bnQpIHtcbiAgICAgICAgc3VidG90YWxBbW91bnQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICBzdWJ0b3RhbEFtb3VudC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGNvc3QuYWRkKFwiYW1vdW50UGVyUXVhbnRpdHlcIiwgZnVuY3Rpb24gKGFtb3VudFBlclF1YW50aXR5KSB7XG4gICAgICAgIGFtb3VudFBlclF1YW50aXR5LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgYW1vdW50UGVyUXVhbnRpdHkuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBjb3N0LmFkZChcImNvbXBhcmVBdEFtb3VudFBlclF1YW50aXR5XCIsIGZ1bmN0aW9uIChjb21wYXJlQXRBbW91bnRQZXJRdWFudGl0eSkge1xuICAgICAgICBjb21wYXJlQXRBbW91bnRQZXJRdWFudGl0eS5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIGNvbXBhcmVBdEFtb3VudFBlclF1YW50aXR5LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiZGlzY291bnRBbGxvY2F0aW9uc1wiLCBmdW5jdGlvbiAoZGlzY291bnRBbGxvY2F0aW9ucykge1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGQoXCJkaXNjb3VudGVkQW1vdW50XCIsIGZ1bmN0aW9uIChkaXNjb3VudGVkQW1vdW50KSB7XG4gICAgICAgIGRpc2NvdW50ZWRBbW91bnQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICBkaXNjb3VudGVkQW1vdW50LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGQoXCJkaXNjb3VudEFwcGxpY2F0aW9uXCIsIGZ1bmN0aW9uIChkaXNjb3VudEFwcGxpY2F0aW9uKSB7XG4gICAgICAgIGRpc2NvdW50QXBwbGljYXRpb24uYWRkKFwidGFyZ2V0VHlwZVwiKTtcbiAgICAgICAgZGlzY291bnRBcHBsaWNhdGlvbi5hZGQoXCJhbGxvY2F0aW9uTWV0aG9kXCIpO1xuICAgICAgICBkaXNjb3VudEFwcGxpY2F0aW9uLmFkZChcInRhcmdldFNlbGVjdGlvblwiKTtcbiAgICAgICAgZGlzY291bnRBcHBsaWNhdGlvbi5hZGQoXCJ2YWx1ZVwiLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICB2YWx1ZS5hZGRJbmxpbmVGcmFnbWVudE9uKFwiUHJpY2luZ1BlcmNlbnRhZ2VWYWx1ZVwiLCBmdW5jdGlvbiAoUHJpY2luZ1BlcmNlbnRhZ2VWYWx1ZSkge1xuICAgICAgICAgICAgUHJpY2luZ1BlcmNlbnRhZ2VWYWx1ZS5hZGQoXCJwZXJjZW50YWdlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHZhbHVlLmFkZElubGluZUZyYWdtZW50T24oXCJNb25leVYyXCIsIGZ1bmN0aW9uIChNb25leVYyKSB7XG4gICAgICAgICAgICBNb25leVYyLmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgICAgIE1vbmV5VjIuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGRJbmxpbmVGcmFnbWVudE9uKFwiQ2FydENvZGVEaXNjb3VudEFsbG9jYXRpb25cIiwgZnVuY3Rpb24gKENhcnRDb2RlRGlzY291bnRBbGxvY2F0aW9uKSB7XG4gICAgICAgIENhcnRDb2RlRGlzY291bnRBbGxvY2F0aW9uLmFkZChcImNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGRpc2NvdW50QWxsb2NhdGlvbnMuYWRkSW5saW5lRnJhZ21lbnRPbihcIkNhcnRBdXRvbWF0aWNEaXNjb3VudEFsbG9jYXRpb25cIiwgZnVuY3Rpb24gKENhcnRBdXRvbWF0aWNEaXNjb3VudEFsbG9jYXRpb24pIHtcbiAgICAgICAgQ2FydEF1dG9tYXRpY0Rpc2NvdW50QWxsb2NhdGlvbi5hZGQoXCJ0aXRsZVwiKTtcbiAgICAgIH0pO1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGRJbmxpbmVGcmFnbWVudE9uKFwiQ2FydEN1c3RvbURpc2NvdW50QWxsb2NhdGlvblwiLCBmdW5jdGlvbiAoQ2FydEN1c3RvbURpc2NvdW50QWxsb2NhdGlvbikge1xuICAgICAgICBDYXJ0Q3VzdG9tRGlzY291bnRBbGxvY2F0aW9uLmFkZChcInRpdGxlXCIpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuICBzcHJlYWRzLkFwcGxpZWRHaWZ0Q2FyZEZyYWdtZW50ID0gZG9jdW1lbnQuZGVmaW5lRnJhZ21lbnQoXCJBcHBsaWVkR2lmdENhcmRGcmFnbWVudFwiLCBcIkFwcGxpZWRHaWZ0Q2FyZFwiLCBmdW5jdGlvbiAocm9vdCkge1xuICAgIHJvb3QuYWRkKFwiYW1vdW50VXNlZFwiLCBmdW5jdGlvbiAoYW1vdW50VXNlZCkge1xuICAgICAgYW1vdW50VXNlZC5hZGQoXCJhbW91bnRcIik7XG4gICAgICBhbW91bnRVc2VkLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImFtb3VudFVzZWRcIiwge1xuICAgICAgYWxpYXM6IFwiYW1vdW50VXNlZFYyXCJcbiAgICB9LCBmdW5jdGlvbiAoYW1vdW50VXNlZCkge1xuICAgICAgYW1vdW50VXNlZC5hZGQoXCJhbW91bnRcIik7XG4gICAgICBhbW91bnRVc2VkLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImJhbGFuY2VcIiwgZnVuY3Rpb24gKGJhbGFuY2UpIHtcbiAgICAgIGJhbGFuY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgYmFsYW5jZS5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJiYWxhbmNlXCIsIHtcbiAgICAgIGFsaWFzOiBcImJhbGFuY2VWMlwiXG4gICAgfSwgZnVuY3Rpb24gKGJhbGFuY2UpIHtcbiAgICAgIGJhbGFuY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgYmFsYW5jZS5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJwcmVzZW50bWVudEFtb3VudFVzZWRcIiwgZnVuY3Rpb24gKHByZXNlbnRtZW50QW1vdW50VXNlZCkge1xuICAgICAgcHJlc2VudG1lbnRBbW91bnRVc2VkLmFkZChcImFtb3VudFwiKTtcbiAgICAgIHByZXNlbnRtZW50QW1vdW50VXNlZC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJpZFwiKTtcbiAgICByb290LmFkZChcImxhc3RDaGFyYWN0ZXJzXCIpO1xuICB9KTtcbiAgc3ByZWFkcy5DYXJ0RnJhZ21lbnQgPSBkb2N1bWVudC5kZWZpbmVGcmFnbWVudChcIkNhcnRGcmFnbWVudFwiLCBcIkNhcnRcIiwgZnVuY3Rpb24gKHJvb3QpIHtcbiAgICByb290LmFkZChcImlkXCIpO1xuICAgIHJvb3QuYWRkKFwiY3JlYXRlZEF0XCIpO1xuICAgIHJvb3QuYWRkKFwidXBkYXRlZEF0XCIpO1xuICAgIHJvb3QuYWRkKFwibGluZXNcIiwge1xuICAgICAgYXJnczoge1xuICAgICAgICBmaXJzdDogMjUwXG4gICAgICB9XG4gICAgfSwgZnVuY3Rpb24gKGxpbmVzKSB7XG4gICAgICBsaW5lcy5hZGQoXCJwYWdlSW5mb1wiLCBmdW5jdGlvbiAocGFnZUluZm8pIHtcbiAgICAgICAgcGFnZUluZm8uYWRkKFwiaGFzTmV4dFBhZ2VcIik7XG4gICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc1ByZXZpb3VzUGFnZVwiKTtcbiAgICAgIH0pO1xuICAgICAgbGluZXMuYWRkKFwiZWRnZXNcIiwgZnVuY3Rpb24gKGVkZ2VzKSB7XG4gICAgICAgIGVkZ2VzLmFkZChcImN1cnNvclwiKTtcbiAgICAgICAgZWRnZXMuYWRkKFwibm9kZVwiLCBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgIG5vZGUuYWRkRnJhZ21lbnQoc3ByZWFkcy5DYXJ0TGluZUZyYWdtZW50KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImF0dHJpYnV0ZXNcIiwgZnVuY3Rpb24gKGF0dHJpYnV0ZXMpIHtcbiAgICAgIGF0dHJpYnV0ZXMuYWRkKFwia2V5XCIpO1xuICAgICAgYXR0cmlidXRlcy5hZGQoXCJ2YWx1ZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImNvc3RcIiwgZnVuY3Rpb24gKGNvc3QpIHtcbiAgICAgIGNvc3QuYWRkKFwiY2hlY2tvdXRDaGFyZ2VBbW91bnRcIiwgZnVuY3Rpb24gKGNoZWNrb3V0Q2hhcmdlQW1vdW50KSB7XG4gICAgICAgIGNoZWNrb3V0Q2hhcmdlQW1vdW50LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgY2hlY2tvdXRDaGFyZ2VBbW91bnQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBjb3N0LmFkZChcInRvdGFsQW1vdW50XCIsIGZ1bmN0aW9uICh0b3RhbEFtb3VudCkge1xuICAgICAgICB0b3RhbEFtb3VudC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIHRvdGFsQW1vdW50LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgY29zdC5hZGQoXCJzdWJ0b3RhbEFtb3VudFwiLCBmdW5jdGlvbiAoc3VidG90YWxBbW91bnQpIHtcbiAgICAgICAgc3VidG90YWxBbW91bnQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICBzdWJ0b3RhbEFtb3VudC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGNvc3QuYWRkKFwidG90YWxUYXhBbW91bnRcIiwgZnVuY3Rpb24gKHRvdGFsVGF4QW1vdW50KSB7XG4gICAgICAgIHRvdGFsVGF4QW1vdW50LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgdG90YWxUYXhBbW91bnQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBjb3N0LmFkZChcInRvdGFsRHV0eUFtb3VudFwiLCBmdW5jdGlvbiAodG90YWxEdXR5QW1vdW50KSB7XG4gICAgICAgIHRvdGFsRHV0eUFtb3VudC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIHRvdGFsRHV0eUFtb3VudC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImNoZWNrb3V0VXJsXCIpO1xuICAgIHJvb3QuYWRkKFwiZGlzY291bnRDb2Rlc1wiLCBmdW5jdGlvbiAoZGlzY291bnRDb2Rlcykge1xuICAgICAgZGlzY291bnRDb2Rlcy5hZGQoXCJhcHBsaWNhYmxlXCIpO1xuICAgICAgZGlzY291bnRDb2Rlcy5hZGQoXCJjb2RlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiZGlzY291bnRBbGxvY2F0aW9uc1wiLCBmdW5jdGlvbiAoZGlzY291bnRBbGxvY2F0aW9ucykge1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGQoXCJkaXNjb3VudGVkQW1vdW50XCIsIGZ1bmN0aW9uIChkaXNjb3VudGVkQW1vdW50KSB7XG4gICAgICAgIGRpc2NvdW50ZWRBbW91bnQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICBkaXNjb3VudGVkQW1vdW50LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGQoXCJkaXNjb3VudEFwcGxpY2F0aW9uXCIsIGZ1bmN0aW9uIChkaXNjb3VudEFwcGxpY2F0aW9uKSB7XG4gICAgICAgIGRpc2NvdW50QXBwbGljYXRpb24uYWRkKFwidGFyZ2V0VHlwZVwiKTtcbiAgICAgICAgZGlzY291bnRBcHBsaWNhdGlvbi5hZGQoXCJhbGxvY2F0aW9uTWV0aG9kXCIpO1xuICAgICAgICBkaXNjb3VudEFwcGxpY2F0aW9uLmFkZChcInRhcmdldFNlbGVjdGlvblwiKTtcbiAgICAgICAgZGlzY291bnRBcHBsaWNhdGlvbi5hZGQoXCJ2YWx1ZVwiLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICB2YWx1ZS5hZGRJbmxpbmVGcmFnbWVudE9uKFwiUHJpY2luZ1BlcmNlbnRhZ2VWYWx1ZVwiLCBmdW5jdGlvbiAoUHJpY2luZ1BlcmNlbnRhZ2VWYWx1ZSkge1xuICAgICAgICAgICAgUHJpY2luZ1BlcmNlbnRhZ2VWYWx1ZS5hZGQoXCJwZXJjZW50YWdlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHZhbHVlLmFkZElubGluZUZyYWdtZW50T24oXCJNb25leVYyXCIsIGZ1bmN0aW9uIChNb25leVYyKSB7XG4gICAgICAgICAgICBNb25leVYyLmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgICAgIE1vbmV5VjIuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGRJbmxpbmVGcmFnbWVudE9uKFwiQ2FydENvZGVEaXNjb3VudEFsbG9jYXRpb25cIiwgZnVuY3Rpb24gKENhcnRDb2RlRGlzY291bnRBbGxvY2F0aW9uKSB7XG4gICAgICAgIENhcnRDb2RlRGlzY291bnRBbGxvY2F0aW9uLmFkZChcImNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGRpc2NvdW50QWxsb2NhdGlvbnMuYWRkSW5saW5lRnJhZ21lbnRPbihcIkNhcnRBdXRvbWF0aWNEaXNjb3VudEFsbG9jYXRpb25cIiwgZnVuY3Rpb24gKENhcnRBdXRvbWF0aWNEaXNjb3VudEFsbG9jYXRpb24pIHtcbiAgICAgICAgQ2FydEF1dG9tYXRpY0Rpc2NvdW50QWxsb2NhdGlvbi5hZGQoXCJ0aXRsZVwiKTtcbiAgICAgIH0pO1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGRJbmxpbmVGcmFnbWVudE9uKFwiQ2FydEN1c3RvbURpc2NvdW50QWxsb2NhdGlvblwiLCBmdW5jdGlvbiAoQ2FydEN1c3RvbURpc2NvdW50QWxsb2NhdGlvbikge1xuICAgICAgICBDYXJ0Q3VzdG9tRGlzY291bnRBbGxvY2F0aW9uLmFkZChcInRpdGxlXCIpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJidXllcklkZW50aXR5XCIsIGZ1bmN0aW9uIChidXllcklkZW50aXR5KSB7XG4gICAgICBidXllcklkZW50aXR5LmFkZChcImNvdW50cnlDb2RlXCIpO1xuICAgICAgYnV5ZXJJZGVudGl0eS5hZGQoXCJwcmVmZXJlbmNlc1wiLCBmdW5jdGlvbiAocHJlZmVyZW5jZXMpIHtcbiAgICAgICAgcHJlZmVyZW5jZXMuYWRkKFwiZGVsaXZlcnlcIiwgZnVuY3Rpb24gKGRlbGl2ZXJ5KSB7XG4gICAgICAgICAgZGVsaXZlcnkuYWRkKFwiY29vcmRpbmF0ZXNcIiwgZnVuY3Rpb24gKGNvb3JkaW5hdGVzKSB7XG4gICAgICAgICAgICBjb29yZGluYXRlcy5hZGQoXCJsYXRpdHVkZVwiKTtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzLmFkZChcImxvbmdpdHVkZVwiKTtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzLmFkZChcImNvdW50cnlDb2RlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGRlbGl2ZXJ5LmFkZChcImRlbGl2ZXJ5TWV0aG9kXCIpO1xuICAgICAgICAgIGRlbGl2ZXJ5LmFkZChcInBpY2t1cEhhbmRsZVwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHByZWZlcmVuY2VzLmFkZChcIndhbGxldFwiKTtcbiAgICAgIH0pO1xuICAgICAgYnV5ZXJJZGVudGl0eS5hZGQoXCJlbWFpbFwiKTtcbiAgICAgIGJ1eWVySWRlbnRpdHkuYWRkKFwicGhvbmVcIik7XG4gICAgICBidXllcklkZW50aXR5LmFkZChcImN1c3RvbWVyXCIsIGZ1bmN0aW9uIChjdXN0b21lcikge1xuICAgICAgICBjdXN0b21lci5hZGQoXCJlbWFpbFwiKTtcbiAgICAgIH0pO1xuICAgICAgYnV5ZXJJZGVudGl0eS5hZGQoXCJkZWxpdmVyeUFkZHJlc3NQcmVmZXJlbmNlc1wiLCBmdW5jdGlvbiAoZGVsaXZlcnlBZGRyZXNzUHJlZmVyZW5jZXMpIHtcbiAgICAgICAgZGVsaXZlcnlBZGRyZXNzUHJlZmVyZW5jZXMuYWRkSW5saW5lRnJhZ21lbnRPbihcIk1haWxpbmdBZGRyZXNzXCIsIGZ1bmN0aW9uIChNYWlsaW5nQWRkcmVzcykge1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImFkZHJlc3MxXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImFkZHJlc3MyXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImNpdHlcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwiY29tcGFueVwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJjb3VudHJ5XCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImNvdW50cnlDb2RlVjJcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwiZmlyc3ROYW1lXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImZvcm1hdHRlZFwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJmb3JtYXR0ZWRBcmVhXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImxhc3ROYW1lXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImxhdGl0dWRlXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImxvbmdpdHVkZVwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJuYW1lXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcInBob25lXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcInByb3ZpbmNlXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcInByb3ZpbmNlQ29kZVwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJ6aXBcIik7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJkZWxpdmVyeUdyb3Vwc1wiLCB7XG4gICAgICBhcmdzOiB7XG4gICAgICAgIGZpcnN0OiAxMFxuICAgICAgfVxuICAgIH0sIGZ1bmN0aW9uIChkZWxpdmVyeUdyb3Vwcykge1xuICAgICAgZGVsaXZlcnlHcm91cHMuYWRkKFwicGFnZUluZm9cIiwgZnVuY3Rpb24gKHBhZ2VJbmZvKSB7XG4gICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc05leHRQYWdlXCIpO1xuICAgICAgICBwYWdlSW5mby5hZGQoXCJoYXNQcmV2aW91c1BhZ2VcIik7XG4gICAgICB9KTtcbiAgICAgIGRlbGl2ZXJ5R3JvdXBzLmFkZChcImVkZ2VzXCIsIGZ1bmN0aW9uIChlZGdlcykge1xuICAgICAgICBlZGdlcy5hZGQoXCJub2RlXCIsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgbm9kZS5hZGQoXCJpZFwiKTtcbiAgICAgICAgICBub2RlLmFkZChcImRlbGl2ZXJ5QWRkcmVzc1wiLCBmdW5jdGlvbiAoZGVsaXZlcnlBZGRyZXNzKSB7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwiYWRkcmVzczJcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwiYWRkcmVzczFcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwiY2l0eVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJjb21wYW55XCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcImNvdW50cnlcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwiY291bnRyeUNvZGVWMlwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJmaXJzdE5hbWVcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwiZm9ybWF0dGVkXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcImZvcm1hdHRlZEFyZWFcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwibGFzdE5hbWVcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwibGF0aXR1ZGVcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwibG9uZ2l0dWRlXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcIm5hbWVcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwicGhvbmVcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwicHJvdmluY2VcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwicHJvdmluY2VDb2RlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIG5vZGUuYWRkKFwiZGVsaXZlcnlPcHRpb25zXCIsIGZ1bmN0aW9uIChkZWxpdmVyeU9wdGlvbnMpIHtcbiAgICAgICAgICAgIGRlbGl2ZXJ5T3B0aW9ucy5hZGQoXCJjb2RlXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlPcHRpb25zLmFkZChcImRlbGl2ZXJ5TWV0aG9kVHlwZVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5T3B0aW9ucy5hZGQoXCJkZXNjcmlwdGlvblwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5T3B0aW9ucy5hZGQoXCJlc3RpbWF0ZWRDb3N0XCIsIGZ1bmN0aW9uIChlc3RpbWF0ZWRDb3N0KSB7XG4gICAgICAgICAgICAgIGVzdGltYXRlZENvc3QuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICAgICAgICBlc3RpbWF0ZWRDb3N0LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZGVsaXZlcnlPcHRpb25zLmFkZChcImhhbmRsZVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5T3B0aW9ucy5hZGQoXCJ0aXRsZVwiKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBub2RlLmFkZChcInNlbGVjdGVkRGVsaXZlcnlPcHRpb25cIiwgZnVuY3Rpb24gKHNlbGVjdGVkRGVsaXZlcnlPcHRpb24pIHtcbiAgICAgICAgICAgIHNlbGVjdGVkRGVsaXZlcnlPcHRpb24uYWRkKFwiY29kZVwiKTtcbiAgICAgICAgICAgIHNlbGVjdGVkRGVsaXZlcnlPcHRpb24uYWRkKFwiZGVsaXZlcnlNZXRob2RUeXBlXCIpO1xuICAgICAgICAgICAgc2VsZWN0ZWREZWxpdmVyeU9wdGlvbi5hZGQoXCJkZXNjcmlwdGlvblwiKTtcbiAgICAgICAgICAgIHNlbGVjdGVkRGVsaXZlcnlPcHRpb24uYWRkKFwiZXN0aW1hdGVkQ29zdFwiLCBmdW5jdGlvbiAoZXN0aW1hdGVkQ29zdCkge1xuICAgICAgICAgICAgICBlc3RpbWF0ZWRDb3N0LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgICAgICAgZXN0aW1hdGVkQ29zdC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNlbGVjdGVkRGVsaXZlcnlPcHRpb24uYWRkKFwiaGFuZGxlXCIpO1xuICAgICAgICAgICAgc2VsZWN0ZWREZWxpdmVyeU9wdGlvbi5hZGQoXCJ0aXRsZVwiKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBub2RlLmFkZChcImNhcnRMaW5lc1wiLCB7XG4gICAgICAgICAgICBhcmdzOiB7XG4gICAgICAgICAgICAgIGZpcnN0OiAyNTBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LCBmdW5jdGlvbiAoY2FydExpbmVzKSB7XG4gICAgICAgICAgICBjYXJ0TGluZXMuYWRkKFwicGFnZUluZm9cIiwgZnVuY3Rpb24gKHBhZ2VJbmZvKSB7XG4gICAgICAgICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc05leHRQYWdlXCIpO1xuICAgICAgICAgICAgICBwYWdlSW5mby5hZGQoXCJoYXNQcmV2aW91c1BhZ2VcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNhcnRMaW5lcy5hZGQoXCJlZGdlc1wiLCBmdW5jdGlvbiAoZWRnZXMpIHtcbiAgICAgICAgICAgICAgZWRnZXMuYWRkKFwiY3Vyc29yXCIpO1xuICAgICAgICAgICAgICBlZGdlcy5hZGQoXCJub2RlXCIsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5hZGQoXCJpZFwiKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImFwcGxpZWRHaWZ0Q2FyZHNcIiwgZnVuY3Rpb24gKGFwcGxpZWRHaWZ0Q2FyZHMpIHtcbiAgICAgIGFwcGxpZWRHaWZ0Q2FyZHMuYWRkRnJhZ21lbnQoc3ByZWFkcy5BcHBsaWVkR2lmdENhcmRGcmFnbWVudCk7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJub3RlXCIpO1xuICB9KTtcbiAgc3ByZWFkcy5DYXJ0VXNlckVycm9yRnJhZ21lbnQgPSBkb2N1bWVudC5kZWZpbmVGcmFnbWVudChcIkNhcnRVc2VyRXJyb3JGcmFnbWVudFwiLCBcIkNhcnRVc2VyRXJyb3JcIiwgZnVuY3Rpb24gKHJvb3QpIHtcbiAgICByb290LmFkZChcImZpZWxkXCIpO1xuICAgIHJvb3QuYWRkKFwibWVzc2FnZVwiKTtcbiAgICByb290LmFkZChcImNvZGVcIik7XG4gIH0pO1xuICBzcHJlYWRzLkNhcnRXYXJuaW5nRnJhZ21lbnQgPSBkb2N1bWVudC5kZWZpbmVGcmFnbWVudChcIkNhcnRXYXJuaW5nRnJhZ21lbnRcIiwgXCJDYXJ0V2FybmluZ1wiLCBmdW5jdGlvbiAocm9vdCkge1xuICAgIHJvb3QuYWRkKFwiY29kZVwiKTtcbiAgICByb290LmFkZChcIm1lc3NhZ2VcIik7XG4gIH0pO1xuICBkb2N1bWVudC5hZGRNdXRhdGlvbihcIkNhcnRCdXllcklkZW50aXR5VXBkYXRlXCIsIFt2YXJpYWJsZXMuQ2FydEJ1eWVySWRlbnRpdHlVcGRhdGUuYnV5ZXJJZGVudGl0eSwgdmFyaWFibGVzLkNhcnRCdXllcklkZW50aXR5VXBkYXRlLmNhcnRJZF0sIGZ1bmN0aW9uIChyb290KSB7XG4gICAgcm9vdC5hZGQoXCJjYXJ0QnV5ZXJJZGVudGl0eVVwZGF0ZVwiLCB7XG4gICAgICBhcmdzOiB7XG4gICAgICAgIGJ1eWVySWRlbnRpdHk6IHZhcmlhYmxlcy5DYXJ0QnV5ZXJJZGVudGl0eVVwZGF0ZS5idXllcklkZW50aXR5LFxuICAgICAgICBjYXJ0SWQ6IHZhcmlhYmxlcy5DYXJ0QnV5ZXJJZGVudGl0eVVwZGF0ZS5jYXJ0SWRcbiAgICAgIH1cbiAgICB9LCBmdW5jdGlvbiAoY2FydEJ1eWVySWRlbnRpdHlVcGRhdGUpIHtcbiAgICAgIGNhcnRCdXllcklkZW50aXR5VXBkYXRlLmFkZChcImNhcnRcIiwgZnVuY3Rpb24gKGNhcnQpIHtcbiAgICAgICAgY2FydC5hZGRGcmFnbWVudChzcHJlYWRzLkNhcnRGcmFnbWVudCk7XG4gICAgICB9KTtcbiAgICAgIGNhcnRCdXllcklkZW50aXR5VXBkYXRlLmFkZChcInVzZXJFcnJvcnNcIiwgZnVuY3Rpb24gKHVzZXJFcnJvcnMpIHtcbiAgICAgICAgdXNlckVycm9ycy5hZGRGcmFnbWVudChzcHJlYWRzLkNhcnRVc2VyRXJyb3JGcmFnbWVudCk7XG4gICAgICB9KTtcbiAgICAgIGNhcnRCdXllcklkZW50aXR5VXBkYXRlLmFkZChcIndhcm5pbmdzXCIsIGZ1bmN0aW9uICh3YXJuaW5ncykge1xuICAgICAgICB3YXJuaW5ncy5hZGRGcmFnbWVudChzcHJlYWRzLkNhcnRXYXJuaW5nRnJhZ21lbnQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gZG9jdW1lbnQ7XG59XG5cbmZ1bmN0aW9uIHF1ZXJ5JDE2KGNsaWVudCkge1xuICB2YXIgZG9jdW1lbnQgPSBjbGllbnQuZG9jdW1lbnQoKTtcbiAgdmFyIHNwcmVhZHMgPSB7fTtcbiAgdmFyIHZhcmlhYmxlcyA9IHt9O1xuICB2YXJpYWJsZXMuQ2FydERpc2NvdW50Q29kZXNVcGRhdGUgPSB7fTtcbiAgdmFyaWFibGVzLkNhcnREaXNjb3VudENvZGVzVXBkYXRlLmNhcnRJZCA9IGNsaWVudC52YXJpYWJsZShcImNhcnRJZFwiLCBcIklEIVwiKTtcbiAgdmFyaWFibGVzLkNhcnREaXNjb3VudENvZGVzVXBkYXRlLmRpc2NvdW50Q29kZXMgPSBjbGllbnQudmFyaWFibGUoXCJkaXNjb3VudENvZGVzXCIsIFwiW1N0cmluZyFdIVwiKTtcbiAgc3ByZWFkcy5DYXJ0TGluZUZyYWdtZW50ID0gZG9jdW1lbnQuZGVmaW5lRnJhZ21lbnQoXCJDYXJ0TGluZUZyYWdtZW50XCIsIFwiQmFzZUNhcnRMaW5lXCIsIGZ1bmN0aW9uIChyb290KSB7XG4gICAgcm9vdC5hZGQoXCJpZFwiKTtcbiAgICByb290LmFkZChcIm1lcmNoYW5kaXNlXCIsIGZ1bmN0aW9uIChtZXJjaGFuZGlzZSkge1xuICAgICAgbWVyY2hhbmRpc2UuYWRkSW5saW5lRnJhZ21lbnRPbihcIlByb2R1Y3RWYXJpYW50XCIsIGZ1bmN0aW9uIChQcm9kdWN0VmFyaWFudCkge1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJpZFwiKTtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwidGl0bGVcIik7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcImltYWdlXCIsIGZ1bmN0aW9uIChpbWFnZSkge1xuICAgICAgICAgIGltYWdlLmFkZChcImlkXCIpO1xuICAgICAgICAgIGltYWdlLmFkZChcInVybFwiLCB7XG4gICAgICAgICAgICBhbGlhczogXCJzcmNcIlxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGltYWdlLmFkZChcImFsdFRleHRcIik7XG4gICAgICAgICAgaW1hZ2UuYWRkKFwid2lkdGhcIik7XG4gICAgICAgICAgaW1hZ2UuYWRkKFwiaGVpZ2h0XCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwicHJvZHVjdFwiLCBmdW5jdGlvbiAocHJvZHVjdCkge1xuICAgICAgICAgIHByb2R1Y3QuYWRkKFwiaWRcIik7XG4gICAgICAgICAgcHJvZHVjdC5hZGQoXCJoYW5kbGVcIik7XG4gICAgICAgICAgcHJvZHVjdC5hZGQoXCJ0aXRsZVwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcIndlaWdodFwiKTtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwiYXZhaWxhYmxlRm9yU2FsZVwiLCB7XG4gICAgICAgICAgYWxpYXM6IFwiYXZhaWxhYmxlXCJcbiAgICAgICAgfSk7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcInNrdVwiKTtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwic2VsZWN0ZWRPcHRpb25zXCIsIGZ1bmN0aW9uIChzZWxlY3RlZE9wdGlvbnMpIHtcbiAgICAgICAgICBzZWxlY3RlZE9wdGlvbnMuYWRkKFwibmFtZVwiKTtcbiAgICAgICAgICBzZWxlY3RlZE9wdGlvbnMuYWRkKFwidmFsdWVcIik7XG4gICAgICAgIH0pO1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJjb21wYXJlQXRQcmljZVwiLCBmdW5jdGlvbiAoY29tcGFyZUF0UHJpY2UpIHtcbiAgICAgICAgICBjb21wYXJlQXRQcmljZS5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgICAgY29tcGFyZUF0UHJpY2UuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwicHJpY2VcIiwgZnVuY3Rpb24gKHByaWNlKSB7XG4gICAgICAgICAgcHJpY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICAgIHByaWNlLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcInVuaXRQcmljZVwiLCBmdW5jdGlvbiAodW5pdFByaWNlKSB7XG4gICAgICAgICAgdW5pdFByaWNlLmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgICB1bml0UHJpY2UuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwidW5pdFByaWNlTWVhc3VyZW1lbnRcIiwgZnVuY3Rpb24gKHVuaXRQcmljZU1lYXN1cmVtZW50KSB7XG4gICAgICAgICAgdW5pdFByaWNlTWVhc3VyZW1lbnQuYWRkKFwibWVhc3VyZWRUeXBlXCIpO1xuICAgICAgICAgIHVuaXRQcmljZU1lYXN1cmVtZW50LmFkZChcInF1YW50aXR5VW5pdFwiKTtcbiAgICAgICAgICB1bml0UHJpY2VNZWFzdXJlbWVudC5hZGQoXCJxdWFudGl0eVZhbHVlXCIpO1xuICAgICAgICAgIHVuaXRQcmljZU1lYXN1cmVtZW50LmFkZChcInJlZmVyZW5jZVVuaXRcIik7XG4gICAgICAgICAgdW5pdFByaWNlTWVhc3VyZW1lbnQuYWRkKFwicmVmZXJlbmNlVmFsdWVcIik7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJxdWFudGl0eVwiKTtcbiAgICByb290LmFkZChcImF0dHJpYnV0ZXNcIiwgZnVuY3Rpb24gKGF0dHJpYnV0ZXMpIHtcbiAgICAgIGF0dHJpYnV0ZXMuYWRkKFwia2V5XCIpO1xuICAgICAgYXR0cmlidXRlcy5hZGQoXCJ2YWx1ZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImNvc3RcIiwgZnVuY3Rpb24gKGNvc3QpIHtcbiAgICAgIGNvc3QuYWRkKFwidG90YWxBbW91bnRcIiwgZnVuY3Rpb24gKHRvdGFsQW1vdW50KSB7XG4gICAgICAgIHRvdGFsQW1vdW50LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgdG90YWxBbW91bnQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBjb3N0LmFkZChcInN1YnRvdGFsQW1vdW50XCIsIGZ1bmN0aW9uIChzdWJ0b3RhbEFtb3VudCkge1xuICAgICAgICBzdWJ0b3RhbEFtb3VudC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIHN1YnRvdGFsQW1vdW50LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgY29zdC5hZGQoXCJhbW91bnRQZXJRdWFudGl0eVwiLCBmdW5jdGlvbiAoYW1vdW50UGVyUXVhbnRpdHkpIHtcbiAgICAgICAgYW1vdW50UGVyUXVhbnRpdHkuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICBhbW91bnRQZXJRdWFudGl0eS5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGNvc3QuYWRkKFwiY29tcGFyZUF0QW1vdW50UGVyUXVhbnRpdHlcIiwgZnVuY3Rpb24gKGNvbXBhcmVBdEFtb3VudFBlclF1YW50aXR5KSB7XG4gICAgICAgIGNvbXBhcmVBdEFtb3VudFBlclF1YW50aXR5LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgY29tcGFyZUF0QW1vdW50UGVyUXVhbnRpdHkuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJkaXNjb3VudEFsbG9jYXRpb25zXCIsIGZ1bmN0aW9uIChkaXNjb3VudEFsbG9jYXRpb25zKSB7XG4gICAgICBkaXNjb3VudEFsbG9jYXRpb25zLmFkZChcImRpc2NvdW50ZWRBbW91bnRcIiwgZnVuY3Rpb24gKGRpc2NvdW50ZWRBbW91bnQpIHtcbiAgICAgICAgZGlzY291bnRlZEFtb3VudC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIGRpc2NvdW50ZWRBbW91bnQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBkaXNjb3VudEFsbG9jYXRpb25zLmFkZChcImRpc2NvdW50QXBwbGljYXRpb25cIiwgZnVuY3Rpb24gKGRpc2NvdW50QXBwbGljYXRpb24pIHtcbiAgICAgICAgZGlzY291bnRBcHBsaWNhdGlvbi5hZGQoXCJ0YXJnZXRUeXBlXCIpO1xuICAgICAgICBkaXNjb3VudEFwcGxpY2F0aW9uLmFkZChcImFsbG9jYXRpb25NZXRob2RcIik7XG4gICAgICAgIGRpc2NvdW50QXBwbGljYXRpb24uYWRkKFwidGFyZ2V0U2VsZWN0aW9uXCIpO1xuICAgICAgICBkaXNjb3VudEFwcGxpY2F0aW9uLmFkZChcInZhbHVlXCIsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgIHZhbHVlLmFkZElubGluZUZyYWdtZW50T24oXCJQcmljaW5nUGVyY2VudGFnZVZhbHVlXCIsIGZ1bmN0aW9uIChQcmljaW5nUGVyY2VudGFnZVZhbHVlKSB7XG4gICAgICAgICAgICBQcmljaW5nUGVyY2VudGFnZVZhbHVlLmFkZChcInBlcmNlbnRhZ2VcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdmFsdWUuYWRkSW5saW5lRnJhZ21lbnRPbihcIk1vbmV5VjJcIiwgZnVuY3Rpb24gKE1vbmV5VjIpIHtcbiAgICAgICAgICAgIE1vbmV5VjIuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICAgICAgTW9uZXlWMi5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBkaXNjb3VudEFsbG9jYXRpb25zLmFkZElubGluZUZyYWdtZW50T24oXCJDYXJ0Q29kZURpc2NvdW50QWxsb2NhdGlvblwiLCBmdW5jdGlvbiAoQ2FydENvZGVEaXNjb3VudEFsbG9jYXRpb24pIHtcbiAgICAgICAgQ2FydENvZGVEaXNjb3VudEFsbG9jYXRpb24uYWRkKFwiY29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGRJbmxpbmVGcmFnbWVudE9uKFwiQ2FydEF1dG9tYXRpY0Rpc2NvdW50QWxsb2NhdGlvblwiLCBmdW5jdGlvbiAoQ2FydEF1dG9tYXRpY0Rpc2NvdW50QWxsb2NhdGlvbikge1xuICAgICAgICBDYXJ0QXV0b21hdGljRGlzY291bnRBbGxvY2F0aW9uLmFkZChcInRpdGxlXCIpO1xuICAgICAgfSk7XG4gICAgICBkaXNjb3VudEFsbG9jYXRpb25zLmFkZElubGluZUZyYWdtZW50T24oXCJDYXJ0Q3VzdG9tRGlzY291bnRBbGxvY2F0aW9uXCIsIGZ1bmN0aW9uIChDYXJ0Q3VzdG9tRGlzY291bnRBbGxvY2F0aW9uKSB7XG4gICAgICAgIENhcnRDdXN0b21EaXNjb3VudEFsbG9jYXRpb24uYWRkKFwidGl0bGVcIik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG4gIHNwcmVhZHMuQXBwbGllZEdpZnRDYXJkRnJhZ21lbnQgPSBkb2N1bWVudC5kZWZpbmVGcmFnbWVudChcIkFwcGxpZWRHaWZ0Q2FyZEZyYWdtZW50XCIsIFwiQXBwbGllZEdpZnRDYXJkXCIsIGZ1bmN0aW9uIChyb290KSB7XG4gICAgcm9vdC5hZGQoXCJhbW91bnRVc2VkXCIsIGZ1bmN0aW9uIChhbW91bnRVc2VkKSB7XG4gICAgICBhbW91bnRVc2VkLmFkZChcImFtb3VudFwiKTtcbiAgICAgIGFtb3VudFVzZWQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiYW1vdW50VXNlZFwiLCB7XG4gICAgICBhbGlhczogXCJhbW91bnRVc2VkVjJcIlxuICAgIH0sIGZ1bmN0aW9uIChhbW91bnRVc2VkKSB7XG4gICAgICBhbW91bnRVc2VkLmFkZChcImFtb3VudFwiKTtcbiAgICAgIGFtb3VudFVzZWQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiYmFsYW5jZVwiLCBmdW5jdGlvbiAoYmFsYW5jZSkge1xuICAgICAgYmFsYW5jZS5hZGQoXCJhbW91bnRcIik7XG4gICAgICBiYWxhbmNlLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImJhbGFuY2VcIiwge1xuICAgICAgYWxpYXM6IFwiYmFsYW5jZVYyXCJcbiAgICB9LCBmdW5jdGlvbiAoYmFsYW5jZSkge1xuICAgICAgYmFsYW5jZS5hZGQoXCJhbW91bnRcIik7XG4gICAgICBiYWxhbmNlLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcInByZXNlbnRtZW50QW1vdW50VXNlZFwiLCBmdW5jdGlvbiAocHJlc2VudG1lbnRBbW91bnRVc2VkKSB7XG4gICAgICBwcmVzZW50bWVudEFtb3VudFVzZWQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgcHJlc2VudG1lbnRBbW91bnRVc2VkLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImlkXCIpO1xuICAgIHJvb3QuYWRkKFwibGFzdENoYXJhY3RlcnNcIik7XG4gIH0pO1xuICBzcHJlYWRzLkNhcnRGcmFnbWVudCA9IGRvY3VtZW50LmRlZmluZUZyYWdtZW50KFwiQ2FydEZyYWdtZW50XCIsIFwiQ2FydFwiLCBmdW5jdGlvbiAocm9vdCkge1xuICAgIHJvb3QuYWRkKFwiaWRcIik7XG4gICAgcm9vdC5hZGQoXCJjcmVhdGVkQXRcIik7XG4gICAgcm9vdC5hZGQoXCJ1cGRhdGVkQXRcIik7XG4gICAgcm9vdC5hZGQoXCJsaW5lc1wiLCB7XG4gICAgICBhcmdzOiB7XG4gICAgICAgIGZpcnN0OiAyNTBcbiAgICAgIH1cbiAgICB9LCBmdW5jdGlvbiAobGluZXMpIHtcbiAgICAgIGxpbmVzLmFkZChcInBhZ2VJbmZvXCIsIGZ1bmN0aW9uIChwYWdlSW5mbykge1xuICAgICAgICBwYWdlSW5mby5hZGQoXCJoYXNOZXh0UGFnZVwiKTtcbiAgICAgICAgcGFnZUluZm8uYWRkKFwiaGFzUHJldmlvdXNQYWdlXCIpO1xuICAgICAgfSk7XG4gICAgICBsaW5lcy5hZGQoXCJlZGdlc1wiLCBmdW5jdGlvbiAoZWRnZXMpIHtcbiAgICAgICAgZWRnZXMuYWRkKFwiY3Vyc29yXCIpO1xuICAgICAgICBlZGdlcy5hZGQoXCJub2RlXCIsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgbm9kZS5hZGRGcmFnbWVudChzcHJlYWRzLkNhcnRMaW5lRnJhZ21lbnQpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiYXR0cmlidXRlc1wiLCBmdW5jdGlvbiAoYXR0cmlidXRlcykge1xuICAgICAgYXR0cmlidXRlcy5hZGQoXCJrZXlcIik7XG4gICAgICBhdHRyaWJ1dGVzLmFkZChcInZhbHVlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiY29zdFwiLCBmdW5jdGlvbiAoY29zdCkge1xuICAgICAgY29zdC5hZGQoXCJjaGVja291dENoYXJnZUFtb3VudFwiLCBmdW5jdGlvbiAoY2hlY2tvdXRDaGFyZ2VBbW91bnQpIHtcbiAgICAgICAgY2hlY2tvdXRDaGFyZ2VBbW91bnQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICBjaGVja291dENoYXJnZUFtb3VudC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGNvc3QuYWRkKFwidG90YWxBbW91bnRcIiwgZnVuY3Rpb24gKHRvdGFsQW1vdW50KSB7XG4gICAgICAgIHRvdGFsQW1vdW50LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgdG90YWxBbW91bnQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBjb3N0LmFkZChcInN1YnRvdGFsQW1vdW50XCIsIGZ1bmN0aW9uIChzdWJ0b3RhbEFtb3VudCkge1xuICAgICAgICBzdWJ0b3RhbEFtb3VudC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIHN1YnRvdGFsQW1vdW50LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgY29zdC5hZGQoXCJ0b3RhbFRheEFtb3VudFwiLCBmdW5jdGlvbiAodG90YWxUYXhBbW91bnQpIHtcbiAgICAgICAgdG90YWxUYXhBbW91bnQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICB0b3RhbFRheEFtb3VudC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGNvc3QuYWRkKFwidG90YWxEdXR5QW1vdW50XCIsIGZ1bmN0aW9uICh0b3RhbER1dHlBbW91bnQpIHtcbiAgICAgICAgdG90YWxEdXR5QW1vdW50LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgdG90YWxEdXR5QW1vdW50LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiY2hlY2tvdXRVcmxcIik7XG4gICAgcm9vdC5hZGQoXCJkaXNjb3VudENvZGVzXCIsIGZ1bmN0aW9uIChkaXNjb3VudENvZGVzKSB7XG4gICAgICBkaXNjb3VudENvZGVzLmFkZChcImFwcGxpY2FibGVcIik7XG4gICAgICBkaXNjb3VudENvZGVzLmFkZChcImNvZGVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJkaXNjb3VudEFsbG9jYXRpb25zXCIsIGZ1bmN0aW9uIChkaXNjb3VudEFsbG9jYXRpb25zKSB7XG4gICAgICBkaXNjb3VudEFsbG9jYXRpb25zLmFkZChcImRpc2NvdW50ZWRBbW91bnRcIiwgZnVuY3Rpb24gKGRpc2NvdW50ZWRBbW91bnQpIHtcbiAgICAgICAgZGlzY291bnRlZEFtb3VudC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIGRpc2NvdW50ZWRBbW91bnQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBkaXNjb3VudEFsbG9jYXRpb25zLmFkZChcImRpc2NvdW50QXBwbGljYXRpb25cIiwgZnVuY3Rpb24gKGRpc2NvdW50QXBwbGljYXRpb24pIHtcbiAgICAgICAgZGlzY291bnRBcHBsaWNhdGlvbi5hZGQoXCJ0YXJnZXRUeXBlXCIpO1xuICAgICAgICBkaXNjb3VudEFwcGxpY2F0aW9uLmFkZChcImFsbG9jYXRpb25NZXRob2RcIik7XG4gICAgICAgIGRpc2NvdW50QXBwbGljYXRpb24uYWRkKFwidGFyZ2V0U2VsZWN0aW9uXCIpO1xuICAgICAgICBkaXNjb3VudEFwcGxpY2F0aW9uLmFkZChcInZhbHVlXCIsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgIHZhbHVlLmFkZElubGluZUZyYWdtZW50T24oXCJQcmljaW5nUGVyY2VudGFnZVZhbHVlXCIsIGZ1bmN0aW9uIChQcmljaW5nUGVyY2VudGFnZVZhbHVlKSB7XG4gICAgICAgICAgICBQcmljaW5nUGVyY2VudGFnZVZhbHVlLmFkZChcInBlcmNlbnRhZ2VcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdmFsdWUuYWRkSW5saW5lRnJhZ21lbnRPbihcIk1vbmV5VjJcIiwgZnVuY3Rpb24gKE1vbmV5VjIpIHtcbiAgICAgICAgICAgIE1vbmV5VjIuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICAgICAgTW9uZXlWMi5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBkaXNjb3VudEFsbG9jYXRpb25zLmFkZElubGluZUZyYWdtZW50T24oXCJDYXJ0Q29kZURpc2NvdW50QWxsb2NhdGlvblwiLCBmdW5jdGlvbiAoQ2FydENvZGVEaXNjb3VudEFsbG9jYXRpb24pIHtcbiAgICAgICAgQ2FydENvZGVEaXNjb3VudEFsbG9jYXRpb24uYWRkKFwiY29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGRJbmxpbmVGcmFnbWVudE9uKFwiQ2FydEF1dG9tYXRpY0Rpc2NvdW50QWxsb2NhdGlvblwiLCBmdW5jdGlvbiAoQ2FydEF1dG9tYXRpY0Rpc2NvdW50QWxsb2NhdGlvbikge1xuICAgICAgICBDYXJ0QXV0b21hdGljRGlzY291bnRBbGxvY2F0aW9uLmFkZChcInRpdGxlXCIpO1xuICAgICAgfSk7XG4gICAgICBkaXNjb3VudEFsbG9jYXRpb25zLmFkZElubGluZUZyYWdtZW50T24oXCJDYXJ0Q3VzdG9tRGlzY291bnRBbGxvY2F0aW9uXCIsIGZ1bmN0aW9uIChDYXJ0Q3VzdG9tRGlzY291bnRBbGxvY2F0aW9uKSB7XG4gICAgICAgIENhcnRDdXN0b21EaXNjb3VudEFsbG9jYXRpb24uYWRkKFwidGl0bGVcIik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImJ1eWVySWRlbnRpdHlcIiwgZnVuY3Rpb24gKGJ1eWVySWRlbnRpdHkpIHtcbiAgICAgIGJ1eWVySWRlbnRpdHkuYWRkKFwiY291bnRyeUNvZGVcIik7XG4gICAgICBidXllcklkZW50aXR5LmFkZChcInByZWZlcmVuY2VzXCIsIGZ1bmN0aW9uIChwcmVmZXJlbmNlcykge1xuICAgICAgICBwcmVmZXJlbmNlcy5hZGQoXCJkZWxpdmVyeVwiLCBmdW5jdGlvbiAoZGVsaXZlcnkpIHtcbiAgICAgICAgICBkZWxpdmVyeS5hZGQoXCJjb29yZGluYXRlc1wiLCBmdW5jdGlvbiAoY29vcmRpbmF0ZXMpIHtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzLmFkZChcImxhdGl0dWRlXCIpO1xuICAgICAgICAgICAgY29vcmRpbmF0ZXMuYWRkKFwibG9uZ2l0dWRlXCIpO1xuICAgICAgICAgICAgY29vcmRpbmF0ZXMuYWRkKFwiY291bnRyeUNvZGVcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZGVsaXZlcnkuYWRkKFwiZGVsaXZlcnlNZXRob2RcIik7XG4gICAgICAgICAgZGVsaXZlcnkuYWRkKFwicGlja3VwSGFuZGxlXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgcHJlZmVyZW5jZXMuYWRkKFwid2FsbGV0XCIpO1xuICAgICAgfSk7XG4gICAgICBidXllcklkZW50aXR5LmFkZChcImVtYWlsXCIpO1xuICAgICAgYnV5ZXJJZGVudGl0eS5hZGQoXCJwaG9uZVwiKTtcbiAgICAgIGJ1eWVySWRlbnRpdHkuYWRkKFwiY3VzdG9tZXJcIiwgZnVuY3Rpb24gKGN1c3RvbWVyKSB7XG4gICAgICAgIGN1c3RvbWVyLmFkZChcImVtYWlsXCIpO1xuICAgICAgfSk7XG4gICAgICBidXllcklkZW50aXR5LmFkZChcImRlbGl2ZXJ5QWRkcmVzc1ByZWZlcmVuY2VzXCIsIGZ1bmN0aW9uIChkZWxpdmVyeUFkZHJlc3NQcmVmZXJlbmNlcykge1xuICAgICAgICBkZWxpdmVyeUFkZHJlc3NQcmVmZXJlbmNlcy5hZGRJbmxpbmVGcmFnbWVudE9uKFwiTWFpbGluZ0FkZHJlc3NcIiwgZnVuY3Rpb24gKE1haWxpbmdBZGRyZXNzKSB7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwiYWRkcmVzczFcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwiYWRkcmVzczJcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwiY2l0eVwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJjb21wYW55XCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImNvdW50cnlcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwiY291bnRyeUNvZGVWMlwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJmaXJzdE5hbWVcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwiZm9ybWF0dGVkXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImZvcm1hdHRlZEFyZWFcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwibGFzdE5hbWVcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwibGF0aXR1ZGVcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwibG9uZ2l0dWRlXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcIm5hbWVcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwicGhvbmVcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwicHJvdmluY2VcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwicHJvdmluY2VDb2RlXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcInppcFwiKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImRlbGl2ZXJ5R3JvdXBzXCIsIHtcbiAgICAgIGFyZ3M6IHtcbiAgICAgICAgZmlyc3Q6IDEwXG4gICAgICB9XG4gICAgfSwgZnVuY3Rpb24gKGRlbGl2ZXJ5R3JvdXBzKSB7XG4gICAgICBkZWxpdmVyeUdyb3Vwcy5hZGQoXCJwYWdlSW5mb1wiLCBmdW5jdGlvbiAocGFnZUluZm8pIHtcbiAgICAgICAgcGFnZUluZm8uYWRkKFwiaGFzTmV4dFBhZ2VcIik7XG4gICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc1ByZXZpb3VzUGFnZVwiKTtcbiAgICAgIH0pO1xuICAgICAgZGVsaXZlcnlHcm91cHMuYWRkKFwiZWRnZXNcIiwgZnVuY3Rpb24gKGVkZ2VzKSB7XG4gICAgICAgIGVkZ2VzLmFkZChcIm5vZGVcIiwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICBub2RlLmFkZChcImlkXCIpO1xuICAgICAgICAgIG5vZGUuYWRkKFwiZGVsaXZlcnlBZGRyZXNzXCIsIGZ1bmN0aW9uIChkZWxpdmVyeUFkZHJlc3MpIHtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJhZGRyZXNzMlwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJhZGRyZXNzMVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJjaXR5XCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcImNvbXBhbnlcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwiY291bnRyeVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJjb3VudHJ5Q29kZVYyXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcImZpcnN0TmFtZVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJmb3JtYXR0ZWRcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwiZm9ybWF0dGVkQXJlYVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJsYXN0TmFtZVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJsYXRpdHVkZVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJsb25naXR1ZGVcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwibmFtZVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJwaG9uZVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJwcm92aW5jZVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJwcm92aW5jZUNvZGVcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgbm9kZS5hZGQoXCJkZWxpdmVyeU9wdGlvbnNcIiwgZnVuY3Rpb24gKGRlbGl2ZXJ5T3B0aW9ucykge1xuICAgICAgICAgICAgZGVsaXZlcnlPcHRpb25zLmFkZChcImNvZGVcIik7XG4gICAgICAgICAgICBkZWxpdmVyeU9wdGlvbnMuYWRkKFwiZGVsaXZlcnlNZXRob2RUeXBlXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlPcHRpb25zLmFkZChcImRlc2NyaXB0aW9uXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlPcHRpb25zLmFkZChcImVzdGltYXRlZENvc3RcIiwgZnVuY3Rpb24gKGVzdGltYXRlZENvc3QpIHtcbiAgICAgICAgICAgICAgZXN0aW1hdGVkQ29zdC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgICAgICAgIGVzdGltYXRlZENvc3QuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkZWxpdmVyeU9wdGlvbnMuYWRkKFwiaGFuZGxlXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlPcHRpb25zLmFkZChcInRpdGxlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIG5vZGUuYWRkKFwic2VsZWN0ZWREZWxpdmVyeU9wdGlvblwiLCBmdW5jdGlvbiAoc2VsZWN0ZWREZWxpdmVyeU9wdGlvbikge1xuICAgICAgICAgICAgc2VsZWN0ZWREZWxpdmVyeU9wdGlvbi5hZGQoXCJjb2RlXCIpO1xuICAgICAgICAgICAgc2VsZWN0ZWREZWxpdmVyeU9wdGlvbi5hZGQoXCJkZWxpdmVyeU1ldGhvZFR5cGVcIik7XG4gICAgICAgICAgICBzZWxlY3RlZERlbGl2ZXJ5T3B0aW9uLmFkZChcImRlc2NyaXB0aW9uXCIpO1xuICAgICAgICAgICAgc2VsZWN0ZWREZWxpdmVyeU9wdGlvbi5hZGQoXCJlc3RpbWF0ZWRDb3N0XCIsIGZ1bmN0aW9uIChlc3RpbWF0ZWRDb3N0KSB7XG4gICAgICAgICAgICAgIGVzdGltYXRlZENvc3QuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICAgICAgICBlc3RpbWF0ZWRDb3N0LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc2VsZWN0ZWREZWxpdmVyeU9wdGlvbi5hZGQoXCJoYW5kbGVcIik7XG4gICAgICAgICAgICBzZWxlY3RlZERlbGl2ZXJ5T3B0aW9uLmFkZChcInRpdGxlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIG5vZGUuYWRkKFwiY2FydExpbmVzXCIsIHtcbiAgICAgICAgICAgIGFyZ3M6IHtcbiAgICAgICAgICAgICAgZmlyc3Q6IDI1MFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIGZ1bmN0aW9uIChjYXJ0TGluZXMpIHtcbiAgICAgICAgICAgIGNhcnRMaW5lcy5hZGQoXCJwYWdlSW5mb1wiLCBmdW5jdGlvbiAocGFnZUluZm8pIHtcbiAgICAgICAgICAgICAgcGFnZUluZm8uYWRkKFwiaGFzTmV4dFBhZ2VcIik7XG4gICAgICAgICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc1ByZXZpb3VzUGFnZVwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY2FydExpbmVzLmFkZChcImVkZ2VzXCIsIGZ1bmN0aW9uIChlZGdlcykge1xuICAgICAgICAgICAgICBlZGdlcy5hZGQoXCJjdXJzb3JcIik7XG4gICAgICAgICAgICAgIGVkZ2VzLmFkZChcIm5vZGVcIiwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgICAgICBub2RlLmFkZChcImlkXCIpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiYXBwbGllZEdpZnRDYXJkc1wiLCBmdW5jdGlvbiAoYXBwbGllZEdpZnRDYXJkcykge1xuICAgICAgYXBwbGllZEdpZnRDYXJkcy5hZGRGcmFnbWVudChzcHJlYWRzLkFwcGxpZWRHaWZ0Q2FyZEZyYWdtZW50KTtcbiAgICB9KTtcbiAgICByb290LmFkZChcIm5vdGVcIik7XG4gIH0pO1xuICBzcHJlYWRzLkNhcnRVc2VyRXJyb3JGcmFnbWVudCA9IGRvY3VtZW50LmRlZmluZUZyYWdtZW50KFwiQ2FydFVzZXJFcnJvckZyYWdtZW50XCIsIFwiQ2FydFVzZXJFcnJvclwiLCBmdW5jdGlvbiAocm9vdCkge1xuICAgIHJvb3QuYWRkKFwiZmllbGRcIik7XG4gICAgcm9vdC5hZGQoXCJtZXNzYWdlXCIpO1xuICAgIHJvb3QuYWRkKFwiY29kZVwiKTtcbiAgfSk7XG4gIHNwcmVhZHMuQ2FydFdhcm5pbmdGcmFnbWVudCA9IGRvY3VtZW50LmRlZmluZUZyYWdtZW50KFwiQ2FydFdhcm5pbmdGcmFnbWVudFwiLCBcIkNhcnRXYXJuaW5nXCIsIGZ1bmN0aW9uIChyb290KSB7XG4gICAgcm9vdC5hZGQoXCJjb2RlXCIpO1xuICAgIHJvb3QuYWRkKFwibWVzc2FnZVwiKTtcbiAgfSk7XG4gIGRvY3VtZW50LmFkZE11dGF0aW9uKFwiQ2FydERpc2NvdW50Q29kZXNVcGRhdGVcIiwgW3ZhcmlhYmxlcy5DYXJ0RGlzY291bnRDb2Rlc1VwZGF0ZS5jYXJ0SWQsIHZhcmlhYmxlcy5DYXJ0RGlzY291bnRDb2Rlc1VwZGF0ZS5kaXNjb3VudENvZGVzXSwgZnVuY3Rpb24gKHJvb3QpIHtcbiAgICByb290LmFkZChcImNhcnREaXNjb3VudENvZGVzVXBkYXRlXCIsIHtcbiAgICAgIGFyZ3M6IHtcbiAgICAgICAgY2FydElkOiB2YXJpYWJsZXMuQ2FydERpc2NvdW50Q29kZXNVcGRhdGUuY2FydElkLFxuICAgICAgICBkaXNjb3VudENvZGVzOiB2YXJpYWJsZXMuQ2FydERpc2NvdW50Q29kZXNVcGRhdGUuZGlzY291bnRDb2Rlc1xuICAgICAgfVxuICAgIH0sIGZ1bmN0aW9uIChjYXJ0RGlzY291bnRDb2Rlc1VwZGF0ZSkge1xuICAgICAgY2FydERpc2NvdW50Q29kZXNVcGRhdGUuYWRkKFwiY2FydFwiLCBmdW5jdGlvbiAoY2FydCkge1xuICAgICAgICBjYXJ0LmFkZEZyYWdtZW50KHNwcmVhZHMuQ2FydEZyYWdtZW50KTtcbiAgICAgIH0pO1xuICAgICAgY2FydERpc2NvdW50Q29kZXNVcGRhdGUuYWRkKFwidXNlckVycm9yc1wiLCBmdW5jdGlvbiAodXNlckVycm9ycykge1xuICAgICAgICB1c2VyRXJyb3JzLmFkZEZyYWdtZW50KHNwcmVhZHMuQ2FydFVzZXJFcnJvckZyYWdtZW50KTtcbiAgICAgIH0pO1xuICAgICAgY2FydERpc2NvdW50Q29kZXNVcGRhdGUuYWRkKFwid2FybmluZ3NcIiwgZnVuY3Rpb24gKHdhcm5pbmdzKSB7XG4gICAgICAgIHdhcm5pbmdzLmFkZEZyYWdtZW50KHNwcmVhZHMuQ2FydFdhcm5pbmdGcmFnbWVudCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG4gIHJldHVybiBkb2N1bWVudDtcbn1cblxuZnVuY3Rpb24gcXVlcnkkMTcoY2xpZW50KSB7XG4gIHZhciBkb2N1bWVudCA9IGNsaWVudC5kb2N1bWVudCgpO1xuICB2YXIgc3ByZWFkcyA9IHt9O1xuICB2YXIgdmFyaWFibGVzID0ge307XG4gIHZhcmlhYmxlcy5DYXJ0R2lmdENhcmRDb2Rlc1VwZGF0ZSA9IHt9O1xuICB2YXJpYWJsZXMuQ2FydEdpZnRDYXJkQ29kZXNVcGRhdGUuY2FydElkID0gY2xpZW50LnZhcmlhYmxlKFwiY2FydElkXCIsIFwiSUQhXCIpO1xuICB2YXJpYWJsZXMuQ2FydEdpZnRDYXJkQ29kZXNVcGRhdGUuZ2lmdENhcmRDb2RlcyA9IGNsaWVudC52YXJpYWJsZShcImdpZnRDYXJkQ29kZXNcIiwgXCJbU3RyaW5nIV0hXCIpO1xuICBzcHJlYWRzLkNhcnRMaW5lRnJhZ21lbnQgPSBkb2N1bWVudC5kZWZpbmVGcmFnbWVudChcIkNhcnRMaW5lRnJhZ21lbnRcIiwgXCJCYXNlQ2FydExpbmVcIiwgZnVuY3Rpb24gKHJvb3QpIHtcbiAgICByb290LmFkZChcImlkXCIpO1xuICAgIHJvb3QuYWRkKFwibWVyY2hhbmRpc2VcIiwgZnVuY3Rpb24gKG1lcmNoYW5kaXNlKSB7XG4gICAgICBtZXJjaGFuZGlzZS5hZGRJbmxpbmVGcmFnbWVudE9uKFwiUHJvZHVjdFZhcmlhbnRcIiwgZnVuY3Rpb24gKFByb2R1Y3RWYXJpYW50KSB7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcImlkXCIpO1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJ0aXRsZVwiKTtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwiaW1hZ2VcIiwgZnVuY3Rpb24gKGltYWdlKSB7XG4gICAgICAgICAgaW1hZ2UuYWRkKFwiaWRcIik7XG4gICAgICAgICAgaW1hZ2UuYWRkKFwidXJsXCIsIHtcbiAgICAgICAgICAgIGFsaWFzOiBcInNyY1wiXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaW1hZ2UuYWRkKFwiYWx0VGV4dFwiKTtcbiAgICAgICAgICBpbWFnZS5hZGQoXCJ3aWR0aFwiKTtcbiAgICAgICAgICBpbWFnZS5hZGQoXCJoZWlnaHRcIik7XG4gICAgICAgIH0pO1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJwcm9kdWN0XCIsIGZ1bmN0aW9uIChwcm9kdWN0KSB7XG4gICAgICAgICAgcHJvZHVjdC5hZGQoXCJpZFwiKTtcbiAgICAgICAgICBwcm9kdWN0LmFkZChcImhhbmRsZVwiKTtcbiAgICAgICAgICBwcm9kdWN0LmFkZChcInRpdGxlXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwid2VpZ2h0XCIpO1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJhdmFpbGFibGVGb3JTYWxlXCIsIHtcbiAgICAgICAgICBhbGlhczogXCJhdmFpbGFibGVcIlxuICAgICAgICB9KTtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwic2t1XCIpO1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJzZWxlY3RlZE9wdGlvbnNcIiwgZnVuY3Rpb24gKHNlbGVjdGVkT3B0aW9ucykge1xuICAgICAgICAgIHNlbGVjdGVkT3B0aW9ucy5hZGQoXCJuYW1lXCIpO1xuICAgICAgICAgIHNlbGVjdGVkT3B0aW9ucy5hZGQoXCJ2YWx1ZVwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcImNvbXBhcmVBdFByaWNlXCIsIGZ1bmN0aW9uIChjb21wYXJlQXRQcmljZSkge1xuICAgICAgICAgIGNvbXBhcmVBdFByaWNlLmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgICBjb21wYXJlQXRQcmljZS5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICAgIH0pO1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJwcmljZVwiLCBmdW5jdGlvbiAocHJpY2UpIHtcbiAgICAgICAgICBwcmljZS5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgICAgcHJpY2UuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwidW5pdFByaWNlXCIsIGZ1bmN0aW9uICh1bml0UHJpY2UpIHtcbiAgICAgICAgICB1bml0UHJpY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICAgIHVuaXRQcmljZS5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICAgIH0pO1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJ1bml0UHJpY2VNZWFzdXJlbWVudFwiLCBmdW5jdGlvbiAodW5pdFByaWNlTWVhc3VyZW1lbnQpIHtcbiAgICAgICAgICB1bml0UHJpY2VNZWFzdXJlbWVudC5hZGQoXCJtZWFzdXJlZFR5cGVcIik7XG4gICAgICAgICAgdW5pdFByaWNlTWVhc3VyZW1lbnQuYWRkKFwicXVhbnRpdHlVbml0XCIpO1xuICAgICAgICAgIHVuaXRQcmljZU1lYXN1cmVtZW50LmFkZChcInF1YW50aXR5VmFsdWVcIik7XG4gICAgICAgICAgdW5pdFByaWNlTWVhc3VyZW1lbnQuYWRkKFwicmVmZXJlbmNlVW5pdFwiKTtcbiAgICAgICAgICB1bml0UHJpY2VNZWFzdXJlbWVudC5hZGQoXCJyZWZlcmVuY2VWYWx1ZVwiKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByb290LmFkZChcInF1YW50aXR5XCIpO1xuICAgIHJvb3QuYWRkKFwiYXR0cmlidXRlc1wiLCBmdW5jdGlvbiAoYXR0cmlidXRlcykge1xuICAgICAgYXR0cmlidXRlcy5hZGQoXCJrZXlcIik7XG4gICAgICBhdHRyaWJ1dGVzLmFkZChcInZhbHVlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiY29zdFwiLCBmdW5jdGlvbiAoY29zdCkge1xuICAgICAgY29zdC5hZGQoXCJ0b3RhbEFtb3VudFwiLCBmdW5jdGlvbiAodG90YWxBbW91bnQpIHtcbiAgICAgICAgdG90YWxBbW91bnQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICB0b3RhbEFtb3VudC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGNvc3QuYWRkKFwic3VidG90YWxBbW91bnRcIiwgZnVuY3Rpb24gKHN1YnRvdGFsQW1vdW50KSB7XG4gICAgICAgIHN1YnRvdGFsQW1vdW50LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgc3VidG90YWxBbW91bnQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBjb3N0LmFkZChcImFtb3VudFBlclF1YW50aXR5XCIsIGZ1bmN0aW9uIChhbW91bnRQZXJRdWFudGl0eSkge1xuICAgICAgICBhbW91bnRQZXJRdWFudGl0eS5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIGFtb3VudFBlclF1YW50aXR5LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgY29zdC5hZGQoXCJjb21wYXJlQXRBbW91bnRQZXJRdWFudGl0eVwiLCBmdW5jdGlvbiAoY29tcGFyZUF0QW1vdW50UGVyUXVhbnRpdHkpIHtcbiAgICAgICAgY29tcGFyZUF0QW1vdW50UGVyUXVhbnRpdHkuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICBjb21wYXJlQXRBbW91bnRQZXJRdWFudGl0eS5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImRpc2NvdW50QWxsb2NhdGlvbnNcIiwgZnVuY3Rpb24gKGRpc2NvdW50QWxsb2NhdGlvbnMpIHtcbiAgICAgIGRpc2NvdW50QWxsb2NhdGlvbnMuYWRkKFwiZGlzY291bnRlZEFtb3VudFwiLCBmdW5jdGlvbiAoZGlzY291bnRlZEFtb3VudCkge1xuICAgICAgICBkaXNjb3VudGVkQW1vdW50LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgZGlzY291bnRlZEFtb3VudC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGRpc2NvdW50QWxsb2NhdGlvbnMuYWRkKFwiZGlzY291bnRBcHBsaWNhdGlvblwiLCBmdW5jdGlvbiAoZGlzY291bnRBcHBsaWNhdGlvbikge1xuICAgICAgICBkaXNjb3VudEFwcGxpY2F0aW9uLmFkZChcInRhcmdldFR5cGVcIik7XG4gICAgICAgIGRpc2NvdW50QXBwbGljYXRpb24uYWRkKFwiYWxsb2NhdGlvbk1ldGhvZFwiKTtcbiAgICAgICAgZGlzY291bnRBcHBsaWNhdGlvbi5hZGQoXCJ0YXJnZXRTZWxlY3Rpb25cIik7XG4gICAgICAgIGRpc2NvdW50QXBwbGljYXRpb24uYWRkKFwidmFsdWVcIiwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgdmFsdWUuYWRkSW5saW5lRnJhZ21lbnRPbihcIlByaWNpbmdQZXJjZW50YWdlVmFsdWVcIiwgZnVuY3Rpb24gKFByaWNpbmdQZXJjZW50YWdlVmFsdWUpIHtcbiAgICAgICAgICAgIFByaWNpbmdQZXJjZW50YWdlVmFsdWUuYWRkKFwicGVyY2VudGFnZVwiKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB2YWx1ZS5hZGRJbmxpbmVGcmFnbWVudE9uKFwiTW9uZXlWMlwiLCBmdW5jdGlvbiAoTW9uZXlWMikge1xuICAgICAgICAgICAgTW9uZXlWMi5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgICAgICBNb25leVYyLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIGRpc2NvdW50QWxsb2NhdGlvbnMuYWRkSW5saW5lRnJhZ21lbnRPbihcIkNhcnRDb2RlRGlzY291bnRBbGxvY2F0aW9uXCIsIGZ1bmN0aW9uIChDYXJ0Q29kZURpc2NvdW50QWxsb2NhdGlvbikge1xuICAgICAgICBDYXJ0Q29kZURpc2NvdW50QWxsb2NhdGlvbi5hZGQoXCJjb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBkaXNjb3VudEFsbG9jYXRpb25zLmFkZElubGluZUZyYWdtZW50T24oXCJDYXJ0QXV0b21hdGljRGlzY291bnRBbGxvY2F0aW9uXCIsIGZ1bmN0aW9uIChDYXJ0QXV0b21hdGljRGlzY291bnRBbGxvY2F0aW9uKSB7XG4gICAgICAgIENhcnRBdXRvbWF0aWNEaXNjb3VudEFsbG9jYXRpb24uYWRkKFwidGl0bGVcIik7XG4gICAgICB9KTtcbiAgICAgIGRpc2NvdW50QWxsb2NhdGlvbnMuYWRkSW5saW5lRnJhZ21lbnRPbihcIkNhcnRDdXN0b21EaXNjb3VudEFsbG9jYXRpb25cIiwgZnVuY3Rpb24gKENhcnRDdXN0b21EaXNjb3VudEFsbG9jYXRpb24pIHtcbiAgICAgICAgQ2FydEN1c3RvbURpc2NvdW50QWxsb2NhdGlvbi5hZGQoXCJ0aXRsZVwiKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbiAgc3ByZWFkcy5BcHBsaWVkR2lmdENhcmRGcmFnbWVudCA9IGRvY3VtZW50LmRlZmluZUZyYWdtZW50KFwiQXBwbGllZEdpZnRDYXJkRnJhZ21lbnRcIiwgXCJBcHBsaWVkR2lmdENhcmRcIiwgZnVuY3Rpb24gKHJvb3QpIHtcbiAgICByb290LmFkZChcImFtb3VudFVzZWRcIiwgZnVuY3Rpb24gKGFtb3VudFVzZWQpIHtcbiAgICAgIGFtb3VudFVzZWQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgYW1vdW50VXNlZC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJhbW91bnRVc2VkXCIsIHtcbiAgICAgIGFsaWFzOiBcImFtb3VudFVzZWRWMlwiXG4gICAgfSwgZnVuY3Rpb24gKGFtb3VudFVzZWQpIHtcbiAgICAgIGFtb3VudFVzZWQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgYW1vdW50VXNlZC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJiYWxhbmNlXCIsIGZ1bmN0aW9uIChiYWxhbmNlKSB7XG4gICAgICBiYWxhbmNlLmFkZChcImFtb3VudFwiKTtcbiAgICAgIGJhbGFuY2UuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiYmFsYW5jZVwiLCB7XG4gICAgICBhbGlhczogXCJiYWxhbmNlVjJcIlxuICAgIH0sIGZ1bmN0aW9uIChiYWxhbmNlKSB7XG4gICAgICBiYWxhbmNlLmFkZChcImFtb3VudFwiKTtcbiAgICAgIGJhbGFuY2UuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwicHJlc2VudG1lbnRBbW91bnRVc2VkXCIsIGZ1bmN0aW9uIChwcmVzZW50bWVudEFtb3VudFVzZWQpIHtcbiAgICAgIHByZXNlbnRtZW50QW1vdW50VXNlZC5hZGQoXCJhbW91bnRcIik7XG4gICAgICBwcmVzZW50bWVudEFtb3VudFVzZWQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiaWRcIik7XG4gICAgcm9vdC5hZGQoXCJsYXN0Q2hhcmFjdGVyc1wiKTtcbiAgfSk7XG4gIHNwcmVhZHMuQ2FydEZyYWdtZW50ID0gZG9jdW1lbnQuZGVmaW5lRnJhZ21lbnQoXCJDYXJ0RnJhZ21lbnRcIiwgXCJDYXJ0XCIsIGZ1bmN0aW9uIChyb290KSB7XG4gICAgcm9vdC5hZGQoXCJpZFwiKTtcbiAgICByb290LmFkZChcImNyZWF0ZWRBdFwiKTtcbiAgICByb290LmFkZChcInVwZGF0ZWRBdFwiKTtcbiAgICByb290LmFkZChcImxpbmVzXCIsIHtcbiAgICAgIGFyZ3M6IHtcbiAgICAgICAgZmlyc3Q6IDI1MFxuICAgICAgfVxuICAgIH0sIGZ1bmN0aW9uIChsaW5lcykge1xuICAgICAgbGluZXMuYWRkKFwicGFnZUluZm9cIiwgZnVuY3Rpb24gKHBhZ2VJbmZvKSB7XG4gICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc05leHRQYWdlXCIpO1xuICAgICAgICBwYWdlSW5mby5hZGQoXCJoYXNQcmV2aW91c1BhZ2VcIik7XG4gICAgICB9KTtcbiAgICAgIGxpbmVzLmFkZChcImVkZ2VzXCIsIGZ1bmN0aW9uIChlZGdlcykge1xuICAgICAgICBlZGdlcy5hZGQoXCJjdXJzb3JcIik7XG4gICAgICAgIGVkZ2VzLmFkZChcIm5vZGVcIiwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICBub2RlLmFkZEZyYWdtZW50KHNwcmVhZHMuQ2FydExpbmVGcmFnbWVudCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJhdHRyaWJ1dGVzXCIsIGZ1bmN0aW9uIChhdHRyaWJ1dGVzKSB7XG4gICAgICBhdHRyaWJ1dGVzLmFkZChcImtleVwiKTtcbiAgICAgIGF0dHJpYnV0ZXMuYWRkKFwidmFsdWVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJjb3N0XCIsIGZ1bmN0aW9uIChjb3N0KSB7XG4gICAgICBjb3N0LmFkZChcImNoZWNrb3V0Q2hhcmdlQW1vdW50XCIsIGZ1bmN0aW9uIChjaGVja291dENoYXJnZUFtb3VudCkge1xuICAgICAgICBjaGVja291dENoYXJnZUFtb3VudC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIGNoZWNrb3V0Q2hhcmdlQW1vdW50LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgY29zdC5hZGQoXCJ0b3RhbEFtb3VudFwiLCBmdW5jdGlvbiAodG90YWxBbW91bnQpIHtcbiAgICAgICAgdG90YWxBbW91bnQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICB0b3RhbEFtb3VudC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGNvc3QuYWRkKFwic3VidG90YWxBbW91bnRcIiwgZnVuY3Rpb24gKHN1YnRvdGFsQW1vdW50KSB7XG4gICAgICAgIHN1YnRvdGFsQW1vdW50LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgc3VidG90YWxBbW91bnQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBjb3N0LmFkZChcInRvdGFsVGF4QW1vdW50XCIsIGZ1bmN0aW9uICh0b3RhbFRheEFtb3VudCkge1xuICAgICAgICB0b3RhbFRheEFtb3VudC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIHRvdGFsVGF4QW1vdW50LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgY29zdC5hZGQoXCJ0b3RhbER1dHlBbW91bnRcIiwgZnVuY3Rpb24gKHRvdGFsRHV0eUFtb3VudCkge1xuICAgICAgICB0b3RhbER1dHlBbW91bnQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICB0b3RhbER1dHlBbW91bnQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJjaGVja291dFVybFwiKTtcbiAgICByb290LmFkZChcImRpc2NvdW50Q29kZXNcIiwgZnVuY3Rpb24gKGRpc2NvdW50Q29kZXMpIHtcbiAgICAgIGRpc2NvdW50Q29kZXMuYWRkKFwiYXBwbGljYWJsZVwiKTtcbiAgICAgIGRpc2NvdW50Q29kZXMuYWRkKFwiY29kZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImRpc2NvdW50QWxsb2NhdGlvbnNcIiwgZnVuY3Rpb24gKGRpc2NvdW50QWxsb2NhdGlvbnMpIHtcbiAgICAgIGRpc2NvdW50QWxsb2NhdGlvbnMuYWRkKFwiZGlzY291bnRlZEFtb3VudFwiLCBmdW5jdGlvbiAoZGlzY291bnRlZEFtb3VudCkge1xuICAgICAgICBkaXNjb3VudGVkQW1vdW50LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgZGlzY291bnRlZEFtb3VudC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGRpc2NvdW50QWxsb2NhdGlvbnMuYWRkKFwiZGlzY291bnRBcHBsaWNhdGlvblwiLCBmdW5jdGlvbiAoZGlzY291bnRBcHBsaWNhdGlvbikge1xuICAgICAgICBkaXNjb3VudEFwcGxpY2F0aW9uLmFkZChcInRhcmdldFR5cGVcIik7XG4gICAgICAgIGRpc2NvdW50QXBwbGljYXRpb24uYWRkKFwiYWxsb2NhdGlvbk1ldGhvZFwiKTtcbiAgICAgICAgZGlzY291bnRBcHBsaWNhdGlvbi5hZGQoXCJ0YXJnZXRTZWxlY3Rpb25cIik7XG4gICAgICAgIGRpc2NvdW50QXBwbGljYXRpb24uYWRkKFwidmFsdWVcIiwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgdmFsdWUuYWRkSW5saW5lRnJhZ21lbnRPbihcIlByaWNpbmdQZXJjZW50YWdlVmFsdWVcIiwgZnVuY3Rpb24gKFByaWNpbmdQZXJjZW50YWdlVmFsdWUpIHtcbiAgICAgICAgICAgIFByaWNpbmdQZXJjZW50YWdlVmFsdWUuYWRkKFwicGVyY2VudGFnZVwiKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB2YWx1ZS5hZGRJbmxpbmVGcmFnbWVudE9uKFwiTW9uZXlWMlwiLCBmdW5jdGlvbiAoTW9uZXlWMikge1xuICAgICAgICAgICAgTW9uZXlWMi5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgICAgICBNb25leVYyLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIGRpc2NvdW50QWxsb2NhdGlvbnMuYWRkSW5saW5lRnJhZ21lbnRPbihcIkNhcnRDb2RlRGlzY291bnRBbGxvY2F0aW9uXCIsIGZ1bmN0aW9uIChDYXJ0Q29kZURpc2NvdW50QWxsb2NhdGlvbikge1xuICAgICAgICBDYXJ0Q29kZURpc2NvdW50QWxsb2NhdGlvbi5hZGQoXCJjb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBkaXNjb3VudEFsbG9jYXRpb25zLmFkZElubGluZUZyYWdtZW50T24oXCJDYXJ0QXV0b21hdGljRGlzY291bnRBbGxvY2F0aW9uXCIsIGZ1bmN0aW9uIChDYXJ0QXV0b21hdGljRGlzY291bnRBbGxvY2F0aW9uKSB7XG4gICAgICAgIENhcnRBdXRvbWF0aWNEaXNjb3VudEFsbG9jYXRpb24uYWRkKFwidGl0bGVcIik7XG4gICAgICB9KTtcbiAgICAgIGRpc2NvdW50QWxsb2NhdGlvbnMuYWRkSW5saW5lRnJhZ21lbnRPbihcIkNhcnRDdXN0b21EaXNjb3VudEFsbG9jYXRpb25cIiwgZnVuY3Rpb24gKENhcnRDdXN0b21EaXNjb3VudEFsbG9jYXRpb24pIHtcbiAgICAgICAgQ2FydEN1c3RvbURpc2NvdW50QWxsb2NhdGlvbi5hZGQoXCJ0aXRsZVwiKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiYnV5ZXJJZGVudGl0eVwiLCBmdW5jdGlvbiAoYnV5ZXJJZGVudGl0eSkge1xuICAgICAgYnV5ZXJJZGVudGl0eS5hZGQoXCJjb3VudHJ5Q29kZVwiKTtcbiAgICAgIGJ1eWVySWRlbnRpdHkuYWRkKFwicHJlZmVyZW5jZXNcIiwgZnVuY3Rpb24gKHByZWZlcmVuY2VzKSB7XG4gICAgICAgIHByZWZlcmVuY2VzLmFkZChcImRlbGl2ZXJ5XCIsIGZ1bmN0aW9uIChkZWxpdmVyeSkge1xuICAgICAgICAgIGRlbGl2ZXJ5LmFkZChcImNvb3JkaW5hdGVzXCIsIGZ1bmN0aW9uIChjb29yZGluYXRlcykge1xuICAgICAgICAgICAgY29vcmRpbmF0ZXMuYWRkKFwibGF0aXR1ZGVcIik7XG4gICAgICAgICAgICBjb29yZGluYXRlcy5hZGQoXCJsb25naXR1ZGVcIik7XG4gICAgICAgICAgICBjb29yZGluYXRlcy5hZGQoXCJjb3VudHJ5Q29kZVwiKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBkZWxpdmVyeS5hZGQoXCJkZWxpdmVyeU1ldGhvZFwiKTtcbiAgICAgICAgICBkZWxpdmVyeS5hZGQoXCJwaWNrdXBIYW5kbGVcIik7XG4gICAgICAgIH0pO1xuICAgICAgICBwcmVmZXJlbmNlcy5hZGQoXCJ3YWxsZXRcIik7XG4gICAgICB9KTtcbiAgICAgIGJ1eWVySWRlbnRpdHkuYWRkKFwiZW1haWxcIik7XG4gICAgICBidXllcklkZW50aXR5LmFkZChcInBob25lXCIpO1xuICAgICAgYnV5ZXJJZGVudGl0eS5hZGQoXCJjdXN0b21lclwiLCBmdW5jdGlvbiAoY3VzdG9tZXIpIHtcbiAgICAgICAgY3VzdG9tZXIuYWRkKFwiZW1haWxcIik7XG4gICAgICB9KTtcbiAgICAgIGJ1eWVySWRlbnRpdHkuYWRkKFwiZGVsaXZlcnlBZGRyZXNzUHJlZmVyZW5jZXNcIiwgZnVuY3Rpb24gKGRlbGl2ZXJ5QWRkcmVzc1ByZWZlcmVuY2VzKSB7XG4gICAgICAgIGRlbGl2ZXJ5QWRkcmVzc1ByZWZlcmVuY2VzLmFkZElubGluZUZyYWdtZW50T24oXCJNYWlsaW5nQWRkcmVzc1wiLCBmdW5jdGlvbiAoTWFpbGluZ0FkZHJlc3MpIHtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJhZGRyZXNzMVwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJhZGRyZXNzMlwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJjaXR5XCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImNvbXBhbnlcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwiY291bnRyeVwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJjb3VudHJ5Q29kZVYyXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImZpcnN0TmFtZVwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJmb3JtYXR0ZWRcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwiZm9ybWF0dGVkQXJlYVwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJsYXN0TmFtZVwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJsYXRpdHVkZVwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJsb25naXR1ZGVcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwibmFtZVwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJwaG9uZVwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJwcm92aW5jZVwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJwcm92aW5jZUNvZGVcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwiemlwXCIpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiZGVsaXZlcnlHcm91cHNcIiwge1xuICAgICAgYXJnczoge1xuICAgICAgICBmaXJzdDogMTBcbiAgICAgIH1cbiAgICB9LCBmdW5jdGlvbiAoZGVsaXZlcnlHcm91cHMpIHtcbiAgICAgIGRlbGl2ZXJ5R3JvdXBzLmFkZChcInBhZ2VJbmZvXCIsIGZ1bmN0aW9uIChwYWdlSW5mbykge1xuICAgICAgICBwYWdlSW5mby5hZGQoXCJoYXNOZXh0UGFnZVwiKTtcbiAgICAgICAgcGFnZUluZm8uYWRkKFwiaGFzUHJldmlvdXNQYWdlXCIpO1xuICAgICAgfSk7XG4gICAgICBkZWxpdmVyeUdyb3Vwcy5hZGQoXCJlZGdlc1wiLCBmdW5jdGlvbiAoZWRnZXMpIHtcbiAgICAgICAgZWRnZXMuYWRkKFwibm9kZVwiLCBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgIG5vZGUuYWRkKFwiaWRcIik7XG4gICAgICAgICAgbm9kZS5hZGQoXCJkZWxpdmVyeUFkZHJlc3NcIiwgZnVuY3Rpb24gKGRlbGl2ZXJ5QWRkcmVzcykge1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcImFkZHJlc3MyXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcImFkZHJlc3MxXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcImNpdHlcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwiY29tcGFueVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJjb3VudHJ5XCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcImNvdW50cnlDb2RlVjJcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwiZmlyc3ROYW1lXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcImZvcm1hdHRlZFwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJmb3JtYXR0ZWRBcmVhXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcImxhc3ROYW1lXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcImxhdGl0dWRlXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcImxvbmdpdHVkZVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJuYW1lXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcInBob25lXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcInByb3ZpbmNlXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcInByb3ZpbmNlQ29kZVwiKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBub2RlLmFkZChcImRlbGl2ZXJ5T3B0aW9uc1wiLCBmdW5jdGlvbiAoZGVsaXZlcnlPcHRpb25zKSB7XG4gICAgICAgICAgICBkZWxpdmVyeU9wdGlvbnMuYWRkKFwiY29kZVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5T3B0aW9ucy5hZGQoXCJkZWxpdmVyeU1ldGhvZFR5cGVcIik7XG4gICAgICAgICAgICBkZWxpdmVyeU9wdGlvbnMuYWRkKFwiZGVzY3JpcHRpb25cIik7XG4gICAgICAgICAgICBkZWxpdmVyeU9wdGlvbnMuYWRkKFwiZXN0aW1hdGVkQ29zdFwiLCBmdW5jdGlvbiAoZXN0aW1hdGVkQ29zdCkge1xuICAgICAgICAgICAgICBlc3RpbWF0ZWRDb3N0LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgICAgICAgZXN0aW1hdGVkQ29zdC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5T3B0aW9ucy5hZGQoXCJoYW5kbGVcIik7XG4gICAgICAgICAgICBkZWxpdmVyeU9wdGlvbnMuYWRkKFwidGl0bGVcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgbm9kZS5hZGQoXCJzZWxlY3RlZERlbGl2ZXJ5T3B0aW9uXCIsIGZ1bmN0aW9uIChzZWxlY3RlZERlbGl2ZXJ5T3B0aW9uKSB7XG4gICAgICAgICAgICBzZWxlY3RlZERlbGl2ZXJ5T3B0aW9uLmFkZChcImNvZGVcIik7XG4gICAgICAgICAgICBzZWxlY3RlZERlbGl2ZXJ5T3B0aW9uLmFkZChcImRlbGl2ZXJ5TWV0aG9kVHlwZVwiKTtcbiAgICAgICAgICAgIHNlbGVjdGVkRGVsaXZlcnlPcHRpb24uYWRkKFwiZGVzY3JpcHRpb25cIik7XG4gICAgICAgICAgICBzZWxlY3RlZERlbGl2ZXJ5T3B0aW9uLmFkZChcImVzdGltYXRlZENvc3RcIiwgZnVuY3Rpb24gKGVzdGltYXRlZENvc3QpIHtcbiAgICAgICAgICAgICAgZXN0aW1hdGVkQ29zdC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgICAgICAgIGVzdGltYXRlZENvc3QuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzZWxlY3RlZERlbGl2ZXJ5T3B0aW9uLmFkZChcImhhbmRsZVwiKTtcbiAgICAgICAgICAgIHNlbGVjdGVkRGVsaXZlcnlPcHRpb24uYWRkKFwidGl0bGVcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgbm9kZS5hZGQoXCJjYXJ0TGluZXNcIiwge1xuICAgICAgICAgICAgYXJnczoge1xuICAgICAgICAgICAgICBmaXJzdDogMjUwXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSwgZnVuY3Rpb24gKGNhcnRMaW5lcykge1xuICAgICAgICAgICAgY2FydExpbmVzLmFkZChcInBhZ2VJbmZvXCIsIGZ1bmN0aW9uIChwYWdlSW5mbykge1xuICAgICAgICAgICAgICBwYWdlSW5mby5hZGQoXCJoYXNOZXh0UGFnZVwiKTtcbiAgICAgICAgICAgICAgcGFnZUluZm8uYWRkKFwiaGFzUHJldmlvdXNQYWdlXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjYXJ0TGluZXMuYWRkKFwiZWRnZXNcIiwgZnVuY3Rpb24gKGVkZ2VzKSB7XG4gICAgICAgICAgICAgIGVkZ2VzLmFkZChcImN1cnNvclwiKTtcbiAgICAgICAgICAgICAgZWRnZXMuYWRkKFwibm9kZVwiLCBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgICAgIG5vZGUuYWRkKFwiaWRcIik7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJhcHBsaWVkR2lmdENhcmRzXCIsIGZ1bmN0aW9uIChhcHBsaWVkR2lmdENhcmRzKSB7XG4gICAgICBhcHBsaWVkR2lmdENhcmRzLmFkZEZyYWdtZW50KHNwcmVhZHMuQXBwbGllZEdpZnRDYXJkRnJhZ21lbnQpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwibm90ZVwiKTtcbiAgfSk7XG4gIHNwcmVhZHMuQ2FydFVzZXJFcnJvckZyYWdtZW50ID0gZG9jdW1lbnQuZGVmaW5lRnJhZ21lbnQoXCJDYXJ0VXNlckVycm9yRnJhZ21lbnRcIiwgXCJDYXJ0VXNlckVycm9yXCIsIGZ1bmN0aW9uIChyb290KSB7XG4gICAgcm9vdC5hZGQoXCJmaWVsZFwiKTtcbiAgICByb290LmFkZChcIm1lc3NhZ2VcIik7XG4gICAgcm9vdC5hZGQoXCJjb2RlXCIpO1xuICB9KTtcbiAgc3ByZWFkcy5DYXJ0V2FybmluZ0ZyYWdtZW50ID0gZG9jdW1lbnQuZGVmaW5lRnJhZ21lbnQoXCJDYXJ0V2FybmluZ0ZyYWdtZW50XCIsIFwiQ2FydFdhcm5pbmdcIiwgZnVuY3Rpb24gKHJvb3QpIHtcbiAgICByb290LmFkZChcImNvZGVcIik7XG4gICAgcm9vdC5hZGQoXCJtZXNzYWdlXCIpO1xuICB9KTtcbiAgZG9jdW1lbnQuYWRkTXV0YXRpb24oXCJDYXJ0R2lmdENhcmRDb2Rlc1VwZGF0ZVwiLCBbdmFyaWFibGVzLkNhcnRHaWZ0Q2FyZENvZGVzVXBkYXRlLmNhcnRJZCwgdmFyaWFibGVzLkNhcnRHaWZ0Q2FyZENvZGVzVXBkYXRlLmdpZnRDYXJkQ29kZXNdLCBmdW5jdGlvbiAocm9vdCkge1xuICAgIHJvb3QuYWRkKFwiY2FydEdpZnRDYXJkQ29kZXNVcGRhdGVcIiwge1xuICAgICAgYXJnczoge1xuICAgICAgICBjYXJ0SWQ6IHZhcmlhYmxlcy5DYXJ0R2lmdENhcmRDb2Rlc1VwZGF0ZS5jYXJ0SWQsXG4gICAgICAgIGdpZnRDYXJkQ29kZXM6IHZhcmlhYmxlcy5DYXJ0R2lmdENhcmRDb2Rlc1VwZGF0ZS5naWZ0Q2FyZENvZGVzXG4gICAgICB9XG4gICAgfSwgZnVuY3Rpb24gKGNhcnRHaWZ0Q2FyZENvZGVzVXBkYXRlKSB7XG4gICAgICBjYXJ0R2lmdENhcmRDb2Rlc1VwZGF0ZS5hZGQoXCJjYXJ0XCIsIGZ1bmN0aW9uIChjYXJ0KSB7XG4gICAgICAgIGNhcnQuYWRkRnJhZ21lbnQoc3ByZWFkcy5DYXJ0RnJhZ21lbnQpO1xuICAgICAgfSk7XG4gICAgICBjYXJ0R2lmdENhcmRDb2Rlc1VwZGF0ZS5hZGQoXCJ1c2VyRXJyb3JzXCIsIGZ1bmN0aW9uICh1c2VyRXJyb3JzKSB7XG4gICAgICAgIHVzZXJFcnJvcnMuYWRkRnJhZ21lbnQoc3ByZWFkcy5DYXJ0VXNlckVycm9yRnJhZ21lbnQpO1xuICAgICAgfSk7XG4gICAgICBjYXJ0R2lmdENhcmRDb2Rlc1VwZGF0ZS5hZGQoXCJ3YXJuaW5nc1wiLCBmdW5jdGlvbiAod2FybmluZ3MpIHtcbiAgICAgICAgd2FybmluZ3MuYWRkRnJhZ21lbnQoc3ByZWFkcy5DYXJ0V2FybmluZ0ZyYWdtZW50KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIGRvY3VtZW50O1xufVxuXG5mdW5jdGlvbiBxdWVyeSQxOChjbGllbnQpIHtcbiAgdmFyIGRvY3VtZW50ID0gY2xpZW50LmRvY3VtZW50KCk7XG4gIHZhciBzcHJlYWRzID0ge307XG4gIHZhciB2YXJpYWJsZXMgPSB7fTtcbiAgdmFyaWFibGVzLkNhcnRMaW5lc0FkZCA9IHt9O1xuICB2YXJpYWJsZXMuQ2FydExpbmVzQWRkLmNhcnRJZCA9IGNsaWVudC52YXJpYWJsZShcImNhcnRJZFwiLCBcIklEIVwiKTtcbiAgdmFyaWFibGVzLkNhcnRMaW5lc0FkZC5saW5lcyA9IGNsaWVudC52YXJpYWJsZShcImxpbmVzXCIsIFwiW0NhcnRMaW5lSW5wdXQhXSFcIik7XG4gIHNwcmVhZHMuQ2FydExpbmVGcmFnbWVudCA9IGRvY3VtZW50LmRlZmluZUZyYWdtZW50KFwiQ2FydExpbmVGcmFnbWVudFwiLCBcIkJhc2VDYXJ0TGluZVwiLCBmdW5jdGlvbiAocm9vdCkge1xuICAgIHJvb3QuYWRkKFwiaWRcIik7XG4gICAgcm9vdC5hZGQoXCJtZXJjaGFuZGlzZVwiLCBmdW5jdGlvbiAobWVyY2hhbmRpc2UpIHtcbiAgICAgIG1lcmNoYW5kaXNlLmFkZElubGluZUZyYWdtZW50T24oXCJQcm9kdWN0VmFyaWFudFwiLCBmdW5jdGlvbiAoUHJvZHVjdFZhcmlhbnQpIHtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwiaWRcIik7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcInRpdGxlXCIpO1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJpbWFnZVwiLCBmdW5jdGlvbiAoaW1hZ2UpIHtcbiAgICAgICAgICBpbWFnZS5hZGQoXCJpZFwiKTtcbiAgICAgICAgICBpbWFnZS5hZGQoXCJ1cmxcIiwge1xuICAgICAgICAgICAgYWxpYXM6IFwic3JjXCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpbWFnZS5hZGQoXCJhbHRUZXh0XCIpO1xuICAgICAgICAgIGltYWdlLmFkZChcIndpZHRoXCIpO1xuICAgICAgICAgIGltYWdlLmFkZChcImhlaWdodFwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcInByb2R1Y3RcIiwgZnVuY3Rpb24gKHByb2R1Y3QpIHtcbiAgICAgICAgICBwcm9kdWN0LmFkZChcImlkXCIpO1xuICAgICAgICAgIHByb2R1Y3QuYWRkKFwiaGFuZGxlXCIpO1xuICAgICAgICAgIHByb2R1Y3QuYWRkKFwidGl0bGVcIik7XG4gICAgICAgIH0pO1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJ3ZWlnaHRcIik7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcImF2YWlsYWJsZUZvclNhbGVcIiwge1xuICAgICAgICAgIGFsaWFzOiBcImF2YWlsYWJsZVwiXG4gICAgICAgIH0pO1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJza3VcIik7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcInNlbGVjdGVkT3B0aW9uc1wiLCBmdW5jdGlvbiAoc2VsZWN0ZWRPcHRpb25zKSB7XG4gICAgICAgICAgc2VsZWN0ZWRPcHRpb25zLmFkZChcIm5hbWVcIik7XG4gICAgICAgICAgc2VsZWN0ZWRPcHRpb25zLmFkZChcInZhbHVlXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwiY29tcGFyZUF0UHJpY2VcIiwgZnVuY3Rpb24gKGNvbXBhcmVBdFByaWNlKSB7XG4gICAgICAgICAgY29tcGFyZUF0UHJpY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICAgIGNvbXBhcmVBdFByaWNlLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcInByaWNlXCIsIGZ1bmN0aW9uIChwcmljZSkge1xuICAgICAgICAgIHByaWNlLmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgICBwcmljZS5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICAgIH0pO1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJ1bml0UHJpY2VcIiwgZnVuY3Rpb24gKHVuaXRQcmljZSkge1xuICAgICAgICAgIHVuaXRQcmljZS5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgICAgdW5pdFByaWNlLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcInVuaXRQcmljZU1lYXN1cmVtZW50XCIsIGZ1bmN0aW9uICh1bml0UHJpY2VNZWFzdXJlbWVudCkge1xuICAgICAgICAgIHVuaXRQcmljZU1lYXN1cmVtZW50LmFkZChcIm1lYXN1cmVkVHlwZVwiKTtcbiAgICAgICAgICB1bml0UHJpY2VNZWFzdXJlbWVudC5hZGQoXCJxdWFudGl0eVVuaXRcIik7XG4gICAgICAgICAgdW5pdFByaWNlTWVhc3VyZW1lbnQuYWRkKFwicXVhbnRpdHlWYWx1ZVwiKTtcbiAgICAgICAgICB1bml0UHJpY2VNZWFzdXJlbWVudC5hZGQoXCJyZWZlcmVuY2VVbml0XCIpO1xuICAgICAgICAgIHVuaXRQcmljZU1lYXN1cmVtZW50LmFkZChcInJlZmVyZW5jZVZhbHVlXCIpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwicXVhbnRpdHlcIik7XG4gICAgcm9vdC5hZGQoXCJhdHRyaWJ1dGVzXCIsIGZ1bmN0aW9uIChhdHRyaWJ1dGVzKSB7XG4gICAgICBhdHRyaWJ1dGVzLmFkZChcImtleVwiKTtcbiAgICAgIGF0dHJpYnV0ZXMuYWRkKFwidmFsdWVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJjb3N0XCIsIGZ1bmN0aW9uIChjb3N0KSB7XG4gICAgICBjb3N0LmFkZChcInRvdGFsQW1vdW50XCIsIGZ1bmN0aW9uICh0b3RhbEFtb3VudCkge1xuICAgICAgICB0b3RhbEFtb3VudC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIHRvdGFsQW1vdW50LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgY29zdC5hZGQoXCJzdWJ0b3RhbEFtb3VudFwiLCBmdW5jdGlvbiAoc3VidG90YWxBbW91bnQpIHtcbiAgICAgICAgc3VidG90YWxBbW91bnQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICBzdWJ0b3RhbEFtb3VudC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGNvc3QuYWRkKFwiYW1vdW50UGVyUXVhbnRpdHlcIiwgZnVuY3Rpb24gKGFtb3VudFBlclF1YW50aXR5KSB7XG4gICAgICAgIGFtb3VudFBlclF1YW50aXR5LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgYW1vdW50UGVyUXVhbnRpdHkuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBjb3N0LmFkZChcImNvbXBhcmVBdEFtb3VudFBlclF1YW50aXR5XCIsIGZ1bmN0aW9uIChjb21wYXJlQXRBbW91bnRQZXJRdWFudGl0eSkge1xuICAgICAgICBjb21wYXJlQXRBbW91bnRQZXJRdWFudGl0eS5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIGNvbXBhcmVBdEFtb3VudFBlclF1YW50aXR5LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiZGlzY291bnRBbGxvY2F0aW9uc1wiLCBmdW5jdGlvbiAoZGlzY291bnRBbGxvY2F0aW9ucykge1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGQoXCJkaXNjb3VudGVkQW1vdW50XCIsIGZ1bmN0aW9uIChkaXNjb3VudGVkQW1vdW50KSB7XG4gICAgICAgIGRpc2NvdW50ZWRBbW91bnQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICBkaXNjb3VudGVkQW1vdW50LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGQoXCJkaXNjb3VudEFwcGxpY2F0aW9uXCIsIGZ1bmN0aW9uIChkaXNjb3VudEFwcGxpY2F0aW9uKSB7XG4gICAgICAgIGRpc2NvdW50QXBwbGljYXRpb24uYWRkKFwidGFyZ2V0VHlwZVwiKTtcbiAgICAgICAgZGlzY291bnRBcHBsaWNhdGlvbi5hZGQoXCJhbGxvY2F0aW9uTWV0aG9kXCIpO1xuICAgICAgICBkaXNjb3VudEFwcGxpY2F0aW9uLmFkZChcInRhcmdldFNlbGVjdGlvblwiKTtcbiAgICAgICAgZGlzY291bnRBcHBsaWNhdGlvbi5hZGQoXCJ2YWx1ZVwiLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICB2YWx1ZS5hZGRJbmxpbmVGcmFnbWVudE9uKFwiUHJpY2luZ1BlcmNlbnRhZ2VWYWx1ZVwiLCBmdW5jdGlvbiAoUHJpY2luZ1BlcmNlbnRhZ2VWYWx1ZSkge1xuICAgICAgICAgICAgUHJpY2luZ1BlcmNlbnRhZ2VWYWx1ZS5hZGQoXCJwZXJjZW50YWdlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHZhbHVlLmFkZElubGluZUZyYWdtZW50T24oXCJNb25leVYyXCIsIGZ1bmN0aW9uIChNb25leVYyKSB7XG4gICAgICAgICAgICBNb25leVYyLmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgICAgIE1vbmV5VjIuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGRJbmxpbmVGcmFnbWVudE9uKFwiQ2FydENvZGVEaXNjb3VudEFsbG9jYXRpb25cIiwgZnVuY3Rpb24gKENhcnRDb2RlRGlzY291bnRBbGxvY2F0aW9uKSB7XG4gICAgICAgIENhcnRDb2RlRGlzY291bnRBbGxvY2F0aW9uLmFkZChcImNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGRpc2NvdW50QWxsb2NhdGlvbnMuYWRkSW5saW5lRnJhZ21lbnRPbihcIkNhcnRBdXRvbWF0aWNEaXNjb3VudEFsbG9jYXRpb25cIiwgZnVuY3Rpb24gKENhcnRBdXRvbWF0aWNEaXNjb3VudEFsbG9jYXRpb24pIHtcbiAgICAgICAgQ2FydEF1dG9tYXRpY0Rpc2NvdW50QWxsb2NhdGlvbi5hZGQoXCJ0aXRsZVwiKTtcbiAgICAgIH0pO1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGRJbmxpbmVGcmFnbWVudE9uKFwiQ2FydEN1c3RvbURpc2NvdW50QWxsb2NhdGlvblwiLCBmdW5jdGlvbiAoQ2FydEN1c3RvbURpc2NvdW50QWxsb2NhdGlvbikge1xuICAgICAgICBDYXJ0Q3VzdG9tRGlzY291bnRBbGxvY2F0aW9uLmFkZChcInRpdGxlXCIpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuICBzcHJlYWRzLkFwcGxpZWRHaWZ0Q2FyZEZyYWdtZW50ID0gZG9jdW1lbnQuZGVmaW5lRnJhZ21lbnQoXCJBcHBsaWVkR2lmdENhcmRGcmFnbWVudFwiLCBcIkFwcGxpZWRHaWZ0Q2FyZFwiLCBmdW5jdGlvbiAocm9vdCkge1xuICAgIHJvb3QuYWRkKFwiYW1vdW50VXNlZFwiLCBmdW5jdGlvbiAoYW1vdW50VXNlZCkge1xuICAgICAgYW1vdW50VXNlZC5hZGQoXCJhbW91bnRcIik7XG4gICAgICBhbW91bnRVc2VkLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImFtb3VudFVzZWRcIiwge1xuICAgICAgYWxpYXM6IFwiYW1vdW50VXNlZFYyXCJcbiAgICB9LCBmdW5jdGlvbiAoYW1vdW50VXNlZCkge1xuICAgICAgYW1vdW50VXNlZC5hZGQoXCJhbW91bnRcIik7XG4gICAgICBhbW91bnRVc2VkLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImJhbGFuY2VcIiwgZnVuY3Rpb24gKGJhbGFuY2UpIHtcbiAgICAgIGJhbGFuY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgYmFsYW5jZS5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJiYWxhbmNlXCIsIHtcbiAgICAgIGFsaWFzOiBcImJhbGFuY2VWMlwiXG4gICAgfSwgZnVuY3Rpb24gKGJhbGFuY2UpIHtcbiAgICAgIGJhbGFuY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgYmFsYW5jZS5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJwcmVzZW50bWVudEFtb3VudFVzZWRcIiwgZnVuY3Rpb24gKHByZXNlbnRtZW50QW1vdW50VXNlZCkge1xuICAgICAgcHJlc2VudG1lbnRBbW91bnRVc2VkLmFkZChcImFtb3VudFwiKTtcbiAgICAgIHByZXNlbnRtZW50QW1vdW50VXNlZC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJpZFwiKTtcbiAgICByb290LmFkZChcImxhc3RDaGFyYWN0ZXJzXCIpO1xuICB9KTtcbiAgc3ByZWFkcy5DYXJ0RnJhZ21lbnQgPSBkb2N1bWVudC5kZWZpbmVGcmFnbWVudChcIkNhcnRGcmFnbWVudFwiLCBcIkNhcnRcIiwgZnVuY3Rpb24gKHJvb3QpIHtcbiAgICByb290LmFkZChcImlkXCIpO1xuICAgIHJvb3QuYWRkKFwiY3JlYXRlZEF0XCIpO1xuICAgIHJvb3QuYWRkKFwidXBkYXRlZEF0XCIpO1xuICAgIHJvb3QuYWRkKFwibGluZXNcIiwge1xuICAgICAgYXJnczoge1xuICAgICAgICBmaXJzdDogMjUwXG4gICAgICB9XG4gICAgfSwgZnVuY3Rpb24gKGxpbmVzKSB7XG4gICAgICBsaW5lcy5hZGQoXCJwYWdlSW5mb1wiLCBmdW5jdGlvbiAocGFnZUluZm8pIHtcbiAgICAgICAgcGFnZUluZm8uYWRkKFwiaGFzTmV4dFBhZ2VcIik7XG4gICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc1ByZXZpb3VzUGFnZVwiKTtcbiAgICAgIH0pO1xuICAgICAgbGluZXMuYWRkKFwiZWRnZXNcIiwgZnVuY3Rpb24gKGVkZ2VzKSB7XG4gICAgICAgIGVkZ2VzLmFkZChcImN1cnNvclwiKTtcbiAgICAgICAgZWRnZXMuYWRkKFwibm9kZVwiLCBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgIG5vZGUuYWRkRnJhZ21lbnQoc3ByZWFkcy5DYXJ0TGluZUZyYWdtZW50KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImF0dHJpYnV0ZXNcIiwgZnVuY3Rpb24gKGF0dHJpYnV0ZXMpIHtcbiAgICAgIGF0dHJpYnV0ZXMuYWRkKFwia2V5XCIpO1xuICAgICAgYXR0cmlidXRlcy5hZGQoXCJ2YWx1ZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImNvc3RcIiwgZnVuY3Rpb24gKGNvc3QpIHtcbiAgICAgIGNvc3QuYWRkKFwiY2hlY2tvdXRDaGFyZ2VBbW91bnRcIiwgZnVuY3Rpb24gKGNoZWNrb3V0Q2hhcmdlQW1vdW50KSB7XG4gICAgICAgIGNoZWNrb3V0Q2hhcmdlQW1vdW50LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgY2hlY2tvdXRDaGFyZ2VBbW91bnQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBjb3N0LmFkZChcInRvdGFsQW1vdW50XCIsIGZ1bmN0aW9uICh0b3RhbEFtb3VudCkge1xuICAgICAgICB0b3RhbEFtb3VudC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIHRvdGFsQW1vdW50LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgY29zdC5hZGQoXCJzdWJ0b3RhbEFtb3VudFwiLCBmdW5jdGlvbiAoc3VidG90YWxBbW91bnQpIHtcbiAgICAgICAgc3VidG90YWxBbW91bnQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICBzdWJ0b3RhbEFtb3VudC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGNvc3QuYWRkKFwidG90YWxUYXhBbW91bnRcIiwgZnVuY3Rpb24gKHRvdGFsVGF4QW1vdW50KSB7XG4gICAgICAgIHRvdGFsVGF4QW1vdW50LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgdG90YWxUYXhBbW91bnQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBjb3N0LmFkZChcInRvdGFsRHV0eUFtb3VudFwiLCBmdW5jdGlvbiAodG90YWxEdXR5QW1vdW50KSB7XG4gICAgICAgIHRvdGFsRHV0eUFtb3VudC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIHRvdGFsRHV0eUFtb3VudC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImNoZWNrb3V0VXJsXCIpO1xuICAgIHJvb3QuYWRkKFwiZGlzY291bnRDb2Rlc1wiLCBmdW5jdGlvbiAoZGlzY291bnRDb2Rlcykge1xuICAgICAgZGlzY291bnRDb2Rlcy5hZGQoXCJhcHBsaWNhYmxlXCIpO1xuICAgICAgZGlzY291bnRDb2Rlcy5hZGQoXCJjb2RlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiZGlzY291bnRBbGxvY2F0aW9uc1wiLCBmdW5jdGlvbiAoZGlzY291bnRBbGxvY2F0aW9ucykge1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGQoXCJkaXNjb3VudGVkQW1vdW50XCIsIGZ1bmN0aW9uIChkaXNjb3VudGVkQW1vdW50KSB7XG4gICAgICAgIGRpc2NvdW50ZWRBbW91bnQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICBkaXNjb3VudGVkQW1vdW50LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGQoXCJkaXNjb3VudEFwcGxpY2F0aW9uXCIsIGZ1bmN0aW9uIChkaXNjb3VudEFwcGxpY2F0aW9uKSB7XG4gICAgICAgIGRpc2NvdW50QXBwbGljYXRpb24uYWRkKFwidGFyZ2V0VHlwZVwiKTtcbiAgICAgICAgZGlzY291bnRBcHBsaWNhdGlvbi5hZGQoXCJhbGxvY2F0aW9uTWV0aG9kXCIpO1xuICAgICAgICBkaXNjb3VudEFwcGxpY2F0aW9uLmFkZChcInRhcmdldFNlbGVjdGlvblwiKTtcbiAgICAgICAgZGlzY291bnRBcHBsaWNhdGlvbi5hZGQoXCJ2YWx1ZVwiLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICB2YWx1ZS5hZGRJbmxpbmVGcmFnbWVudE9uKFwiUHJpY2luZ1BlcmNlbnRhZ2VWYWx1ZVwiLCBmdW5jdGlvbiAoUHJpY2luZ1BlcmNlbnRhZ2VWYWx1ZSkge1xuICAgICAgICAgICAgUHJpY2luZ1BlcmNlbnRhZ2VWYWx1ZS5hZGQoXCJwZXJjZW50YWdlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHZhbHVlLmFkZElubGluZUZyYWdtZW50T24oXCJNb25leVYyXCIsIGZ1bmN0aW9uIChNb25leVYyKSB7XG4gICAgICAgICAgICBNb25leVYyLmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgICAgIE1vbmV5VjIuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGRJbmxpbmVGcmFnbWVudE9uKFwiQ2FydENvZGVEaXNjb3VudEFsbG9jYXRpb25cIiwgZnVuY3Rpb24gKENhcnRDb2RlRGlzY291bnRBbGxvY2F0aW9uKSB7XG4gICAgICAgIENhcnRDb2RlRGlzY291bnRBbGxvY2F0aW9uLmFkZChcImNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGRpc2NvdW50QWxsb2NhdGlvbnMuYWRkSW5saW5lRnJhZ21lbnRPbihcIkNhcnRBdXRvbWF0aWNEaXNjb3VudEFsbG9jYXRpb25cIiwgZnVuY3Rpb24gKENhcnRBdXRvbWF0aWNEaXNjb3VudEFsbG9jYXRpb24pIHtcbiAgICAgICAgQ2FydEF1dG9tYXRpY0Rpc2NvdW50QWxsb2NhdGlvbi5hZGQoXCJ0aXRsZVwiKTtcbiAgICAgIH0pO1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGRJbmxpbmVGcmFnbWVudE9uKFwiQ2FydEN1c3RvbURpc2NvdW50QWxsb2NhdGlvblwiLCBmdW5jdGlvbiAoQ2FydEN1c3RvbURpc2NvdW50QWxsb2NhdGlvbikge1xuICAgICAgICBDYXJ0Q3VzdG9tRGlzY291bnRBbGxvY2F0aW9uLmFkZChcInRpdGxlXCIpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJidXllcklkZW50aXR5XCIsIGZ1bmN0aW9uIChidXllcklkZW50aXR5KSB7XG4gICAgICBidXllcklkZW50aXR5LmFkZChcImNvdW50cnlDb2RlXCIpO1xuICAgICAgYnV5ZXJJZGVudGl0eS5hZGQoXCJwcmVmZXJlbmNlc1wiLCBmdW5jdGlvbiAocHJlZmVyZW5jZXMpIHtcbiAgICAgICAgcHJlZmVyZW5jZXMuYWRkKFwiZGVsaXZlcnlcIiwgZnVuY3Rpb24gKGRlbGl2ZXJ5KSB7XG4gICAgICAgICAgZGVsaXZlcnkuYWRkKFwiY29vcmRpbmF0ZXNcIiwgZnVuY3Rpb24gKGNvb3JkaW5hdGVzKSB7XG4gICAgICAgICAgICBjb29yZGluYXRlcy5hZGQoXCJsYXRpdHVkZVwiKTtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzLmFkZChcImxvbmdpdHVkZVwiKTtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzLmFkZChcImNvdW50cnlDb2RlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGRlbGl2ZXJ5LmFkZChcImRlbGl2ZXJ5TWV0aG9kXCIpO1xuICAgICAgICAgIGRlbGl2ZXJ5LmFkZChcInBpY2t1cEhhbmRsZVwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHByZWZlcmVuY2VzLmFkZChcIndhbGxldFwiKTtcbiAgICAgIH0pO1xuICAgICAgYnV5ZXJJZGVudGl0eS5hZGQoXCJlbWFpbFwiKTtcbiAgICAgIGJ1eWVySWRlbnRpdHkuYWRkKFwicGhvbmVcIik7XG4gICAgICBidXllcklkZW50aXR5LmFkZChcImN1c3RvbWVyXCIsIGZ1bmN0aW9uIChjdXN0b21lcikge1xuICAgICAgICBjdXN0b21lci5hZGQoXCJlbWFpbFwiKTtcbiAgICAgIH0pO1xuICAgICAgYnV5ZXJJZGVudGl0eS5hZGQoXCJkZWxpdmVyeUFkZHJlc3NQcmVmZXJlbmNlc1wiLCBmdW5jdGlvbiAoZGVsaXZlcnlBZGRyZXNzUHJlZmVyZW5jZXMpIHtcbiAgICAgICAgZGVsaXZlcnlBZGRyZXNzUHJlZmVyZW5jZXMuYWRkSW5saW5lRnJhZ21lbnRPbihcIk1haWxpbmdBZGRyZXNzXCIsIGZ1bmN0aW9uIChNYWlsaW5nQWRkcmVzcykge1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImFkZHJlc3MxXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImFkZHJlc3MyXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImNpdHlcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwiY29tcGFueVwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJjb3VudHJ5XCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImNvdW50cnlDb2RlVjJcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwiZmlyc3ROYW1lXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImZvcm1hdHRlZFwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJmb3JtYXR0ZWRBcmVhXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImxhc3ROYW1lXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImxhdGl0dWRlXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImxvbmdpdHVkZVwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJuYW1lXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcInBob25lXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcInByb3ZpbmNlXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcInByb3ZpbmNlQ29kZVwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJ6aXBcIik7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJkZWxpdmVyeUdyb3Vwc1wiLCB7XG4gICAgICBhcmdzOiB7XG4gICAgICAgIGZpcnN0OiAxMFxuICAgICAgfVxuICAgIH0sIGZ1bmN0aW9uIChkZWxpdmVyeUdyb3Vwcykge1xuICAgICAgZGVsaXZlcnlHcm91cHMuYWRkKFwicGFnZUluZm9cIiwgZnVuY3Rpb24gKHBhZ2VJbmZvKSB7XG4gICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc05leHRQYWdlXCIpO1xuICAgICAgICBwYWdlSW5mby5hZGQoXCJoYXNQcmV2aW91c1BhZ2VcIik7XG4gICAgICB9KTtcbiAgICAgIGRlbGl2ZXJ5R3JvdXBzLmFkZChcImVkZ2VzXCIsIGZ1bmN0aW9uIChlZGdlcykge1xuICAgICAgICBlZGdlcy5hZGQoXCJub2RlXCIsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgbm9kZS5hZGQoXCJpZFwiKTtcbiAgICAgICAgICBub2RlLmFkZChcImRlbGl2ZXJ5QWRkcmVzc1wiLCBmdW5jdGlvbiAoZGVsaXZlcnlBZGRyZXNzKSB7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwiYWRkcmVzczJcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwiYWRkcmVzczFcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwiY2l0eVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJjb21wYW55XCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcImNvdW50cnlcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwiY291bnRyeUNvZGVWMlwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJmaXJzdE5hbWVcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwiZm9ybWF0dGVkXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcImZvcm1hdHRlZEFyZWFcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwibGFzdE5hbWVcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwibGF0aXR1ZGVcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwibG9uZ2l0dWRlXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcIm5hbWVcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwicGhvbmVcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwicHJvdmluY2VcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwicHJvdmluY2VDb2RlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIG5vZGUuYWRkKFwiZGVsaXZlcnlPcHRpb25zXCIsIGZ1bmN0aW9uIChkZWxpdmVyeU9wdGlvbnMpIHtcbiAgICAgICAgICAgIGRlbGl2ZXJ5T3B0aW9ucy5hZGQoXCJjb2RlXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlPcHRpb25zLmFkZChcImRlbGl2ZXJ5TWV0aG9kVHlwZVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5T3B0aW9ucy5hZGQoXCJkZXNjcmlwdGlvblwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5T3B0aW9ucy5hZGQoXCJlc3RpbWF0ZWRDb3N0XCIsIGZ1bmN0aW9uIChlc3RpbWF0ZWRDb3N0KSB7XG4gICAgICAgICAgICAgIGVzdGltYXRlZENvc3QuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICAgICAgICBlc3RpbWF0ZWRDb3N0LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZGVsaXZlcnlPcHRpb25zLmFkZChcImhhbmRsZVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5T3B0aW9ucy5hZGQoXCJ0aXRsZVwiKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBub2RlLmFkZChcInNlbGVjdGVkRGVsaXZlcnlPcHRpb25cIiwgZnVuY3Rpb24gKHNlbGVjdGVkRGVsaXZlcnlPcHRpb24pIHtcbiAgICAgICAgICAgIHNlbGVjdGVkRGVsaXZlcnlPcHRpb24uYWRkKFwiY29kZVwiKTtcbiAgICAgICAgICAgIHNlbGVjdGVkRGVsaXZlcnlPcHRpb24uYWRkKFwiZGVsaXZlcnlNZXRob2RUeXBlXCIpO1xuICAgICAgICAgICAgc2VsZWN0ZWREZWxpdmVyeU9wdGlvbi5hZGQoXCJkZXNjcmlwdGlvblwiKTtcbiAgICAgICAgICAgIHNlbGVjdGVkRGVsaXZlcnlPcHRpb24uYWRkKFwiZXN0aW1hdGVkQ29zdFwiLCBmdW5jdGlvbiAoZXN0aW1hdGVkQ29zdCkge1xuICAgICAgICAgICAgICBlc3RpbWF0ZWRDb3N0LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgICAgICAgZXN0aW1hdGVkQ29zdC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNlbGVjdGVkRGVsaXZlcnlPcHRpb24uYWRkKFwiaGFuZGxlXCIpO1xuICAgICAgICAgICAgc2VsZWN0ZWREZWxpdmVyeU9wdGlvbi5hZGQoXCJ0aXRsZVwiKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBub2RlLmFkZChcImNhcnRMaW5lc1wiLCB7XG4gICAgICAgICAgICBhcmdzOiB7XG4gICAgICAgICAgICAgIGZpcnN0OiAyNTBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LCBmdW5jdGlvbiAoY2FydExpbmVzKSB7XG4gICAgICAgICAgICBjYXJ0TGluZXMuYWRkKFwicGFnZUluZm9cIiwgZnVuY3Rpb24gKHBhZ2VJbmZvKSB7XG4gICAgICAgICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc05leHRQYWdlXCIpO1xuICAgICAgICAgICAgICBwYWdlSW5mby5hZGQoXCJoYXNQcmV2aW91c1BhZ2VcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNhcnRMaW5lcy5hZGQoXCJlZGdlc1wiLCBmdW5jdGlvbiAoZWRnZXMpIHtcbiAgICAgICAgICAgICAgZWRnZXMuYWRkKFwiY3Vyc29yXCIpO1xuICAgICAgICAgICAgICBlZGdlcy5hZGQoXCJub2RlXCIsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5hZGQoXCJpZFwiKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImFwcGxpZWRHaWZ0Q2FyZHNcIiwgZnVuY3Rpb24gKGFwcGxpZWRHaWZ0Q2FyZHMpIHtcbiAgICAgIGFwcGxpZWRHaWZ0Q2FyZHMuYWRkRnJhZ21lbnQoc3ByZWFkcy5BcHBsaWVkR2lmdENhcmRGcmFnbWVudCk7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJub3RlXCIpO1xuICB9KTtcbiAgc3ByZWFkcy5DYXJ0VXNlckVycm9yRnJhZ21lbnQgPSBkb2N1bWVudC5kZWZpbmVGcmFnbWVudChcIkNhcnRVc2VyRXJyb3JGcmFnbWVudFwiLCBcIkNhcnRVc2VyRXJyb3JcIiwgZnVuY3Rpb24gKHJvb3QpIHtcbiAgICByb290LmFkZChcImZpZWxkXCIpO1xuICAgIHJvb3QuYWRkKFwibWVzc2FnZVwiKTtcbiAgICByb290LmFkZChcImNvZGVcIik7XG4gIH0pO1xuICBzcHJlYWRzLkNhcnRXYXJuaW5nRnJhZ21lbnQgPSBkb2N1bWVudC5kZWZpbmVGcmFnbWVudChcIkNhcnRXYXJuaW5nRnJhZ21lbnRcIiwgXCJDYXJ0V2FybmluZ1wiLCBmdW5jdGlvbiAocm9vdCkge1xuICAgIHJvb3QuYWRkKFwiY29kZVwiKTtcbiAgICByb290LmFkZChcIm1lc3NhZ2VcIik7XG4gIH0pO1xuICBkb2N1bWVudC5hZGRNdXRhdGlvbihcIkNhcnRMaW5lc0FkZFwiLCBbdmFyaWFibGVzLkNhcnRMaW5lc0FkZC5jYXJ0SWQsIHZhcmlhYmxlcy5DYXJ0TGluZXNBZGQubGluZXNdLCBmdW5jdGlvbiAocm9vdCkge1xuICAgIHJvb3QuYWRkKFwiY2FydExpbmVzQWRkXCIsIHtcbiAgICAgIGFyZ3M6IHtcbiAgICAgICAgY2FydElkOiB2YXJpYWJsZXMuQ2FydExpbmVzQWRkLmNhcnRJZCxcbiAgICAgICAgbGluZXM6IHZhcmlhYmxlcy5DYXJ0TGluZXNBZGQubGluZXNcbiAgICAgIH1cbiAgICB9LCBmdW5jdGlvbiAoY2FydExpbmVzQWRkKSB7XG4gICAgICBjYXJ0TGluZXNBZGQuYWRkKFwiY2FydFwiLCBmdW5jdGlvbiAoY2FydCkge1xuICAgICAgICBjYXJ0LmFkZEZyYWdtZW50KHNwcmVhZHMuQ2FydEZyYWdtZW50KTtcbiAgICAgIH0pO1xuICAgICAgY2FydExpbmVzQWRkLmFkZChcInVzZXJFcnJvcnNcIiwgZnVuY3Rpb24gKHVzZXJFcnJvcnMpIHtcbiAgICAgICAgdXNlckVycm9ycy5hZGRGcmFnbWVudChzcHJlYWRzLkNhcnRVc2VyRXJyb3JGcmFnbWVudCk7XG4gICAgICB9KTtcbiAgICAgIGNhcnRMaW5lc0FkZC5hZGQoXCJ3YXJuaW5nc1wiLCBmdW5jdGlvbiAod2FybmluZ3MpIHtcbiAgICAgICAgd2FybmluZ3MuYWRkRnJhZ21lbnQoc3ByZWFkcy5DYXJ0V2FybmluZ0ZyYWdtZW50KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIGRvY3VtZW50O1xufVxuXG5mdW5jdGlvbiBxdWVyeSQxOShjbGllbnQpIHtcbiAgdmFyIGRvY3VtZW50ID0gY2xpZW50LmRvY3VtZW50KCk7XG4gIHZhciBzcHJlYWRzID0ge307XG4gIHZhciB2YXJpYWJsZXMgPSB7fTtcbiAgdmFyaWFibGVzLkNhcnRMaW5lc1JlbW92ZSA9IHt9O1xuICB2YXJpYWJsZXMuQ2FydExpbmVzUmVtb3ZlLmNhcnRJZCA9IGNsaWVudC52YXJpYWJsZShcImNhcnRJZFwiLCBcIklEIVwiKTtcbiAgdmFyaWFibGVzLkNhcnRMaW5lc1JlbW92ZS5saW5lSWRzID0gY2xpZW50LnZhcmlhYmxlKFwibGluZUlkc1wiLCBcIltJRCFdIVwiKTtcbiAgc3ByZWFkcy5DYXJ0TGluZUZyYWdtZW50ID0gZG9jdW1lbnQuZGVmaW5lRnJhZ21lbnQoXCJDYXJ0TGluZUZyYWdtZW50XCIsIFwiQmFzZUNhcnRMaW5lXCIsIGZ1bmN0aW9uIChyb290KSB7XG4gICAgcm9vdC5hZGQoXCJpZFwiKTtcbiAgICByb290LmFkZChcIm1lcmNoYW5kaXNlXCIsIGZ1bmN0aW9uIChtZXJjaGFuZGlzZSkge1xuICAgICAgbWVyY2hhbmRpc2UuYWRkSW5saW5lRnJhZ21lbnRPbihcIlByb2R1Y3RWYXJpYW50XCIsIGZ1bmN0aW9uIChQcm9kdWN0VmFyaWFudCkge1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJpZFwiKTtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwidGl0bGVcIik7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcImltYWdlXCIsIGZ1bmN0aW9uIChpbWFnZSkge1xuICAgICAgICAgIGltYWdlLmFkZChcImlkXCIpO1xuICAgICAgICAgIGltYWdlLmFkZChcInVybFwiLCB7XG4gICAgICAgICAgICBhbGlhczogXCJzcmNcIlxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGltYWdlLmFkZChcImFsdFRleHRcIik7XG4gICAgICAgICAgaW1hZ2UuYWRkKFwid2lkdGhcIik7XG4gICAgICAgICAgaW1hZ2UuYWRkKFwiaGVpZ2h0XCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwicHJvZHVjdFwiLCBmdW5jdGlvbiAocHJvZHVjdCkge1xuICAgICAgICAgIHByb2R1Y3QuYWRkKFwiaWRcIik7XG4gICAgICAgICAgcHJvZHVjdC5hZGQoXCJoYW5kbGVcIik7XG4gICAgICAgICAgcHJvZHVjdC5hZGQoXCJ0aXRsZVwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcIndlaWdodFwiKTtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwiYXZhaWxhYmxlRm9yU2FsZVwiLCB7XG4gICAgICAgICAgYWxpYXM6IFwiYXZhaWxhYmxlXCJcbiAgICAgICAgfSk7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcInNrdVwiKTtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwic2VsZWN0ZWRPcHRpb25zXCIsIGZ1bmN0aW9uIChzZWxlY3RlZE9wdGlvbnMpIHtcbiAgICAgICAgICBzZWxlY3RlZE9wdGlvbnMuYWRkKFwibmFtZVwiKTtcbiAgICAgICAgICBzZWxlY3RlZE9wdGlvbnMuYWRkKFwidmFsdWVcIik7XG4gICAgICAgIH0pO1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJjb21wYXJlQXRQcmljZVwiLCBmdW5jdGlvbiAoY29tcGFyZUF0UHJpY2UpIHtcbiAgICAgICAgICBjb21wYXJlQXRQcmljZS5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgICAgY29tcGFyZUF0UHJpY2UuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwicHJpY2VcIiwgZnVuY3Rpb24gKHByaWNlKSB7XG4gICAgICAgICAgcHJpY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICAgIHByaWNlLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcInVuaXRQcmljZVwiLCBmdW5jdGlvbiAodW5pdFByaWNlKSB7XG4gICAgICAgICAgdW5pdFByaWNlLmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgICB1bml0UHJpY2UuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwidW5pdFByaWNlTWVhc3VyZW1lbnRcIiwgZnVuY3Rpb24gKHVuaXRQcmljZU1lYXN1cmVtZW50KSB7XG4gICAgICAgICAgdW5pdFByaWNlTWVhc3VyZW1lbnQuYWRkKFwibWVhc3VyZWRUeXBlXCIpO1xuICAgICAgICAgIHVuaXRQcmljZU1lYXN1cmVtZW50LmFkZChcInF1YW50aXR5VW5pdFwiKTtcbiAgICAgICAgICB1bml0UHJpY2VNZWFzdXJlbWVudC5hZGQoXCJxdWFudGl0eVZhbHVlXCIpO1xuICAgICAgICAgIHVuaXRQcmljZU1lYXN1cmVtZW50LmFkZChcInJlZmVyZW5jZVVuaXRcIik7XG4gICAgICAgICAgdW5pdFByaWNlTWVhc3VyZW1lbnQuYWRkKFwicmVmZXJlbmNlVmFsdWVcIik7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJxdWFudGl0eVwiKTtcbiAgICByb290LmFkZChcImF0dHJpYnV0ZXNcIiwgZnVuY3Rpb24gKGF0dHJpYnV0ZXMpIHtcbiAgICAgIGF0dHJpYnV0ZXMuYWRkKFwia2V5XCIpO1xuICAgICAgYXR0cmlidXRlcy5hZGQoXCJ2YWx1ZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImNvc3RcIiwgZnVuY3Rpb24gKGNvc3QpIHtcbiAgICAgIGNvc3QuYWRkKFwidG90YWxBbW91bnRcIiwgZnVuY3Rpb24gKHRvdGFsQW1vdW50KSB7XG4gICAgICAgIHRvdGFsQW1vdW50LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgdG90YWxBbW91bnQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBjb3N0LmFkZChcInN1YnRvdGFsQW1vdW50XCIsIGZ1bmN0aW9uIChzdWJ0b3RhbEFtb3VudCkge1xuICAgICAgICBzdWJ0b3RhbEFtb3VudC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIHN1YnRvdGFsQW1vdW50LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgY29zdC5hZGQoXCJhbW91bnRQZXJRdWFudGl0eVwiLCBmdW5jdGlvbiAoYW1vdW50UGVyUXVhbnRpdHkpIHtcbiAgICAgICAgYW1vdW50UGVyUXVhbnRpdHkuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICBhbW91bnRQZXJRdWFudGl0eS5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGNvc3QuYWRkKFwiY29tcGFyZUF0QW1vdW50UGVyUXVhbnRpdHlcIiwgZnVuY3Rpb24gKGNvbXBhcmVBdEFtb3VudFBlclF1YW50aXR5KSB7XG4gICAgICAgIGNvbXBhcmVBdEFtb3VudFBlclF1YW50aXR5LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgY29tcGFyZUF0QW1vdW50UGVyUXVhbnRpdHkuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJkaXNjb3VudEFsbG9jYXRpb25zXCIsIGZ1bmN0aW9uIChkaXNjb3VudEFsbG9jYXRpb25zKSB7XG4gICAgICBkaXNjb3VudEFsbG9jYXRpb25zLmFkZChcImRpc2NvdW50ZWRBbW91bnRcIiwgZnVuY3Rpb24gKGRpc2NvdW50ZWRBbW91bnQpIHtcbiAgICAgICAgZGlzY291bnRlZEFtb3VudC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIGRpc2NvdW50ZWRBbW91bnQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBkaXNjb3VudEFsbG9jYXRpb25zLmFkZChcImRpc2NvdW50QXBwbGljYXRpb25cIiwgZnVuY3Rpb24gKGRpc2NvdW50QXBwbGljYXRpb24pIHtcbiAgICAgICAgZGlzY291bnRBcHBsaWNhdGlvbi5hZGQoXCJ0YXJnZXRUeXBlXCIpO1xuICAgICAgICBkaXNjb3VudEFwcGxpY2F0aW9uLmFkZChcImFsbG9jYXRpb25NZXRob2RcIik7XG4gICAgICAgIGRpc2NvdW50QXBwbGljYXRpb24uYWRkKFwidGFyZ2V0U2VsZWN0aW9uXCIpO1xuICAgICAgICBkaXNjb3VudEFwcGxpY2F0aW9uLmFkZChcInZhbHVlXCIsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgIHZhbHVlLmFkZElubGluZUZyYWdtZW50T24oXCJQcmljaW5nUGVyY2VudGFnZVZhbHVlXCIsIGZ1bmN0aW9uIChQcmljaW5nUGVyY2VudGFnZVZhbHVlKSB7XG4gICAgICAgICAgICBQcmljaW5nUGVyY2VudGFnZVZhbHVlLmFkZChcInBlcmNlbnRhZ2VcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdmFsdWUuYWRkSW5saW5lRnJhZ21lbnRPbihcIk1vbmV5VjJcIiwgZnVuY3Rpb24gKE1vbmV5VjIpIHtcbiAgICAgICAgICAgIE1vbmV5VjIuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICAgICAgTW9uZXlWMi5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBkaXNjb3VudEFsbG9jYXRpb25zLmFkZElubGluZUZyYWdtZW50T24oXCJDYXJ0Q29kZURpc2NvdW50QWxsb2NhdGlvblwiLCBmdW5jdGlvbiAoQ2FydENvZGVEaXNjb3VudEFsbG9jYXRpb24pIHtcbiAgICAgICAgQ2FydENvZGVEaXNjb3VudEFsbG9jYXRpb24uYWRkKFwiY29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGRJbmxpbmVGcmFnbWVudE9uKFwiQ2FydEF1dG9tYXRpY0Rpc2NvdW50QWxsb2NhdGlvblwiLCBmdW5jdGlvbiAoQ2FydEF1dG9tYXRpY0Rpc2NvdW50QWxsb2NhdGlvbikge1xuICAgICAgICBDYXJ0QXV0b21hdGljRGlzY291bnRBbGxvY2F0aW9uLmFkZChcInRpdGxlXCIpO1xuICAgICAgfSk7XG4gICAgICBkaXNjb3VudEFsbG9jYXRpb25zLmFkZElubGluZUZyYWdtZW50T24oXCJDYXJ0Q3VzdG9tRGlzY291bnRBbGxvY2F0aW9uXCIsIGZ1bmN0aW9uIChDYXJ0Q3VzdG9tRGlzY291bnRBbGxvY2F0aW9uKSB7XG4gICAgICAgIENhcnRDdXN0b21EaXNjb3VudEFsbG9jYXRpb24uYWRkKFwidGl0bGVcIik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG4gIHNwcmVhZHMuQXBwbGllZEdpZnRDYXJkRnJhZ21lbnQgPSBkb2N1bWVudC5kZWZpbmVGcmFnbWVudChcIkFwcGxpZWRHaWZ0Q2FyZEZyYWdtZW50XCIsIFwiQXBwbGllZEdpZnRDYXJkXCIsIGZ1bmN0aW9uIChyb290KSB7XG4gICAgcm9vdC5hZGQoXCJhbW91bnRVc2VkXCIsIGZ1bmN0aW9uIChhbW91bnRVc2VkKSB7XG4gICAgICBhbW91bnRVc2VkLmFkZChcImFtb3VudFwiKTtcbiAgICAgIGFtb3VudFVzZWQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiYW1vdW50VXNlZFwiLCB7XG4gICAgICBhbGlhczogXCJhbW91bnRVc2VkVjJcIlxuICAgIH0sIGZ1bmN0aW9uIChhbW91bnRVc2VkKSB7XG4gICAgICBhbW91bnRVc2VkLmFkZChcImFtb3VudFwiKTtcbiAgICAgIGFtb3VudFVzZWQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiYmFsYW5jZVwiLCBmdW5jdGlvbiAoYmFsYW5jZSkge1xuICAgICAgYmFsYW5jZS5hZGQoXCJhbW91bnRcIik7XG4gICAgICBiYWxhbmNlLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImJhbGFuY2VcIiwge1xuICAgICAgYWxpYXM6IFwiYmFsYW5jZVYyXCJcbiAgICB9LCBmdW5jdGlvbiAoYmFsYW5jZSkge1xuICAgICAgYmFsYW5jZS5hZGQoXCJhbW91bnRcIik7XG4gICAgICBiYWxhbmNlLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcInByZXNlbnRtZW50QW1vdW50VXNlZFwiLCBmdW5jdGlvbiAocHJlc2VudG1lbnRBbW91bnRVc2VkKSB7XG4gICAgICBwcmVzZW50bWVudEFtb3VudFVzZWQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgcHJlc2VudG1lbnRBbW91bnRVc2VkLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImlkXCIpO1xuICAgIHJvb3QuYWRkKFwibGFzdENoYXJhY3RlcnNcIik7XG4gIH0pO1xuICBzcHJlYWRzLkNhcnRGcmFnbWVudCA9IGRvY3VtZW50LmRlZmluZUZyYWdtZW50KFwiQ2FydEZyYWdtZW50XCIsIFwiQ2FydFwiLCBmdW5jdGlvbiAocm9vdCkge1xuICAgIHJvb3QuYWRkKFwiaWRcIik7XG4gICAgcm9vdC5hZGQoXCJjcmVhdGVkQXRcIik7XG4gICAgcm9vdC5hZGQoXCJ1cGRhdGVkQXRcIik7XG4gICAgcm9vdC5hZGQoXCJsaW5lc1wiLCB7XG4gICAgICBhcmdzOiB7XG4gICAgICAgIGZpcnN0OiAyNTBcbiAgICAgIH1cbiAgICB9LCBmdW5jdGlvbiAobGluZXMpIHtcbiAgICAgIGxpbmVzLmFkZChcInBhZ2VJbmZvXCIsIGZ1bmN0aW9uIChwYWdlSW5mbykge1xuICAgICAgICBwYWdlSW5mby5hZGQoXCJoYXNOZXh0UGFnZVwiKTtcbiAgICAgICAgcGFnZUluZm8uYWRkKFwiaGFzUHJldmlvdXNQYWdlXCIpO1xuICAgICAgfSk7XG4gICAgICBsaW5lcy5hZGQoXCJlZGdlc1wiLCBmdW5jdGlvbiAoZWRnZXMpIHtcbiAgICAgICAgZWRnZXMuYWRkKFwiY3Vyc29yXCIpO1xuICAgICAgICBlZGdlcy5hZGQoXCJub2RlXCIsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgbm9kZS5hZGRGcmFnbWVudChzcHJlYWRzLkNhcnRMaW5lRnJhZ21lbnQpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiYXR0cmlidXRlc1wiLCBmdW5jdGlvbiAoYXR0cmlidXRlcykge1xuICAgICAgYXR0cmlidXRlcy5hZGQoXCJrZXlcIik7XG4gICAgICBhdHRyaWJ1dGVzLmFkZChcInZhbHVlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiY29zdFwiLCBmdW5jdGlvbiAoY29zdCkge1xuICAgICAgY29zdC5hZGQoXCJjaGVja291dENoYXJnZUFtb3VudFwiLCBmdW5jdGlvbiAoY2hlY2tvdXRDaGFyZ2VBbW91bnQpIHtcbiAgICAgICAgY2hlY2tvdXRDaGFyZ2VBbW91bnQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICBjaGVja291dENoYXJnZUFtb3VudC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGNvc3QuYWRkKFwidG90YWxBbW91bnRcIiwgZnVuY3Rpb24gKHRvdGFsQW1vdW50KSB7XG4gICAgICAgIHRvdGFsQW1vdW50LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgdG90YWxBbW91bnQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBjb3N0LmFkZChcInN1YnRvdGFsQW1vdW50XCIsIGZ1bmN0aW9uIChzdWJ0b3RhbEFtb3VudCkge1xuICAgICAgICBzdWJ0b3RhbEFtb3VudC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIHN1YnRvdGFsQW1vdW50LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgY29zdC5hZGQoXCJ0b3RhbFRheEFtb3VudFwiLCBmdW5jdGlvbiAodG90YWxUYXhBbW91bnQpIHtcbiAgICAgICAgdG90YWxUYXhBbW91bnQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICB0b3RhbFRheEFtb3VudC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGNvc3QuYWRkKFwidG90YWxEdXR5QW1vdW50XCIsIGZ1bmN0aW9uICh0b3RhbER1dHlBbW91bnQpIHtcbiAgICAgICAgdG90YWxEdXR5QW1vdW50LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgdG90YWxEdXR5QW1vdW50LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiY2hlY2tvdXRVcmxcIik7XG4gICAgcm9vdC5hZGQoXCJkaXNjb3VudENvZGVzXCIsIGZ1bmN0aW9uIChkaXNjb3VudENvZGVzKSB7XG4gICAgICBkaXNjb3VudENvZGVzLmFkZChcImFwcGxpY2FibGVcIik7XG4gICAgICBkaXNjb3VudENvZGVzLmFkZChcImNvZGVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJkaXNjb3VudEFsbG9jYXRpb25zXCIsIGZ1bmN0aW9uIChkaXNjb3VudEFsbG9jYXRpb25zKSB7XG4gICAgICBkaXNjb3VudEFsbG9jYXRpb25zLmFkZChcImRpc2NvdW50ZWRBbW91bnRcIiwgZnVuY3Rpb24gKGRpc2NvdW50ZWRBbW91bnQpIHtcbiAgICAgICAgZGlzY291bnRlZEFtb3VudC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIGRpc2NvdW50ZWRBbW91bnQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBkaXNjb3VudEFsbG9jYXRpb25zLmFkZChcImRpc2NvdW50QXBwbGljYXRpb25cIiwgZnVuY3Rpb24gKGRpc2NvdW50QXBwbGljYXRpb24pIHtcbiAgICAgICAgZGlzY291bnRBcHBsaWNhdGlvbi5hZGQoXCJ0YXJnZXRUeXBlXCIpO1xuICAgICAgICBkaXNjb3VudEFwcGxpY2F0aW9uLmFkZChcImFsbG9jYXRpb25NZXRob2RcIik7XG4gICAgICAgIGRpc2NvdW50QXBwbGljYXRpb24uYWRkKFwidGFyZ2V0U2VsZWN0aW9uXCIpO1xuICAgICAgICBkaXNjb3VudEFwcGxpY2F0aW9uLmFkZChcInZhbHVlXCIsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgIHZhbHVlLmFkZElubGluZUZyYWdtZW50T24oXCJQcmljaW5nUGVyY2VudGFnZVZhbHVlXCIsIGZ1bmN0aW9uIChQcmljaW5nUGVyY2VudGFnZVZhbHVlKSB7XG4gICAgICAgICAgICBQcmljaW5nUGVyY2VudGFnZVZhbHVlLmFkZChcInBlcmNlbnRhZ2VcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdmFsdWUuYWRkSW5saW5lRnJhZ21lbnRPbihcIk1vbmV5VjJcIiwgZnVuY3Rpb24gKE1vbmV5VjIpIHtcbiAgICAgICAgICAgIE1vbmV5VjIuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICAgICAgTW9uZXlWMi5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBkaXNjb3VudEFsbG9jYXRpb25zLmFkZElubGluZUZyYWdtZW50T24oXCJDYXJ0Q29kZURpc2NvdW50QWxsb2NhdGlvblwiLCBmdW5jdGlvbiAoQ2FydENvZGVEaXNjb3VudEFsbG9jYXRpb24pIHtcbiAgICAgICAgQ2FydENvZGVEaXNjb3VudEFsbG9jYXRpb24uYWRkKFwiY29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGRJbmxpbmVGcmFnbWVudE9uKFwiQ2FydEF1dG9tYXRpY0Rpc2NvdW50QWxsb2NhdGlvblwiLCBmdW5jdGlvbiAoQ2FydEF1dG9tYXRpY0Rpc2NvdW50QWxsb2NhdGlvbikge1xuICAgICAgICBDYXJ0QXV0b21hdGljRGlzY291bnRBbGxvY2F0aW9uLmFkZChcInRpdGxlXCIpO1xuICAgICAgfSk7XG4gICAgICBkaXNjb3VudEFsbG9jYXRpb25zLmFkZElubGluZUZyYWdtZW50T24oXCJDYXJ0Q3VzdG9tRGlzY291bnRBbGxvY2F0aW9uXCIsIGZ1bmN0aW9uIChDYXJ0Q3VzdG9tRGlzY291bnRBbGxvY2F0aW9uKSB7XG4gICAgICAgIENhcnRDdXN0b21EaXNjb3VudEFsbG9jYXRpb24uYWRkKFwidGl0bGVcIik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImJ1eWVySWRlbnRpdHlcIiwgZnVuY3Rpb24gKGJ1eWVySWRlbnRpdHkpIHtcbiAgICAgIGJ1eWVySWRlbnRpdHkuYWRkKFwiY291bnRyeUNvZGVcIik7XG4gICAgICBidXllcklkZW50aXR5LmFkZChcInByZWZlcmVuY2VzXCIsIGZ1bmN0aW9uIChwcmVmZXJlbmNlcykge1xuICAgICAgICBwcmVmZXJlbmNlcy5hZGQoXCJkZWxpdmVyeVwiLCBmdW5jdGlvbiAoZGVsaXZlcnkpIHtcbiAgICAgICAgICBkZWxpdmVyeS5hZGQoXCJjb29yZGluYXRlc1wiLCBmdW5jdGlvbiAoY29vcmRpbmF0ZXMpIHtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzLmFkZChcImxhdGl0dWRlXCIpO1xuICAgICAgICAgICAgY29vcmRpbmF0ZXMuYWRkKFwibG9uZ2l0dWRlXCIpO1xuICAgICAgICAgICAgY29vcmRpbmF0ZXMuYWRkKFwiY291bnRyeUNvZGVcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZGVsaXZlcnkuYWRkKFwiZGVsaXZlcnlNZXRob2RcIik7XG4gICAgICAgICAgZGVsaXZlcnkuYWRkKFwicGlja3VwSGFuZGxlXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgcHJlZmVyZW5jZXMuYWRkKFwid2FsbGV0XCIpO1xuICAgICAgfSk7XG4gICAgICBidXllcklkZW50aXR5LmFkZChcImVtYWlsXCIpO1xuICAgICAgYnV5ZXJJZGVudGl0eS5hZGQoXCJwaG9uZVwiKTtcbiAgICAgIGJ1eWVySWRlbnRpdHkuYWRkKFwiY3VzdG9tZXJcIiwgZnVuY3Rpb24gKGN1c3RvbWVyKSB7XG4gICAgICAgIGN1c3RvbWVyLmFkZChcImVtYWlsXCIpO1xuICAgICAgfSk7XG4gICAgICBidXllcklkZW50aXR5LmFkZChcImRlbGl2ZXJ5QWRkcmVzc1ByZWZlcmVuY2VzXCIsIGZ1bmN0aW9uIChkZWxpdmVyeUFkZHJlc3NQcmVmZXJlbmNlcykge1xuICAgICAgICBkZWxpdmVyeUFkZHJlc3NQcmVmZXJlbmNlcy5hZGRJbmxpbmVGcmFnbWVudE9uKFwiTWFpbGluZ0FkZHJlc3NcIiwgZnVuY3Rpb24gKE1haWxpbmdBZGRyZXNzKSB7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwiYWRkcmVzczFcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwiYWRkcmVzczJcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwiY2l0eVwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJjb21wYW55XCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImNvdW50cnlcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwiY291bnRyeUNvZGVWMlwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJmaXJzdE5hbWVcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwiZm9ybWF0dGVkXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImZvcm1hdHRlZEFyZWFcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwibGFzdE5hbWVcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwibGF0aXR1ZGVcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwibG9uZ2l0dWRlXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcIm5hbWVcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwicGhvbmVcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwicHJvdmluY2VcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwicHJvdmluY2VDb2RlXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcInppcFwiKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImRlbGl2ZXJ5R3JvdXBzXCIsIHtcbiAgICAgIGFyZ3M6IHtcbiAgICAgICAgZmlyc3Q6IDEwXG4gICAgICB9XG4gICAgfSwgZnVuY3Rpb24gKGRlbGl2ZXJ5R3JvdXBzKSB7XG4gICAgICBkZWxpdmVyeUdyb3Vwcy5hZGQoXCJwYWdlSW5mb1wiLCBmdW5jdGlvbiAocGFnZUluZm8pIHtcbiAgICAgICAgcGFnZUluZm8uYWRkKFwiaGFzTmV4dFBhZ2VcIik7XG4gICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc1ByZXZpb3VzUGFnZVwiKTtcbiAgICAgIH0pO1xuICAgICAgZGVsaXZlcnlHcm91cHMuYWRkKFwiZWRnZXNcIiwgZnVuY3Rpb24gKGVkZ2VzKSB7XG4gICAgICAgIGVkZ2VzLmFkZChcIm5vZGVcIiwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICBub2RlLmFkZChcImlkXCIpO1xuICAgICAgICAgIG5vZGUuYWRkKFwiZGVsaXZlcnlBZGRyZXNzXCIsIGZ1bmN0aW9uIChkZWxpdmVyeUFkZHJlc3MpIHtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJhZGRyZXNzMlwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJhZGRyZXNzMVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJjaXR5XCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcImNvbXBhbnlcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwiY291bnRyeVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJjb3VudHJ5Q29kZVYyXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcImZpcnN0TmFtZVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJmb3JtYXR0ZWRcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwiZm9ybWF0dGVkQXJlYVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJsYXN0TmFtZVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJsYXRpdHVkZVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJsb25naXR1ZGVcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwibmFtZVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJwaG9uZVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJwcm92aW5jZVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJwcm92aW5jZUNvZGVcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgbm9kZS5hZGQoXCJkZWxpdmVyeU9wdGlvbnNcIiwgZnVuY3Rpb24gKGRlbGl2ZXJ5T3B0aW9ucykge1xuICAgICAgICAgICAgZGVsaXZlcnlPcHRpb25zLmFkZChcImNvZGVcIik7XG4gICAgICAgICAgICBkZWxpdmVyeU9wdGlvbnMuYWRkKFwiZGVsaXZlcnlNZXRob2RUeXBlXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlPcHRpb25zLmFkZChcImRlc2NyaXB0aW9uXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlPcHRpb25zLmFkZChcImVzdGltYXRlZENvc3RcIiwgZnVuY3Rpb24gKGVzdGltYXRlZENvc3QpIHtcbiAgICAgICAgICAgICAgZXN0aW1hdGVkQ29zdC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgICAgICAgIGVzdGltYXRlZENvc3QuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkZWxpdmVyeU9wdGlvbnMuYWRkKFwiaGFuZGxlXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlPcHRpb25zLmFkZChcInRpdGxlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIG5vZGUuYWRkKFwic2VsZWN0ZWREZWxpdmVyeU9wdGlvblwiLCBmdW5jdGlvbiAoc2VsZWN0ZWREZWxpdmVyeU9wdGlvbikge1xuICAgICAgICAgICAgc2VsZWN0ZWREZWxpdmVyeU9wdGlvbi5hZGQoXCJjb2RlXCIpO1xuICAgICAgICAgICAgc2VsZWN0ZWREZWxpdmVyeU9wdGlvbi5hZGQoXCJkZWxpdmVyeU1ldGhvZFR5cGVcIik7XG4gICAgICAgICAgICBzZWxlY3RlZERlbGl2ZXJ5T3B0aW9uLmFkZChcImRlc2NyaXB0aW9uXCIpO1xuICAgICAgICAgICAgc2VsZWN0ZWREZWxpdmVyeU9wdGlvbi5hZGQoXCJlc3RpbWF0ZWRDb3N0XCIsIGZ1bmN0aW9uIChlc3RpbWF0ZWRDb3N0KSB7XG4gICAgICAgICAgICAgIGVzdGltYXRlZENvc3QuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICAgICAgICBlc3RpbWF0ZWRDb3N0LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc2VsZWN0ZWREZWxpdmVyeU9wdGlvbi5hZGQoXCJoYW5kbGVcIik7XG4gICAgICAgICAgICBzZWxlY3RlZERlbGl2ZXJ5T3B0aW9uLmFkZChcInRpdGxlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIG5vZGUuYWRkKFwiY2FydExpbmVzXCIsIHtcbiAgICAgICAgICAgIGFyZ3M6IHtcbiAgICAgICAgICAgICAgZmlyc3Q6IDI1MFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIGZ1bmN0aW9uIChjYXJ0TGluZXMpIHtcbiAgICAgICAgICAgIGNhcnRMaW5lcy5hZGQoXCJwYWdlSW5mb1wiLCBmdW5jdGlvbiAocGFnZUluZm8pIHtcbiAgICAgICAgICAgICAgcGFnZUluZm8uYWRkKFwiaGFzTmV4dFBhZ2VcIik7XG4gICAgICAgICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc1ByZXZpb3VzUGFnZVwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY2FydExpbmVzLmFkZChcImVkZ2VzXCIsIGZ1bmN0aW9uIChlZGdlcykge1xuICAgICAgICAgICAgICBlZGdlcy5hZGQoXCJjdXJzb3JcIik7XG4gICAgICAgICAgICAgIGVkZ2VzLmFkZChcIm5vZGVcIiwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgICAgICBub2RlLmFkZChcImlkXCIpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiYXBwbGllZEdpZnRDYXJkc1wiLCBmdW5jdGlvbiAoYXBwbGllZEdpZnRDYXJkcykge1xuICAgICAgYXBwbGllZEdpZnRDYXJkcy5hZGRGcmFnbWVudChzcHJlYWRzLkFwcGxpZWRHaWZ0Q2FyZEZyYWdtZW50KTtcbiAgICB9KTtcbiAgICByb290LmFkZChcIm5vdGVcIik7XG4gIH0pO1xuICBzcHJlYWRzLkNhcnRVc2VyRXJyb3JGcmFnbWVudCA9IGRvY3VtZW50LmRlZmluZUZyYWdtZW50KFwiQ2FydFVzZXJFcnJvckZyYWdtZW50XCIsIFwiQ2FydFVzZXJFcnJvclwiLCBmdW5jdGlvbiAocm9vdCkge1xuICAgIHJvb3QuYWRkKFwiZmllbGRcIik7XG4gICAgcm9vdC5hZGQoXCJtZXNzYWdlXCIpO1xuICAgIHJvb3QuYWRkKFwiY29kZVwiKTtcbiAgfSk7XG4gIHNwcmVhZHMuQ2FydFdhcm5pbmdGcmFnbWVudCA9IGRvY3VtZW50LmRlZmluZUZyYWdtZW50KFwiQ2FydFdhcm5pbmdGcmFnbWVudFwiLCBcIkNhcnRXYXJuaW5nXCIsIGZ1bmN0aW9uIChyb290KSB7XG4gICAgcm9vdC5hZGQoXCJjb2RlXCIpO1xuICAgIHJvb3QuYWRkKFwibWVzc2FnZVwiKTtcbiAgfSk7XG4gIGRvY3VtZW50LmFkZE11dGF0aW9uKFwiQ2FydExpbmVzUmVtb3ZlXCIsIFt2YXJpYWJsZXMuQ2FydExpbmVzUmVtb3ZlLmNhcnRJZCwgdmFyaWFibGVzLkNhcnRMaW5lc1JlbW92ZS5saW5lSWRzXSwgZnVuY3Rpb24gKHJvb3QpIHtcbiAgICByb290LmFkZChcImNhcnRMaW5lc1JlbW92ZVwiLCB7XG4gICAgICBhcmdzOiB7XG4gICAgICAgIGNhcnRJZDogdmFyaWFibGVzLkNhcnRMaW5lc1JlbW92ZS5jYXJ0SWQsXG4gICAgICAgIGxpbmVJZHM6IHZhcmlhYmxlcy5DYXJ0TGluZXNSZW1vdmUubGluZUlkc1xuICAgICAgfVxuICAgIH0sIGZ1bmN0aW9uIChjYXJ0TGluZXNSZW1vdmUpIHtcbiAgICAgIGNhcnRMaW5lc1JlbW92ZS5hZGQoXCJjYXJ0XCIsIGZ1bmN0aW9uIChjYXJ0KSB7XG4gICAgICAgIGNhcnQuYWRkRnJhZ21lbnQoc3ByZWFkcy5DYXJ0RnJhZ21lbnQpO1xuICAgICAgfSk7XG4gICAgICBjYXJ0TGluZXNSZW1vdmUuYWRkKFwidXNlckVycm9yc1wiLCBmdW5jdGlvbiAodXNlckVycm9ycykge1xuICAgICAgICB1c2VyRXJyb3JzLmFkZEZyYWdtZW50KHNwcmVhZHMuQ2FydFVzZXJFcnJvckZyYWdtZW50KTtcbiAgICAgIH0pO1xuICAgICAgY2FydExpbmVzUmVtb3ZlLmFkZChcIndhcm5pbmdzXCIsIGZ1bmN0aW9uICh3YXJuaW5ncykge1xuICAgICAgICB3YXJuaW5ncy5hZGRGcmFnbWVudChzcHJlYWRzLkNhcnRXYXJuaW5nRnJhZ21lbnQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gZG9jdW1lbnQ7XG59XG5cbmZ1bmN0aW9uIHF1ZXJ5JDIwKGNsaWVudCkge1xuICB2YXIgZG9jdW1lbnQgPSBjbGllbnQuZG9jdW1lbnQoKTtcbiAgdmFyIHNwcmVhZHMgPSB7fTtcbiAgdmFyIHZhcmlhYmxlcyA9IHt9O1xuICB2YXJpYWJsZXMuQ2FydExpbmVzVXBkYXRlID0ge307XG4gIHZhcmlhYmxlcy5DYXJ0TGluZXNVcGRhdGUuY2FydElkID0gY2xpZW50LnZhcmlhYmxlKFwiY2FydElkXCIsIFwiSUQhXCIpO1xuICB2YXJpYWJsZXMuQ2FydExpbmVzVXBkYXRlLmxpbmVzID0gY2xpZW50LnZhcmlhYmxlKFwibGluZXNcIiwgXCJbQ2FydExpbmVVcGRhdGVJbnB1dCFdIVwiKTtcbiAgc3ByZWFkcy5DYXJ0TGluZUZyYWdtZW50ID0gZG9jdW1lbnQuZGVmaW5lRnJhZ21lbnQoXCJDYXJ0TGluZUZyYWdtZW50XCIsIFwiQmFzZUNhcnRMaW5lXCIsIGZ1bmN0aW9uIChyb290KSB7XG4gICAgcm9vdC5hZGQoXCJpZFwiKTtcbiAgICByb290LmFkZChcIm1lcmNoYW5kaXNlXCIsIGZ1bmN0aW9uIChtZXJjaGFuZGlzZSkge1xuICAgICAgbWVyY2hhbmRpc2UuYWRkSW5saW5lRnJhZ21lbnRPbihcIlByb2R1Y3RWYXJpYW50XCIsIGZ1bmN0aW9uIChQcm9kdWN0VmFyaWFudCkge1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJpZFwiKTtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwidGl0bGVcIik7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcImltYWdlXCIsIGZ1bmN0aW9uIChpbWFnZSkge1xuICAgICAgICAgIGltYWdlLmFkZChcImlkXCIpO1xuICAgICAgICAgIGltYWdlLmFkZChcInVybFwiLCB7XG4gICAgICAgICAgICBhbGlhczogXCJzcmNcIlxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGltYWdlLmFkZChcImFsdFRleHRcIik7XG4gICAgICAgICAgaW1hZ2UuYWRkKFwid2lkdGhcIik7XG4gICAgICAgICAgaW1hZ2UuYWRkKFwiaGVpZ2h0XCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwicHJvZHVjdFwiLCBmdW5jdGlvbiAocHJvZHVjdCkge1xuICAgICAgICAgIHByb2R1Y3QuYWRkKFwiaWRcIik7XG4gICAgICAgICAgcHJvZHVjdC5hZGQoXCJoYW5kbGVcIik7XG4gICAgICAgICAgcHJvZHVjdC5hZGQoXCJ0aXRsZVwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcIndlaWdodFwiKTtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwiYXZhaWxhYmxlRm9yU2FsZVwiLCB7XG4gICAgICAgICAgYWxpYXM6IFwiYXZhaWxhYmxlXCJcbiAgICAgICAgfSk7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcInNrdVwiKTtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwic2VsZWN0ZWRPcHRpb25zXCIsIGZ1bmN0aW9uIChzZWxlY3RlZE9wdGlvbnMpIHtcbiAgICAgICAgICBzZWxlY3RlZE9wdGlvbnMuYWRkKFwibmFtZVwiKTtcbiAgICAgICAgICBzZWxlY3RlZE9wdGlvbnMuYWRkKFwidmFsdWVcIik7XG4gICAgICAgIH0pO1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJjb21wYXJlQXRQcmljZVwiLCBmdW5jdGlvbiAoY29tcGFyZUF0UHJpY2UpIHtcbiAgICAgICAgICBjb21wYXJlQXRQcmljZS5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgICAgY29tcGFyZUF0UHJpY2UuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwicHJpY2VcIiwgZnVuY3Rpb24gKHByaWNlKSB7XG4gICAgICAgICAgcHJpY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICAgIHByaWNlLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcInVuaXRQcmljZVwiLCBmdW5jdGlvbiAodW5pdFByaWNlKSB7XG4gICAgICAgICAgdW5pdFByaWNlLmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgICB1bml0UHJpY2UuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwidW5pdFByaWNlTWVhc3VyZW1lbnRcIiwgZnVuY3Rpb24gKHVuaXRQcmljZU1lYXN1cmVtZW50KSB7XG4gICAgICAgICAgdW5pdFByaWNlTWVhc3VyZW1lbnQuYWRkKFwibWVhc3VyZWRUeXBlXCIpO1xuICAgICAgICAgIHVuaXRQcmljZU1lYXN1cmVtZW50LmFkZChcInF1YW50aXR5VW5pdFwiKTtcbiAgICAgICAgICB1bml0UHJpY2VNZWFzdXJlbWVudC5hZGQoXCJxdWFudGl0eVZhbHVlXCIpO1xuICAgICAgICAgIHVuaXRQcmljZU1lYXN1cmVtZW50LmFkZChcInJlZmVyZW5jZVVuaXRcIik7XG4gICAgICAgICAgdW5pdFByaWNlTWVhc3VyZW1lbnQuYWRkKFwicmVmZXJlbmNlVmFsdWVcIik7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJxdWFudGl0eVwiKTtcbiAgICByb290LmFkZChcImF0dHJpYnV0ZXNcIiwgZnVuY3Rpb24gKGF0dHJpYnV0ZXMpIHtcbiAgICAgIGF0dHJpYnV0ZXMuYWRkKFwia2V5XCIpO1xuICAgICAgYXR0cmlidXRlcy5hZGQoXCJ2YWx1ZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImNvc3RcIiwgZnVuY3Rpb24gKGNvc3QpIHtcbiAgICAgIGNvc3QuYWRkKFwidG90YWxBbW91bnRcIiwgZnVuY3Rpb24gKHRvdGFsQW1vdW50KSB7XG4gICAgICAgIHRvdGFsQW1vdW50LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgdG90YWxBbW91bnQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBjb3N0LmFkZChcInN1YnRvdGFsQW1vdW50XCIsIGZ1bmN0aW9uIChzdWJ0b3RhbEFtb3VudCkge1xuICAgICAgICBzdWJ0b3RhbEFtb3VudC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIHN1YnRvdGFsQW1vdW50LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgY29zdC5hZGQoXCJhbW91bnRQZXJRdWFudGl0eVwiLCBmdW5jdGlvbiAoYW1vdW50UGVyUXVhbnRpdHkpIHtcbiAgICAgICAgYW1vdW50UGVyUXVhbnRpdHkuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICBhbW91bnRQZXJRdWFudGl0eS5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGNvc3QuYWRkKFwiY29tcGFyZUF0QW1vdW50UGVyUXVhbnRpdHlcIiwgZnVuY3Rpb24gKGNvbXBhcmVBdEFtb3VudFBlclF1YW50aXR5KSB7XG4gICAgICAgIGNvbXBhcmVBdEFtb3VudFBlclF1YW50aXR5LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgY29tcGFyZUF0QW1vdW50UGVyUXVhbnRpdHkuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJkaXNjb3VudEFsbG9jYXRpb25zXCIsIGZ1bmN0aW9uIChkaXNjb3VudEFsbG9jYXRpb25zKSB7XG4gICAgICBkaXNjb3VudEFsbG9jYXRpb25zLmFkZChcImRpc2NvdW50ZWRBbW91bnRcIiwgZnVuY3Rpb24gKGRpc2NvdW50ZWRBbW91bnQpIHtcbiAgICAgICAgZGlzY291bnRlZEFtb3VudC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIGRpc2NvdW50ZWRBbW91bnQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBkaXNjb3VudEFsbG9jYXRpb25zLmFkZChcImRpc2NvdW50QXBwbGljYXRpb25cIiwgZnVuY3Rpb24gKGRpc2NvdW50QXBwbGljYXRpb24pIHtcbiAgICAgICAgZGlzY291bnRBcHBsaWNhdGlvbi5hZGQoXCJ0YXJnZXRUeXBlXCIpO1xuICAgICAgICBkaXNjb3VudEFwcGxpY2F0aW9uLmFkZChcImFsbG9jYXRpb25NZXRob2RcIik7XG4gICAgICAgIGRpc2NvdW50QXBwbGljYXRpb24uYWRkKFwidGFyZ2V0U2VsZWN0aW9uXCIpO1xuICAgICAgICBkaXNjb3VudEFwcGxpY2F0aW9uLmFkZChcInZhbHVlXCIsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgIHZhbHVlLmFkZElubGluZUZyYWdtZW50T24oXCJQcmljaW5nUGVyY2VudGFnZVZhbHVlXCIsIGZ1bmN0aW9uIChQcmljaW5nUGVyY2VudGFnZVZhbHVlKSB7XG4gICAgICAgICAgICBQcmljaW5nUGVyY2VudGFnZVZhbHVlLmFkZChcInBlcmNlbnRhZ2VcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdmFsdWUuYWRkSW5saW5lRnJhZ21lbnRPbihcIk1vbmV5VjJcIiwgZnVuY3Rpb24gKE1vbmV5VjIpIHtcbiAgICAgICAgICAgIE1vbmV5VjIuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICAgICAgTW9uZXlWMi5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBkaXNjb3VudEFsbG9jYXRpb25zLmFkZElubGluZUZyYWdtZW50T24oXCJDYXJ0Q29kZURpc2NvdW50QWxsb2NhdGlvblwiLCBmdW5jdGlvbiAoQ2FydENvZGVEaXNjb3VudEFsbG9jYXRpb24pIHtcbiAgICAgICAgQ2FydENvZGVEaXNjb3VudEFsbG9jYXRpb24uYWRkKFwiY29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGRJbmxpbmVGcmFnbWVudE9uKFwiQ2FydEF1dG9tYXRpY0Rpc2NvdW50QWxsb2NhdGlvblwiLCBmdW5jdGlvbiAoQ2FydEF1dG9tYXRpY0Rpc2NvdW50QWxsb2NhdGlvbikge1xuICAgICAgICBDYXJ0QXV0b21hdGljRGlzY291bnRBbGxvY2F0aW9uLmFkZChcInRpdGxlXCIpO1xuICAgICAgfSk7XG4gICAgICBkaXNjb3VudEFsbG9jYXRpb25zLmFkZElubGluZUZyYWdtZW50T24oXCJDYXJ0Q3VzdG9tRGlzY291bnRBbGxvY2F0aW9uXCIsIGZ1bmN0aW9uIChDYXJ0Q3VzdG9tRGlzY291bnRBbGxvY2F0aW9uKSB7XG4gICAgICAgIENhcnRDdXN0b21EaXNjb3VudEFsbG9jYXRpb24uYWRkKFwidGl0bGVcIik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG4gIHNwcmVhZHMuQXBwbGllZEdpZnRDYXJkRnJhZ21lbnQgPSBkb2N1bWVudC5kZWZpbmVGcmFnbWVudChcIkFwcGxpZWRHaWZ0Q2FyZEZyYWdtZW50XCIsIFwiQXBwbGllZEdpZnRDYXJkXCIsIGZ1bmN0aW9uIChyb290KSB7XG4gICAgcm9vdC5hZGQoXCJhbW91bnRVc2VkXCIsIGZ1bmN0aW9uIChhbW91bnRVc2VkKSB7XG4gICAgICBhbW91bnRVc2VkLmFkZChcImFtb3VudFwiKTtcbiAgICAgIGFtb3VudFVzZWQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiYW1vdW50VXNlZFwiLCB7XG4gICAgICBhbGlhczogXCJhbW91bnRVc2VkVjJcIlxuICAgIH0sIGZ1bmN0aW9uIChhbW91bnRVc2VkKSB7XG4gICAgICBhbW91bnRVc2VkLmFkZChcImFtb3VudFwiKTtcbiAgICAgIGFtb3VudFVzZWQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiYmFsYW5jZVwiLCBmdW5jdGlvbiAoYmFsYW5jZSkge1xuICAgICAgYmFsYW5jZS5hZGQoXCJhbW91bnRcIik7XG4gICAgICBiYWxhbmNlLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImJhbGFuY2VcIiwge1xuICAgICAgYWxpYXM6IFwiYmFsYW5jZVYyXCJcbiAgICB9LCBmdW5jdGlvbiAoYmFsYW5jZSkge1xuICAgICAgYmFsYW5jZS5hZGQoXCJhbW91bnRcIik7XG4gICAgICBiYWxhbmNlLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcInByZXNlbnRtZW50QW1vdW50VXNlZFwiLCBmdW5jdGlvbiAocHJlc2VudG1lbnRBbW91bnRVc2VkKSB7XG4gICAgICBwcmVzZW50bWVudEFtb3VudFVzZWQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgcHJlc2VudG1lbnRBbW91bnRVc2VkLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImlkXCIpO1xuICAgIHJvb3QuYWRkKFwibGFzdENoYXJhY3RlcnNcIik7XG4gIH0pO1xuICBzcHJlYWRzLkNhcnRGcmFnbWVudCA9IGRvY3VtZW50LmRlZmluZUZyYWdtZW50KFwiQ2FydEZyYWdtZW50XCIsIFwiQ2FydFwiLCBmdW5jdGlvbiAocm9vdCkge1xuICAgIHJvb3QuYWRkKFwiaWRcIik7XG4gICAgcm9vdC5hZGQoXCJjcmVhdGVkQXRcIik7XG4gICAgcm9vdC5hZGQoXCJ1cGRhdGVkQXRcIik7XG4gICAgcm9vdC5hZGQoXCJsaW5lc1wiLCB7XG4gICAgICBhcmdzOiB7XG4gICAgICAgIGZpcnN0OiAyNTBcbiAgICAgIH1cbiAgICB9LCBmdW5jdGlvbiAobGluZXMpIHtcbiAgICAgIGxpbmVzLmFkZChcInBhZ2VJbmZvXCIsIGZ1bmN0aW9uIChwYWdlSW5mbykge1xuICAgICAgICBwYWdlSW5mby5hZGQoXCJoYXNOZXh0UGFnZVwiKTtcbiAgICAgICAgcGFnZUluZm8uYWRkKFwiaGFzUHJldmlvdXNQYWdlXCIpO1xuICAgICAgfSk7XG4gICAgICBsaW5lcy5hZGQoXCJlZGdlc1wiLCBmdW5jdGlvbiAoZWRnZXMpIHtcbiAgICAgICAgZWRnZXMuYWRkKFwiY3Vyc29yXCIpO1xuICAgICAgICBlZGdlcy5hZGQoXCJub2RlXCIsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgbm9kZS5hZGRGcmFnbWVudChzcHJlYWRzLkNhcnRMaW5lRnJhZ21lbnQpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiYXR0cmlidXRlc1wiLCBmdW5jdGlvbiAoYXR0cmlidXRlcykge1xuICAgICAgYXR0cmlidXRlcy5hZGQoXCJrZXlcIik7XG4gICAgICBhdHRyaWJ1dGVzLmFkZChcInZhbHVlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiY29zdFwiLCBmdW5jdGlvbiAoY29zdCkge1xuICAgICAgY29zdC5hZGQoXCJjaGVja291dENoYXJnZUFtb3VudFwiLCBmdW5jdGlvbiAoY2hlY2tvdXRDaGFyZ2VBbW91bnQpIHtcbiAgICAgICAgY2hlY2tvdXRDaGFyZ2VBbW91bnQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICBjaGVja291dENoYXJnZUFtb3VudC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGNvc3QuYWRkKFwidG90YWxBbW91bnRcIiwgZnVuY3Rpb24gKHRvdGFsQW1vdW50KSB7XG4gICAgICAgIHRvdGFsQW1vdW50LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgdG90YWxBbW91bnQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBjb3N0LmFkZChcInN1YnRvdGFsQW1vdW50XCIsIGZ1bmN0aW9uIChzdWJ0b3RhbEFtb3VudCkge1xuICAgICAgICBzdWJ0b3RhbEFtb3VudC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIHN1YnRvdGFsQW1vdW50LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgY29zdC5hZGQoXCJ0b3RhbFRheEFtb3VudFwiLCBmdW5jdGlvbiAodG90YWxUYXhBbW91bnQpIHtcbiAgICAgICAgdG90YWxUYXhBbW91bnQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICB0b3RhbFRheEFtb3VudC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGNvc3QuYWRkKFwidG90YWxEdXR5QW1vdW50XCIsIGZ1bmN0aW9uICh0b3RhbER1dHlBbW91bnQpIHtcbiAgICAgICAgdG90YWxEdXR5QW1vdW50LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgdG90YWxEdXR5QW1vdW50LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiY2hlY2tvdXRVcmxcIik7XG4gICAgcm9vdC5hZGQoXCJkaXNjb3VudENvZGVzXCIsIGZ1bmN0aW9uIChkaXNjb3VudENvZGVzKSB7XG4gICAgICBkaXNjb3VudENvZGVzLmFkZChcImFwcGxpY2FibGVcIik7XG4gICAgICBkaXNjb3VudENvZGVzLmFkZChcImNvZGVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJkaXNjb3VudEFsbG9jYXRpb25zXCIsIGZ1bmN0aW9uIChkaXNjb3VudEFsbG9jYXRpb25zKSB7XG4gICAgICBkaXNjb3VudEFsbG9jYXRpb25zLmFkZChcImRpc2NvdW50ZWRBbW91bnRcIiwgZnVuY3Rpb24gKGRpc2NvdW50ZWRBbW91bnQpIHtcbiAgICAgICAgZGlzY291bnRlZEFtb3VudC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIGRpc2NvdW50ZWRBbW91bnQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBkaXNjb3VudEFsbG9jYXRpb25zLmFkZChcImRpc2NvdW50QXBwbGljYXRpb25cIiwgZnVuY3Rpb24gKGRpc2NvdW50QXBwbGljYXRpb24pIHtcbiAgICAgICAgZGlzY291bnRBcHBsaWNhdGlvbi5hZGQoXCJ0YXJnZXRUeXBlXCIpO1xuICAgICAgICBkaXNjb3VudEFwcGxpY2F0aW9uLmFkZChcImFsbG9jYXRpb25NZXRob2RcIik7XG4gICAgICAgIGRpc2NvdW50QXBwbGljYXRpb24uYWRkKFwidGFyZ2V0U2VsZWN0aW9uXCIpO1xuICAgICAgICBkaXNjb3VudEFwcGxpY2F0aW9uLmFkZChcInZhbHVlXCIsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgIHZhbHVlLmFkZElubGluZUZyYWdtZW50T24oXCJQcmljaW5nUGVyY2VudGFnZVZhbHVlXCIsIGZ1bmN0aW9uIChQcmljaW5nUGVyY2VudGFnZVZhbHVlKSB7XG4gICAgICAgICAgICBQcmljaW5nUGVyY2VudGFnZVZhbHVlLmFkZChcInBlcmNlbnRhZ2VcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdmFsdWUuYWRkSW5saW5lRnJhZ21lbnRPbihcIk1vbmV5VjJcIiwgZnVuY3Rpb24gKE1vbmV5VjIpIHtcbiAgICAgICAgICAgIE1vbmV5VjIuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICAgICAgTW9uZXlWMi5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBkaXNjb3VudEFsbG9jYXRpb25zLmFkZElubGluZUZyYWdtZW50T24oXCJDYXJ0Q29kZURpc2NvdW50QWxsb2NhdGlvblwiLCBmdW5jdGlvbiAoQ2FydENvZGVEaXNjb3VudEFsbG9jYXRpb24pIHtcbiAgICAgICAgQ2FydENvZGVEaXNjb3VudEFsbG9jYXRpb24uYWRkKFwiY29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGRJbmxpbmVGcmFnbWVudE9uKFwiQ2FydEF1dG9tYXRpY0Rpc2NvdW50QWxsb2NhdGlvblwiLCBmdW5jdGlvbiAoQ2FydEF1dG9tYXRpY0Rpc2NvdW50QWxsb2NhdGlvbikge1xuICAgICAgICBDYXJ0QXV0b21hdGljRGlzY291bnRBbGxvY2F0aW9uLmFkZChcInRpdGxlXCIpO1xuICAgICAgfSk7XG4gICAgICBkaXNjb3VudEFsbG9jYXRpb25zLmFkZElubGluZUZyYWdtZW50T24oXCJDYXJ0Q3VzdG9tRGlzY291bnRBbGxvY2F0aW9uXCIsIGZ1bmN0aW9uIChDYXJ0Q3VzdG9tRGlzY291bnRBbGxvY2F0aW9uKSB7XG4gICAgICAgIENhcnRDdXN0b21EaXNjb3VudEFsbG9jYXRpb24uYWRkKFwidGl0bGVcIik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImJ1eWVySWRlbnRpdHlcIiwgZnVuY3Rpb24gKGJ1eWVySWRlbnRpdHkpIHtcbiAgICAgIGJ1eWVySWRlbnRpdHkuYWRkKFwiY291bnRyeUNvZGVcIik7XG4gICAgICBidXllcklkZW50aXR5LmFkZChcInByZWZlcmVuY2VzXCIsIGZ1bmN0aW9uIChwcmVmZXJlbmNlcykge1xuICAgICAgICBwcmVmZXJlbmNlcy5hZGQoXCJkZWxpdmVyeVwiLCBmdW5jdGlvbiAoZGVsaXZlcnkpIHtcbiAgICAgICAgICBkZWxpdmVyeS5hZGQoXCJjb29yZGluYXRlc1wiLCBmdW5jdGlvbiAoY29vcmRpbmF0ZXMpIHtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzLmFkZChcImxhdGl0dWRlXCIpO1xuICAgICAgICAgICAgY29vcmRpbmF0ZXMuYWRkKFwibG9uZ2l0dWRlXCIpO1xuICAgICAgICAgICAgY29vcmRpbmF0ZXMuYWRkKFwiY291bnRyeUNvZGVcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZGVsaXZlcnkuYWRkKFwiZGVsaXZlcnlNZXRob2RcIik7XG4gICAgICAgICAgZGVsaXZlcnkuYWRkKFwicGlja3VwSGFuZGxlXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgcHJlZmVyZW5jZXMuYWRkKFwid2FsbGV0XCIpO1xuICAgICAgfSk7XG4gICAgICBidXllcklkZW50aXR5LmFkZChcImVtYWlsXCIpO1xuICAgICAgYnV5ZXJJZGVudGl0eS5hZGQoXCJwaG9uZVwiKTtcbiAgICAgIGJ1eWVySWRlbnRpdHkuYWRkKFwiY3VzdG9tZXJcIiwgZnVuY3Rpb24gKGN1c3RvbWVyKSB7XG4gICAgICAgIGN1c3RvbWVyLmFkZChcImVtYWlsXCIpO1xuICAgICAgfSk7XG4gICAgICBidXllcklkZW50aXR5LmFkZChcImRlbGl2ZXJ5QWRkcmVzc1ByZWZlcmVuY2VzXCIsIGZ1bmN0aW9uIChkZWxpdmVyeUFkZHJlc3NQcmVmZXJlbmNlcykge1xuICAgICAgICBkZWxpdmVyeUFkZHJlc3NQcmVmZXJlbmNlcy5hZGRJbmxpbmVGcmFnbWVudE9uKFwiTWFpbGluZ0FkZHJlc3NcIiwgZnVuY3Rpb24gKE1haWxpbmdBZGRyZXNzKSB7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwiYWRkcmVzczFcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwiYWRkcmVzczJcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwiY2l0eVwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJjb21wYW55XCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImNvdW50cnlcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwiY291bnRyeUNvZGVWMlwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJmaXJzdE5hbWVcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwiZm9ybWF0dGVkXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImZvcm1hdHRlZEFyZWFcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwibGFzdE5hbWVcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwibGF0aXR1ZGVcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwibG9uZ2l0dWRlXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcIm5hbWVcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwicGhvbmVcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwicHJvdmluY2VcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwicHJvdmluY2VDb2RlXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcInppcFwiKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImRlbGl2ZXJ5R3JvdXBzXCIsIHtcbiAgICAgIGFyZ3M6IHtcbiAgICAgICAgZmlyc3Q6IDEwXG4gICAgICB9XG4gICAgfSwgZnVuY3Rpb24gKGRlbGl2ZXJ5R3JvdXBzKSB7XG4gICAgICBkZWxpdmVyeUdyb3Vwcy5hZGQoXCJwYWdlSW5mb1wiLCBmdW5jdGlvbiAocGFnZUluZm8pIHtcbiAgICAgICAgcGFnZUluZm8uYWRkKFwiaGFzTmV4dFBhZ2VcIik7XG4gICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc1ByZXZpb3VzUGFnZVwiKTtcbiAgICAgIH0pO1xuICAgICAgZGVsaXZlcnlHcm91cHMuYWRkKFwiZWRnZXNcIiwgZnVuY3Rpb24gKGVkZ2VzKSB7XG4gICAgICAgIGVkZ2VzLmFkZChcIm5vZGVcIiwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICBub2RlLmFkZChcImlkXCIpO1xuICAgICAgICAgIG5vZGUuYWRkKFwiZGVsaXZlcnlBZGRyZXNzXCIsIGZ1bmN0aW9uIChkZWxpdmVyeUFkZHJlc3MpIHtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJhZGRyZXNzMlwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJhZGRyZXNzMVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJjaXR5XCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcImNvbXBhbnlcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwiY291bnRyeVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJjb3VudHJ5Q29kZVYyXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcImZpcnN0TmFtZVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJmb3JtYXR0ZWRcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwiZm9ybWF0dGVkQXJlYVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJsYXN0TmFtZVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJsYXRpdHVkZVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJsb25naXR1ZGVcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwibmFtZVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJwaG9uZVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJwcm92aW5jZVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJwcm92aW5jZUNvZGVcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgbm9kZS5hZGQoXCJkZWxpdmVyeU9wdGlvbnNcIiwgZnVuY3Rpb24gKGRlbGl2ZXJ5T3B0aW9ucykge1xuICAgICAgICAgICAgZGVsaXZlcnlPcHRpb25zLmFkZChcImNvZGVcIik7XG4gICAgICAgICAgICBkZWxpdmVyeU9wdGlvbnMuYWRkKFwiZGVsaXZlcnlNZXRob2RUeXBlXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlPcHRpb25zLmFkZChcImRlc2NyaXB0aW9uXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlPcHRpb25zLmFkZChcImVzdGltYXRlZENvc3RcIiwgZnVuY3Rpb24gKGVzdGltYXRlZENvc3QpIHtcbiAgICAgICAgICAgICAgZXN0aW1hdGVkQ29zdC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgICAgICAgIGVzdGltYXRlZENvc3QuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkZWxpdmVyeU9wdGlvbnMuYWRkKFwiaGFuZGxlXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlPcHRpb25zLmFkZChcInRpdGxlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIG5vZGUuYWRkKFwic2VsZWN0ZWREZWxpdmVyeU9wdGlvblwiLCBmdW5jdGlvbiAoc2VsZWN0ZWREZWxpdmVyeU9wdGlvbikge1xuICAgICAgICAgICAgc2VsZWN0ZWREZWxpdmVyeU9wdGlvbi5hZGQoXCJjb2RlXCIpO1xuICAgICAgICAgICAgc2VsZWN0ZWREZWxpdmVyeU9wdGlvbi5hZGQoXCJkZWxpdmVyeU1ldGhvZFR5cGVcIik7XG4gICAgICAgICAgICBzZWxlY3RlZERlbGl2ZXJ5T3B0aW9uLmFkZChcImRlc2NyaXB0aW9uXCIpO1xuICAgICAgICAgICAgc2VsZWN0ZWREZWxpdmVyeU9wdGlvbi5hZGQoXCJlc3RpbWF0ZWRDb3N0XCIsIGZ1bmN0aW9uIChlc3RpbWF0ZWRDb3N0KSB7XG4gICAgICAgICAgICAgIGVzdGltYXRlZENvc3QuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICAgICAgICBlc3RpbWF0ZWRDb3N0LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc2VsZWN0ZWREZWxpdmVyeU9wdGlvbi5hZGQoXCJoYW5kbGVcIik7XG4gICAgICAgICAgICBzZWxlY3RlZERlbGl2ZXJ5T3B0aW9uLmFkZChcInRpdGxlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIG5vZGUuYWRkKFwiY2FydExpbmVzXCIsIHtcbiAgICAgICAgICAgIGFyZ3M6IHtcbiAgICAgICAgICAgICAgZmlyc3Q6IDI1MFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIGZ1bmN0aW9uIChjYXJ0TGluZXMpIHtcbiAgICAgICAgICAgIGNhcnRMaW5lcy5hZGQoXCJwYWdlSW5mb1wiLCBmdW5jdGlvbiAocGFnZUluZm8pIHtcbiAgICAgICAgICAgICAgcGFnZUluZm8uYWRkKFwiaGFzTmV4dFBhZ2VcIik7XG4gICAgICAgICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc1ByZXZpb3VzUGFnZVwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY2FydExpbmVzLmFkZChcImVkZ2VzXCIsIGZ1bmN0aW9uIChlZGdlcykge1xuICAgICAgICAgICAgICBlZGdlcy5hZGQoXCJjdXJzb3JcIik7XG4gICAgICAgICAgICAgIGVkZ2VzLmFkZChcIm5vZGVcIiwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgICAgICBub2RlLmFkZChcImlkXCIpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiYXBwbGllZEdpZnRDYXJkc1wiLCBmdW5jdGlvbiAoYXBwbGllZEdpZnRDYXJkcykge1xuICAgICAgYXBwbGllZEdpZnRDYXJkcy5hZGRGcmFnbWVudChzcHJlYWRzLkFwcGxpZWRHaWZ0Q2FyZEZyYWdtZW50KTtcbiAgICB9KTtcbiAgICByb290LmFkZChcIm5vdGVcIik7XG4gIH0pO1xuICBzcHJlYWRzLkNhcnRVc2VyRXJyb3JGcmFnbWVudCA9IGRvY3VtZW50LmRlZmluZUZyYWdtZW50KFwiQ2FydFVzZXJFcnJvckZyYWdtZW50XCIsIFwiQ2FydFVzZXJFcnJvclwiLCBmdW5jdGlvbiAocm9vdCkge1xuICAgIHJvb3QuYWRkKFwiZmllbGRcIik7XG4gICAgcm9vdC5hZGQoXCJtZXNzYWdlXCIpO1xuICAgIHJvb3QuYWRkKFwiY29kZVwiKTtcbiAgfSk7XG4gIHNwcmVhZHMuQ2FydFdhcm5pbmdGcmFnbWVudCA9IGRvY3VtZW50LmRlZmluZUZyYWdtZW50KFwiQ2FydFdhcm5pbmdGcmFnbWVudFwiLCBcIkNhcnRXYXJuaW5nXCIsIGZ1bmN0aW9uIChyb290KSB7XG4gICAgcm9vdC5hZGQoXCJjb2RlXCIpO1xuICAgIHJvb3QuYWRkKFwibWVzc2FnZVwiKTtcbiAgfSk7XG4gIGRvY3VtZW50LmFkZE11dGF0aW9uKFwiQ2FydExpbmVzVXBkYXRlXCIsIFt2YXJpYWJsZXMuQ2FydExpbmVzVXBkYXRlLmNhcnRJZCwgdmFyaWFibGVzLkNhcnRMaW5lc1VwZGF0ZS5saW5lc10sIGZ1bmN0aW9uIChyb290KSB7XG4gICAgcm9vdC5hZGQoXCJjYXJ0TGluZXNVcGRhdGVcIiwge1xuICAgICAgYXJnczoge1xuICAgICAgICBjYXJ0SWQ6IHZhcmlhYmxlcy5DYXJ0TGluZXNVcGRhdGUuY2FydElkLFxuICAgICAgICBsaW5lczogdmFyaWFibGVzLkNhcnRMaW5lc1VwZGF0ZS5saW5lc1xuICAgICAgfVxuICAgIH0sIGZ1bmN0aW9uIChjYXJ0TGluZXNVcGRhdGUpIHtcbiAgICAgIGNhcnRMaW5lc1VwZGF0ZS5hZGQoXCJjYXJ0XCIsIGZ1bmN0aW9uIChjYXJ0KSB7XG4gICAgICAgIGNhcnQuYWRkRnJhZ21lbnQoc3ByZWFkcy5DYXJ0RnJhZ21lbnQpO1xuICAgICAgfSk7XG4gICAgICBjYXJ0TGluZXNVcGRhdGUuYWRkKFwidXNlckVycm9yc1wiLCBmdW5jdGlvbiAodXNlckVycm9ycykge1xuICAgICAgICB1c2VyRXJyb3JzLmFkZEZyYWdtZW50KHNwcmVhZHMuQ2FydFVzZXJFcnJvckZyYWdtZW50KTtcbiAgICAgIH0pO1xuICAgICAgY2FydExpbmVzVXBkYXRlLmFkZChcIndhcm5pbmdzXCIsIGZ1bmN0aW9uICh3YXJuaW5ncykge1xuICAgICAgICB3YXJuaW5ncy5hZGRGcmFnbWVudChzcHJlYWRzLkNhcnRXYXJuaW5nRnJhZ21lbnQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gZG9jdW1lbnQ7XG59XG5cbmZ1bmN0aW9uIHF1ZXJ5JDIxKGNsaWVudCkge1xuICB2YXIgZG9jdW1lbnQgPSBjbGllbnQuZG9jdW1lbnQoKTtcbiAgdmFyIHNwcmVhZHMgPSB7fTtcbiAgdmFyIHZhcmlhYmxlcyA9IHt9O1xuICB2YXJpYWJsZXMuQ2FydE5vdGVVcGRhdGUgPSB7fTtcbiAgdmFyaWFibGVzLkNhcnROb3RlVXBkYXRlLmNhcnRJZCA9IGNsaWVudC52YXJpYWJsZShcImNhcnRJZFwiLCBcIklEIVwiKTtcbiAgdmFyaWFibGVzLkNhcnROb3RlVXBkYXRlLm5vdGUgPSBjbGllbnQudmFyaWFibGUoXCJub3RlXCIsIFwiU3RyaW5nIVwiKTtcbiAgc3ByZWFkcy5DYXJ0TGluZUZyYWdtZW50ID0gZG9jdW1lbnQuZGVmaW5lRnJhZ21lbnQoXCJDYXJ0TGluZUZyYWdtZW50XCIsIFwiQmFzZUNhcnRMaW5lXCIsIGZ1bmN0aW9uIChyb290KSB7XG4gICAgcm9vdC5hZGQoXCJpZFwiKTtcbiAgICByb290LmFkZChcIm1lcmNoYW5kaXNlXCIsIGZ1bmN0aW9uIChtZXJjaGFuZGlzZSkge1xuICAgICAgbWVyY2hhbmRpc2UuYWRkSW5saW5lRnJhZ21lbnRPbihcIlByb2R1Y3RWYXJpYW50XCIsIGZ1bmN0aW9uIChQcm9kdWN0VmFyaWFudCkge1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJpZFwiKTtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwidGl0bGVcIik7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcImltYWdlXCIsIGZ1bmN0aW9uIChpbWFnZSkge1xuICAgICAgICAgIGltYWdlLmFkZChcImlkXCIpO1xuICAgICAgICAgIGltYWdlLmFkZChcInVybFwiLCB7XG4gICAgICAgICAgICBhbGlhczogXCJzcmNcIlxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGltYWdlLmFkZChcImFsdFRleHRcIik7XG4gICAgICAgICAgaW1hZ2UuYWRkKFwid2lkdGhcIik7XG4gICAgICAgICAgaW1hZ2UuYWRkKFwiaGVpZ2h0XCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwicHJvZHVjdFwiLCBmdW5jdGlvbiAocHJvZHVjdCkge1xuICAgICAgICAgIHByb2R1Y3QuYWRkKFwiaWRcIik7XG4gICAgICAgICAgcHJvZHVjdC5hZGQoXCJoYW5kbGVcIik7XG4gICAgICAgICAgcHJvZHVjdC5hZGQoXCJ0aXRsZVwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcIndlaWdodFwiKTtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwiYXZhaWxhYmxlRm9yU2FsZVwiLCB7XG4gICAgICAgICAgYWxpYXM6IFwiYXZhaWxhYmxlXCJcbiAgICAgICAgfSk7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcInNrdVwiKTtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwic2VsZWN0ZWRPcHRpb25zXCIsIGZ1bmN0aW9uIChzZWxlY3RlZE9wdGlvbnMpIHtcbiAgICAgICAgICBzZWxlY3RlZE9wdGlvbnMuYWRkKFwibmFtZVwiKTtcbiAgICAgICAgICBzZWxlY3RlZE9wdGlvbnMuYWRkKFwidmFsdWVcIik7XG4gICAgICAgIH0pO1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJjb21wYXJlQXRQcmljZVwiLCBmdW5jdGlvbiAoY29tcGFyZUF0UHJpY2UpIHtcbiAgICAgICAgICBjb21wYXJlQXRQcmljZS5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgICAgY29tcGFyZUF0UHJpY2UuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwicHJpY2VcIiwgZnVuY3Rpb24gKHByaWNlKSB7XG4gICAgICAgICAgcHJpY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICAgIHByaWNlLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcInVuaXRQcmljZVwiLCBmdW5jdGlvbiAodW5pdFByaWNlKSB7XG4gICAgICAgICAgdW5pdFByaWNlLmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgICB1bml0UHJpY2UuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwidW5pdFByaWNlTWVhc3VyZW1lbnRcIiwgZnVuY3Rpb24gKHVuaXRQcmljZU1lYXN1cmVtZW50KSB7XG4gICAgICAgICAgdW5pdFByaWNlTWVhc3VyZW1lbnQuYWRkKFwibWVhc3VyZWRUeXBlXCIpO1xuICAgICAgICAgIHVuaXRQcmljZU1lYXN1cmVtZW50LmFkZChcInF1YW50aXR5VW5pdFwiKTtcbiAgICAgICAgICB1bml0UHJpY2VNZWFzdXJlbWVudC5hZGQoXCJxdWFudGl0eVZhbHVlXCIpO1xuICAgICAgICAgIHVuaXRQcmljZU1lYXN1cmVtZW50LmFkZChcInJlZmVyZW5jZVVuaXRcIik7XG4gICAgICAgICAgdW5pdFByaWNlTWVhc3VyZW1lbnQuYWRkKFwicmVmZXJlbmNlVmFsdWVcIik7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJxdWFudGl0eVwiKTtcbiAgICByb290LmFkZChcImF0dHJpYnV0ZXNcIiwgZnVuY3Rpb24gKGF0dHJpYnV0ZXMpIHtcbiAgICAgIGF0dHJpYnV0ZXMuYWRkKFwia2V5XCIpO1xuICAgICAgYXR0cmlidXRlcy5hZGQoXCJ2YWx1ZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImNvc3RcIiwgZnVuY3Rpb24gKGNvc3QpIHtcbiAgICAgIGNvc3QuYWRkKFwidG90YWxBbW91bnRcIiwgZnVuY3Rpb24gKHRvdGFsQW1vdW50KSB7XG4gICAgICAgIHRvdGFsQW1vdW50LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgdG90YWxBbW91bnQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBjb3N0LmFkZChcInN1YnRvdGFsQW1vdW50XCIsIGZ1bmN0aW9uIChzdWJ0b3RhbEFtb3VudCkge1xuICAgICAgICBzdWJ0b3RhbEFtb3VudC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIHN1YnRvdGFsQW1vdW50LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgY29zdC5hZGQoXCJhbW91bnRQZXJRdWFudGl0eVwiLCBmdW5jdGlvbiAoYW1vdW50UGVyUXVhbnRpdHkpIHtcbiAgICAgICAgYW1vdW50UGVyUXVhbnRpdHkuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICBhbW91bnRQZXJRdWFudGl0eS5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGNvc3QuYWRkKFwiY29tcGFyZUF0QW1vdW50UGVyUXVhbnRpdHlcIiwgZnVuY3Rpb24gKGNvbXBhcmVBdEFtb3VudFBlclF1YW50aXR5KSB7XG4gICAgICAgIGNvbXBhcmVBdEFtb3VudFBlclF1YW50aXR5LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgY29tcGFyZUF0QW1vdW50UGVyUXVhbnRpdHkuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJkaXNjb3VudEFsbG9jYXRpb25zXCIsIGZ1bmN0aW9uIChkaXNjb3VudEFsbG9jYXRpb25zKSB7XG4gICAgICBkaXNjb3VudEFsbG9jYXRpb25zLmFkZChcImRpc2NvdW50ZWRBbW91bnRcIiwgZnVuY3Rpb24gKGRpc2NvdW50ZWRBbW91bnQpIHtcbiAgICAgICAgZGlzY291bnRlZEFtb3VudC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIGRpc2NvdW50ZWRBbW91bnQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBkaXNjb3VudEFsbG9jYXRpb25zLmFkZChcImRpc2NvdW50QXBwbGljYXRpb25cIiwgZnVuY3Rpb24gKGRpc2NvdW50QXBwbGljYXRpb24pIHtcbiAgICAgICAgZGlzY291bnRBcHBsaWNhdGlvbi5hZGQoXCJ0YXJnZXRUeXBlXCIpO1xuICAgICAgICBkaXNjb3VudEFwcGxpY2F0aW9uLmFkZChcImFsbG9jYXRpb25NZXRob2RcIik7XG4gICAgICAgIGRpc2NvdW50QXBwbGljYXRpb24uYWRkKFwidGFyZ2V0U2VsZWN0aW9uXCIpO1xuICAgICAgICBkaXNjb3VudEFwcGxpY2F0aW9uLmFkZChcInZhbHVlXCIsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgIHZhbHVlLmFkZElubGluZUZyYWdtZW50T24oXCJQcmljaW5nUGVyY2VudGFnZVZhbHVlXCIsIGZ1bmN0aW9uIChQcmljaW5nUGVyY2VudGFnZVZhbHVlKSB7XG4gICAgICAgICAgICBQcmljaW5nUGVyY2VudGFnZVZhbHVlLmFkZChcInBlcmNlbnRhZ2VcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdmFsdWUuYWRkSW5saW5lRnJhZ21lbnRPbihcIk1vbmV5VjJcIiwgZnVuY3Rpb24gKE1vbmV5VjIpIHtcbiAgICAgICAgICAgIE1vbmV5VjIuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICAgICAgTW9uZXlWMi5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBkaXNjb3VudEFsbG9jYXRpb25zLmFkZElubGluZUZyYWdtZW50T24oXCJDYXJ0Q29kZURpc2NvdW50QWxsb2NhdGlvblwiLCBmdW5jdGlvbiAoQ2FydENvZGVEaXNjb3VudEFsbG9jYXRpb24pIHtcbiAgICAgICAgQ2FydENvZGVEaXNjb3VudEFsbG9jYXRpb24uYWRkKFwiY29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGRJbmxpbmVGcmFnbWVudE9uKFwiQ2FydEF1dG9tYXRpY0Rpc2NvdW50QWxsb2NhdGlvblwiLCBmdW5jdGlvbiAoQ2FydEF1dG9tYXRpY0Rpc2NvdW50QWxsb2NhdGlvbikge1xuICAgICAgICBDYXJ0QXV0b21hdGljRGlzY291bnRBbGxvY2F0aW9uLmFkZChcInRpdGxlXCIpO1xuICAgICAgfSk7XG4gICAgICBkaXNjb3VudEFsbG9jYXRpb25zLmFkZElubGluZUZyYWdtZW50T24oXCJDYXJ0Q3VzdG9tRGlzY291bnRBbGxvY2F0aW9uXCIsIGZ1bmN0aW9uIChDYXJ0Q3VzdG9tRGlzY291bnRBbGxvY2F0aW9uKSB7XG4gICAgICAgIENhcnRDdXN0b21EaXNjb3VudEFsbG9jYXRpb24uYWRkKFwidGl0bGVcIik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG4gIHNwcmVhZHMuQXBwbGllZEdpZnRDYXJkRnJhZ21lbnQgPSBkb2N1bWVudC5kZWZpbmVGcmFnbWVudChcIkFwcGxpZWRHaWZ0Q2FyZEZyYWdtZW50XCIsIFwiQXBwbGllZEdpZnRDYXJkXCIsIGZ1bmN0aW9uIChyb290KSB7XG4gICAgcm9vdC5hZGQoXCJhbW91bnRVc2VkXCIsIGZ1bmN0aW9uIChhbW91bnRVc2VkKSB7XG4gICAgICBhbW91bnRVc2VkLmFkZChcImFtb3VudFwiKTtcbiAgICAgIGFtb3VudFVzZWQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiYW1vdW50VXNlZFwiLCB7XG4gICAgICBhbGlhczogXCJhbW91bnRVc2VkVjJcIlxuICAgIH0sIGZ1bmN0aW9uIChhbW91bnRVc2VkKSB7XG4gICAgICBhbW91bnRVc2VkLmFkZChcImFtb3VudFwiKTtcbiAgICAgIGFtb3VudFVzZWQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiYmFsYW5jZVwiLCBmdW5jdGlvbiAoYmFsYW5jZSkge1xuICAgICAgYmFsYW5jZS5hZGQoXCJhbW91bnRcIik7XG4gICAgICBiYWxhbmNlLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImJhbGFuY2VcIiwge1xuICAgICAgYWxpYXM6IFwiYmFsYW5jZVYyXCJcbiAgICB9LCBmdW5jdGlvbiAoYmFsYW5jZSkge1xuICAgICAgYmFsYW5jZS5hZGQoXCJhbW91bnRcIik7XG4gICAgICBiYWxhbmNlLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcInByZXNlbnRtZW50QW1vdW50VXNlZFwiLCBmdW5jdGlvbiAocHJlc2VudG1lbnRBbW91bnRVc2VkKSB7XG4gICAgICBwcmVzZW50bWVudEFtb3VudFVzZWQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgcHJlc2VudG1lbnRBbW91bnRVc2VkLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImlkXCIpO1xuICAgIHJvb3QuYWRkKFwibGFzdENoYXJhY3RlcnNcIik7XG4gIH0pO1xuICBzcHJlYWRzLkNhcnRGcmFnbWVudCA9IGRvY3VtZW50LmRlZmluZUZyYWdtZW50KFwiQ2FydEZyYWdtZW50XCIsIFwiQ2FydFwiLCBmdW5jdGlvbiAocm9vdCkge1xuICAgIHJvb3QuYWRkKFwiaWRcIik7XG4gICAgcm9vdC5hZGQoXCJjcmVhdGVkQXRcIik7XG4gICAgcm9vdC5hZGQoXCJ1cGRhdGVkQXRcIik7XG4gICAgcm9vdC5hZGQoXCJsaW5lc1wiLCB7XG4gICAgICBhcmdzOiB7XG4gICAgICAgIGZpcnN0OiAyNTBcbiAgICAgIH1cbiAgICB9LCBmdW5jdGlvbiAobGluZXMpIHtcbiAgICAgIGxpbmVzLmFkZChcInBhZ2VJbmZvXCIsIGZ1bmN0aW9uIChwYWdlSW5mbykge1xuICAgICAgICBwYWdlSW5mby5hZGQoXCJoYXNOZXh0UGFnZVwiKTtcbiAgICAgICAgcGFnZUluZm8uYWRkKFwiaGFzUHJldmlvdXNQYWdlXCIpO1xuICAgICAgfSk7XG4gICAgICBsaW5lcy5hZGQoXCJlZGdlc1wiLCBmdW5jdGlvbiAoZWRnZXMpIHtcbiAgICAgICAgZWRnZXMuYWRkKFwiY3Vyc29yXCIpO1xuICAgICAgICBlZGdlcy5hZGQoXCJub2RlXCIsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgbm9kZS5hZGRGcmFnbWVudChzcHJlYWRzLkNhcnRMaW5lRnJhZ21lbnQpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiYXR0cmlidXRlc1wiLCBmdW5jdGlvbiAoYXR0cmlidXRlcykge1xuICAgICAgYXR0cmlidXRlcy5hZGQoXCJrZXlcIik7XG4gICAgICBhdHRyaWJ1dGVzLmFkZChcInZhbHVlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiY29zdFwiLCBmdW5jdGlvbiAoY29zdCkge1xuICAgICAgY29zdC5hZGQoXCJjaGVja291dENoYXJnZUFtb3VudFwiLCBmdW5jdGlvbiAoY2hlY2tvdXRDaGFyZ2VBbW91bnQpIHtcbiAgICAgICAgY2hlY2tvdXRDaGFyZ2VBbW91bnQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICBjaGVja291dENoYXJnZUFtb3VudC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGNvc3QuYWRkKFwidG90YWxBbW91bnRcIiwgZnVuY3Rpb24gKHRvdGFsQW1vdW50KSB7XG4gICAgICAgIHRvdGFsQW1vdW50LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgdG90YWxBbW91bnQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBjb3N0LmFkZChcInN1YnRvdGFsQW1vdW50XCIsIGZ1bmN0aW9uIChzdWJ0b3RhbEFtb3VudCkge1xuICAgICAgICBzdWJ0b3RhbEFtb3VudC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIHN1YnRvdGFsQW1vdW50LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgY29zdC5hZGQoXCJ0b3RhbFRheEFtb3VudFwiLCBmdW5jdGlvbiAodG90YWxUYXhBbW91bnQpIHtcbiAgICAgICAgdG90YWxUYXhBbW91bnQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICB0b3RhbFRheEFtb3VudC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGNvc3QuYWRkKFwidG90YWxEdXR5QW1vdW50XCIsIGZ1bmN0aW9uICh0b3RhbER1dHlBbW91bnQpIHtcbiAgICAgICAgdG90YWxEdXR5QW1vdW50LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgdG90YWxEdXR5QW1vdW50LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiY2hlY2tvdXRVcmxcIik7XG4gICAgcm9vdC5hZGQoXCJkaXNjb3VudENvZGVzXCIsIGZ1bmN0aW9uIChkaXNjb3VudENvZGVzKSB7XG4gICAgICBkaXNjb3VudENvZGVzLmFkZChcImFwcGxpY2FibGVcIik7XG4gICAgICBkaXNjb3VudENvZGVzLmFkZChcImNvZGVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJkaXNjb3VudEFsbG9jYXRpb25zXCIsIGZ1bmN0aW9uIChkaXNjb3VudEFsbG9jYXRpb25zKSB7XG4gICAgICBkaXNjb3VudEFsbG9jYXRpb25zLmFkZChcImRpc2NvdW50ZWRBbW91bnRcIiwgZnVuY3Rpb24gKGRpc2NvdW50ZWRBbW91bnQpIHtcbiAgICAgICAgZGlzY291bnRlZEFtb3VudC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIGRpc2NvdW50ZWRBbW91bnQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBkaXNjb3VudEFsbG9jYXRpb25zLmFkZChcImRpc2NvdW50QXBwbGljYXRpb25cIiwgZnVuY3Rpb24gKGRpc2NvdW50QXBwbGljYXRpb24pIHtcbiAgICAgICAgZGlzY291bnRBcHBsaWNhdGlvbi5hZGQoXCJ0YXJnZXRUeXBlXCIpO1xuICAgICAgICBkaXNjb3VudEFwcGxpY2F0aW9uLmFkZChcImFsbG9jYXRpb25NZXRob2RcIik7XG4gICAgICAgIGRpc2NvdW50QXBwbGljYXRpb24uYWRkKFwidGFyZ2V0U2VsZWN0aW9uXCIpO1xuICAgICAgICBkaXNjb3VudEFwcGxpY2F0aW9uLmFkZChcInZhbHVlXCIsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgIHZhbHVlLmFkZElubGluZUZyYWdtZW50T24oXCJQcmljaW5nUGVyY2VudGFnZVZhbHVlXCIsIGZ1bmN0aW9uIChQcmljaW5nUGVyY2VudGFnZVZhbHVlKSB7XG4gICAgICAgICAgICBQcmljaW5nUGVyY2VudGFnZVZhbHVlLmFkZChcInBlcmNlbnRhZ2VcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdmFsdWUuYWRkSW5saW5lRnJhZ21lbnRPbihcIk1vbmV5VjJcIiwgZnVuY3Rpb24gKE1vbmV5VjIpIHtcbiAgICAgICAgICAgIE1vbmV5VjIuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICAgICAgTW9uZXlWMi5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBkaXNjb3VudEFsbG9jYXRpb25zLmFkZElubGluZUZyYWdtZW50T24oXCJDYXJ0Q29kZURpc2NvdW50QWxsb2NhdGlvblwiLCBmdW5jdGlvbiAoQ2FydENvZGVEaXNjb3VudEFsbG9jYXRpb24pIHtcbiAgICAgICAgQ2FydENvZGVEaXNjb3VudEFsbG9jYXRpb24uYWRkKFwiY29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgZGlzY291bnRBbGxvY2F0aW9ucy5hZGRJbmxpbmVGcmFnbWVudE9uKFwiQ2FydEF1dG9tYXRpY0Rpc2NvdW50QWxsb2NhdGlvblwiLCBmdW5jdGlvbiAoQ2FydEF1dG9tYXRpY0Rpc2NvdW50QWxsb2NhdGlvbikge1xuICAgICAgICBDYXJ0QXV0b21hdGljRGlzY291bnRBbGxvY2F0aW9uLmFkZChcInRpdGxlXCIpO1xuICAgICAgfSk7XG4gICAgICBkaXNjb3VudEFsbG9jYXRpb25zLmFkZElubGluZUZyYWdtZW50T24oXCJDYXJ0Q3VzdG9tRGlzY291bnRBbGxvY2F0aW9uXCIsIGZ1bmN0aW9uIChDYXJ0Q3VzdG9tRGlzY291bnRBbGxvY2F0aW9uKSB7XG4gICAgICAgIENhcnRDdXN0b21EaXNjb3VudEFsbG9jYXRpb24uYWRkKFwidGl0bGVcIik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImJ1eWVySWRlbnRpdHlcIiwgZnVuY3Rpb24gKGJ1eWVySWRlbnRpdHkpIHtcbiAgICAgIGJ1eWVySWRlbnRpdHkuYWRkKFwiY291bnRyeUNvZGVcIik7XG4gICAgICBidXllcklkZW50aXR5LmFkZChcInByZWZlcmVuY2VzXCIsIGZ1bmN0aW9uIChwcmVmZXJlbmNlcykge1xuICAgICAgICBwcmVmZXJlbmNlcy5hZGQoXCJkZWxpdmVyeVwiLCBmdW5jdGlvbiAoZGVsaXZlcnkpIHtcbiAgICAgICAgICBkZWxpdmVyeS5hZGQoXCJjb29yZGluYXRlc1wiLCBmdW5jdGlvbiAoY29vcmRpbmF0ZXMpIHtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzLmFkZChcImxhdGl0dWRlXCIpO1xuICAgICAgICAgICAgY29vcmRpbmF0ZXMuYWRkKFwibG9uZ2l0dWRlXCIpO1xuICAgICAgICAgICAgY29vcmRpbmF0ZXMuYWRkKFwiY291bnRyeUNvZGVcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZGVsaXZlcnkuYWRkKFwiZGVsaXZlcnlNZXRob2RcIik7XG4gICAgICAgICAgZGVsaXZlcnkuYWRkKFwicGlja3VwSGFuZGxlXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgcHJlZmVyZW5jZXMuYWRkKFwid2FsbGV0XCIpO1xuICAgICAgfSk7XG4gICAgICBidXllcklkZW50aXR5LmFkZChcImVtYWlsXCIpO1xuICAgICAgYnV5ZXJJZGVudGl0eS5hZGQoXCJwaG9uZVwiKTtcbiAgICAgIGJ1eWVySWRlbnRpdHkuYWRkKFwiY3VzdG9tZXJcIiwgZnVuY3Rpb24gKGN1c3RvbWVyKSB7XG4gICAgICAgIGN1c3RvbWVyLmFkZChcImVtYWlsXCIpO1xuICAgICAgfSk7XG4gICAgICBidXllcklkZW50aXR5LmFkZChcImRlbGl2ZXJ5QWRkcmVzc1ByZWZlcmVuY2VzXCIsIGZ1bmN0aW9uIChkZWxpdmVyeUFkZHJlc3NQcmVmZXJlbmNlcykge1xuICAgICAgICBkZWxpdmVyeUFkZHJlc3NQcmVmZXJlbmNlcy5hZGRJbmxpbmVGcmFnbWVudE9uKFwiTWFpbGluZ0FkZHJlc3NcIiwgZnVuY3Rpb24gKE1haWxpbmdBZGRyZXNzKSB7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwiYWRkcmVzczFcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwiYWRkcmVzczJcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwiY2l0eVwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJjb21wYW55XCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImNvdW50cnlcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwiY291bnRyeUNvZGVWMlwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJmaXJzdE5hbWVcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwiZm9ybWF0dGVkXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImZvcm1hdHRlZEFyZWFcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwibGFzdE5hbWVcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwibGF0aXR1ZGVcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwibG9uZ2l0dWRlXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcIm5hbWVcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwicGhvbmVcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwicHJvdmluY2VcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwicHJvdmluY2VDb2RlXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcInppcFwiKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImRlbGl2ZXJ5R3JvdXBzXCIsIHtcbiAgICAgIGFyZ3M6IHtcbiAgICAgICAgZmlyc3Q6IDEwXG4gICAgICB9XG4gICAgfSwgZnVuY3Rpb24gKGRlbGl2ZXJ5R3JvdXBzKSB7XG4gICAgICBkZWxpdmVyeUdyb3Vwcy5hZGQoXCJwYWdlSW5mb1wiLCBmdW5jdGlvbiAocGFnZUluZm8pIHtcbiAgICAgICAgcGFnZUluZm8uYWRkKFwiaGFzTmV4dFBhZ2VcIik7XG4gICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc1ByZXZpb3VzUGFnZVwiKTtcbiAgICAgIH0pO1xuICAgICAgZGVsaXZlcnlHcm91cHMuYWRkKFwiZWRnZXNcIiwgZnVuY3Rpb24gKGVkZ2VzKSB7XG4gICAgICAgIGVkZ2VzLmFkZChcIm5vZGVcIiwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICBub2RlLmFkZChcImlkXCIpO1xuICAgICAgICAgIG5vZGUuYWRkKFwiZGVsaXZlcnlBZGRyZXNzXCIsIGZ1bmN0aW9uIChkZWxpdmVyeUFkZHJlc3MpIHtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJhZGRyZXNzMlwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJhZGRyZXNzMVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJjaXR5XCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcImNvbXBhbnlcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwiY291bnRyeVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJjb3VudHJ5Q29kZVYyXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcImZpcnN0TmFtZVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJmb3JtYXR0ZWRcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwiZm9ybWF0dGVkQXJlYVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJsYXN0TmFtZVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJsYXRpdHVkZVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJsb25naXR1ZGVcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwibmFtZVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJwaG9uZVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJwcm92aW5jZVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJwcm92aW5jZUNvZGVcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgbm9kZS5hZGQoXCJkZWxpdmVyeU9wdGlvbnNcIiwgZnVuY3Rpb24gKGRlbGl2ZXJ5T3B0aW9ucykge1xuICAgICAgICAgICAgZGVsaXZlcnlPcHRpb25zLmFkZChcImNvZGVcIik7XG4gICAgICAgICAgICBkZWxpdmVyeU9wdGlvbnMuYWRkKFwiZGVsaXZlcnlNZXRob2RUeXBlXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlPcHRpb25zLmFkZChcImRlc2NyaXB0aW9uXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlPcHRpb25zLmFkZChcImVzdGltYXRlZENvc3RcIiwgZnVuY3Rpb24gKGVzdGltYXRlZENvc3QpIHtcbiAgICAgICAgICAgICAgZXN0aW1hdGVkQ29zdC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgICAgICAgIGVzdGltYXRlZENvc3QuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkZWxpdmVyeU9wdGlvbnMuYWRkKFwiaGFuZGxlXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlPcHRpb25zLmFkZChcInRpdGxlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIG5vZGUuYWRkKFwic2VsZWN0ZWREZWxpdmVyeU9wdGlvblwiLCBmdW5jdGlvbiAoc2VsZWN0ZWREZWxpdmVyeU9wdGlvbikge1xuICAgICAgICAgICAgc2VsZWN0ZWREZWxpdmVyeU9wdGlvbi5hZGQoXCJjb2RlXCIpO1xuICAgICAgICAgICAgc2VsZWN0ZWREZWxpdmVyeU9wdGlvbi5hZGQoXCJkZWxpdmVyeU1ldGhvZFR5cGVcIik7XG4gICAgICAgICAgICBzZWxlY3RlZERlbGl2ZXJ5T3B0aW9uLmFkZChcImRlc2NyaXB0aW9uXCIpO1xuICAgICAgICAgICAgc2VsZWN0ZWREZWxpdmVyeU9wdGlvbi5hZGQoXCJlc3RpbWF0ZWRDb3N0XCIsIGZ1bmN0aW9uIChlc3RpbWF0ZWRDb3N0KSB7XG4gICAgICAgICAgICAgIGVzdGltYXRlZENvc3QuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICAgICAgICBlc3RpbWF0ZWRDb3N0LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc2VsZWN0ZWREZWxpdmVyeU9wdGlvbi5hZGQoXCJoYW5kbGVcIik7XG4gICAgICAgICAgICBzZWxlY3RlZERlbGl2ZXJ5T3B0aW9uLmFkZChcInRpdGxlXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIG5vZGUuYWRkKFwiY2FydExpbmVzXCIsIHtcbiAgICAgICAgICAgIGFyZ3M6IHtcbiAgICAgICAgICAgICAgZmlyc3Q6IDI1MFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIGZ1bmN0aW9uIChjYXJ0TGluZXMpIHtcbiAgICAgICAgICAgIGNhcnRMaW5lcy5hZGQoXCJwYWdlSW5mb1wiLCBmdW5jdGlvbiAocGFnZUluZm8pIHtcbiAgICAgICAgICAgICAgcGFnZUluZm8uYWRkKFwiaGFzTmV4dFBhZ2VcIik7XG4gICAgICAgICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc1ByZXZpb3VzUGFnZVwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY2FydExpbmVzLmFkZChcImVkZ2VzXCIsIGZ1bmN0aW9uIChlZGdlcykge1xuICAgICAgICAgICAgICBlZGdlcy5hZGQoXCJjdXJzb3JcIik7XG4gICAgICAgICAgICAgIGVkZ2VzLmFkZChcIm5vZGVcIiwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgICAgICBub2RlLmFkZChcImlkXCIpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiYXBwbGllZEdpZnRDYXJkc1wiLCBmdW5jdGlvbiAoYXBwbGllZEdpZnRDYXJkcykge1xuICAgICAgYXBwbGllZEdpZnRDYXJkcy5hZGRGcmFnbWVudChzcHJlYWRzLkFwcGxpZWRHaWZ0Q2FyZEZyYWdtZW50KTtcbiAgICB9KTtcbiAgICByb290LmFkZChcIm5vdGVcIik7XG4gIH0pO1xuICBkb2N1bWVudC5hZGRNdXRhdGlvbihcIkNhcnROb3RlVXBkYXRlXCIsIFt2YXJpYWJsZXMuQ2FydE5vdGVVcGRhdGUuY2FydElkLCB2YXJpYWJsZXMuQ2FydE5vdGVVcGRhdGUubm90ZV0sIGZ1bmN0aW9uIChyb290KSB7XG4gICAgcm9vdC5hZGQoXCJjYXJ0Tm90ZVVwZGF0ZVwiLCB7XG4gICAgICBhcmdzOiB7XG4gICAgICAgIGNhcnRJZDogdmFyaWFibGVzLkNhcnROb3RlVXBkYXRlLmNhcnRJZCxcbiAgICAgICAgbm90ZTogdmFyaWFibGVzLkNhcnROb3RlVXBkYXRlLm5vdGVcbiAgICAgIH1cbiAgICB9LCBmdW5jdGlvbiAoY2FydE5vdGVVcGRhdGUpIHtcbiAgICAgIGNhcnROb3RlVXBkYXRlLmFkZChcImNhcnRcIiwgZnVuY3Rpb24gKGNhcnQpIHtcbiAgICAgICAgY2FydC5hZGRGcmFnbWVudChzcHJlYWRzLkNhcnRGcmFnbWVudCk7XG4gICAgICB9KTtcbiAgICAgIGNhcnROb3RlVXBkYXRlLmFkZChcInVzZXJFcnJvcnNcIiwgZnVuY3Rpb24gKHVzZXJFcnJvcnMpIHtcbiAgICAgICAgdXNlckVycm9ycy5hZGQoXCJmaWVsZFwiKTtcbiAgICAgICAgdXNlckVycm9ycy5hZGQoXCJtZXNzYWdlXCIpO1xuICAgICAgICB1c2VyRXJyb3JzLmFkZChcImNvZGVcIik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG4gIHJldHVybiBkb2N1bWVudDtcbn1cblxuZnVuY3Rpb24gcXVlcnkkMjIoY2xpZW50KSB7XG4gIHZhciBkb2N1bWVudCA9IGNsaWVudC5kb2N1bWVudCgpO1xuICB2YXIgc3ByZWFkcyA9IHt9O1xuICB2YXIgdmFyaWFibGVzID0ge307XG4gIHZhcmlhYmxlcy5DYXJ0R2lmdENhcmRDb2Rlc1JlbW92ZSA9IHt9O1xuICB2YXJpYWJsZXMuQ2FydEdpZnRDYXJkQ29kZXNSZW1vdmUuYXBwbGllZEdpZnRDYXJkSWRzID0gY2xpZW50LnZhcmlhYmxlKFwiYXBwbGllZEdpZnRDYXJkSWRzXCIsIFwiW0lEIV0hXCIpO1xuICB2YXJpYWJsZXMuQ2FydEdpZnRDYXJkQ29kZXNSZW1vdmUuY2FydElkID0gY2xpZW50LnZhcmlhYmxlKFwiY2FydElkXCIsIFwiSUQhXCIpO1xuICBzcHJlYWRzLkNhcnRMaW5lRnJhZ21lbnQgPSBkb2N1bWVudC5kZWZpbmVGcmFnbWVudChcIkNhcnRMaW5lRnJhZ21lbnRcIiwgXCJCYXNlQ2FydExpbmVcIiwgZnVuY3Rpb24gKHJvb3QpIHtcbiAgICByb290LmFkZChcImlkXCIpO1xuICAgIHJvb3QuYWRkKFwibWVyY2hhbmRpc2VcIiwgZnVuY3Rpb24gKG1lcmNoYW5kaXNlKSB7XG4gICAgICBtZXJjaGFuZGlzZS5hZGRJbmxpbmVGcmFnbWVudE9uKFwiUHJvZHVjdFZhcmlhbnRcIiwgZnVuY3Rpb24gKFByb2R1Y3RWYXJpYW50KSB7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcImlkXCIpO1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJ0aXRsZVwiKTtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwiaW1hZ2VcIiwgZnVuY3Rpb24gKGltYWdlKSB7XG4gICAgICAgICAgaW1hZ2UuYWRkKFwiaWRcIik7XG4gICAgICAgICAgaW1hZ2UuYWRkKFwidXJsXCIsIHtcbiAgICAgICAgICAgIGFsaWFzOiBcInNyY1wiXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaW1hZ2UuYWRkKFwiYWx0VGV4dFwiKTtcbiAgICAgICAgICBpbWFnZS5hZGQoXCJ3aWR0aFwiKTtcbiAgICAgICAgICBpbWFnZS5hZGQoXCJoZWlnaHRcIik7XG4gICAgICAgIH0pO1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJwcm9kdWN0XCIsIGZ1bmN0aW9uIChwcm9kdWN0KSB7XG4gICAgICAgICAgcHJvZHVjdC5hZGQoXCJpZFwiKTtcbiAgICAgICAgICBwcm9kdWN0LmFkZChcImhhbmRsZVwiKTtcbiAgICAgICAgICBwcm9kdWN0LmFkZChcInRpdGxlXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwid2VpZ2h0XCIpO1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJhdmFpbGFibGVGb3JTYWxlXCIsIHtcbiAgICAgICAgICBhbGlhczogXCJhdmFpbGFibGVcIlxuICAgICAgICB9KTtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwic2t1XCIpO1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJzZWxlY3RlZE9wdGlvbnNcIiwgZnVuY3Rpb24gKHNlbGVjdGVkT3B0aW9ucykge1xuICAgICAgICAgIHNlbGVjdGVkT3B0aW9ucy5hZGQoXCJuYW1lXCIpO1xuICAgICAgICAgIHNlbGVjdGVkT3B0aW9ucy5hZGQoXCJ2YWx1ZVwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFByb2R1Y3RWYXJpYW50LmFkZChcImNvbXBhcmVBdFByaWNlXCIsIGZ1bmN0aW9uIChjb21wYXJlQXRQcmljZSkge1xuICAgICAgICAgIGNvbXBhcmVBdFByaWNlLmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgICBjb21wYXJlQXRQcmljZS5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICAgIH0pO1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJwcmljZVwiLCBmdW5jdGlvbiAocHJpY2UpIHtcbiAgICAgICAgICBwcmljZS5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgICAgcHJpY2UuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgUHJvZHVjdFZhcmlhbnQuYWRkKFwidW5pdFByaWNlXCIsIGZ1bmN0aW9uICh1bml0UHJpY2UpIHtcbiAgICAgICAgICB1bml0UHJpY2UuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICAgIHVuaXRQcmljZS5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICAgIH0pO1xuICAgICAgICBQcm9kdWN0VmFyaWFudC5hZGQoXCJ1bml0UHJpY2VNZWFzdXJlbWVudFwiLCBmdW5jdGlvbiAodW5pdFByaWNlTWVhc3VyZW1lbnQpIHtcbiAgICAgICAgICB1bml0UHJpY2VNZWFzdXJlbWVudC5hZGQoXCJtZWFzdXJlZFR5cGVcIik7XG4gICAgICAgICAgdW5pdFByaWNlTWVhc3VyZW1lbnQuYWRkKFwicXVhbnRpdHlVbml0XCIpO1xuICAgICAgICAgIHVuaXRQcmljZU1lYXN1cmVtZW50LmFkZChcInF1YW50aXR5VmFsdWVcIik7XG4gICAgICAgICAgdW5pdFByaWNlTWVhc3VyZW1lbnQuYWRkKFwicmVmZXJlbmNlVW5pdFwiKTtcbiAgICAgICAgICB1bml0UHJpY2VNZWFzdXJlbWVudC5hZGQoXCJyZWZlcmVuY2VWYWx1ZVwiKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByb290LmFkZChcInF1YW50aXR5XCIpO1xuICAgIHJvb3QuYWRkKFwiYXR0cmlidXRlc1wiLCBmdW5jdGlvbiAoYXR0cmlidXRlcykge1xuICAgICAgYXR0cmlidXRlcy5hZGQoXCJrZXlcIik7XG4gICAgICBhdHRyaWJ1dGVzLmFkZChcInZhbHVlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiY29zdFwiLCBmdW5jdGlvbiAoY29zdCkge1xuICAgICAgY29zdC5hZGQoXCJ0b3RhbEFtb3VudFwiLCBmdW5jdGlvbiAodG90YWxBbW91bnQpIHtcbiAgICAgICAgdG90YWxBbW91bnQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICB0b3RhbEFtb3VudC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGNvc3QuYWRkKFwic3VidG90YWxBbW91bnRcIiwgZnVuY3Rpb24gKHN1YnRvdGFsQW1vdW50KSB7XG4gICAgICAgIHN1YnRvdGFsQW1vdW50LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgc3VidG90YWxBbW91bnQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBjb3N0LmFkZChcImFtb3VudFBlclF1YW50aXR5XCIsIGZ1bmN0aW9uIChhbW91bnRQZXJRdWFudGl0eSkge1xuICAgICAgICBhbW91bnRQZXJRdWFudGl0eS5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIGFtb3VudFBlclF1YW50aXR5LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgY29zdC5hZGQoXCJjb21wYXJlQXRBbW91bnRQZXJRdWFudGl0eVwiLCBmdW5jdGlvbiAoY29tcGFyZUF0QW1vdW50UGVyUXVhbnRpdHkpIHtcbiAgICAgICAgY29tcGFyZUF0QW1vdW50UGVyUXVhbnRpdHkuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICBjb21wYXJlQXRBbW91bnRQZXJRdWFudGl0eS5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImRpc2NvdW50QWxsb2NhdGlvbnNcIiwgZnVuY3Rpb24gKGRpc2NvdW50QWxsb2NhdGlvbnMpIHtcbiAgICAgIGRpc2NvdW50QWxsb2NhdGlvbnMuYWRkKFwiZGlzY291bnRlZEFtb3VudFwiLCBmdW5jdGlvbiAoZGlzY291bnRlZEFtb3VudCkge1xuICAgICAgICBkaXNjb3VudGVkQW1vdW50LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgZGlzY291bnRlZEFtb3VudC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGRpc2NvdW50QWxsb2NhdGlvbnMuYWRkKFwiZGlzY291bnRBcHBsaWNhdGlvblwiLCBmdW5jdGlvbiAoZGlzY291bnRBcHBsaWNhdGlvbikge1xuICAgICAgICBkaXNjb3VudEFwcGxpY2F0aW9uLmFkZChcInRhcmdldFR5cGVcIik7XG4gICAgICAgIGRpc2NvdW50QXBwbGljYXRpb24uYWRkKFwiYWxsb2NhdGlvbk1ldGhvZFwiKTtcbiAgICAgICAgZGlzY291bnRBcHBsaWNhdGlvbi5hZGQoXCJ0YXJnZXRTZWxlY3Rpb25cIik7XG4gICAgICAgIGRpc2NvdW50QXBwbGljYXRpb24uYWRkKFwidmFsdWVcIiwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgdmFsdWUuYWRkSW5saW5lRnJhZ21lbnRPbihcIlByaWNpbmdQZXJjZW50YWdlVmFsdWVcIiwgZnVuY3Rpb24gKFByaWNpbmdQZXJjZW50YWdlVmFsdWUpIHtcbiAgICAgICAgICAgIFByaWNpbmdQZXJjZW50YWdlVmFsdWUuYWRkKFwicGVyY2VudGFnZVwiKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB2YWx1ZS5hZGRJbmxpbmVGcmFnbWVudE9uKFwiTW9uZXlWMlwiLCBmdW5jdGlvbiAoTW9uZXlWMikge1xuICAgICAgICAgICAgTW9uZXlWMi5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgICAgICBNb25leVYyLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIGRpc2NvdW50QWxsb2NhdGlvbnMuYWRkSW5saW5lRnJhZ21lbnRPbihcIkNhcnRDb2RlRGlzY291bnRBbGxvY2F0aW9uXCIsIGZ1bmN0aW9uIChDYXJ0Q29kZURpc2NvdW50QWxsb2NhdGlvbikge1xuICAgICAgICBDYXJ0Q29kZURpc2NvdW50QWxsb2NhdGlvbi5hZGQoXCJjb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBkaXNjb3VudEFsbG9jYXRpb25zLmFkZElubGluZUZyYWdtZW50T24oXCJDYXJ0QXV0b21hdGljRGlzY291bnRBbGxvY2F0aW9uXCIsIGZ1bmN0aW9uIChDYXJ0QXV0b21hdGljRGlzY291bnRBbGxvY2F0aW9uKSB7XG4gICAgICAgIENhcnRBdXRvbWF0aWNEaXNjb3VudEFsbG9jYXRpb24uYWRkKFwidGl0bGVcIik7XG4gICAgICB9KTtcbiAgICAgIGRpc2NvdW50QWxsb2NhdGlvbnMuYWRkSW5saW5lRnJhZ21lbnRPbihcIkNhcnRDdXN0b21EaXNjb3VudEFsbG9jYXRpb25cIiwgZnVuY3Rpb24gKENhcnRDdXN0b21EaXNjb3VudEFsbG9jYXRpb24pIHtcbiAgICAgICAgQ2FydEN1c3RvbURpc2NvdW50QWxsb2NhdGlvbi5hZGQoXCJ0aXRsZVwiKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbiAgc3ByZWFkcy5BcHBsaWVkR2lmdENhcmRGcmFnbWVudCA9IGRvY3VtZW50LmRlZmluZUZyYWdtZW50KFwiQXBwbGllZEdpZnRDYXJkRnJhZ21lbnRcIiwgXCJBcHBsaWVkR2lmdENhcmRcIiwgZnVuY3Rpb24gKHJvb3QpIHtcbiAgICByb290LmFkZChcImFtb3VudFVzZWRcIiwgZnVuY3Rpb24gKGFtb3VudFVzZWQpIHtcbiAgICAgIGFtb3VudFVzZWQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgYW1vdW50VXNlZC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJhbW91bnRVc2VkXCIsIHtcbiAgICAgIGFsaWFzOiBcImFtb3VudFVzZWRWMlwiXG4gICAgfSwgZnVuY3Rpb24gKGFtb3VudFVzZWQpIHtcbiAgICAgIGFtb3VudFVzZWQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgYW1vdW50VXNlZC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJiYWxhbmNlXCIsIGZ1bmN0aW9uIChiYWxhbmNlKSB7XG4gICAgICBiYWxhbmNlLmFkZChcImFtb3VudFwiKTtcbiAgICAgIGJhbGFuY2UuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiYmFsYW5jZVwiLCB7XG4gICAgICBhbGlhczogXCJiYWxhbmNlVjJcIlxuICAgIH0sIGZ1bmN0aW9uIChiYWxhbmNlKSB7XG4gICAgICBiYWxhbmNlLmFkZChcImFtb3VudFwiKTtcbiAgICAgIGJhbGFuY2UuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwicHJlc2VudG1lbnRBbW91bnRVc2VkXCIsIGZ1bmN0aW9uIChwcmVzZW50bWVudEFtb3VudFVzZWQpIHtcbiAgICAgIHByZXNlbnRtZW50QW1vdW50VXNlZC5hZGQoXCJhbW91bnRcIik7XG4gICAgICBwcmVzZW50bWVudEFtb3VudFVzZWQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiaWRcIik7XG4gICAgcm9vdC5hZGQoXCJsYXN0Q2hhcmFjdGVyc1wiKTtcbiAgfSk7XG4gIHNwcmVhZHMuQ2FydEZyYWdtZW50ID0gZG9jdW1lbnQuZGVmaW5lRnJhZ21lbnQoXCJDYXJ0RnJhZ21lbnRcIiwgXCJDYXJ0XCIsIGZ1bmN0aW9uIChyb290KSB7XG4gICAgcm9vdC5hZGQoXCJpZFwiKTtcbiAgICByb290LmFkZChcImNyZWF0ZWRBdFwiKTtcbiAgICByb290LmFkZChcInVwZGF0ZWRBdFwiKTtcbiAgICByb290LmFkZChcImxpbmVzXCIsIHtcbiAgICAgIGFyZ3M6IHtcbiAgICAgICAgZmlyc3Q6IDI1MFxuICAgICAgfVxuICAgIH0sIGZ1bmN0aW9uIChsaW5lcykge1xuICAgICAgbGluZXMuYWRkKFwicGFnZUluZm9cIiwgZnVuY3Rpb24gKHBhZ2VJbmZvKSB7XG4gICAgICAgIHBhZ2VJbmZvLmFkZChcImhhc05leHRQYWdlXCIpO1xuICAgICAgICBwYWdlSW5mby5hZGQoXCJoYXNQcmV2aW91c1BhZ2VcIik7XG4gICAgICB9KTtcbiAgICAgIGxpbmVzLmFkZChcImVkZ2VzXCIsIGZ1bmN0aW9uIChlZGdlcykge1xuICAgICAgICBlZGdlcy5hZGQoXCJjdXJzb3JcIik7XG4gICAgICAgIGVkZ2VzLmFkZChcIm5vZGVcIiwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICBub2RlLmFkZEZyYWdtZW50KHNwcmVhZHMuQ2FydExpbmVGcmFnbWVudCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJhdHRyaWJ1dGVzXCIsIGZ1bmN0aW9uIChhdHRyaWJ1dGVzKSB7XG4gICAgICBhdHRyaWJ1dGVzLmFkZChcImtleVwiKTtcbiAgICAgIGF0dHJpYnV0ZXMuYWRkKFwidmFsdWVcIik7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJjb3N0XCIsIGZ1bmN0aW9uIChjb3N0KSB7XG4gICAgICBjb3N0LmFkZChcImNoZWNrb3V0Q2hhcmdlQW1vdW50XCIsIGZ1bmN0aW9uIChjaGVja291dENoYXJnZUFtb3VudCkge1xuICAgICAgICBjaGVja291dENoYXJnZUFtb3VudC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIGNoZWNrb3V0Q2hhcmdlQW1vdW50LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgY29zdC5hZGQoXCJ0b3RhbEFtb3VudFwiLCBmdW5jdGlvbiAodG90YWxBbW91bnQpIHtcbiAgICAgICAgdG90YWxBbW91bnQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICB0b3RhbEFtb3VudC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGNvc3QuYWRkKFwic3VidG90YWxBbW91bnRcIiwgZnVuY3Rpb24gKHN1YnRvdGFsQW1vdW50KSB7XG4gICAgICAgIHN1YnRvdGFsQW1vdW50LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgc3VidG90YWxBbW91bnQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBjb3N0LmFkZChcInRvdGFsVGF4QW1vdW50XCIsIGZ1bmN0aW9uICh0b3RhbFRheEFtb3VudCkge1xuICAgICAgICB0b3RhbFRheEFtb3VudC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgIHRvdGFsVGF4QW1vdW50LmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgIH0pO1xuICAgICAgY29zdC5hZGQoXCJ0b3RhbER1dHlBbW91bnRcIiwgZnVuY3Rpb24gKHRvdGFsRHV0eUFtb3VudCkge1xuICAgICAgICB0b3RhbER1dHlBbW91bnQuYWRkKFwiYW1vdW50XCIpO1xuICAgICAgICB0b3RhbER1dHlBbW91bnQuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJjaGVja291dFVybFwiKTtcbiAgICByb290LmFkZChcImRpc2NvdW50Q29kZXNcIiwgZnVuY3Rpb24gKGRpc2NvdW50Q29kZXMpIHtcbiAgICAgIGRpc2NvdW50Q29kZXMuYWRkKFwiYXBwbGljYWJsZVwiKTtcbiAgICAgIGRpc2NvdW50Q29kZXMuYWRkKFwiY29kZVwiKTtcbiAgICB9KTtcbiAgICByb290LmFkZChcImRpc2NvdW50QWxsb2NhdGlvbnNcIiwgZnVuY3Rpb24gKGRpc2NvdW50QWxsb2NhdGlvbnMpIHtcbiAgICAgIGRpc2NvdW50QWxsb2NhdGlvbnMuYWRkKFwiZGlzY291bnRlZEFtb3VudFwiLCBmdW5jdGlvbiAoZGlzY291bnRlZEFtb3VudCkge1xuICAgICAgICBkaXNjb3VudGVkQW1vdW50LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgZGlzY291bnRlZEFtb3VudC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICB9KTtcbiAgICAgIGRpc2NvdW50QWxsb2NhdGlvbnMuYWRkKFwiZGlzY291bnRBcHBsaWNhdGlvblwiLCBmdW5jdGlvbiAoZGlzY291bnRBcHBsaWNhdGlvbikge1xuICAgICAgICBkaXNjb3VudEFwcGxpY2F0aW9uLmFkZChcInRhcmdldFR5cGVcIik7XG4gICAgICAgIGRpc2NvdW50QXBwbGljYXRpb24uYWRkKFwiYWxsb2NhdGlvbk1ldGhvZFwiKTtcbiAgICAgICAgZGlzY291bnRBcHBsaWNhdGlvbi5hZGQoXCJ0YXJnZXRTZWxlY3Rpb25cIik7XG4gICAgICAgIGRpc2NvdW50QXBwbGljYXRpb24uYWRkKFwidmFsdWVcIiwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgdmFsdWUuYWRkSW5saW5lRnJhZ21lbnRPbihcIlByaWNpbmdQZXJjZW50YWdlVmFsdWVcIiwgZnVuY3Rpb24gKFByaWNpbmdQZXJjZW50YWdlVmFsdWUpIHtcbiAgICAgICAgICAgIFByaWNpbmdQZXJjZW50YWdlVmFsdWUuYWRkKFwicGVyY2VudGFnZVwiKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB2YWx1ZS5hZGRJbmxpbmVGcmFnbWVudE9uKFwiTW9uZXlWMlwiLCBmdW5jdGlvbiAoTW9uZXlWMikge1xuICAgICAgICAgICAgTW9uZXlWMi5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgICAgICBNb25leVYyLmFkZChcImN1cnJlbmN5Q29kZVwiKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIGRpc2NvdW50QWxsb2NhdGlvbnMuYWRkSW5saW5lRnJhZ21lbnRPbihcIkNhcnRDb2RlRGlzY291bnRBbGxvY2F0aW9uXCIsIGZ1bmN0aW9uIChDYXJ0Q29kZURpc2NvdW50QWxsb2NhdGlvbikge1xuICAgICAgICBDYXJ0Q29kZURpc2NvdW50QWxsb2NhdGlvbi5hZGQoXCJjb2RlXCIpO1xuICAgICAgfSk7XG4gICAgICBkaXNjb3VudEFsbG9jYXRpb25zLmFkZElubGluZUZyYWdtZW50T24oXCJDYXJ0QXV0b21hdGljRGlzY291bnRBbGxvY2F0aW9uXCIsIGZ1bmN0aW9uIChDYXJ0QXV0b21hdGljRGlzY291bnRBbGxvY2F0aW9uKSB7XG4gICAgICAgIENhcnRBdXRvbWF0aWNEaXNjb3VudEFsbG9jYXRpb24uYWRkKFwidGl0bGVcIik7XG4gICAgICB9KTtcbiAgICAgIGRpc2NvdW50QWxsb2NhdGlvbnMuYWRkSW5saW5lRnJhZ21lbnRPbihcIkNhcnRDdXN0b21EaXNjb3VudEFsbG9jYXRpb25cIiwgZnVuY3Rpb24gKENhcnRDdXN0b21EaXNjb3VudEFsbG9jYXRpb24pIHtcbiAgICAgICAgQ2FydEN1c3RvbURpc2NvdW50QWxsb2NhdGlvbi5hZGQoXCJ0aXRsZVwiKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiYnV5ZXJJZGVudGl0eVwiLCBmdW5jdGlvbiAoYnV5ZXJJZGVudGl0eSkge1xuICAgICAgYnV5ZXJJZGVudGl0eS5hZGQoXCJjb3VudHJ5Q29kZVwiKTtcbiAgICAgIGJ1eWVySWRlbnRpdHkuYWRkKFwicHJlZmVyZW5jZXNcIiwgZnVuY3Rpb24gKHByZWZlcmVuY2VzKSB7XG4gICAgICAgIHByZWZlcmVuY2VzLmFkZChcImRlbGl2ZXJ5XCIsIGZ1bmN0aW9uIChkZWxpdmVyeSkge1xuICAgICAgICAgIGRlbGl2ZXJ5LmFkZChcImNvb3JkaW5hdGVzXCIsIGZ1bmN0aW9uIChjb29yZGluYXRlcykge1xuICAgICAgICAgICAgY29vcmRpbmF0ZXMuYWRkKFwibGF0aXR1ZGVcIik7XG4gICAgICAgICAgICBjb29yZGluYXRlcy5hZGQoXCJsb25naXR1ZGVcIik7XG4gICAgICAgICAgICBjb29yZGluYXRlcy5hZGQoXCJjb3VudHJ5Q29kZVwiKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBkZWxpdmVyeS5hZGQoXCJkZWxpdmVyeU1ldGhvZFwiKTtcbiAgICAgICAgICBkZWxpdmVyeS5hZGQoXCJwaWNrdXBIYW5kbGVcIik7XG4gICAgICAgIH0pO1xuICAgICAgICBwcmVmZXJlbmNlcy5hZGQoXCJ3YWxsZXRcIik7XG4gICAgICB9KTtcbiAgICAgIGJ1eWVySWRlbnRpdHkuYWRkKFwiZW1haWxcIik7XG4gICAgICBidXllcklkZW50aXR5LmFkZChcInBob25lXCIpO1xuICAgICAgYnV5ZXJJZGVudGl0eS5hZGQoXCJjdXN0b21lclwiLCBmdW5jdGlvbiAoY3VzdG9tZXIpIHtcbiAgICAgICAgY3VzdG9tZXIuYWRkKFwiZW1haWxcIik7XG4gICAgICB9KTtcbiAgICAgIGJ1eWVySWRlbnRpdHkuYWRkKFwiZGVsaXZlcnlBZGRyZXNzUHJlZmVyZW5jZXNcIiwgZnVuY3Rpb24gKGRlbGl2ZXJ5QWRkcmVzc1ByZWZlcmVuY2VzKSB7XG4gICAgICAgIGRlbGl2ZXJ5QWRkcmVzc1ByZWZlcmVuY2VzLmFkZElubGluZUZyYWdtZW50T24oXCJNYWlsaW5nQWRkcmVzc1wiLCBmdW5jdGlvbiAoTWFpbGluZ0FkZHJlc3MpIHtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJhZGRyZXNzMVwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJhZGRyZXNzMlwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJjaXR5XCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImNvbXBhbnlcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwiY291bnRyeVwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJjb3VudHJ5Q29kZVYyXCIpO1xuICAgICAgICAgIE1haWxpbmdBZGRyZXNzLmFkZChcImZpcnN0TmFtZVwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJmb3JtYXR0ZWRcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwiZm9ybWF0dGVkQXJlYVwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJsYXN0TmFtZVwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJsYXRpdHVkZVwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJsb25naXR1ZGVcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwibmFtZVwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJwaG9uZVwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJwcm92aW5jZVwiKTtcbiAgICAgICAgICBNYWlsaW5nQWRkcmVzcy5hZGQoXCJwcm92aW5jZUNvZGVcIik7XG4gICAgICAgICAgTWFpbGluZ0FkZHJlc3MuYWRkKFwiemlwXCIpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwiZGVsaXZlcnlHcm91cHNcIiwge1xuICAgICAgYXJnczoge1xuICAgICAgICBmaXJzdDogMTBcbiAgICAgIH1cbiAgICB9LCBmdW5jdGlvbiAoZGVsaXZlcnlHcm91cHMpIHtcbiAgICAgIGRlbGl2ZXJ5R3JvdXBzLmFkZChcInBhZ2VJbmZvXCIsIGZ1bmN0aW9uIChwYWdlSW5mbykge1xuICAgICAgICBwYWdlSW5mby5hZGQoXCJoYXNOZXh0UGFnZVwiKTtcbiAgICAgICAgcGFnZUluZm8uYWRkKFwiaGFzUHJldmlvdXNQYWdlXCIpO1xuICAgICAgfSk7XG4gICAgICBkZWxpdmVyeUdyb3Vwcy5hZGQoXCJlZGdlc1wiLCBmdW5jdGlvbiAoZWRnZXMpIHtcbiAgICAgICAgZWRnZXMuYWRkKFwibm9kZVwiLCBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgIG5vZGUuYWRkKFwiaWRcIik7XG4gICAgICAgICAgbm9kZS5hZGQoXCJkZWxpdmVyeUFkZHJlc3NcIiwgZnVuY3Rpb24gKGRlbGl2ZXJ5QWRkcmVzcykge1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcImFkZHJlc3MyXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcImFkZHJlc3MxXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcImNpdHlcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwiY29tcGFueVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJjb3VudHJ5XCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcImNvdW50cnlDb2RlVjJcIik7XG4gICAgICAgICAgICBkZWxpdmVyeUFkZHJlc3MuYWRkKFwiZmlyc3ROYW1lXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcImZvcm1hdHRlZFwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJmb3JtYXR0ZWRBcmVhXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcImxhc3ROYW1lXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcImxhdGl0dWRlXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcImxvbmdpdHVkZVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzcy5hZGQoXCJuYW1lXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcInBob25lXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcInByb3ZpbmNlXCIpO1xuICAgICAgICAgICAgZGVsaXZlcnlBZGRyZXNzLmFkZChcInByb3ZpbmNlQ29kZVwiKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBub2RlLmFkZChcImRlbGl2ZXJ5T3B0aW9uc1wiLCBmdW5jdGlvbiAoZGVsaXZlcnlPcHRpb25zKSB7XG4gICAgICAgICAgICBkZWxpdmVyeU9wdGlvbnMuYWRkKFwiY29kZVwiKTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5T3B0aW9ucy5hZGQoXCJkZWxpdmVyeU1ldGhvZFR5cGVcIik7XG4gICAgICAgICAgICBkZWxpdmVyeU9wdGlvbnMuYWRkKFwiZGVzY3JpcHRpb25cIik7XG4gICAgICAgICAgICBkZWxpdmVyeU9wdGlvbnMuYWRkKFwiZXN0aW1hdGVkQ29zdFwiLCBmdW5jdGlvbiAoZXN0aW1hdGVkQ29zdCkge1xuICAgICAgICAgICAgICBlc3RpbWF0ZWRDb3N0LmFkZChcImFtb3VudFwiKTtcbiAgICAgICAgICAgICAgZXN0aW1hdGVkQ29zdC5hZGQoXCJjdXJyZW5jeUNvZGVcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRlbGl2ZXJ5T3B0aW9ucy5hZGQoXCJoYW5kbGVcIik7XG4gICAgICAgICAgICBkZWxpdmVyeU9wdGlvbnMuYWRkKFwidGl0bGVcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgbm9kZS5hZGQoXCJzZWxlY3RlZERlbGl2ZXJ5T3B0aW9uXCIsIGZ1bmN0aW9uIChzZWxlY3RlZERlbGl2ZXJ5T3B0aW9uKSB7XG4gICAgICAgICAgICBzZWxlY3RlZERlbGl2ZXJ5T3B0aW9uLmFkZChcImNvZGVcIik7XG4gICAgICAgICAgICBzZWxlY3RlZERlbGl2ZXJ5T3B0aW9uLmFkZChcImRlbGl2ZXJ5TWV0aG9kVHlwZVwiKTtcbiAgICAgICAgICAgIHNlbGVjdGVkRGVsaXZlcnlPcHRpb24uYWRkKFwiZGVzY3JpcHRpb25cIik7XG4gICAgICAgICAgICBzZWxlY3RlZERlbGl2ZXJ5T3B0aW9uLmFkZChcImVzdGltYXRlZENvc3RcIiwgZnVuY3Rpb24gKGVzdGltYXRlZENvc3QpIHtcbiAgICAgICAgICAgICAgZXN0aW1hdGVkQ29zdC5hZGQoXCJhbW91bnRcIik7XG4gICAgICAgICAgICAgIGVzdGltYXRlZENvc3QuYWRkKFwiY3VycmVuY3lDb2RlXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzZWxlY3RlZERlbGl2ZXJ5T3B0aW9uLmFkZChcImhhbmRsZVwiKTtcbiAgICAgICAgICAgIHNlbGVjdGVkRGVsaXZlcnlPcHRpb24uYWRkKFwidGl0bGVcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgbm9kZS5hZGQoXCJjYXJ0TGluZXNcIiwge1xuICAgICAgICAgICAgYXJnczoge1xuICAgICAgICAgICAgICBmaXJzdDogMjUwXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSwgZnVuY3Rpb24gKGNhcnRMaW5lcykge1xuICAgICAgICAgICAgY2FydExpbmVzLmFkZChcInBhZ2VJbmZvXCIsIGZ1bmN0aW9uIChwYWdlSW5mbykge1xuICAgICAgICAgICAgICBwYWdlSW5mby5hZGQoXCJoYXNOZXh0UGFnZVwiKTtcbiAgICAgICAgICAgICAgcGFnZUluZm8uYWRkKFwiaGFzUHJldmlvdXNQYWdlXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjYXJ0TGluZXMuYWRkKFwiZWRnZXNcIiwgZnVuY3Rpb24gKGVkZ2VzKSB7XG4gICAgICAgICAgICAgIGVkZ2VzLmFkZChcImN1cnNvclwiKTtcbiAgICAgICAgICAgICAgZWRnZXMuYWRkKFwibm9kZVwiLCBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgICAgIG5vZGUuYWRkKFwiaWRcIik7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcm9vdC5hZGQoXCJhcHBsaWVkR2lmdENhcmRzXCIsIGZ1bmN0aW9uIChhcHBsaWVkR2lmdENhcmRzKSB7XG4gICAgICBhcHBsaWVkR2lmdENhcmRzLmFkZEZyYWdtZW50KHNwcmVhZHMuQXBwbGllZEdpZnRDYXJkRnJhZ21lbnQpO1xuICAgIH0pO1xuICAgIHJvb3QuYWRkKFwibm90ZVwiKTtcbiAgfSk7XG4gIHNwcmVhZHMuQ2FydFVzZXJFcnJvckZyYWdtZW50ID0gZG9jdW1lbnQuZGVmaW5lRnJhZ21lbnQoXCJDYXJ0VXNlckVycm9yRnJhZ21lbnRcIiwgXCJDYXJ0VXNlckVycm9yXCIsIGZ1bmN0aW9uIChyb290KSB7XG4gICAgcm9vdC5hZGQoXCJmaWVsZFwiKTtcbiAgICByb290LmFkZChcIm1lc3NhZ2VcIik7XG4gICAgcm9vdC5hZGQoXCJjb2RlXCIpO1xuICB9KTtcbiAgc3ByZWFkcy5DYXJ0V2FybmluZ0ZyYWdtZW50ID0gZG9jdW1lbnQuZGVmaW5lRnJhZ21lbnQoXCJDYXJ0V2FybmluZ0ZyYWdtZW50XCIsIFwiQ2FydFdhcm5pbmdcIiwgZnVuY3Rpb24gKHJvb3QpIHtcbiAgICByb290LmFkZChcImNvZGVcIik7XG4gICAgcm9vdC5hZGQoXCJtZXNzYWdlXCIpO1xuICB9KTtcbiAgZG9jdW1lbnQuYWRkTXV0YXRpb24oXCJDYXJ0R2lmdENhcmRDb2Rlc1JlbW92ZVwiLCBbdmFyaWFibGVzLkNhcnRHaWZ0Q2FyZENvZGVzUmVtb3ZlLmFwcGxpZWRHaWZ0Q2FyZElkcywgdmFyaWFibGVzLkNhcnRHaWZ0Q2FyZENvZGVzUmVtb3ZlLmNhcnRJZF0sIGZ1bmN0aW9uIChyb290KSB7XG4gICAgcm9vdC5hZGQoXCJjYXJ0R2lmdENhcmRDb2Rlc1JlbW92ZVwiLCB7XG4gICAgICBhcmdzOiB7XG4gICAgICAgIGFwcGxpZWRHaWZ0Q2FyZElkczogdmFyaWFibGVzLkNhcnRHaWZ0Q2FyZENvZGVzUmVtb3ZlLmFwcGxpZWRHaWZ0Q2FyZElkcyxcbiAgICAgICAgY2FydElkOiB2YXJpYWJsZXMuQ2FydEdpZnRDYXJkQ29kZXNSZW1vdmUuY2FydElkXG4gICAgICB9XG4gICAgfSwgZnVuY3Rpb24gKGNhcnRHaWZ0Q2FyZENvZGVzUmVtb3ZlKSB7XG4gICAgICBjYXJ0R2lmdENhcmRDb2Rlc1JlbW92ZS5hZGQoXCJjYXJ0XCIsIGZ1bmN0aW9uIChjYXJ0KSB7XG4gICAgICAgIGNhcnQuYWRkRnJhZ21lbnQoc3ByZWFkcy5DYXJ0RnJhZ21lbnQpO1xuICAgICAgfSk7XG4gICAgICBjYXJ0R2lmdENhcmRDb2Rlc1JlbW92ZS5hZGQoXCJ1c2VyRXJyb3JzXCIsIGZ1bmN0aW9uICh1c2VyRXJyb3JzKSB7XG4gICAgICAgIHVzZXJFcnJvcnMuYWRkRnJhZ21lbnQoc3ByZWFkcy5DYXJ0VXNlckVycm9yRnJhZ21lbnQpO1xuICAgICAgfSk7XG4gICAgICBjYXJ0R2lmdENhcmRDb2Rlc1JlbW92ZS5hZGQoXCJ3YXJuaW5nc1wiLCBmdW5jdGlvbiAod2FybmluZ3MpIHtcbiAgICAgICAgd2FybmluZ3MuYWRkRnJhZ21lbnQoc3ByZWFkcy5DYXJ0V2FybmluZ0ZyYWdtZW50KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIGRvY3VtZW50O1xufVxuXG4vKipcbiAqIFRoZSBKUyBCdXkgU0RLIGNhcnQgcmVzb3VyY2VcbiAqIEBjbGFzc1xuICovXG5cbnZhciBDaGVja291dFJlc291cmNlID0gZnVuY3Rpb24gKF9SZXNvdXJjZSkge1xuICBpbmhlcml0cyQxKENoZWNrb3V0UmVzb3VyY2UsIF9SZXNvdXJjZSk7XG5cbiAgZnVuY3Rpb24gQ2hlY2tvdXRSZXNvdXJjZSgpIHtcbiAgICBjbGFzc0NhbGxDaGVjayQxKHRoaXMsIENoZWNrb3V0UmVzb3VyY2UpO1xuICAgIHJldHVybiBwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuJDEodGhpcywgKENoZWNrb3V0UmVzb3VyY2UuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihDaGVja291dFJlc291cmNlKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH1cblxuICBjcmVhdGVDbGFzcyQxKENoZWNrb3V0UmVzb3VyY2UsIFt7XG4gICAga2V5OiAnZmV0Y2gnLFxuXG5cbiAgICAvKipcbiAgICAgKiBGZXRjaGVzIGEgY2FyZCBieSBJRC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogY2xpZW50LmNhcnQuZmV0Y2goJ0ZsWmo5clpYbE41TURZNFpERmlaVFV5WlRVd05URTJNRE5oWmpnPScpLnRoZW4oKGNhcnQpID0+IHtcbiAgICAgKiAgIC8vIERvIHNvbWV0aGluZyB3aXRoIHRoZSBjYXJ0XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gaWQgVGhlIGlkIG9mIHRoZSBjYXJkIHRvIGZldGNoLlxuICAgICAqIEByZXR1cm4ge1Byb21pc2V8R3JhcGhNb2RlbH0gQSBwcm9taXNlIHJlc29sdmluZyB3aXRoIGEgYEdyYXBoTW9kZWxgIG9mIHRoZSBjYXJ0LlxuICAgICAqL1xuICAgIHZhbHVlOiBmdW5jdGlvbiBmZXRjaChpZCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHJldHVybiB0aGlzLmdyYXBoUUxDbGllbnQuc2VuZChxdWVyeSQxMiwgeyBpZDogaWQgfSkudGhlbihmdW5jdGlvbiAoX3JlZikge1xuICAgICAgICB2YXIgbW9kZWwgPSBfcmVmLm1vZGVsLFxuICAgICAgICAgICAgZGF0YSA9IF9yZWYuZGF0YTtcblxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgY2FydCA9IGRhdGEuY2FydCB8fCBkYXRhLm5vZGU7XG5cbiAgICAgICAgICAgIGlmICghY2FydCkge1xuICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShudWxsKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5ncmFwaFFMQ2xpZW50LmZldGNoQWxsUGFnZXMobW9kZWwuY2FydC5saW5lcywgeyBwYWdlU2l6ZTogMjUwIH0pLnRoZW4oZnVuY3Rpb24gKGxpbmVzKSB7XG4gICAgICAgICAgICAgIG1vZGVsLmNhcnQuYXR0cnMubGluZXMgPSBsaW5lcztcblxuICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShtYXBDYXJ0UGF5bG9hZChtb2RlbC5jYXJ0KSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZWplY3QoW3sgbWVzc2FnZTogJ2FuIHVua25vd24gZXJyb3IgaGFzIG9jY3VycmVkLicgfV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiByZXNvbHZlKG51bGwpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBjaGVja291dC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogY29uc3QgaW5wdXQgPSB7XG4gICAgICogICBsaW5lSXRlbXM6IFtcbiAgICAgKiAgICAge3ZhcmlhbnRJZDogJ1oybGtPaTh2YzJodmNHbG1lUzlRY205a2RXTjBWbUZ5YVdGdWRDOHlPVEV3TmpBeU1qYzVNZz09JywgcXVhbnRpdHk6IDV9XG4gICAgICogICBdXG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIGNsaWVudC5jaGVja291dC5jcmVhdGUoaW5wdXQpLnRoZW4oKGNoZWNrb3V0KSA9PiB7XG4gICAgICogICAvLyBEbyBzb21ldGhpbmcgd2l0aCB0aGUgbmV3bHkgY3JlYXRlZCBjaGVja291dFxuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtpbnB1dF0gQW4gaW5wdXQgb2JqZWN0IGNvbnRhaW5pbmcgemVybyBvciBtb3JlIG9mOlxuICAgICAqICAgQHBhcmFtIHtTdHJpbmd9IFtpbnB1dC5lbWFpbF0gQW4gZW1haWwgY29ubmVjdGVkIHRvIHRoZSBjaGVja291dC5cbiAgICAgKiAgIEBwYXJhbSB7T2JqZWN0W119IFtpbnB1dC5saW5lSXRlbXNdIEEgbGlzdCBvZiBsaW5lIGl0ZW1zIGluIHRoZSBjaGVja291dC4gU2VlIHRoZSB7QGxpbmsgaHR0cHM6Ly9oZWxwLnNob3BpZnkuY29tL2FwaS9zdG9yZWZyb250LWFwaS9yZWZlcmVuY2UvaW5wdXQtb2JqZWN0L2NoZWNrb3V0bGluZWl0ZW1pbnB1dHxTdG9yZWZyb250IEFQSSByZWZlcmVuY2V9IGZvciB2YWxpZCBpbnB1dCBmaWVsZHMgZm9yIGVhY2ggbGluZSBpdGVtLlxuICAgICAqICAgQHBhcmFtIHtPYmplY3R9IFtpbnB1dC5zaGlwcGluZ0FkZHJlc3NdIEEgc2hpcHBpbmcgYWRkcmVzcy4gU2VlIHRoZSB7QGxpbmsgaHR0cHM6Ly9oZWxwLnNob3BpZnkuY29tL2FwaS9zdG9yZWZyb250LWFwaS9yZWZlcmVuY2UvaW5wdXQtb2JqZWN0L21haWxpbmdhZGRyZXNzaW5wdXR8U3RvcmVmcm9udCBBUEkgcmVmZXJlbmNlfSBmb3IgdmFsaWQgaW5wdXQgZmllbGRzLlxuICAgICAqICAgQHBhcmFtIHtTdHJpbmd9IFtpbnB1dC5ub3RlXSBBIG5vdGUgZm9yIHRoZSBjaGVja291dC5cbiAgICAgKiAgIEBwYXJhbSB7T2JqZWN0W119IFtpbnB1dC5jdXN0b21BdHRyaWJ1dGVzXSBBIGxpc3Qgb2YgY3VzdG9tIGF0dHJpYnV0ZXMgZm9yIHRoZSBjaGVja291dC4gU2VlIHRoZSB7QGxpbmsgaHR0cHM6Ly9oZWxwLnNob3BpZnkuY29tL2FwaS9zdG9yZWZyb250LWFwaS9yZWZlcmVuY2UvaW5wdXQtb2JqZWN0L2F0dHJpYnV0ZWlucHV0fFN0b3JlZnJvbnQgQVBJIHJlZmVyZW5jZX0gZm9yIHZhbGlkIGlucHV0IGZpZWxkcy5cbiAgICAgKiAgIEBkZXByZWNhdGVkIHtTdHJpbmd9IFtpbnB1dC5wcmVzZW50bWVudEN1cnJlbmN5Q29kZSBdIEEgcHJlc2VudG1lbnQgY3VycmVuY3kgY29kZS4gU2VlIHRoZSB7QGxpbmsgaHR0cHM6Ly9oZWxwLnNob3BpZnkuY29tL2VuL2FwaS9zdG9yZWZyb250LWFwaS9yZWZlcmVuY2UvZW51bS9jdXJyZW5jeWNvZGV8U3RvcmVmcm9udCBBUEkgcmVmZXJlbmNlfSBmb3IgdmFsaWQgY3VycmVuY3kgY29kZSB2YWx1ZXMuXG4gICAgICogICBAcmV0dXJuIHtQcm9taXNlfEdyYXBoTW9kZWx9IEEgcHJvbWlzZSByZXNvbHZpbmcgd2l0aCB0aGUgY3JlYXRlZCBjaGVja291dC5cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnY3JlYXRlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlKCkge1xuICAgICAgdmFyIGkgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuXG4gICAgICB2YXIgaW5wdXQgPSB0aGlzLmlucHV0TWFwcGVyLmNyZWF0ZShpKTtcblxuICAgICAgcmV0dXJuIHRoaXMuZ3JhcGhRTENsaWVudC5zZW5kKHF1ZXJ5JDEzLCB7IGlucHV0OiBpbnB1dCB9KS50aGVuKGhhbmRsZUNhcnRNdXRhdGlvbignY2FydENyZWF0ZScsIHRoaXMuZ3JhcGhRTENsaWVudCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlcGxhY2VzIHRoZSB2YWx1ZSBvZiBjaGVja291dCdzIGN1c3RvbSBhdHRyaWJ1dGVzIGFuZC9vciBub3RlIHdpdGggdmFsdWVzIGRlZmluZWQgaW4gdGhlIGlucHV0XG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGNvbnN0IGNoZWNrb3V0SWQgPSAnWjJsa09pOHZjMmh2Y0dsbWVTOURhR1ZqYTI5MWRDOWtNVFptTTJFek1ETTRZamM0Tj0nO1xuICAgICAqIGNvbnN0IGlucHV0ID0ge2N1c3RvbUF0dHJpYnV0ZXM6IFt7a2V5OiBcIk15S2V5XCIsIHZhbHVlOiBcIk15VmFsdWVcIn1dfTtcbiAgICAgKlxuICAgICAqIGNsaWVudC5jaGVja291dC51cGRhdGVBdHRyaWJ1dGVzKGNoZWNrb3V0SWQsIGlucHV0KS50aGVuKChjaGVja291dCkgPT4ge1xuICAgICAqICAgLy8gRG8gc29tZXRoaW5nIHdpdGggdGhlIHVwZGF0ZWQgY2hlY2tvdXRcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjaGVja291dElkIFRoZSBJRCBvZiB0aGUgY2hlY2tvdXQgdG8gdXBkYXRlLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbaW5wdXRdIEFuIGlucHV0IG9iamVjdCBjb250YWluaW5nIHplcm8gb3IgbW9yZSBvZjpcbiAgICAgKiAgIEBwYXJhbSB7T2JqZWN0W119IFtpbnB1dC5jdXN0b21BdHRyaWJ1dGVzXSBBIGxpc3Qgb2YgY3VzdG9tIGF0dHJpYnV0ZXMgZm9yIHRoZSBjaGVja291dC4gU2VlIHRoZSB7QGxpbmsgaHR0cHM6Ly9oZWxwLnNob3BpZnkuY29tL2FwaS9zdG9yZWZyb250LWFwaS9yZWZlcmVuY2UvaW5wdXQtb2JqZWN0L2F0dHJpYnV0ZWlucHV0fFN0b3JlZnJvbnQgQVBJIHJlZmVyZW5jZX0gZm9yIHZhbGlkIGlucHV0IGZpZWxkcy5cbiAgICAgKiAgIEBwYXJhbSB7U3RyaW5nfSBbaW5wdXQubm90ZV0gQSBub3RlIGZvciB0aGUgY2hlY2tvdXQuXG4gICAgICogQHJldHVybiB7UHJvbWlzZXxHcmFwaE1vZGVsfSBBIHByb21pc2UgcmVzb2x2aW5nIHdpdGggdGhlIHVwZGF0ZWQgY2hlY2tvdXQuXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ3VwZGF0ZUF0dHJpYnV0ZXMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVBdHRyaWJ1dGVzKGNoZWNrb3V0SWQpIHtcbiAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICB2YXIgaW5wdXQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuXG4gICAgICB2YXIgX2lucHV0TWFwcGVyJHVwZGF0ZUF0ID0gdGhpcy5pbnB1dE1hcHBlci51cGRhdGVBdHRyaWJ1dGVzKGNoZWNrb3V0SWQsIGlucHV0KSxcbiAgICAgICAgICBjYXJ0QXR0cmlidXRlc1VwZGF0ZUlucHV0ID0gX2lucHV0TWFwcGVyJHVwZGF0ZUF0LmNhcnRBdHRyaWJ1dGVzVXBkYXRlSW5wdXQsXG4gICAgICAgICAgY2FydE5vdGVVcGRhdGVJbnB1dCA9IF9pbnB1dE1hcHBlciR1cGRhdGVBdC5jYXJ0Tm90ZVVwZGF0ZUlucHV0O1xuXG4gICAgICB2YXIgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpO1xuXG4gICAgICBmdW5jdGlvbiB1cGRhdGVOb3RlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ncmFwaFFMQ2xpZW50LnNlbmQocXVlcnkkMjEsIGNhcnROb3RlVXBkYXRlSW5wdXQpLnRoZW4oaGFuZGxlQ2FydE11dGF0aW9uKCdjYXJ0Tm90ZVVwZGF0ZScsIHRoaXMuZ3JhcGhRTENsaWVudCkpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiB1cGRhdGVBdHRyaWJ1dGVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ncmFwaFFMQ2xpZW50LnNlbmQocXVlcnkkMTQsIGNhcnRBdHRyaWJ1dGVzVXBkYXRlSW5wdXQpLnRoZW4oaGFuZGxlQ2FydE11dGF0aW9uKCdjYXJ0QXR0cmlidXRlc1VwZGF0ZScsIHRoaXMuZ3JhcGhRTENsaWVudCkpO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIGNhcnROb3RlVXBkYXRlSW5wdXQubm90ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcHJvbWlzZSA9IHByb21pc2UudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIHVwZGF0ZU5vdGUuY2FsbChfdGhpczMpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNhcnRBdHRyaWJ1dGVzVXBkYXRlSW5wdXQuYXR0cmlidXRlcy5sZW5ndGgpIHtcbiAgICAgICAgcHJvbWlzZSA9IHByb21pc2UudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIHVwZGF0ZUF0dHJpYnV0ZXMuY2FsbChfdGhpczMpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVwbGFjZXMgdGhlIHZhbHVlIG9mIGNoZWNrb3V0J3MgZW1haWwgYWRkcmVzc1xuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBjb25zdCBjaGVja291dElkID0gJ1oybGtPaTh2YzJodmNHbG1lUzlEYUdWamEyOTFkQzlrTVRabU0yRXpNRE00WWpjNE49JztcbiAgICAgKiBjb25zdCBlbWFpbCA9ICd1c2VyQGV4YW1wbGUuY29tJztcbiAgICAgKlxuICAgICAqIGNsaWVudC5jaGVja291dC51cGRhdGVFbWFpbChjaGVja291dElkLCBlbWFpbCkudGhlbigoY2hlY2tvdXQpID0+IHtcbiAgICAgKiAgIC8vIERvIHNvbWV0aGluZyB3aXRoIHRoZSB1cGRhdGVkIGNoZWNrb3V0XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gY2hlY2tvdXRJZCBUaGUgSUQgb2YgdGhlIGNoZWNrb3V0IHRvIHVwZGF0ZS5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZW1haWwgVGhlIGVtYWlsIGFkZHJlc3MgdG8gYXBwbHkgdG8gdGhlIGNoZWNrb3V0LlxuICAgICAqIEByZXR1cm4ge1Byb21pc2V8R3JhcGhNb2RlbH0gQSBwcm9taXNlIHJlc29sdmluZyB3aXRoIHRoZSB1cGRhdGVkIGNoZWNrb3V0LlxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICd1cGRhdGVFbWFpbCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZUVtYWlsKGNoZWNrb3V0SWQsIGVtYWlsKSB7XG4gICAgICB2YXIgdmFyaWFibGVzID0gdGhpcy5pbnB1dE1hcHBlci51cGRhdGVFbWFpbChjaGVja291dElkLCBlbWFpbCk7XG5cbiAgICAgIHJldHVybiB0aGlzLmdyYXBoUUxDbGllbnQuc2VuZChxdWVyeSQxNSwgdmFyaWFibGVzKS50aGVuKGhhbmRsZUNhcnRNdXRhdGlvbignY2FydEJ1eWVySWRlbnRpdHlVcGRhdGUnLCB0aGlzLmdyYXBoUUxDbGllbnQpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGxpbmUgaXRlbXMgdG8gYW4gZXhpc3RpbmcgY2hlY2tvdXQuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGNvbnN0IGNoZWNrb3V0SWQgPSAnWjJsa09pOHZjMmh2Y0dsbWVTOURhR1ZqYTI5MWRDOWtNVFptTTJFek1ETTRZamM0Tj0nO1xuICAgICAqIGNvbnN0IGxpbmVJdGVtcyA9IFt7dmFyaWFudElkOiAnWjJsa09pOHZjMmh2Y0dsbWVTOVFjbTlrZFdOMFZtRnlhV0Z1ZEM4eU9URXdOakF5TWpjNU1nPT0nLCBxdWFudGl0eTogNX1dO1xuICAgICAqXG4gICAgICogY2xpZW50LmNoZWNrb3V0LmFkZExpbmVJdGVtcyhjaGVja291dElkLCBsaW5lSXRlbXMpLnRoZW4oKGNoZWNrb3V0KSA9PiB7XG4gICAgICogICAvLyBEbyBzb21ldGhpbmcgd2l0aCB0aGUgdXBkYXRlZCBjaGVja291dFxuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGNoZWNrb3V0SWQgVGhlIElEIG9mIHRoZSBjaGVja291dCB0byBhZGQgbGluZSBpdGVtcyB0by5cbiAgICAgKiBAcGFyYW0ge09iamVjdFtdfSBsaW5lSXRlbXMgQSBsaXN0IG9mIGxpbmUgaXRlbXMgdG8gYWRkIHRvIHRoZSBjaGVja291dC4gU2VlIHRoZSB7QGxpbmsgaHR0cHM6Ly9oZWxwLnNob3BpZnkuY29tL2FwaS9zdG9yZWZyb250LWFwaS9yZWZlcmVuY2UvaW5wdXQtb2JqZWN0L2NoZWNrb3V0bGluZWl0ZW1pbnB1dHxTdG9yZWZyb250IEFQSSByZWZlcmVuY2V9IGZvciB2YWxpZCBpbnB1dCBmaWVsZHMgZm9yIGVhY2ggbGluZSBpdGVtLlxuICAgICAqIEByZXR1cm4ge1Byb21pc2V8R3JhcGhNb2RlbH0gQSBwcm9taXNlIHJlc29sdmluZyB3aXRoIHRoZSB1cGRhdGVkIGNoZWNrb3V0LlxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdhZGRMaW5lSXRlbXMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRMaW5lSXRlbXMoY2hlY2tvdXRJZCkge1xuICAgICAgdmFyIGxpbmVJdGVtcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogW107XG5cbiAgICAgIHZhciB2YXJpYWJsZXMgPSB0aGlzLmlucHV0TWFwcGVyLmFkZExpbmVJdGVtcyhjaGVja291dElkLCBsaW5lSXRlbXMpO1xuXG4gICAgICByZXR1cm4gdGhpcy5ncmFwaFFMQ2xpZW50LnNlbmQocXVlcnkkMTgsIHZhcmlhYmxlcykudGhlbihoYW5kbGVDYXJ0TXV0YXRpb24oJ2NhcnRMaW5lc0FkZCcsIHRoaXMuZ3JhcGhRTENsaWVudCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgYSBkaXNjb3VudCB0byBhbiBleGlzdGluZyBjaGVja291dCB1c2luZyBhIGRpc2NvdW50IGNvZGUuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGNvbnN0IGNoZWNrb3V0SWQgPSAnWjJsa09pOHZjMmh2Y0dsbWVTOURhR1ZqYTI5MWRDOWtNVFptTTJFek1ETTRZamM0Tj0nO1xuICAgICAqIGNvbnN0IGRpc2NvdW50Q29kZSA9ICdiZXN0LWRpc2NvdW50LWV2ZXInO1xuICAgICAqXG4gICAgICogY2xpZW50LmNoZWNrb3V0LmFkZERpc2NvdW50KGNoZWNrb3V0SWQsIGRpc2NvdW50Q29kZSkudGhlbigoY2hlY2tvdXQpID0+IHtcbiAgICAgKiAgIC8vIERvIHNvbWV0aGluZyB3aXRoIHRoZSB1cGRhdGVkIGNoZWNrb3V0XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gY2hlY2tvdXRJZCBUaGUgSUQgb2YgdGhlIGNoZWNrb3V0IHRvIGFkZCBkaXNjb3VudCB0by5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZGlzY291bnRDb2RlIFRoZSBkaXNjb3VudCBjb2RlIHRvIGFwcGx5IHRvIHRoZSBjaGVja291dC5cbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlfEdyYXBoTW9kZWx9IEEgcHJvbWlzZSByZXNvbHZpbmcgd2l0aCB0aGUgdXBkYXRlZCBjaGVja291dC5cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnYWRkRGlzY291bnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhZGREaXNjb3VudChjaGVja291dElkLCBkaXNjb3VudENvZGUpIHtcbiAgICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgICAvLyBXZSB3YW50IGFjY2VzcyB0byBDYXJ0J3MgYGRpc2NvdW50Q29kZXNgIGZpZWxkLCBzbyB3ZSBjYW4ndCBqdXN0IHVzZSB0aGVcbiAgICAgIC8vIGV4aXN0aW5nIGBmZXRjaGAgbWV0aG9kIHNpbmNlIHRoYXQgYWxzbyBtYXBzIGFuZCByZW1vdmVzIHRoZSBgZGlzY291bnRDb2Rlc2AgZmllbGQuXG4gICAgICAvLyBXZSBtdXN0IHRoZXJlZm9yZSBsb29rIGF0IHRoZSByYXcgQ2FydCBkYXRhIHRvIGJlIGFibGUgdG8gc2VlIEFMTCBleGlzdGluZyBkaXNjb3VudCBjb2RlcyxcbiAgICAgIC8vIHdoZXRoZXIgdGhleSBhcmUgYGFwcGxpZWRgIG9yIG5vdC5cblxuICAgICAgLy8gVGhlIHF1ZXJ5IGJlbG93IGlzIGlkZW50aWNhbCB0byB0aGUgYGZldGNoYCBtZXRob2QncyBxdWVyeSBFWENFUFQgd2UgZG9uJ3QgY2FsbCBgbWFwQ2FydFBheWxvYWRgIGhlcmVcbiAgICAgIHJldHVybiB0aGlzLmdyYXBoUUxDbGllbnQuc2VuZChxdWVyeSQxMiwgeyBpZDogY2hlY2tvdXRJZCB9KS50aGVuKGZ1bmN0aW9uIChfcmVmMikge1xuICAgICAgICB2YXIgbW9kZWwgPSBfcmVmMi5tb2RlbCxcbiAgICAgICAgICAgIGRhdGEgPSBfcmVmMi5kYXRhO1xuXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBjYXJ0ID0gZGF0YS5jYXJ0IHx8IGRhdGEubm9kZTtcblxuICAgICAgICAgICAgaWYgKCFjYXJ0KSB7XG4gICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKG51bGwpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gX3RoaXM0LmdyYXBoUUxDbGllbnQuZmV0Y2hBbGxQYWdlcyhtb2RlbC5jYXJ0LmxpbmVzLCB7IHBhZ2VTaXplOiAyNTAgfSkudGhlbihmdW5jdGlvbiAobGluZXMpIHtcbiAgICAgICAgICAgICAgbW9kZWwuY2FydC5hdHRycy5saW5lcyA9IGxpbmVzO1xuXG4gICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKG1vZGVsLmNhcnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmVqZWN0KFt7IG1lc3NhZ2U6ICdhbiB1bmtub3duIGVycm9yIGhhcyBvY2N1cnJlZC4nIH1dKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gcmVzb2x2ZShudWxsKTtcbiAgICAgICAgfSk7XG4gICAgICB9KS50aGVuKGZ1bmN0aW9uIChjaGVja291dCkge1xuICAgICAgICB2YXIgZXhpc3RpbmdDb2RlcyA9IGNoZWNrb3V0LmRpc2NvdW50Q29kZXMubWFwKGZ1bmN0aW9uIChjb2RlKSB7XG4gICAgICAgICAgcmV0dXJuIGNvZGUuY29kZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIHZhcmlhYmxlcyA9IF90aGlzNC5pbnB1dE1hcHBlci5hZGREaXNjb3VudChjaGVja291dElkLCBleGlzdGluZ0NvZGVzLmNvbmNhdChkaXNjb3VudENvZGUpKTtcblxuICAgICAgICByZXR1cm4gX3RoaXM0LmdyYXBoUUxDbGllbnQuc2VuZChxdWVyeSQxNiwgdmFyaWFibGVzKS50aGVuKGhhbmRsZUNhcnRNdXRhdGlvbignY2FydERpc2NvdW50Q29kZXNVcGRhdGUnLCBfdGhpczQuZ3JhcGhRTENsaWVudCkpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0aGUgYXBwbGllZCBkaXNjb3VudCBmcm9tIGFuIGV4aXN0aW5nIGNoZWNrb3V0LlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBjb25zdCBjaGVja291dElkID0gJ1oybGtPaTh2YzJodmNHbG1lUzlEYUdWamEyOTFkQzlrTVRabU0yRXpNRE00WWpjNE49JztcbiAgICAgKlxuICAgICAqIGNsaWVudC5jaGVja291dC5yZW1vdmVEaXNjb3VudChjaGVja291dElkKS50aGVuKChjaGVja291dCkgPT4ge1xuICAgICAqICAgLy8gRG8gc29tZXRoaW5nIHdpdGggdGhlIHVwZGF0ZWQgY2hlY2tvdXRcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjaGVja291dElkIFRoZSBJRCBvZiB0aGUgY2hlY2tvdXQgdG8gcmVtb3ZlIHRoZSBkaXNjb3VudCBmcm9tLlxuICAgICAqIEByZXR1cm4ge1Byb21pc2V8R3JhcGhNb2RlbH0gQSBwcm9taXNlIHJlc29sdmluZyB3aXRoIHRoZSB1cGRhdGVkIGNoZWNrb3V0LlxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdyZW1vdmVEaXNjb3VudCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZURpc2NvdW50KGNoZWNrb3V0SWQpIHtcbiAgICAgIHZhciB2YXJpYWJsZXMgPSB0aGlzLmlucHV0TWFwcGVyLnJlbW92ZURpc2NvdW50KGNoZWNrb3V0SWQpO1xuXG4gICAgICByZXR1cm4gdGhpcy5ncmFwaFFMQ2xpZW50LnNlbmQocXVlcnkkMTYsIHZhcmlhYmxlcykudGhlbihoYW5kbGVDYXJ0TXV0YXRpb24oJ2NhcnREaXNjb3VudENvZGVzVXBkYXRlJywgdGhpcy5ncmFwaFFMQ2xpZW50KSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQXBwbGllcyBnaWZ0IGNhcmRzIHRvIGFuIGV4aXN0aW5nIGNoZWNrb3V0IHVzaW5nIGEgbGlzdCBvZiBnaWZ0IGNhcmQgY29kZXNcbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogY29uc3QgY2hlY2tvdXRJZCA9ICdaMmxrT2k4dmMyaHZjR2xtZVM5RGFHVmphMjkxZEM5a01UWm1NMkV6TURNNFlqYzROPSc7XG4gICAgICogY29uc3QgZ2lmdENhcmRDb2RlcyA9IFsnNkZEODg1M0RBR0FBOTQ5RiddO1xuICAgICAqXG4gICAgICogY2xpZW50LmNoZWNrb3V0LmFkZEdpZnRDYXJkcyhjaGVja291dElkLCBnaWZ0Q2FyZENvZGVzKS50aGVuKChjaGVja291dCkgPT4ge1xuICAgICAqICAgLy8gRG8gc29tZXRoaW5nIHdpdGggdGhlIHVwZGF0ZWQgY2hlY2tvdXRcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjaGVja291dElkIFRoZSBJRCBvZiB0aGUgY2hlY2tvdXQgdG8gYWRkIGdpZnQgY2FyZHMgdG8uXG4gICAgICogQHBhcmFtIHtTdHJpbmdbXX0gZ2lmdENhcmRDb2RlcyBUaGUgZ2lmdCBjYXJkIGNvZGVzIHRvIGFwcGx5IHRvIHRoZSBjaGVja291dC5cbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlfEdyYXBoTW9kZWx9IEEgcHJvbWlzZSByZXNvbHZpbmcgd2l0aCB0aGUgdXBkYXRlZCBjaGVja291dC5cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnYWRkR2lmdENhcmRzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkR2lmdENhcmRzKGNoZWNrb3V0SWQsIGdpZnRDYXJkQ29kZXMpIHtcbiAgICAgIHZhciB2YXJpYWJsZXMgPSB0aGlzLmlucHV0TWFwcGVyLmFkZEdpZnRDYXJkcyhjaGVja291dElkLCBnaWZ0Q2FyZENvZGVzKTtcblxuICAgICAgcmV0dXJuIHRoaXMuZ3JhcGhRTENsaWVudC5zZW5kKHF1ZXJ5JDE3LCB2YXJpYWJsZXMpLnRoZW4oaGFuZGxlQ2FydE11dGF0aW9uKCdjYXJ0R2lmdENhcmRDb2Rlc1VwZGF0ZScsIHRoaXMuZ3JhcGhRTENsaWVudCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhIGdpZnQgY2FyZCBmcm9tIGFuIGV4aXN0aW5nIGNoZWNrb3V0XG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGNvbnN0IGNoZWNrb3V0SWQgPSAnWjJsa09pOHZjMmh2Y0dsbWVTOURhR1ZqYTI5MWRDOWtNVFptTTJFek1ETTRZamM0Tj0nO1xuICAgICAqIGNvbnN0IGFwcGxpZWRHaWZ0Q2FyZElkID0gJ1oybGtPaTh2YzJodmNHbG1lUzlCY0hCc2FXVmtSMmxtZEVOaGNtUXZOREk0TlRRMU9EQXpNVEk9JztcbiAgICAgKlxuICAgICAqIGNsaWVudC5jaGVja291dC5yZW1vdmVHaWZ0Q2FyZChjaGVja291dElkLCBhcHBsaWVkR2lmdENhcmRJZCkudGhlbigoY2hlY2tvdXQpID0+IHtcbiAgICAgKiAgIC8vIERvIHNvbWV0aGluZyB3aXRoIHRoZSB1cGRhdGVkIGNoZWNrb3V0XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gY2hlY2tvdXRJZCBUaGUgSUQgb2YgdGhlIGNoZWNrb3V0IHRvIGFkZCBnaWZ0IGNhcmRzIHRvLlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBhcHBsaWVkR2lmdENhcmRJZCBUaGUgZ2lmdCBjYXJkIGlkIHRvIHJlbW92ZSBmcm9tIHRoZSBjaGVja291dC5cbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlfEdyYXBoTW9kZWx9IEEgcHJvbWlzZSByZXNvbHZpbmcgd2l0aCB0aGUgdXBkYXRlZCBjaGVja291dC5cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAncmVtb3ZlR2lmdENhcmQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVHaWZ0Q2FyZChjaGVja291dElkLCBhcHBsaWVkR2lmdENhcmRJZCkge1xuICAgICAgdmFyIHZhcmlhYmxlcyA9IHRoaXMuaW5wdXRNYXBwZXIucmVtb3ZlR2lmdENhcmQoY2hlY2tvdXRJZCwgYXBwbGllZEdpZnRDYXJkSWQpO1xuXG4gICAgICByZXR1cm4gdGhpcy5ncmFwaFFMQ2xpZW50LnNlbmQocXVlcnkkMjIsIHZhcmlhYmxlcykudGhlbihoYW5kbGVDYXJ0TXV0YXRpb24oJ2NhcnRHaWZ0Q2FyZENvZGVzUmVtb3ZlJywgdGhpcy5ncmFwaFFMQ2xpZW50KSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBsaW5lIGl0ZW1zIGZyb20gYW4gZXhpc3RpbmcgY2hlY2tvdXQuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGNvbnN0IGNoZWNrb3V0SWQgPSAnWjJsa09pOHZjMmh2Y0dsbWVTOURhR1ZqYTI5MWRDOWtNVFptTTJFek1ETTRZamM0Tj0nO1xuICAgICAqIGNvbnN0IGxpbmVJdGVtSWRzID0gWydUVmlaR0U1WTJVMVpERmhZMkZpTW1NMllUOXJaWGs5TlRjMllqQmhPRGN3TldJeFl6ZzBZakU1WmpSbVpHUTVOamN6TkdWa1pHVT0nXTtcbiAgICAgKlxuICAgICAqIGNsaWVudC5jaGVja291dC5yZW1vdmVMaW5lSXRlbXMoY2hlY2tvdXRJZCwgbGluZUl0ZW1JZHMpLnRoZW4oKGNoZWNrb3V0KSA9PiB7XG4gICAgICogICAvLyBEbyBzb21ldGhpbmcgd2l0aCB0aGUgdXBkYXRlZCBjaGVja291dFxuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGNoZWNrb3V0SWQgVGhlIElEIG9mIHRoZSBjaGVja291dCB0byByZW1vdmUgbGluZSBpdGVtcyBmcm9tLlxuICAgICAqIEBwYXJhbSB7U3RyaW5nW119IGxpbmVJdGVtSWRzIEEgbGlzdCBvZiB0aGUgaWRzIG9mIGxpbmUgaXRlbXMgdG8gcmVtb3ZlIGZyb20gdGhlIGNoZWNrb3V0LlxuICAgICAqIEByZXR1cm4ge1Byb21pc2V8R3JhcGhNb2RlbH0gQSBwcm9taXNlIHJlc29sdmluZyB3aXRoIHRoZSB1cGRhdGVkIGNoZWNrb3V0LlxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdyZW1vdmVMaW5lSXRlbXMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVMaW5lSXRlbXMoY2hlY2tvdXRJZCkge1xuICAgICAgdmFyIGxpbmVJZHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFtdO1xuXG4gICAgICB2YXIgdmFyaWFibGVzID0gdGhpcy5pbnB1dE1hcHBlci5yZW1vdmVMaW5lSXRlbXMoY2hlY2tvdXRJZCwgbGluZUlkcyk7XG5cbiAgICAgIHJldHVybiB0aGlzLmdyYXBoUUxDbGllbnQuc2VuZChxdWVyeSQxOSwgdmFyaWFibGVzKS50aGVuKGhhbmRsZUNhcnRNdXRhdGlvbignY2FydExpbmVzUmVtb3ZlJywgdGhpcy5ncmFwaFFMQ2xpZW50KSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVwbGFjZSBsaW5lIGl0ZW1zIG9uIGFuIGV4aXN0aW5nIGNoZWNrb3V0LlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBjb25zdCBjaGVja291dElkID0gJ1oybGtPaTh2YzJodmNHbG1lUzlEYUdWamEyOTFkQzlrTVRabU0yRXpNRE00WWpjNE49JztcbiAgICAgKiBjb25zdCBsaW5lSXRlbXMgPSBbe3ZhcmlhbnRJZDogJ1oybGtPaTh2YzJodmNHbG1lUzlRY205a2RXTjBWbUZ5YVdGdWRDOHlPVEV3TmpBeU1qYzVNZz09JywgcXVhbnRpdHk6IDV9XTtcbiAgICAgKlxuICAgICAqIGNsaWVudC5jaGVja291dC5yZXBsYWNlTGluZUl0ZW1zKGNoZWNrb3V0SWQsIGxpbmVJdGVtcykudGhlbigoY2hlY2tvdXQpID0+IHtcbiAgICAgKiAgIC8vIERvIHNvbWV0aGluZyB3aXRoIHRoZSB1cGRhdGVkIGNoZWNrb3V0XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gY2hlY2tvdXRJZCBUaGUgSUQgb2YgdGhlIGNoZWNrb3V0IHRvIGFkZCBsaW5lIGl0ZW1zIHRvLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0W119IGxpbmVJdGVtcyBBIGxpc3Qgb2YgbGluZSBpdGVtcyB0byBzZXQgb24gdGhlIGNoZWNrb3V0LiBTZWUgdGhlIHtAbGluayBodHRwczovL2hlbHAuc2hvcGlmeS5jb20vYXBpL3N0b3JlZnJvbnQtYXBpL3JlZmVyZW5jZS9pbnB1dC1vYmplY3QvY2hlY2tvdXRsaW5laXRlbWlucHV0fFN0b3JlZnJvbnQgQVBJIHJlZmVyZW5jZX0gZm9yIHZhbGlkIGlucHV0IGZpZWxkcyBmb3IgZWFjaCBsaW5lIGl0ZW0uXG4gICAgICogQHJldHVybiB7UHJvbWlzZXxHcmFwaE1vZGVsfSBBIHByb21pc2UgcmVzb2x2aW5nIHdpdGggdGhlIHVwZGF0ZWQgY2hlY2tvdXQuXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ3JlcGxhY2VMaW5lSXRlbXMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZXBsYWNlTGluZUl0ZW1zKGNoZWNrb3V0SWQsIGxpbmVJdGVtcykge1xuICAgICAgdmFyIF90aGlzNSA9IHRoaXM7XG5cbiAgICAgIHJldHVybiB0aGlzLmZldGNoKGNoZWNrb3V0SWQpLnRoZW4oZnVuY3Rpb24gKGNoZWNrb3V0KSB7XG4gICAgICAgIHZhciBsaW5lSWRzID0gY2hlY2tvdXQubGluZUl0ZW1zLm1hcChmdW5jdGlvbiAobGluZUl0ZW0pIHtcbiAgICAgICAgICByZXR1cm4gbGluZUl0ZW0uaWQ7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBfdGhpczUucmVtb3ZlTGluZUl0ZW1zKGNoZWNrb3V0SWQsIGxpbmVJZHMpO1xuICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfdGhpczUuYWRkTGluZUl0ZW1zKGNoZWNrb3V0SWQsIGxpbmVJdGVtcyk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIGxpbmUgaXRlbXMgb24gYW4gZXhpc3RpbmcgY2hlY2tvdXQuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGNvbnN0IGNoZWNrb3V0SWQgPSAnWjJsa09pOHZjMmh2Y0dsbWVTOURhR1ZqYTI5MWRDOWtNVFptTTJFek1ETTRZamM0Tj0nO1xuICAgICAqIGNvbnN0IGxpbmVJdGVtcyA9IFtcbiAgICAgKiAgIHtcbiAgICAgKiAgICAgaWQ6ICdUVmlaR0U1WTJVMVpERmhZMkZpTW1NMllUOXJaWGs5TlRjMllqQmhPRGN3TldJeFl6ZzBZakU1WmpSbVpHUTVOamN6TkdWa1pHVT0nLFxuICAgICAqICAgICBxdWFudGl0eTogNSxcbiAgICAgKiAgICAgdmFyaWFudElkOiAnWjJsa09pOHZjMmh2Y0dsbWVTOVFjbTlrZFdOMFZtRnlhV0Z1ZEM4eU9URXdOakF5TWpjNU1nPT0nXG4gICAgICogICB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIGNsaWVudC5jaGVja291dC51cGRhdGVMaW5lSXRlbXMoY2hlY2tvdXRJZCwgbGluZUl0ZW1zKS50aGVuKGNoZWNrb3V0ID0+IHtcbiAgICAgKiAgIC8vIERvIHNvbWV0aGluZyB3aXRoIHRoZSB1cGRhdGVkIGNoZWNrb3V0XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gY2hlY2tvdXRJZCBUaGUgSUQgb2YgdGhlIGNoZWNrb3V0IHRvIHVwZGF0ZSBhIGxpbmUgaXRlbSBvbi5cbiAgICAgKiBAcGFyYW0ge09iamVjdFtdfSBsaW5lSXRlbXMgQSBsaXN0IG9mIGxpbmUgaXRlbSBpbmZvcm1hdGlvbiB0byB1cGRhdGUuIFNlZSB0aGUge0BsaW5rIGh0dHBzOi8vaGVscC5zaG9waWZ5LmNvbS9hcGkvc3RvcmVmcm9udC1hcGkvcmVmZXJlbmNlL2lucHV0LW9iamVjdC9jaGVja291dGxpbmVpdGVtdXBkYXRlaW5wdXR8U3RvcmVmcm9udCBBUEkgcmVmZXJlbmNlfSBmb3IgdmFsaWQgaW5wdXQgZmllbGRzIGZvciBlYWNoIGxpbmUgaXRlbS5cbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlfEdyYXBoTW9kZWx9IEEgcHJvbWlzZSByZXNvbHZpbmcgd2l0aCB0aGUgdXBkYXRlZCBjaGVja291dC5cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAndXBkYXRlTGluZUl0ZW1zJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlTGluZUl0ZW1zKGNoZWNrb3V0SWQsIGxpbmVJdGVtcykge1xuICAgICAgdmFyIHZhcmlhYmxlcyA9IHRoaXMuaW5wdXRNYXBwZXIudXBkYXRlTGluZUl0ZW1zKGNoZWNrb3V0SWQsIGxpbmVJdGVtcyk7XG5cbiAgICAgIHJldHVybiB0aGlzLmdyYXBoUUxDbGllbnQuc2VuZChxdWVyeSQyMCwgdmFyaWFibGVzKS50aGVuKGhhbmRsZUNhcnRNdXRhdGlvbignY2FydExpbmVzVXBkYXRlJywgdGhpcy5ncmFwaFFMQ2xpZW50KSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBzaGlwcGluZyBhZGRyZXNzIG9uIGFuIGV4aXN0aW5nIGNoZWNrb3V0LlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBjb25zdCBjaGVja291dElkID0gYCdaMmxrT2k4dmMyaHZjR2xtZVM5RGFHVmphMjkxZEM5a01UWm1NMkV6TURNNFlqYzROPSc7XG4gICAgICogY29uc3Qgc2hpcHBpbmdBZGRyZXNzID0ge1xuICAgICAqICAgIGFkZHJlc3MxOiAnQ2hlc3RudXQgU3RyZWV0IDkyJyxcbiAgICAgKiAgICBhZGRyZXNzMjogJ0FwYXJ0bWVudCAyJyxcbiAgICAgKiAgICBjaXR5OiAnTG91aXN2aWxsZScsXG4gICAgICogICAgY29tcGFueTogbnVsbCxcbiAgICAgKiAgICBjb3VudHJ5OiAnVW5pdGVkIFN0YXRlcycsXG4gICAgICogICAgZmlyc3ROYW1lOiAnQm9iJyxcbiAgICAgKiAgICBsYXN0TmFtZTogJ05vcm1hbicsXG4gICAgICogICAgcGhvbmU6ICc1NTUtNjI1LTExOTknLFxuICAgICAqICAgIHByb3ZpbmNlOiAnS2VudHVja3knLFxuICAgICAqICAgIHppcDogJzQwMjAyJ1xuICAgICAqICB9O1xuICAgICAqXG4gICAgICogY2xpZW50LmNoZWNrb3V0LnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhjaGVja291dElkLCBzaGlwcGluZ0FkZHJlc3MpLnRoZW4oY2hlY2tvdXQgPT4ge1xuICAgICAqICAgLy8gRG8gc29tZXRoaW5nIHdpdGggdGhlIHVwZGF0ZWQgY2hlY2tvdXRcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gY2hlY2tvdXRJZCBUaGUgSUQgb2YgdGhlIGNoZWNrb3V0IHRvIHVwZGF0ZSBzaGlwcGluZyBhZGRyZXNzLlxuICAgICAqIEBwYXJhbSAge09iamVjdH0gc2hpcHBpbmdBZGRyZXNzIEEgc2hpcHBpbmcgYWRkcmVzcy5cbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlfEdyYXBoTW9kZWx9IEEgcHJvbWlzZSByZXNvbHZpbmcgd2l0aCB0aGUgdXBkYXRlZCBjaGVja291dC5cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAndXBkYXRlU2hpcHBpbmdBZGRyZXNzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlU2hpcHBpbmdBZGRyZXNzKGNoZWNrb3V0SWQsIHNoaXBwaW5nQWRkcmVzcykge1xuICAgICAgdmFyIHZhcmlhYmxlcyA9IHRoaXMuaW5wdXRNYXBwZXIudXBkYXRlU2hpcHBpbmdBZGRyZXNzKGNoZWNrb3V0SWQsIHNoaXBwaW5nQWRkcmVzcyk7XG5cbiAgICAgIHJldHVybiB0aGlzLmdyYXBoUUxDbGllbnQuc2VuZChxdWVyeSQxNSwgdmFyaWFibGVzKS50aGVuKGhhbmRsZUNhcnRNdXRhdGlvbignY2FydEJ1eWVySWRlbnRpdHlVcGRhdGUnLCB0aGlzLmdyYXBoUUxDbGllbnQpKTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIENoZWNrb3V0UmVzb3VyY2U7XG59KFJlc291cmNlKTtcblxuLyoqXG4gKiBAbmFtZXNwYWNlIEltYWdlSGVscGVyc1xuICovXG52YXIgaW1hZ2VIZWxwZXJzID0ge1xuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgdGhlIGltYWdlIHNyYyBmb3IgYSByZXNpemVkIGltYWdlIHdpdGggbWF4aW11bSBkaW1lbnNpb25zIGBtYXhXaWR0aGAgYW5kIGBtYXhIZWlnaHRgLlxuICAgKiBJbWFnZXMgZG8gbm90IHNjYWxlIHVwLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBjb25zdCB1cmwgPSBjbGllbnQuaW1hZ2UuaGVscGVycy5pbWFnZUZvclNpemUocHJvZHVjdC52YXJpYW50c1swXS5pbWFnZSwge21heFdpZHRoOiA1MCwgbWF4SGVpZ2h0OiA1MH0pO1xuICAgKlxuICAgKiBAbWVtYmVyb2YgSW1hZ2VIZWxwZXJzXG4gICAqIEBtZXRob2QgaW1hZ2VGb3JTaXplXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBpbWFnZSBUaGUgb3JpZ2luYWwgaW1hZ2UgbW9kZWwgdG8gZ2VuZXJhdGUgdGhlIGltYWdlIHNyYyBmb3IuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIEFuIG9wdGlvbnMgb2JqZWN0IGNvbnRhaW5pbmc6XG4gICAqICBAcGFyYW0ge0ludGVnZXJ9IG9wdGlvbnMubWF4V2lkdGggVGhlIG1heGltdW0gd2lkdGggZm9yIHRoZSBpbWFnZS5cbiAgICogIEBwYXJhbSB7SW50ZWdlcn0gb3B0aW9ucy5tYXhIZWlnaHQgVGhlIG1heGltdW0gaGVpZ2h0IGZvciB0aGUgaW1hZ2UuXG4gICAqIEByZXR1cm4ge1N0cmluZ30gVGhlIGltYWdlIHNyYyBmb3IgdGhlIHJlc2l6ZWQgaW1hZ2UuXG4gICAqL1xuICBpbWFnZUZvclNpemU6IGZ1bmN0aW9uIGltYWdlRm9yU2l6ZShpbWFnZSwgX3JlZikge1xuICAgIHZhciBtYXhXaWR0aCA9IF9yZWYubWF4V2lkdGgsXG4gICAgICAgIG1heEhlaWdodCA9IF9yZWYubWF4SGVpZ2h0O1xuXG4gICAgdmFyIHNwbGl0VXJsID0gaW1hZ2Uuc3JjLnNwbGl0KCc/Jyk7XG4gICAgdmFyIG5vdFF1ZXJ5ID0gc3BsaXRVcmxbMF07XG4gICAgdmFyIHF1ZXJ5ID0gc3BsaXRVcmxbMV0gPyAnPycgKyBzcGxpdFVybFsxXSA6ICcnO1xuXG4gICAgLy8gVXNlIHRoZSBzZWN0aW9uIGJlZm9yZSB0aGUgcXVlcnlcbiAgICB2YXIgaW1hZ2VUb2tlbnMgPSBub3RRdWVyeS5zcGxpdCgnLicpO1xuXG4gICAgLy8gVGFrZSB0aGUgdG9rZW4gYmVmb3JlIHRoZSBmaWxlIGV4dGVuc2lvbiBhbmQgYXBwZW5kIHRoZSBkaW1lbnNpb25zXG4gICAgdmFyIGltYWdlUGF0aEluZGV4ID0gaW1hZ2VUb2tlbnMubGVuZ3RoIC0gMjtcblxuICAgIGltYWdlVG9rZW5zW2ltYWdlUGF0aEluZGV4XSA9IGltYWdlVG9rZW5zW2ltYWdlUGF0aEluZGV4XSArICdfJyArIG1heFdpZHRoICsgJ3gnICsgbWF4SGVpZ2h0O1xuXG4gICAgcmV0dXJuICcnICsgaW1hZ2VUb2tlbnMuam9pbignLicpICsgcXVlcnk7XG4gIH1cbn07XG5cbi8qKlxuICogVGhlIEpTIEJ1eSBTREsgaW1hZ2UgcmVzb3VyY2VcbiAqIEBjbGFzc1xuICovXG5cbnZhciBJbWFnZVJlc291cmNlID0gZnVuY3Rpb24gKF9SZXNvdXJjZSkge1xuICBpbmhlcml0cyQxKEltYWdlUmVzb3VyY2UsIF9SZXNvdXJjZSk7XG5cbiAgZnVuY3Rpb24gSW1hZ2VSZXNvdXJjZSgpIHtcbiAgICBjbGFzc0NhbGxDaGVjayQxKHRoaXMsIEltYWdlUmVzb3VyY2UpO1xuICAgIHJldHVybiBwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuJDEodGhpcywgKEltYWdlUmVzb3VyY2UuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihJbWFnZVJlc291cmNlKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH1cblxuICBjcmVhdGVDbGFzcyQxKEltYWdlUmVzb3VyY2UsIFt7XG4gICAga2V5OiAnaGVscGVycycsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQkJDEoKSB7XG4gICAgICByZXR1cm4gaW1hZ2VIZWxwZXJzO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gSW1hZ2VSZXNvdXJjZTtcbn0oUmVzb3VyY2UpO1xuXG52YXIgdmVyc2lvbiA9IFwiMy4wLjZcIjtcblxudmFyIEFwcGxpZWRHaWZ0Q2FyZCA9IHtcbiAgXCJuYW1lXCI6IFwiQXBwbGllZEdpZnRDYXJkXCIsXG4gIFwia2luZFwiOiBcIk9CSkVDVFwiLFxuICBcImZpZWxkQmFzZVR5cGVzXCI6IHtcbiAgICBcImFtb3VudFVzZWRcIjogXCJNb25leVYyXCIsXG4gICAgXCJiYWxhbmNlXCI6IFwiTW9uZXlWMlwiLFxuICAgIFwiaWRcIjogXCJJRFwiLFxuICAgIFwibGFzdENoYXJhY3RlcnNcIjogXCJTdHJpbmdcIixcbiAgICBcInByZXNlbnRtZW50QW1vdW50VXNlZFwiOiBcIk1vbmV5VjJcIlxuICB9LFxuICBcImltcGxlbWVudHNOb2RlXCI6IHRydWVcbn07XG5cbnZhciBBdHRyaWJ1dGUgPSB7XG4gIFwibmFtZVwiOiBcIkF0dHJpYnV0ZVwiLFxuICBcImtpbmRcIjogXCJPQkpFQ1RcIixcbiAgXCJmaWVsZEJhc2VUeXBlc1wiOiB7XG4gICAgXCJrZXlcIjogXCJTdHJpbmdcIixcbiAgICBcInZhbHVlXCI6IFwiU3RyaW5nXCJcbiAgfSxcbiAgXCJpbXBsZW1lbnRzTm9kZVwiOiBmYWxzZVxufTtcblxudmFyIEF1dG9tYXRpY0Rpc2NvdW50QXBwbGljYXRpb24gPSB7XG4gIFwibmFtZVwiOiBcIkF1dG9tYXRpY0Rpc2NvdW50QXBwbGljYXRpb25cIixcbiAgXCJraW5kXCI6IFwiT0JKRUNUXCIsXG4gIFwiZmllbGRCYXNlVHlwZXNcIjoge1xuICAgIFwidGl0bGVcIjogXCJTdHJpbmdcIlxuICB9LFxuICBcImltcGxlbWVudHNOb2RlXCI6IGZhbHNlXG59O1xuXG52YXIgQmFzZUNhcnRMaW5lID0ge1xuICBcIm5hbWVcIjogXCJCYXNlQ2FydExpbmVcIixcbiAgXCJraW5kXCI6IFwiSU5URVJGQUNFXCIsXG4gIFwiZmllbGRCYXNlVHlwZXNcIjoge1xuICAgIFwiYXR0cmlidXRlc1wiOiBcIkF0dHJpYnV0ZVwiLFxuICAgIFwiY29zdFwiOiBcIkNhcnRMaW5lQ29zdFwiLFxuICAgIFwiZGlzY291bnRBbGxvY2F0aW9uc1wiOiBcIkNhcnREaXNjb3VudEFsbG9jYXRpb25cIixcbiAgICBcImlkXCI6IFwiSURcIixcbiAgICBcIm1lcmNoYW5kaXNlXCI6IFwiTWVyY2hhbmRpc2VcIixcbiAgICBcInF1YW50aXR5XCI6IFwiSW50XCJcbiAgfSxcbiAgXCJwb3NzaWJsZVR5cGVzXCI6IFtcIkNhcnRMaW5lXCIsIFwiQ29tcG9uZW50aXphYmxlQ2FydExpbmVcIl1cbn07XG5cbnZhciBCYXNlQ2FydExpbmVDb25uZWN0aW9uID0ge1xuICBcIm5hbWVcIjogXCJCYXNlQ2FydExpbmVDb25uZWN0aW9uXCIsXG4gIFwia2luZFwiOiBcIk9CSkVDVFwiLFxuICBcImZpZWxkQmFzZVR5cGVzXCI6IHtcbiAgICBcImVkZ2VzXCI6IFwiQmFzZUNhcnRMaW5lRWRnZVwiLFxuICAgIFwicGFnZUluZm9cIjogXCJQYWdlSW5mb1wiXG4gIH0sXG4gIFwiaW1wbGVtZW50c05vZGVcIjogZmFsc2Vcbn07XG5cbnZhciBCYXNlQ2FydExpbmVFZGdlID0ge1xuICBcIm5hbWVcIjogXCJCYXNlQ2FydExpbmVFZGdlXCIsXG4gIFwia2luZFwiOiBcIk9CSkVDVFwiLFxuICBcImZpZWxkQmFzZVR5cGVzXCI6IHtcbiAgICBcImN1cnNvclwiOiBcIlN0cmluZ1wiLFxuICAgIFwibm9kZVwiOiBcIkJhc2VDYXJ0TGluZVwiXG4gIH0sXG4gIFwiaW1wbGVtZW50c05vZGVcIjogZmFsc2Vcbn07XG5cbnZhciBCb29sZWFuJDEgPSB7XG4gIFwibmFtZVwiOiBcIkJvb2xlYW5cIixcbiAgXCJraW5kXCI6IFwiU0NBTEFSXCJcbn07XG5cbnZhciBDYXJ0ID0ge1xuICBcIm5hbWVcIjogXCJDYXJ0XCIsXG4gIFwia2luZFwiOiBcIk9CSkVDVFwiLFxuICBcImZpZWxkQmFzZVR5cGVzXCI6IHtcbiAgICBcImFwcGxpZWRHaWZ0Q2FyZHNcIjogXCJBcHBsaWVkR2lmdENhcmRcIixcbiAgICBcImF0dHJpYnV0ZXNcIjogXCJBdHRyaWJ1dGVcIixcbiAgICBcImJ1eWVySWRlbnRpdHlcIjogXCJDYXJ0QnV5ZXJJZGVudGl0eVwiLFxuICAgIFwiY2hlY2tvdXRVcmxcIjogXCJVUkxcIixcbiAgICBcImNvc3RcIjogXCJDYXJ0Q29zdFwiLFxuICAgIFwiY3JlYXRlZEF0XCI6IFwiRGF0ZVRpbWVcIixcbiAgICBcImRlbGl2ZXJ5R3JvdXBzXCI6IFwiQ2FydERlbGl2ZXJ5R3JvdXBDb25uZWN0aW9uXCIsXG4gICAgXCJkaXNjb3VudEFsbG9jYXRpb25zXCI6IFwiQ2FydERpc2NvdW50QWxsb2NhdGlvblwiLFxuICAgIFwiZGlzY291bnRDb2Rlc1wiOiBcIkNhcnREaXNjb3VudENvZGVcIixcbiAgICBcImlkXCI6IFwiSURcIixcbiAgICBcImxpbmVzXCI6IFwiQmFzZUNhcnRMaW5lQ29ubmVjdGlvblwiLFxuICAgIFwibm90ZVwiOiBcIlN0cmluZ1wiLFxuICAgIFwidXBkYXRlZEF0XCI6IFwiRGF0ZVRpbWVcIlxuICB9LFxuICBcImltcGxlbWVudHNOb2RlXCI6IHRydWVcbn07XG5cbnZhciBDYXJ0QXR0cmlidXRlc1VwZGF0ZVBheWxvYWQgPSB7XG4gIFwibmFtZVwiOiBcIkNhcnRBdHRyaWJ1dGVzVXBkYXRlUGF5bG9hZFwiLFxuICBcImtpbmRcIjogXCJPQkpFQ1RcIixcbiAgXCJmaWVsZEJhc2VUeXBlc1wiOiB7XG4gICAgXCJjYXJ0XCI6IFwiQ2FydFwiLFxuICAgIFwidXNlckVycm9yc1wiOiBcIkNhcnRVc2VyRXJyb3JcIixcbiAgICBcIndhcm5pbmdzXCI6IFwiQ2FydFdhcm5pbmdcIlxuICB9LFxuICBcImltcGxlbWVudHNOb2RlXCI6IGZhbHNlXG59O1xuXG52YXIgQ2FydEF1dG9tYXRpY0Rpc2NvdW50QWxsb2NhdGlvbiA9IHtcbiAgXCJuYW1lXCI6IFwiQ2FydEF1dG9tYXRpY0Rpc2NvdW50QWxsb2NhdGlvblwiLFxuICBcImtpbmRcIjogXCJPQkpFQ1RcIixcbiAgXCJmaWVsZEJhc2VUeXBlc1wiOiB7XG4gICAgXCJ0aXRsZVwiOiBcIlN0cmluZ1wiXG4gIH0sXG4gIFwiaW1wbGVtZW50c05vZGVcIjogZmFsc2Vcbn07XG5cbnZhciBDYXJ0QnV5ZXJJZGVudGl0eSA9IHtcbiAgXCJuYW1lXCI6IFwiQ2FydEJ1eWVySWRlbnRpdHlcIixcbiAgXCJraW5kXCI6IFwiT0JKRUNUXCIsXG4gIFwiZmllbGRCYXNlVHlwZXNcIjoge1xuICAgIFwiY291bnRyeUNvZGVcIjogXCJDb3VudHJ5Q29kZVwiLFxuICAgIFwiY3VzdG9tZXJcIjogXCJDdXN0b21lclwiLFxuICAgIFwiZGVsaXZlcnlBZGRyZXNzUHJlZmVyZW5jZXNcIjogXCJEZWxpdmVyeUFkZHJlc3NcIixcbiAgICBcImVtYWlsXCI6IFwiU3RyaW5nXCIsXG4gICAgXCJwaG9uZVwiOiBcIlN0cmluZ1wiLFxuICAgIFwicHJlZmVyZW5jZXNcIjogXCJDYXJ0UHJlZmVyZW5jZXNcIlxuICB9LFxuICBcImltcGxlbWVudHNOb2RlXCI6IGZhbHNlXG59O1xuXG52YXIgQ2FydEJ1eWVySWRlbnRpdHlVcGRhdGVQYXlsb2FkID0ge1xuICBcIm5hbWVcIjogXCJDYXJ0QnV5ZXJJZGVudGl0eVVwZGF0ZVBheWxvYWRcIixcbiAgXCJraW5kXCI6IFwiT0JKRUNUXCIsXG4gIFwiZmllbGRCYXNlVHlwZXNcIjoge1xuICAgIFwiY2FydFwiOiBcIkNhcnRcIixcbiAgICBcInVzZXJFcnJvcnNcIjogXCJDYXJ0VXNlckVycm9yXCIsXG4gICAgXCJ3YXJuaW5nc1wiOiBcIkNhcnRXYXJuaW5nXCJcbiAgfSxcbiAgXCJpbXBsZW1lbnRzTm9kZVwiOiBmYWxzZVxufTtcblxudmFyIENhcnRDb2RlRGlzY291bnRBbGxvY2F0aW9uID0ge1xuICBcIm5hbWVcIjogXCJDYXJ0Q29kZURpc2NvdW50QWxsb2NhdGlvblwiLFxuICBcImtpbmRcIjogXCJPQkpFQ1RcIixcbiAgXCJmaWVsZEJhc2VUeXBlc1wiOiB7XG4gICAgXCJjb2RlXCI6IFwiU3RyaW5nXCJcbiAgfSxcbiAgXCJpbXBsZW1lbnRzTm9kZVwiOiBmYWxzZVxufTtcblxudmFyIENhcnRDb3N0ID0ge1xuICBcIm5hbWVcIjogXCJDYXJ0Q29zdFwiLFxuICBcImtpbmRcIjogXCJPQkpFQ1RcIixcbiAgXCJmaWVsZEJhc2VUeXBlc1wiOiB7XG4gICAgXCJjaGVja291dENoYXJnZUFtb3VudFwiOiBcIk1vbmV5VjJcIixcbiAgICBcInN1YnRvdGFsQW1vdW50XCI6IFwiTW9uZXlWMlwiLFxuICAgIFwidG90YWxBbW91bnRcIjogXCJNb25leVYyXCIsXG4gICAgXCJ0b3RhbER1dHlBbW91bnRcIjogXCJNb25leVYyXCIsXG4gICAgXCJ0b3RhbFRheEFtb3VudFwiOiBcIk1vbmV5VjJcIlxuICB9LFxuICBcImltcGxlbWVudHNOb2RlXCI6IGZhbHNlXG59O1xuXG52YXIgQ2FydENyZWF0ZVBheWxvYWQgPSB7XG4gIFwibmFtZVwiOiBcIkNhcnRDcmVhdGVQYXlsb2FkXCIsXG4gIFwia2luZFwiOiBcIk9CSkVDVFwiLFxuICBcImZpZWxkQmFzZVR5cGVzXCI6IHtcbiAgICBcImNhcnRcIjogXCJDYXJ0XCIsXG4gICAgXCJ1c2VyRXJyb3JzXCI6IFwiQ2FydFVzZXJFcnJvclwiLFxuICAgIFwid2FybmluZ3NcIjogXCJDYXJ0V2FybmluZ1wiXG4gIH0sXG4gIFwiaW1wbGVtZW50c05vZGVcIjogZmFsc2Vcbn07XG5cbnZhciBDYXJ0Q3VzdG9tRGlzY291bnRBbGxvY2F0aW9uID0ge1xuICBcIm5hbWVcIjogXCJDYXJ0Q3VzdG9tRGlzY291bnRBbGxvY2F0aW9uXCIsXG4gIFwia2luZFwiOiBcIk9CSkVDVFwiLFxuICBcImZpZWxkQmFzZVR5cGVzXCI6IHtcbiAgICBcInRpdGxlXCI6IFwiU3RyaW5nXCJcbiAgfSxcbiAgXCJpbXBsZW1lbnRzTm9kZVwiOiBmYWxzZVxufTtcblxudmFyIENhcnREZWxpdmVyeUNvb3JkaW5hdGVzUHJlZmVyZW5jZSA9IHtcbiAgXCJuYW1lXCI6IFwiQ2FydERlbGl2ZXJ5Q29vcmRpbmF0ZXNQcmVmZXJlbmNlXCIsXG4gIFwia2luZFwiOiBcIk9CSkVDVFwiLFxuICBcImZpZWxkQmFzZVR5cGVzXCI6IHtcbiAgICBcImNvdW50cnlDb2RlXCI6IFwiQ291bnRyeUNvZGVcIixcbiAgICBcImxhdGl0dWRlXCI6IFwiRmxvYXRcIixcbiAgICBcImxvbmdpdHVkZVwiOiBcIkZsb2F0XCJcbiAgfSxcbiAgXCJpbXBsZW1lbnRzTm9kZVwiOiBmYWxzZVxufTtcblxudmFyIENhcnREZWxpdmVyeUdyb3VwID0ge1xuICBcIm5hbWVcIjogXCJDYXJ0RGVsaXZlcnlHcm91cFwiLFxuICBcImtpbmRcIjogXCJPQkpFQ1RcIixcbiAgXCJmaWVsZEJhc2VUeXBlc1wiOiB7XG4gICAgXCJjYXJ0TGluZXNcIjogXCJCYXNlQ2FydExpbmVDb25uZWN0aW9uXCIsXG4gICAgXCJkZWxpdmVyeUFkZHJlc3NcIjogXCJNYWlsaW5nQWRkcmVzc1wiLFxuICAgIFwiZGVsaXZlcnlPcHRpb25zXCI6IFwiQ2FydERlbGl2ZXJ5T3B0aW9uXCIsXG4gICAgXCJpZFwiOiBcIklEXCIsXG4gICAgXCJzZWxlY3RlZERlbGl2ZXJ5T3B0aW9uXCI6IFwiQ2FydERlbGl2ZXJ5T3B0aW9uXCJcbiAgfSxcbiAgXCJpbXBsZW1lbnRzTm9kZVwiOiBmYWxzZVxufTtcblxudmFyIENhcnREZWxpdmVyeUdyb3VwQ29ubmVjdGlvbiA9IHtcbiAgXCJuYW1lXCI6IFwiQ2FydERlbGl2ZXJ5R3JvdXBDb25uZWN0aW9uXCIsXG4gIFwia2luZFwiOiBcIk9CSkVDVFwiLFxuICBcImZpZWxkQmFzZVR5cGVzXCI6IHtcbiAgICBcImVkZ2VzXCI6IFwiQ2FydERlbGl2ZXJ5R3JvdXBFZGdlXCIsXG4gICAgXCJwYWdlSW5mb1wiOiBcIlBhZ2VJbmZvXCJcbiAgfSxcbiAgXCJpbXBsZW1lbnRzTm9kZVwiOiBmYWxzZVxufTtcblxudmFyIENhcnREZWxpdmVyeUdyb3VwRWRnZSA9IHtcbiAgXCJuYW1lXCI6IFwiQ2FydERlbGl2ZXJ5R3JvdXBFZGdlXCIsXG4gIFwia2luZFwiOiBcIk9CSkVDVFwiLFxuICBcImZpZWxkQmFzZVR5cGVzXCI6IHtcbiAgICBcIm5vZGVcIjogXCJDYXJ0RGVsaXZlcnlHcm91cFwiXG4gIH0sXG4gIFwiaW1wbGVtZW50c05vZGVcIjogZmFsc2Vcbn07XG5cbnZhciBDYXJ0RGVsaXZlcnlPcHRpb24gPSB7XG4gIFwibmFtZVwiOiBcIkNhcnREZWxpdmVyeU9wdGlvblwiLFxuICBcImtpbmRcIjogXCJPQkpFQ1RcIixcbiAgXCJmaWVsZEJhc2VUeXBlc1wiOiB7XG4gICAgXCJjb2RlXCI6IFwiU3RyaW5nXCIsXG4gICAgXCJkZWxpdmVyeU1ldGhvZFR5cGVcIjogXCJEZWxpdmVyeU1ldGhvZFR5cGVcIixcbiAgICBcImRlc2NyaXB0aW9uXCI6IFwiU3RyaW5nXCIsXG4gICAgXCJlc3RpbWF0ZWRDb3N0XCI6IFwiTW9uZXlWMlwiLFxuICAgIFwiaGFuZGxlXCI6IFwiU3RyaW5nXCIsXG4gICAgXCJ0aXRsZVwiOiBcIlN0cmluZ1wiXG4gIH0sXG4gIFwiaW1wbGVtZW50c05vZGVcIjogZmFsc2Vcbn07XG5cbnZhciBDYXJ0RGVsaXZlcnlQcmVmZXJlbmNlID0ge1xuICBcIm5hbWVcIjogXCJDYXJ0RGVsaXZlcnlQcmVmZXJlbmNlXCIsXG4gIFwia2luZFwiOiBcIk9CSkVDVFwiLFxuICBcImZpZWxkQmFzZVR5cGVzXCI6IHtcbiAgICBcImNvb3JkaW5hdGVzXCI6IFwiQ2FydERlbGl2ZXJ5Q29vcmRpbmF0ZXNQcmVmZXJlbmNlXCIsXG4gICAgXCJkZWxpdmVyeU1ldGhvZFwiOiBcIlByZWZlcmVuY2VEZWxpdmVyeU1ldGhvZFR5cGVcIixcbiAgICBcInBpY2t1cEhhbmRsZVwiOiBcIlN0cmluZ1wiXG4gIH0sXG4gIFwiaW1wbGVtZW50c05vZGVcIjogZmFsc2Vcbn07XG5cbnZhciBDYXJ0RGlzY291bnRBbGxvY2F0aW9uID0ge1xuICBcIm5hbWVcIjogXCJDYXJ0RGlzY291bnRBbGxvY2F0aW9uXCIsXG4gIFwia2luZFwiOiBcIklOVEVSRkFDRVwiLFxuICBcImZpZWxkQmFzZVR5cGVzXCI6IHtcbiAgICBcImRpc2NvdW50QXBwbGljYXRpb25cIjogXCJDYXJ0RGlzY291bnRBcHBsaWNhdGlvblwiLFxuICAgIFwiZGlzY291bnRlZEFtb3VudFwiOiBcIk1vbmV5VjJcIlxuICB9LFxuICBcInBvc3NpYmxlVHlwZXNcIjogW1wiQ2FydEF1dG9tYXRpY0Rpc2NvdW50QWxsb2NhdGlvblwiLCBcIkNhcnRDb2RlRGlzY291bnRBbGxvY2F0aW9uXCIsIFwiQ2FydEN1c3RvbURpc2NvdW50QWxsb2NhdGlvblwiXVxufTtcblxudmFyIENhcnREaXNjb3VudEFwcGxpY2F0aW9uID0ge1xuICBcIm5hbWVcIjogXCJDYXJ0RGlzY291bnRBcHBsaWNhdGlvblwiLFxuICBcImtpbmRcIjogXCJPQkpFQ1RcIixcbiAgXCJmaWVsZEJhc2VUeXBlc1wiOiB7XG4gICAgXCJhbGxvY2F0aW9uTWV0aG9kXCI6IFwiRGlzY291bnRBcHBsaWNhdGlvbkFsbG9jYXRpb25NZXRob2RcIixcbiAgICBcInRhcmdldFNlbGVjdGlvblwiOiBcIkRpc2NvdW50QXBwbGljYXRpb25UYXJnZXRTZWxlY3Rpb25cIixcbiAgICBcInRhcmdldFR5cGVcIjogXCJEaXNjb3VudEFwcGxpY2F0aW9uVGFyZ2V0VHlwZVwiLFxuICAgIFwidmFsdWVcIjogXCJQcmljaW5nVmFsdWVcIlxuICB9LFxuICBcImltcGxlbWVudHNOb2RlXCI6IGZhbHNlXG59O1xuXG52YXIgQ2FydERpc2NvdW50Q29kZSA9IHtcbiAgXCJuYW1lXCI6IFwiQ2FydERpc2NvdW50Q29kZVwiLFxuICBcImtpbmRcIjogXCJPQkpFQ1RcIixcbiAgXCJmaWVsZEJhc2VUeXBlc1wiOiB7XG4gICAgXCJhcHBsaWNhYmxlXCI6IFwiQm9vbGVhblwiLFxuICAgIFwiY29kZVwiOiBcIlN0cmluZ1wiXG4gIH0sXG4gIFwiaW1wbGVtZW50c05vZGVcIjogZmFsc2Vcbn07XG5cbnZhciBDYXJ0RGlzY291bnRDb2Rlc1VwZGF0ZVBheWxvYWQgPSB7XG4gIFwibmFtZVwiOiBcIkNhcnREaXNjb3VudENvZGVzVXBkYXRlUGF5bG9hZFwiLFxuICBcImtpbmRcIjogXCJPQkpFQ1RcIixcbiAgXCJmaWVsZEJhc2VUeXBlc1wiOiB7XG4gICAgXCJjYXJ0XCI6IFwiQ2FydFwiLFxuICAgIFwidXNlckVycm9yc1wiOiBcIkNhcnRVc2VyRXJyb3JcIixcbiAgICBcIndhcm5pbmdzXCI6IFwiQ2FydFdhcm5pbmdcIlxuICB9LFxuICBcImltcGxlbWVudHNOb2RlXCI6IGZhbHNlXG59O1xuXG52YXIgQ2FydEVycm9yQ29kZSA9IHtcbiAgXCJuYW1lXCI6IFwiQ2FydEVycm9yQ29kZVwiLFxuICBcImtpbmRcIjogXCJFTlVNXCJcbn07XG5cbnZhciBDYXJ0R2lmdENhcmRDb2Rlc1JlbW92ZVBheWxvYWQgPSB7XG4gIFwibmFtZVwiOiBcIkNhcnRHaWZ0Q2FyZENvZGVzUmVtb3ZlUGF5bG9hZFwiLFxuICBcImtpbmRcIjogXCJPQkpFQ1RcIixcbiAgXCJmaWVsZEJhc2VUeXBlc1wiOiB7XG4gICAgXCJjYXJ0XCI6IFwiQ2FydFwiLFxuICAgIFwidXNlckVycm9yc1wiOiBcIkNhcnRVc2VyRXJyb3JcIixcbiAgICBcIndhcm5pbmdzXCI6IFwiQ2FydFdhcm5pbmdcIlxuICB9LFxuICBcImltcGxlbWVudHNOb2RlXCI6IGZhbHNlXG59O1xuXG52YXIgQ2FydEdpZnRDYXJkQ29kZXNVcGRhdGVQYXlsb2FkID0ge1xuICBcIm5hbWVcIjogXCJDYXJ0R2lmdENhcmRDb2Rlc1VwZGF0ZVBheWxvYWRcIixcbiAgXCJraW5kXCI6IFwiT0JKRUNUXCIsXG4gIFwiZmllbGRCYXNlVHlwZXNcIjoge1xuICAgIFwiY2FydFwiOiBcIkNhcnRcIixcbiAgICBcInVzZXJFcnJvcnNcIjogXCJDYXJ0VXNlckVycm9yXCIsXG4gICAgXCJ3YXJuaW5nc1wiOiBcIkNhcnRXYXJuaW5nXCJcbiAgfSxcbiAgXCJpbXBsZW1lbnRzTm9kZVwiOiBmYWxzZVxufTtcblxudmFyIENhcnRMaW5lQ29zdCA9IHtcbiAgXCJuYW1lXCI6IFwiQ2FydExpbmVDb3N0XCIsXG4gIFwia2luZFwiOiBcIk9CSkVDVFwiLFxuICBcImZpZWxkQmFzZVR5cGVzXCI6IHtcbiAgICBcImFtb3VudFBlclF1YW50aXR5XCI6IFwiTW9uZXlWMlwiLFxuICAgIFwiY29tcGFyZUF0QW1vdW50UGVyUXVhbnRpdHlcIjogXCJNb25leVYyXCIsXG4gICAgXCJzdWJ0b3RhbEFtb3VudFwiOiBcIk1vbmV5VjJcIixcbiAgICBcInRvdGFsQW1vdW50XCI6IFwiTW9uZXlWMlwiXG4gIH0sXG4gIFwiaW1wbGVtZW50c05vZGVcIjogZmFsc2Vcbn07XG5cbnZhciBDYXJ0TGluZXNBZGRQYXlsb2FkID0ge1xuICBcIm5hbWVcIjogXCJDYXJ0TGluZXNBZGRQYXlsb2FkXCIsXG4gIFwia2luZFwiOiBcIk9CSkVDVFwiLFxuICBcImZpZWxkQmFzZVR5cGVzXCI6IHtcbiAgICBcImNhcnRcIjogXCJDYXJ0XCIsXG4gICAgXCJ1c2VyRXJyb3JzXCI6IFwiQ2FydFVzZXJFcnJvclwiLFxuICAgIFwid2FybmluZ3NcIjogXCJDYXJ0V2FybmluZ1wiXG4gIH0sXG4gIFwiaW1wbGVtZW50c05vZGVcIjogZmFsc2Vcbn07XG5cbnZhciBDYXJ0TGluZXNSZW1vdmVQYXlsb2FkID0ge1xuICBcIm5hbWVcIjogXCJDYXJ0TGluZXNSZW1vdmVQYXlsb2FkXCIsXG4gIFwia2luZFwiOiBcIk9CSkVDVFwiLFxuICBcImZpZWxkQmFzZVR5cGVzXCI6IHtcbiAgICBcImNhcnRcIjogXCJDYXJ0XCIsXG4gICAgXCJ1c2VyRXJyb3JzXCI6IFwiQ2FydFVzZXJFcnJvclwiLFxuICAgIFwid2FybmluZ3NcIjogXCJDYXJ0V2FybmluZ1wiXG4gIH0sXG4gIFwiaW1wbGVtZW50c05vZGVcIjogZmFsc2Vcbn07XG5cbnZhciBDYXJ0TGluZXNVcGRhdGVQYXlsb2FkID0ge1xuICBcIm5hbWVcIjogXCJDYXJ0TGluZXNVcGRhdGVQYXlsb2FkXCIsXG4gIFwia2luZFwiOiBcIk9CSkVDVFwiLFxuICBcImZpZWxkQmFzZVR5cGVzXCI6IHtcbiAgICBcImNhcnRcIjogXCJDYXJ0XCIsXG4gICAgXCJ1c2VyRXJyb3JzXCI6IFwiQ2FydFVzZXJFcnJvclwiLFxuICAgIFwid2FybmluZ3NcIjogXCJDYXJ0V2FybmluZ1wiXG4gIH0sXG4gIFwiaW1wbGVtZW50c05vZGVcIjogZmFsc2Vcbn07XG5cbnZhciBDYXJ0Tm90ZVVwZGF0ZVBheWxvYWQgPSB7XG4gIFwibmFtZVwiOiBcIkNhcnROb3RlVXBkYXRlUGF5bG9hZFwiLFxuICBcImtpbmRcIjogXCJPQkpFQ1RcIixcbiAgXCJmaWVsZEJhc2VUeXBlc1wiOiB7XG4gICAgXCJjYXJ0XCI6IFwiQ2FydFwiLFxuICAgIFwidXNlckVycm9yc1wiOiBcIkNhcnRVc2VyRXJyb3JcIlxuICB9LFxuICBcImltcGxlbWVudHNOb2RlXCI6IGZhbHNlXG59O1xuXG52YXIgQ2FydFByZWZlcmVuY2VzID0ge1xuICBcIm5hbWVcIjogXCJDYXJ0UHJlZmVyZW5jZXNcIixcbiAgXCJraW5kXCI6IFwiT0JKRUNUXCIsXG4gIFwiZmllbGRCYXNlVHlwZXNcIjoge1xuICAgIFwiZGVsaXZlcnlcIjogXCJDYXJ0RGVsaXZlcnlQcmVmZXJlbmNlXCIsXG4gICAgXCJ3YWxsZXRcIjogXCJTdHJpbmdcIlxuICB9LFxuICBcImltcGxlbWVudHNOb2RlXCI6IGZhbHNlXG59O1xuXG52YXIgQ2FydFVzZXJFcnJvciA9IHtcbiAgXCJuYW1lXCI6IFwiQ2FydFVzZXJFcnJvclwiLFxuICBcImtpbmRcIjogXCJPQkpFQ1RcIixcbiAgXCJmaWVsZEJhc2VUeXBlc1wiOiB7XG4gICAgXCJjb2RlXCI6IFwiQ2FydEVycm9yQ29kZVwiLFxuICAgIFwiZmllbGRcIjogXCJTdHJpbmdcIixcbiAgICBcIm1lc3NhZ2VcIjogXCJTdHJpbmdcIlxuICB9LFxuICBcImltcGxlbWVudHNOb2RlXCI6IGZhbHNlXG59O1xuXG52YXIgQ2FydFdhcm5pbmcgPSB7XG4gIFwibmFtZVwiOiBcIkNhcnRXYXJuaW5nXCIsXG4gIFwia2luZFwiOiBcIk9CSkVDVFwiLFxuICBcImZpZWxkQmFzZVR5cGVzXCI6IHtcbiAgICBcImNvZGVcIjogXCJDYXJ0V2FybmluZ0NvZGVcIixcbiAgICBcIm1lc3NhZ2VcIjogXCJTdHJpbmdcIlxuICB9LFxuICBcImltcGxlbWVudHNOb2RlXCI6IGZhbHNlXG59O1xuXG52YXIgQ2FydFdhcm5pbmdDb2RlID0ge1xuICBcIm5hbWVcIjogXCJDYXJ0V2FybmluZ0NvZGVcIixcbiAgXCJraW5kXCI6IFwiRU5VTVwiXG59O1xuXG52YXIgQ29sbGVjdGlvbiA9IHtcbiAgXCJuYW1lXCI6IFwiQ29sbGVjdGlvblwiLFxuICBcImtpbmRcIjogXCJPQkpFQ1RcIixcbiAgXCJmaWVsZEJhc2VUeXBlc1wiOiB7XG4gICAgXCJkZXNjcmlwdGlvblwiOiBcIlN0cmluZ1wiLFxuICAgIFwiZGVzY3JpcHRpb25IdG1sXCI6IFwiSFRNTFwiLFxuICAgIFwiaGFuZGxlXCI6IFwiU3RyaW5nXCIsXG4gICAgXCJpZFwiOiBcIklEXCIsXG4gICAgXCJpbWFnZVwiOiBcIkltYWdlXCIsXG4gICAgXCJwcm9kdWN0c1wiOiBcIlByb2R1Y3RDb25uZWN0aW9uXCIsXG4gICAgXCJ0aXRsZVwiOiBcIlN0cmluZ1wiLFxuICAgIFwidXBkYXRlZEF0XCI6IFwiRGF0ZVRpbWVcIlxuICB9LFxuICBcImltcGxlbWVudHNOb2RlXCI6IHRydWVcbn07XG5cbnZhciBDb2xsZWN0aW9uQ29ubmVjdGlvbiA9IHtcbiAgXCJuYW1lXCI6IFwiQ29sbGVjdGlvbkNvbm5lY3Rpb25cIixcbiAgXCJraW5kXCI6IFwiT0JKRUNUXCIsXG4gIFwiZmllbGRCYXNlVHlwZXNcIjoge1xuICAgIFwiZWRnZXNcIjogXCJDb2xsZWN0aW9uRWRnZVwiLFxuICAgIFwicGFnZUluZm9cIjogXCJQYWdlSW5mb1wiXG4gIH0sXG4gIFwiaW1wbGVtZW50c05vZGVcIjogZmFsc2Vcbn07XG5cbnZhciBDb2xsZWN0aW9uRWRnZSA9IHtcbiAgXCJuYW1lXCI6IFwiQ29sbGVjdGlvbkVkZ2VcIixcbiAgXCJraW5kXCI6IFwiT0JKRUNUXCIsXG4gIFwiZmllbGRCYXNlVHlwZXNcIjoge1xuICAgIFwiY3Vyc29yXCI6IFwiU3RyaW5nXCIsXG4gICAgXCJub2RlXCI6IFwiQ29sbGVjdGlvblwiXG4gIH0sXG4gIFwiaW1wbGVtZW50c05vZGVcIjogZmFsc2Vcbn07XG5cbnZhciBDb3VudHJ5Q29kZSA9IHtcbiAgXCJuYW1lXCI6IFwiQ291bnRyeUNvZGVcIixcbiAgXCJraW5kXCI6IFwiRU5VTVwiXG59O1xuXG52YXIgQ3VycmVuY3lDb2RlID0ge1xuICBcIm5hbWVcIjogXCJDdXJyZW5jeUNvZGVcIixcbiAgXCJraW5kXCI6IFwiRU5VTVwiXG59O1xuXG52YXIgQ3VzdG9tZXIgPSB7XG4gIFwibmFtZVwiOiBcIkN1c3RvbWVyXCIsXG4gIFwia2luZFwiOiBcIk9CSkVDVFwiLFxuICBcImZpZWxkQmFzZVR5cGVzXCI6IHtcbiAgICBcImVtYWlsXCI6IFwiU3RyaW5nXCJcbiAgfSxcbiAgXCJpbXBsZW1lbnRzTm9kZVwiOiBmYWxzZVxufTtcblxudmFyIERhdGVUaW1lID0ge1xuICBcIm5hbWVcIjogXCJEYXRlVGltZVwiLFxuICBcImtpbmRcIjogXCJTQ0FMQVJcIlxufTtcblxudmFyIERlY2ltYWwgPSB7XG4gIFwibmFtZVwiOiBcIkRlY2ltYWxcIixcbiAgXCJraW5kXCI6IFwiU0NBTEFSXCJcbn07XG5cbnZhciBEZWxpdmVyeUFkZHJlc3MgPSB7XG4gIFwibmFtZVwiOiBcIkRlbGl2ZXJ5QWRkcmVzc1wiLFxuICBcImtpbmRcIjogXCJVTklPTlwiXG59O1xuXG52YXIgRGVsaXZlcnlNZXRob2RUeXBlID0ge1xuICBcIm5hbWVcIjogXCJEZWxpdmVyeU1ldGhvZFR5cGVcIixcbiAgXCJraW5kXCI6IFwiRU5VTVwiXG59O1xuXG52YXIgRGlzY291bnRBcHBsaWNhdGlvbiA9IHtcbiAgXCJuYW1lXCI6IFwiRGlzY291bnRBcHBsaWNhdGlvblwiLFxuICBcImtpbmRcIjogXCJJTlRFUkZBQ0VcIixcbiAgXCJmaWVsZEJhc2VUeXBlc1wiOiB7XG4gICAgXCJhbGxvY2F0aW9uTWV0aG9kXCI6IFwiRGlzY291bnRBcHBsaWNhdGlvbkFsbG9jYXRpb25NZXRob2RcIixcbiAgICBcInRhcmdldFNlbGVjdGlvblwiOiBcIkRpc2NvdW50QXBwbGljYXRpb25UYXJnZXRTZWxlY3Rpb25cIixcbiAgICBcInRhcmdldFR5cGVcIjogXCJEaXNjb3VudEFwcGxpY2F0aW9uVGFyZ2V0VHlwZVwiLFxuICAgIFwidmFsdWVcIjogXCJQcmljaW5nVmFsdWVcIlxuICB9LFxuICBcInBvc3NpYmxlVHlwZXNcIjogW1wiQXV0b21hdGljRGlzY291bnRBcHBsaWNhdGlvblwiLCBcIkRpc2NvdW50Q29kZUFwcGxpY2F0aW9uXCIsIFwiTWFudWFsRGlzY291bnRBcHBsaWNhdGlvblwiLCBcIlNjcmlwdERpc2NvdW50QXBwbGljYXRpb25cIl1cbn07XG5cbnZhciBEaXNjb3VudEFwcGxpY2F0aW9uQWxsb2NhdGlvbk1ldGhvZCA9IHtcbiAgXCJuYW1lXCI6IFwiRGlzY291bnRBcHBsaWNhdGlvbkFsbG9jYXRpb25NZXRob2RcIixcbiAgXCJraW5kXCI6IFwiRU5VTVwiXG59O1xuXG52YXIgRGlzY291bnRBcHBsaWNhdGlvblRhcmdldFNlbGVjdGlvbiA9IHtcbiAgXCJuYW1lXCI6IFwiRGlzY291bnRBcHBsaWNhdGlvblRhcmdldFNlbGVjdGlvblwiLFxuICBcImtpbmRcIjogXCJFTlVNXCJcbn07XG5cbnZhciBEaXNjb3VudEFwcGxpY2F0aW9uVGFyZ2V0VHlwZSA9IHtcbiAgXCJuYW1lXCI6IFwiRGlzY291bnRBcHBsaWNhdGlvblRhcmdldFR5cGVcIixcbiAgXCJraW5kXCI6IFwiRU5VTVwiXG59O1xuXG52YXIgRGlzY291bnRDb2RlQXBwbGljYXRpb24gPSB7XG4gIFwibmFtZVwiOiBcIkRpc2NvdW50Q29kZUFwcGxpY2F0aW9uXCIsXG4gIFwia2luZFwiOiBcIk9CSkVDVFwiLFxuICBcImZpZWxkQmFzZVR5cGVzXCI6IHtcbiAgICBcImFwcGxpY2FibGVcIjogXCJCb29sZWFuXCIsXG4gICAgXCJjb2RlXCI6IFwiU3RyaW5nXCJcbiAgfSxcbiAgXCJpbXBsZW1lbnRzTm9kZVwiOiBmYWxzZVxufTtcblxudmFyIERvbWFpbiA9IHtcbiAgXCJuYW1lXCI6IFwiRG9tYWluXCIsXG4gIFwia2luZFwiOiBcIk9CSkVDVFwiLFxuICBcImZpZWxkQmFzZVR5cGVzXCI6IHtcbiAgICBcImhvc3RcIjogXCJTdHJpbmdcIixcbiAgICBcInNzbEVuYWJsZWRcIjogXCJCb29sZWFuXCIsXG4gICAgXCJ1cmxcIjogXCJVUkxcIlxuICB9LFxuICBcImltcGxlbWVudHNOb2RlXCI6IGZhbHNlXG59O1xuXG52YXIgRmxvYXQgPSB7XG4gIFwibmFtZVwiOiBcIkZsb2F0XCIsXG4gIFwia2luZFwiOiBcIlNDQUxBUlwiXG59O1xuXG52YXIgSFRNTCA9IHtcbiAgXCJuYW1lXCI6IFwiSFRNTFwiLFxuICBcImtpbmRcIjogXCJTQ0FMQVJcIlxufTtcblxudmFyIElEID0ge1xuICBcIm5hbWVcIjogXCJJRFwiLFxuICBcImtpbmRcIjogXCJTQ0FMQVJcIlxufTtcblxudmFyIEltYWdlID0ge1xuICBcIm5hbWVcIjogXCJJbWFnZVwiLFxuICBcImtpbmRcIjogXCJPQkpFQ1RcIixcbiAgXCJmaWVsZEJhc2VUeXBlc1wiOiB7XG4gICAgXCJhbHRUZXh0XCI6IFwiU3RyaW5nXCIsXG4gICAgXCJoZWlnaHRcIjogXCJJbnRcIixcbiAgICBcImlkXCI6IFwiSURcIixcbiAgICBcInVybFwiOiBcIlVSTFwiLFxuICAgIFwid2lkdGhcIjogXCJJbnRcIlxuICB9LFxuICBcImltcGxlbWVudHNOb2RlXCI6IGZhbHNlXG59O1xuXG52YXIgSW1hZ2VDb25uZWN0aW9uID0ge1xuICBcIm5hbWVcIjogXCJJbWFnZUNvbm5lY3Rpb25cIixcbiAgXCJraW5kXCI6IFwiT0JKRUNUXCIsXG4gIFwiZmllbGRCYXNlVHlwZXNcIjoge1xuICAgIFwiZWRnZXNcIjogXCJJbWFnZUVkZ2VcIixcbiAgICBcInBhZ2VJbmZvXCI6IFwiUGFnZUluZm9cIlxuICB9LFxuICBcImltcGxlbWVudHNOb2RlXCI6IGZhbHNlXG59O1xuXG52YXIgSW1hZ2VFZGdlID0ge1xuICBcIm5hbWVcIjogXCJJbWFnZUVkZ2VcIixcbiAgXCJraW5kXCI6IFwiT0JKRUNUXCIsXG4gIFwiZmllbGRCYXNlVHlwZXNcIjoge1xuICAgIFwiY3Vyc29yXCI6IFwiU3RyaW5nXCIsXG4gICAgXCJub2RlXCI6IFwiSW1hZ2VcIlxuICB9LFxuICBcImltcGxlbWVudHNOb2RlXCI6IGZhbHNlXG59O1xuXG52YXIgSW50ID0ge1xuICBcIm5hbWVcIjogXCJJbnRcIixcbiAgXCJraW5kXCI6IFwiU0NBTEFSXCJcbn07XG5cbnZhciBNYWlsaW5nQWRkcmVzcyA9IHtcbiAgXCJuYW1lXCI6IFwiTWFpbGluZ0FkZHJlc3NcIixcbiAgXCJraW5kXCI6IFwiT0JKRUNUXCIsXG4gIFwiZmllbGRCYXNlVHlwZXNcIjoge1xuICAgIFwiYWRkcmVzczFcIjogXCJTdHJpbmdcIixcbiAgICBcImFkZHJlc3MyXCI6IFwiU3RyaW5nXCIsXG4gICAgXCJjaXR5XCI6IFwiU3RyaW5nXCIsXG4gICAgXCJjb21wYW55XCI6IFwiU3RyaW5nXCIsXG4gICAgXCJjb3VudHJ5XCI6IFwiU3RyaW5nXCIsXG4gICAgXCJjb3VudHJ5Q29kZVYyXCI6IFwiQ291bnRyeUNvZGVcIixcbiAgICBcImZpcnN0TmFtZVwiOiBcIlN0cmluZ1wiLFxuICAgIFwiZm9ybWF0dGVkXCI6IFwiU3RyaW5nXCIsXG4gICAgXCJmb3JtYXR0ZWRBcmVhXCI6IFwiU3RyaW5nXCIsXG4gICAgXCJsYXN0TmFtZVwiOiBcIlN0cmluZ1wiLFxuICAgIFwibGF0aXR1ZGVcIjogXCJGbG9hdFwiLFxuICAgIFwibG9uZ2l0dWRlXCI6IFwiRmxvYXRcIixcbiAgICBcIm5hbWVcIjogXCJTdHJpbmdcIixcbiAgICBcInBob25lXCI6IFwiU3RyaW5nXCIsXG4gICAgXCJwcm92aW5jZVwiOiBcIlN0cmluZ1wiLFxuICAgIFwicHJvdmluY2VDb2RlXCI6IFwiU3RyaW5nXCIsXG4gICAgXCJ6aXBcIjogXCJTdHJpbmdcIlxuICB9LFxuICBcImltcGxlbWVudHNOb2RlXCI6IHRydWVcbn07XG5cbnZhciBNYW51YWxEaXNjb3VudEFwcGxpY2F0aW9uID0ge1xuICBcIm5hbWVcIjogXCJNYW51YWxEaXNjb3VudEFwcGxpY2F0aW9uXCIsXG4gIFwia2luZFwiOiBcIk9CSkVDVFwiLFxuICBcImZpZWxkQmFzZVR5cGVzXCI6IHtcbiAgICBcImRlc2NyaXB0aW9uXCI6IFwiU3RyaW5nXCIsXG4gICAgXCJ0aXRsZVwiOiBcIlN0cmluZ1wiXG4gIH0sXG4gIFwiaW1wbGVtZW50c05vZGVcIjogZmFsc2Vcbn07XG5cbnZhciBNZXJjaGFuZGlzZSA9IHtcbiAgXCJuYW1lXCI6IFwiTWVyY2hhbmRpc2VcIixcbiAgXCJraW5kXCI6IFwiVU5JT05cIlxufTtcblxudmFyIE1vbmV5VjIgPSB7XG4gIFwibmFtZVwiOiBcIk1vbmV5VjJcIixcbiAgXCJraW5kXCI6IFwiT0JKRUNUXCIsXG4gIFwiZmllbGRCYXNlVHlwZXNcIjoge1xuICAgIFwiYW1vdW50XCI6IFwiRGVjaW1hbFwiLFxuICAgIFwiY3VycmVuY3lDb2RlXCI6IFwiQ3VycmVuY3lDb2RlXCJcbiAgfSxcbiAgXCJpbXBsZW1lbnRzTm9kZVwiOiBmYWxzZVxufTtcblxudmFyIE11dGF0aW9uJDEgPSB7XG4gIFwibmFtZVwiOiBcIk11dGF0aW9uXCIsXG4gIFwia2luZFwiOiBcIk9CSkVDVFwiLFxuICBcImZpZWxkQmFzZVR5cGVzXCI6IHtcbiAgICBcImNhcnRBdHRyaWJ1dGVzVXBkYXRlXCI6IFwiQ2FydEF0dHJpYnV0ZXNVcGRhdGVQYXlsb2FkXCIsXG4gICAgXCJjYXJ0QnV5ZXJJZGVudGl0eVVwZGF0ZVwiOiBcIkNhcnRCdXllcklkZW50aXR5VXBkYXRlUGF5bG9hZFwiLFxuICAgIFwiY2FydENyZWF0ZVwiOiBcIkNhcnRDcmVhdGVQYXlsb2FkXCIsXG4gICAgXCJjYXJ0RGlzY291bnRDb2Rlc1VwZGF0ZVwiOiBcIkNhcnREaXNjb3VudENvZGVzVXBkYXRlUGF5bG9hZFwiLFxuICAgIFwiY2FydEdpZnRDYXJkQ29kZXNSZW1vdmVcIjogXCJDYXJ0R2lmdENhcmRDb2Rlc1JlbW92ZVBheWxvYWRcIixcbiAgICBcImNhcnRHaWZ0Q2FyZENvZGVzVXBkYXRlXCI6IFwiQ2FydEdpZnRDYXJkQ29kZXNVcGRhdGVQYXlsb2FkXCIsXG4gICAgXCJjYXJ0TGluZXNBZGRcIjogXCJDYXJ0TGluZXNBZGRQYXlsb2FkXCIsXG4gICAgXCJjYXJ0TGluZXNSZW1vdmVcIjogXCJDYXJ0TGluZXNSZW1vdmVQYXlsb2FkXCIsXG4gICAgXCJjYXJ0TGluZXNVcGRhdGVcIjogXCJDYXJ0TGluZXNVcGRhdGVQYXlsb2FkXCIsXG4gICAgXCJjYXJ0Tm90ZVVwZGF0ZVwiOiBcIkNhcnROb3RlVXBkYXRlUGF5bG9hZFwiXG4gIH0sXG4gIFwiaW1wbGVtZW50c05vZGVcIjogZmFsc2UsXG4gIFwicmVsYXlJbnB1dE9iamVjdEJhc2VUeXBlc1wiOiB7XG4gICAgXCJjYXJ0Q3JlYXRlXCI6IFwiQ2FydElucHV0XCIsXG4gICAgXCJjYXJ0TWV0YWZpZWxkRGVsZXRlXCI6IFwiQ2FydE1ldGFmaWVsZERlbGV0ZUlucHV0XCIsXG4gICAgXCJjdXN0b21lckFjY2Vzc1Rva2VuQ3JlYXRlXCI6IFwiQ3VzdG9tZXJBY2Nlc3NUb2tlbkNyZWF0ZUlucHV0XCIsXG4gICAgXCJjdXN0b21lckFjdGl2YXRlXCI6IFwiQ3VzdG9tZXJBY3RpdmF0ZUlucHV0XCIsXG4gICAgXCJjdXN0b21lckNyZWF0ZVwiOiBcIkN1c3RvbWVyQ3JlYXRlSW5wdXRcIixcbiAgICBcImN1c3RvbWVyUmVzZXRcIjogXCJDdXN0b21lclJlc2V0SW5wdXRcIlxuICB9XG59O1xuXG52YXIgTm9kZSA9IHtcbiAgXCJuYW1lXCI6IFwiTm9kZVwiLFxuICBcImtpbmRcIjogXCJJTlRFUkZBQ0VcIixcbiAgXCJmaWVsZEJhc2VUeXBlc1wiOiB7fSxcbiAgXCJwb3NzaWJsZVR5cGVzXCI6IFtcIkFwcGxpZWRHaWZ0Q2FyZFwiLCBcIkFydGljbGVcIiwgXCJCbG9nXCIsIFwiQ2FydFwiLCBcIkNhcnRMaW5lXCIsIFwiQ29sbGVjdGlvblwiLCBcIkNvbW1lbnRcIiwgXCJDb21wYW55XCIsIFwiQ29tcGFueUNvbnRhY3RcIiwgXCJDb21wYW55TG9jYXRpb25cIiwgXCJDb21wb25lbnRpemFibGVDYXJ0TGluZVwiLCBcIkV4dGVybmFsVmlkZW9cIiwgXCJHZW5lcmljRmlsZVwiLCBcIkxvY2F0aW9uXCIsIFwiTWFpbGluZ0FkZHJlc3NcIiwgXCJNYXJrZXRcIiwgXCJNZWRpYUltYWdlXCIsIFwiTWVkaWFQcmVzZW50YXRpb25cIiwgXCJNZW51XCIsIFwiTWVudUl0ZW1cIiwgXCJNZXRhZmllbGRcIiwgXCJNZXRhb2JqZWN0XCIsIFwiTW9kZWwzZFwiLCBcIk9yZGVyXCIsIFwiUGFnZVwiLCBcIlByb2R1Y3RcIiwgXCJQcm9kdWN0T3B0aW9uXCIsIFwiUHJvZHVjdE9wdGlvblZhbHVlXCIsIFwiUHJvZHVjdFZhcmlhbnRcIiwgXCJTaG9wXCIsIFwiU2hvcFBheUluc3RhbGxtZW50c0ZpbmFuY2luZ1BsYW5cIiwgXCJTaG9wUGF5SW5zdGFsbG1lbnRzRmluYW5jaW5nUGxhblRlcm1cIiwgXCJTaG9wUGF5SW5zdGFsbG1lbnRzUHJvZHVjdFZhcmlhbnRQcmljaW5nXCIsIFwiU2hvcFBvbGljeVwiLCBcIlRheG9ub215Q2F0ZWdvcnlcIiwgXCJVcmxSZWRpcmVjdFwiLCBcIlZpZGVvXCJdXG59O1xuXG52YXIgUGFnZUluZm8gPSB7XG4gIFwibmFtZVwiOiBcIlBhZ2VJbmZvXCIsXG4gIFwia2luZFwiOiBcIk9CSkVDVFwiLFxuICBcImZpZWxkQmFzZVR5cGVzXCI6IHtcbiAgICBcImhhc05leHRQYWdlXCI6IFwiQm9vbGVhblwiLFxuICAgIFwiaGFzUHJldmlvdXNQYWdlXCI6IFwiQm9vbGVhblwiXG4gIH0sXG4gIFwiaW1wbGVtZW50c05vZGVcIjogZmFsc2Vcbn07XG5cbnZhciBQYXltZW50U2V0dGluZ3MgPSB7XG4gIFwibmFtZVwiOiBcIlBheW1lbnRTZXR0aW5nc1wiLFxuICBcImtpbmRcIjogXCJPQkpFQ1RcIixcbiAgXCJmaWVsZEJhc2VUeXBlc1wiOiB7XG4gICAgXCJlbmFibGVkUHJlc2VudG1lbnRDdXJyZW5jaWVzXCI6IFwiQ3VycmVuY3lDb2RlXCJcbiAgfSxcbiAgXCJpbXBsZW1lbnRzTm9kZVwiOiBmYWxzZVxufTtcblxudmFyIFByZWZlcmVuY2VEZWxpdmVyeU1ldGhvZFR5cGUgPSB7XG4gIFwibmFtZVwiOiBcIlByZWZlcmVuY2VEZWxpdmVyeU1ldGhvZFR5cGVcIixcbiAgXCJraW5kXCI6IFwiRU5VTVwiXG59O1xuXG52YXIgUHJpY2luZ1BlcmNlbnRhZ2VWYWx1ZSA9IHtcbiAgXCJuYW1lXCI6IFwiUHJpY2luZ1BlcmNlbnRhZ2VWYWx1ZVwiLFxuICBcImtpbmRcIjogXCJPQkpFQ1RcIixcbiAgXCJmaWVsZEJhc2VUeXBlc1wiOiB7XG4gICAgXCJwZXJjZW50YWdlXCI6IFwiRmxvYXRcIlxuICB9LFxuICBcImltcGxlbWVudHNOb2RlXCI6IGZhbHNlXG59O1xuXG52YXIgUHJpY2luZ1ZhbHVlID0ge1xuICBcIm5hbWVcIjogXCJQcmljaW5nVmFsdWVcIixcbiAgXCJraW5kXCI6IFwiVU5JT05cIlxufTtcblxudmFyIFByb2R1Y3QgPSB7XG4gIFwibmFtZVwiOiBcIlByb2R1Y3RcIixcbiAgXCJraW5kXCI6IFwiT0JKRUNUXCIsXG4gIFwiZmllbGRCYXNlVHlwZXNcIjoge1xuICAgIFwiYXZhaWxhYmxlRm9yU2FsZVwiOiBcIkJvb2xlYW5cIixcbiAgICBcImNyZWF0ZWRBdFwiOiBcIkRhdGVUaW1lXCIsXG4gICAgXCJkZXNjcmlwdGlvblwiOiBcIlN0cmluZ1wiLFxuICAgIFwiZGVzY3JpcHRpb25IdG1sXCI6IFwiSFRNTFwiLFxuICAgIFwiaGFuZGxlXCI6IFwiU3RyaW5nXCIsXG4gICAgXCJpZFwiOiBcIklEXCIsXG4gICAgXCJpbWFnZXNcIjogXCJJbWFnZUNvbm5lY3Rpb25cIixcbiAgICBcIm9ubGluZVN0b3JlVXJsXCI6IFwiVVJMXCIsXG4gICAgXCJvcHRpb25zXCI6IFwiUHJvZHVjdE9wdGlvblwiLFxuICAgIFwicHJvZHVjdFR5cGVcIjogXCJTdHJpbmdcIixcbiAgICBcInB1Ymxpc2hlZEF0XCI6IFwiRGF0ZVRpbWVcIixcbiAgICBcInRpdGxlXCI6IFwiU3RyaW5nXCIsXG4gICAgXCJ1cGRhdGVkQXRcIjogXCJEYXRlVGltZVwiLFxuICAgIFwidmFyaWFudHNcIjogXCJQcm9kdWN0VmFyaWFudENvbm5lY3Rpb25cIixcbiAgICBcInZlbmRvclwiOiBcIlN0cmluZ1wiXG4gIH0sXG4gIFwiaW1wbGVtZW50c05vZGVcIjogdHJ1ZVxufTtcblxudmFyIFByb2R1Y3RDb25uZWN0aW9uID0ge1xuICBcIm5hbWVcIjogXCJQcm9kdWN0Q29ubmVjdGlvblwiLFxuICBcImtpbmRcIjogXCJPQkpFQ1RcIixcbiAgXCJmaWVsZEJhc2VUeXBlc1wiOiB7XG4gICAgXCJlZGdlc1wiOiBcIlByb2R1Y3RFZGdlXCIsXG4gICAgXCJwYWdlSW5mb1wiOiBcIlBhZ2VJbmZvXCJcbiAgfSxcbiAgXCJpbXBsZW1lbnRzTm9kZVwiOiBmYWxzZVxufTtcblxudmFyIFByb2R1Y3RFZGdlID0ge1xuICBcIm5hbWVcIjogXCJQcm9kdWN0RWRnZVwiLFxuICBcImtpbmRcIjogXCJPQkpFQ1RcIixcbiAgXCJmaWVsZEJhc2VUeXBlc1wiOiB7XG4gICAgXCJjdXJzb3JcIjogXCJTdHJpbmdcIixcbiAgICBcIm5vZGVcIjogXCJQcm9kdWN0XCJcbiAgfSxcbiAgXCJpbXBsZW1lbnRzTm9kZVwiOiBmYWxzZVxufTtcblxudmFyIFByb2R1Y3RPcHRpb24gPSB7XG4gIFwibmFtZVwiOiBcIlByb2R1Y3RPcHRpb25cIixcbiAgXCJraW5kXCI6IFwiT0JKRUNUXCIsXG4gIFwiZmllbGRCYXNlVHlwZXNcIjoge1xuICAgIFwibmFtZVwiOiBcIlN0cmluZ1wiLFxuICAgIFwidmFsdWVzXCI6IFwiU3RyaW5nXCJcbiAgfSxcbiAgXCJpbXBsZW1lbnRzTm9kZVwiOiB0cnVlXG59O1xuXG52YXIgUHJvZHVjdFZhcmlhbnQgPSB7XG4gIFwibmFtZVwiOiBcIlByb2R1Y3RWYXJpYW50XCIsXG4gIFwia2luZFwiOiBcIk9CSkVDVFwiLFxuICBcImZpZWxkQmFzZVR5cGVzXCI6IHtcbiAgICBcImF2YWlsYWJsZUZvclNhbGVcIjogXCJCb29sZWFuXCIsXG4gICAgXCJjb21wYXJlQXRQcmljZVwiOiBcIk1vbmV5VjJcIixcbiAgICBcImlkXCI6IFwiSURcIixcbiAgICBcImltYWdlXCI6IFwiSW1hZ2VcIixcbiAgICBcInByaWNlXCI6IFwiTW9uZXlWMlwiLFxuICAgIFwicHJvZHVjdFwiOiBcIlByb2R1Y3RcIixcbiAgICBcInNlbGVjdGVkT3B0aW9uc1wiOiBcIlNlbGVjdGVkT3B0aW9uXCIsXG4gICAgXCJza3VcIjogXCJTdHJpbmdcIixcbiAgICBcInRpdGxlXCI6IFwiU3RyaW5nXCIsXG4gICAgXCJ1bml0UHJpY2VcIjogXCJNb25leVYyXCIsXG4gICAgXCJ1bml0UHJpY2VNZWFzdXJlbWVudFwiOiBcIlVuaXRQcmljZU1lYXN1cmVtZW50XCIsXG4gICAgXCJ3ZWlnaHRcIjogXCJGbG9hdFwiXG4gIH0sXG4gIFwiaW1wbGVtZW50c05vZGVcIjogdHJ1ZVxufTtcblxudmFyIFByb2R1Y3RWYXJpYW50Q29ubmVjdGlvbiA9IHtcbiAgXCJuYW1lXCI6IFwiUHJvZHVjdFZhcmlhbnRDb25uZWN0aW9uXCIsXG4gIFwia2luZFwiOiBcIk9CSkVDVFwiLFxuICBcImZpZWxkQmFzZVR5cGVzXCI6IHtcbiAgICBcImVkZ2VzXCI6IFwiUHJvZHVjdFZhcmlhbnRFZGdlXCIsXG4gICAgXCJwYWdlSW5mb1wiOiBcIlBhZ2VJbmZvXCJcbiAgfSxcbiAgXCJpbXBsZW1lbnRzTm9kZVwiOiBmYWxzZVxufTtcblxudmFyIFByb2R1Y3RWYXJpYW50RWRnZSA9IHtcbiAgXCJuYW1lXCI6IFwiUHJvZHVjdFZhcmlhbnRFZGdlXCIsXG4gIFwia2luZFwiOiBcIk9CSkVDVFwiLFxuICBcImZpZWxkQmFzZVR5cGVzXCI6IHtcbiAgICBcImN1cnNvclwiOiBcIlN0cmluZ1wiLFxuICAgIFwibm9kZVwiOiBcIlByb2R1Y3RWYXJpYW50XCJcbiAgfSxcbiAgXCJpbXBsZW1lbnRzTm9kZVwiOiBmYWxzZVxufTtcblxudmFyIFF1ZXJ5Um9vdCA9IHtcbiAgXCJuYW1lXCI6IFwiUXVlcnlSb290XCIsXG4gIFwia2luZFwiOiBcIk9CSkVDVFwiLFxuICBcImZpZWxkQmFzZVR5cGVzXCI6IHtcbiAgICBcImNhcnRcIjogXCJDYXJ0XCIsXG4gICAgXCJjb2xsZWN0aW9uQnlIYW5kbGVcIjogXCJDb2xsZWN0aW9uXCIsXG4gICAgXCJjb2xsZWN0aW9uc1wiOiBcIkNvbGxlY3Rpb25Db25uZWN0aW9uXCIsXG4gICAgXCJub2RlXCI6IFwiTm9kZVwiLFxuICAgIFwibm9kZXNcIjogXCJOb2RlXCIsXG4gICAgXCJwcm9kdWN0QnlIYW5kbGVcIjogXCJQcm9kdWN0XCIsXG4gICAgXCJwcm9kdWN0UmVjb21tZW5kYXRpb25zXCI6IFwiUHJvZHVjdFwiLFxuICAgIFwicHJvZHVjdHNcIjogXCJQcm9kdWN0Q29ubmVjdGlvblwiLFxuICAgIFwic2hvcFwiOiBcIlNob3BcIlxuICB9LFxuICBcImltcGxlbWVudHNOb2RlXCI6IGZhbHNlXG59O1xuXG52YXIgU2NyaXB0RGlzY291bnRBcHBsaWNhdGlvbiA9IHtcbiAgXCJuYW1lXCI6IFwiU2NyaXB0RGlzY291bnRBcHBsaWNhdGlvblwiLFxuICBcImtpbmRcIjogXCJPQkpFQ1RcIixcbiAgXCJmaWVsZEJhc2VUeXBlc1wiOiB7XG4gICAgXCJ0aXRsZVwiOiBcIlN0cmluZ1wiXG4gIH0sXG4gIFwiaW1wbGVtZW50c05vZGVcIjogZmFsc2Vcbn07XG5cbnZhciBTZWxlY3RlZE9wdGlvbiA9IHtcbiAgXCJuYW1lXCI6IFwiU2VsZWN0ZWRPcHRpb25cIixcbiAgXCJraW5kXCI6IFwiT0JKRUNUXCIsXG4gIFwiZmllbGRCYXNlVHlwZXNcIjoge1xuICAgIFwibmFtZVwiOiBcIlN0cmluZ1wiLFxuICAgIFwidmFsdWVcIjogXCJTdHJpbmdcIlxuICB9LFxuICBcImltcGxlbWVudHNOb2RlXCI6IGZhbHNlXG59O1xuXG52YXIgU2hvcCA9IHtcbiAgXCJuYW1lXCI6IFwiU2hvcFwiLFxuICBcImtpbmRcIjogXCJPQkpFQ1RcIixcbiAgXCJmaWVsZEJhc2VUeXBlc1wiOiB7XG4gICAgXCJkZXNjcmlwdGlvblwiOiBcIlN0cmluZ1wiLFxuICAgIFwibW9uZXlGb3JtYXRcIjogXCJTdHJpbmdcIixcbiAgICBcIm5hbWVcIjogXCJTdHJpbmdcIixcbiAgICBcInBheW1lbnRTZXR0aW5nc1wiOiBcIlBheW1lbnRTZXR0aW5nc1wiLFxuICAgIFwicHJpbWFyeURvbWFpblwiOiBcIkRvbWFpblwiLFxuICAgIFwicHJpdmFjeVBvbGljeVwiOiBcIlNob3BQb2xpY3lcIixcbiAgICBcInJlZnVuZFBvbGljeVwiOiBcIlNob3BQb2xpY3lcIixcbiAgICBcInRlcm1zT2ZTZXJ2aWNlXCI6IFwiU2hvcFBvbGljeVwiXG4gIH0sXG4gIFwiaW1wbGVtZW50c05vZGVcIjogdHJ1ZVxufTtcblxudmFyIFNob3BQb2xpY3kgPSB7XG4gIFwibmFtZVwiOiBcIlNob3BQb2xpY3lcIixcbiAgXCJraW5kXCI6IFwiT0JKRUNUXCIsXG4gIFwiZmllbGRCYXNlVHlwZXNcIjoge1xuICAgIFwiYm9keVwiOiBcIlN0cmluZ1wiLFxuICAgIFwiaWRcIjogXCJJRFwiLFxuICAgIFwidGl0bGVcIjogXCJTdHJpbmdcIixcbiAgICBcInVybFwiOiBcIlVSTFwiXG4gIH0sXG4gIFwiaW1wbGVtZW50c05vZGVcIjogdHJ1ZVxufTtcblxudmFyIFN0cmluZyQxID0ge1xuICBcIm5hbWVcIjogXCJTdHJpbmdcIixcbiAgXCJraW5kXCI6IFwiU0NBTEFSXCJcbn07XG5cbnZhciBVUkwkMSA9IHtcbiAgXCJuYW1lXCI6IFwiVVJMXCIsXG4gIFwia2luZFwiOiBcIlNDQUxBUlwiXG59O1xuXG52YXIgVW5pdFByaWNlTWVhc3VyZW1lbnQgPSB7XG4gIFwibmFtZVwiOiBcIlVuaXRQcmljZU1lYXN1cmVtZW50XCIsXG4gIFwia2luZFwiOiBcIk9CSkVDVFwiLFxuICBcImZpZWxkQmFzZVR5cGVzXCI6IHtcbiAgICBcIm1lYXN1cmVkVHlwZVwiOiBcIlVuaXRQcmljZU1lYXN1cmVtZW50TWVhc3VyZWRUeXBlXCIsXG4gICAgXCJxdWFudGl0eVVuaXRcIjogXCJVbml0UHJpY2VNZWFzdXJlbWVudE1lYXN1cmVkVW5pdFwiLFxuICAgIFwicXVhbnRpdHlWYWx1ZVwiOiBcIkZsb2F0XCIsXG4gICAgXCJyZWZlcmVuY2VVbml0XCI6IFwiVW5pdFByaWNlTWVhc3VyZW1lbnRNZWFzdXJlZFVuaXRcIixcbiAgICBcInJlZmVyZW5jZVZhbHVlXCI6IFwiSW50XCJcbiAgfSxcbiAgXCJpbXBsZW1lbnRzTm9kZVwiOiBmYWxzZVxufTtcblxudmFyIFVuaXRQcmljZU1lYXN1cmVtZW50TWVhc3VyZWRUeXBlID0ge1xuICBcIm5hbWVcIjogXCJVbml0UHJpY2VNZWFzdXJlbWVudE1lYXN1cmVkVHlwZVwiLFxuICBcImtpbmRcIjogXCJFTlVNXCJcbn07XG5cbnZhciBVbml0UHJpY2VNZWFzdXJlbWVudE1lYXN1cmVkVW5pdCA9IHtcbiAgXCJuYW1lXCI6IFwiVW5pdFByaWNlTWVhc3VyZW1lbnRNZWFzdXJlZFVuaXRcIixcbiAgXCJraW5kXCI6IFwiRU5VTVwiXG59O1xuXG52YXIgVXNlckVycm9yID0ge1xuICBcIm5hbWVcIjogXCJVc2VyRXJyb3JcIixcbiAgXCJraW5kXCI6IFwiT0JKRUNUXCIsXG4gIFwiZmllbGRCYXNlVHlwZXNcIjoge1xuICAgIFwiZmllbGRcIjogXCJTdHJpbmdcIixcbiAgICBcIm1lc3NhZ2VcIjogXCJTdHJpbmdcIlxuICB9LFxuICBcImltcGxlbWVudHNOb2RlXCI6IGZhbHNlXG59O1xuXG52YXIgVHlwZXMgPSB7XG4gIHR5cGVzOiB7fVxufTtcblR5cGVzLnR5cGVzW1wiQXBwbGllZEdpZnRDYXJkXCJdID0gQXBwbGllZEdpZnRDYXJkO1xuVHlwZXMudHlwZXNbXCJBdHRyaWJ1dGVcIl0gPSBBdHRyaWJ1dGU7XG5UeXBlcy50eXBlc1tcIkF1dG9tYXRpY0Rpc2NvdW50QXBwbGljYXRpb25cIl0gPSBBdXRvbWF0aWNEaXNjb3VudEFwcGxpY2F0aW9uO1xuVHlwZXMudHlwZXNbXCJCYXNlQ2FydExpbmVcIl0gPSBCYXNlQ2FydExpbmU7XG5UeXBlcy50eXBlc1tcIkJhc2VDYXJ0TGluZUNvbm5lY3Rpb25cIl0gPSBCYXNlQ2FydExpbmVDb25uZWN0aW9uO1xuVHlwZXMudHlwZXNbXCJCYXNlQ2FydExpbmVFZGdlXCJdID0gQmFzZUNhcnRMaW5lRWRnZTtcblR5cGVzLnR5cGVzW1wiQm9vbGVhblwiXSA9IEJvb2xlYW4kMTtcblR5cGVzLnR5cGVzW1wiQ2FydFwiXSA9IENhcnQ7XG5UeXBlcy50eXBlc1tcIkNhcnRBdHRyaWJ1dGVzVXBkYXRlUGF5bG9hZFwiXSA9IENhcnRBdHRyaWJ1dGVzVXBkYXRlUGF5bG9hZDtcblR5cGVzLnR5cGVzW1wiQ2FydEF1dG9tYXRpY0Rpc2NvdW50QWxsb2NhdGlvblwiXSA9IENhcnRBdXRvbWF0aWNEaXNjb3VudEFsbG9jYXRpb247XG5UeXBlcy50eXBlc1tcIkNhcnRCdXllcklkZW50aXR5XCJdID0gQ2FydEJ1eWVySWRlbnRpdHk7XG5UeXBlcy50eXBlc1tcIkNhcnRCdXllcklkZW50aXR5VXBkYXRlUGF5bG9hZFwiXSA9IENhcnRCdXllcklkZW50aXR5VXBkYXRlUGF5bG9hZDtcblR5cGVzLnR5cGVzW1wiQ2FydENvZGVEaXNjb3VudEFsbG9jYXRpb25cIl0gPSBDYXJ0Q29kZURpc2NvdW50QWxsb2NhdGlvbjtcblR5cGVzLnR5cGVzW1wiQ2FydENvc3RcIl0gPSBDYXJ0Q29zdDtcblR5cGVzLnR5cGVzW1wiQ2FydENyZWF0ZVBheWxvYWRcIl0gPSBDYXJ0Q3JlYXRlUGF5bG9hZDtcblR5cGVzLnR5cGVzW1wiQ2FydEN1c3RvbURpc2NvdW50QWxsb2NhdGlvblwiXSA9IENhcnRDdXN0b21EaXNjb3VudEFsbG9jYXRpb247XG5UeXBlcy50eXBlc1tcIkNhcnREZWxpdmVyeUNvb3JkaW5hdGVzUHJlZmVyZW5jZVwiXSA9IENhcnREZWxpdmVyeUNvb3JkaW5hdGVzUHJlZmVyZW5jZTtcblR5cGVzLnR5cGVzW1wiQ2FydERlbGl2ZXJ5R3JvdXBcIl0gPSBDYXJ0RGVsaXZlcnlHcm91cDtcblR5cGVzLnR5cGVzW1wiQ2FydERlbGl2ZXJ5R3JvdXBDb25uZWN0aW9uXCJdID0gQ2FydERlbGl2ZXJ5R3JvdXBDb25uZWN0aW9uO1xuVHlwZXMudHlwZXNbXCJDYXJ0RGVsaXZlcnlHcm91cEVkZ2VcIl0gPSBDYXJ0RGVsaXZlcnlHcm91cEVkZ2U7XG5UeXBlcy50eXBlc1tcIkNhcnREZWxpdmVyeU9wdGlvblwiXSA9IENhcnREZWxpdmVyeU9wdGlvbjtcblR5cGVzLnR5cGVzW1wiQ2FydERlbGl2ZXJ5UHJlZmVyZW5jZVwiXSA9IENhcnREZWxpdmVyeVByZWZlcmVuY2U7XG5UeXBlcy50eXBlc1tcIkNhcnREaXNjb3VudEFsbG9jYXRpb25cIl0gPSBDYXJ0RGlzY291bnRBbGxvY2F0aW9uO1xuVHlwZXMudHlwZXNbXCJDYXJ0RGlzY291bnRBcHBsaWNhdGlvblwiXSA9IENhcnREaXNjb3VudEFwcGxpY2F0aW9uO1xuVHlwZXMudHlwZXNbXCJDYXJ0RGlzY291bnRDb2RlXCJdID0gQ2FydERpc2NvdW50Q29kZTtcblR5cGVzLnR5cGVzW1wiQ2FydERpc2NvdW50Q29kZXNVcGRhdGVQYXlsb2FkXCJdID0gQ2FydERpc2NvdW50Q29kZXNVcGRhdGVQYXlsb2FkO1xuVHlwZXMudHlwZXNbXCJDYXJ0RXJyb3JDb2RlXCJdID0gQ2FydEVycm9yQ29kZTtcblR5cGVzLnR5cGVzW1wiQ2FydEdpZnRDYXJkQ29kZXNSZW1vdmVQYXlsb2FkXCJdID0gQ2FydEdpZnRDYXJkQ29kZXNSZW1vdmVQYXlsb2FkO1xuVHlwZXMudHlwZXNbXCJDYXJ0R2lmdENhcmRDb2Rlc1VwZGF0ZVBheWxvYWRcIl0gPSBDYXJ0R2lmdENhcmRDb2Rlc1VwZGF0ZVBheWxvYWQ7XG5UeXBlcy50eXBlc1tcIkNhcnRMaW5lQ29zdFwiXSA9IENhcnRMaW5lQ29zdDtcblR5cGVzLnR5cGVzW1wiQ2FydExpbmVzQWRkUGF5bG9hZFwiXSA9IENhcnRMaW5lc0FkZFBheWxvYWQ7XG5UeXBlcy50eXBlc1tcIkNhcnRMaW5lc1JlbW92ZVBheWxvYWRcIl0gPSBDYXJ0TGluZXNSZW1vdmVQYXlsb2FkO1xuVHlwZXMudHlwZXNbXCJDYXJ0TGluZXNVcGRhdGVQYXlsb2FkXCJdID0gQ2FydExpbmVzVXBkYXRlUGF5bG9hZDtcblR5cGVzLnR5cGVzW1wiQ2FydE5vdGVVcGRhdGVQYXlsb2FkXCJdID0gQ2FydE5vdGVVcGRhdGVQYXlsb2FkO1xuVHlwZXMudHlwZXNbXCJDYXJ0UHJlZmVyZW5jZXNcIl0gPSBDYXJ0UHJlZmVyZW5jZXM7XG5UeXBlcy50eXBlc1tcIkNhcnRVc2VyRXJyb3JcIl0gPSBDYXJ0VXNlckVycm9yO1xuVHlwZXMudHlwZXNbXCJDYXJ0V2FybmluZ1wiXSA9IENhcnRXYXJuaW5nO1xuVHlwZXMudHlwZXNbXCJDYXJ0V2FybmluZ0NvZGVcIl0gPSBDYXJ0V2FybmluZ0NvZGU7XG5UeXBlcy50eXBlc1tcIkNvbGxlY3Rpb25cIl0gPSBDb2xsZWN0aW9uO1xuVHlwZXMudHlwZXNbXCJDb2xsZWN0aW9uQ29ubmVjdGlvblwiXSA9IENvbGxlY3Rpb25Db25uZWN0aW9uO1xuVHlwZXMudHlwZXNbXCJDb2xsZWN0aW9uRWRnZVwiXSA9IENvbGxlY3Rpb25FZGdlO1xuVHlwZXMudHlwZXNbXCJDb3VudHJ5Q29kZVwiXSA9IENvdW50cnlDb2RlO1xuVHlwZXMudHlwZXNbXCJDdXJyZW5jeUNvZGVcIl0gPSBDdXJyZW5jeUNvZGU7XG5UeXBlcy50eXBlc1tcIkN1c3RvbWVyXCJdID0gQ3VzdG9tZXI7XG5UeXBlcy50eXBlc1tcIkRhdGVUaW1lXCJdID0gRGF0ZVRpbWU7XG5UeXBlcy50eXBlc1tcIkRlY2ltYWxcIl0gPSBEZWNpbWFsO1xuVHlwZXMudHlwZXNbXCJEZWxpdmVyeUFkZHJlc3NcIl0gPSBEZWxpdmVyeUFkZHJlc3M7XG5UeXBlcy50eXBlc1tcIkRlbGl2ZXJ5TWV0aG9kVHlwZVwiXSA9IERlbGl2ZXJ5TWV0aG9kVHlwZTtcblR5cGVzLnR5cGVzW1wiRGlzY291bnRBcHBsaWNhdGlvblwiXSA9IERpc2NvdW50QXBwbGljYXRpb247XG5UeXBlcy50eXBlc1tcIkRpc2NvdW50QXBwbGljYXRpb25BbGxvY2F0aW9uTWV0aG9kXCJdID0gRGlzY291bnRBcHBsaWNhdGlvbkFsbG9jYXRpb25NZXRob2Q7XG5UeXBlcy50eXBlc1tcIkRpc2NvdW50QXBwbGljYXRpb25UYXJnZXRTZWxlY3Rpb25cIl0gPSBEaXNjb3VudEFwcGxpY2F0aW9uVGFyZ2V0U2VsZWN0aW9uO1xuVHlwZXMudHlwZXNbXCJEaXNjb3VudEFwcGxpY2F0aW9uVGFyZ2V0VHlwZVwiXSA9IERpc2NvdW50QXBwbGljYXRpb25UYXJnZXRUeXBlO1xuVHlwZXMudHlwZXNbXCJEaXNjb3VudENvZGVBcHBsaWNhdGlvblwiXSA9IERpc2NvdW50Q29kZUFwcGxpY2F0aW9uO1xuVHlwZXMudHlwZXNbXCJEb21haW5cIl0gPSBEb21haW47XG5UeXBlcy50eXBlc1tcIkZsb2F0XCJdID0gRmxvYXQ7XG5UeXBlcy50eXBlc1tcIkhUTUxcIl0gPSBIVE1MO1xuVHlwZXMudHlwZXNbXCJJRFwiXSA9IElEO1xuVHlwZXMudHlwZXNbXCJJbWFnZVwiXSA9IEltYWdlO1xuVHlwZXMudHlwZXNbXCJJbWFnZUNvbm5lY3Rpb25cIl0gPSBJbWFnZUNvbm5lY3Rpb247XG5UeXBlcy50eXBlc1tcIkltYWdlRWRnZVwiXSA9IEltYWdlRWRnZTtcblR5cGVzLnR5cGVzW1wiSW50XCJdID0gSW50O1xuVHlwZXMudHlwZXNbXCJNYWlsaW5nQWRkcmVzc1wiXSA9IE1haWxpbmdBZGRyZXNzO1xuVHlwZXMudHlwZXNbXCJNYW51YWxEaXNjb3VudEFwcGxpY2F0aW9uXCJdID0gTWFudWFsRGlzY291bnRBcHBsaWNhdGlvbjtcblR5cGVzLnR5cGVzW1wiTWVyY2hhbmRpc2VcIl0gPSBNZXJjaGFuZGlzZTtcblR5cGVzLnR5cGVzW1wiTW9uZXlWMlwiXSA9IE1vbmV5VjI7XG5UeXBlcy50eXBlc1tcIk11dGF0aW9uXCJdID0gTXV0YXRpb24kMTtcblR5cGVzLnR5cGVzW1wiTm9kZVwiXSA9IE5vZGU7XG5UeXBlcy50eXBlc1tcIlBhZ2VJbmZvXCJdID0gUGFnZUluZm87XG5UeXBlcy50eXBlc1tcIlBheW1lbnRTZXR0aW5nc1wiXSA9IFBheW1lbnRTZXR0aW5ncztcblR5cGVzLnR5cGVzW1wiUHJlZmVyZW5jZURlbGl2ZXJ5TWV0aG9kVHlwZVwiXSA9IFByZWZlcmVuY2VEZWxpdmVyeU1ldGhvZFR5cGU7XG5UeXBlcy50eXBlc1tcIlByaWNpbmdQZXJjZW50YWdlVmFsdWVcIl0gPSBQcmljaW5nUGVyY2VudGFnZVZhbHVlO1xuVHlwZXMudHlwZXNbXCJQcmljaW5nVmFsdWVcIl0gPSBQcmljaW5nVmFsdWU7XG5UeXBlcy50eXBlc1tcIlByb2R1Y3RcIl0gPSBQcm9kdWN0O1xuVHlwZXMudHlwZXNbXCJQcm9kdWN0Q29ubmVjdGlvblwiXSA9IFByb2R1Y3RDb25uZWN0aW9uO1xuVHlwZXMudHlwZXNbXCJQcm9kdWN0RWRnZVwiXSA9IFByb2R1Y3RFZGdlO1xuVHlwZXMudHlwZXNbXCJQcm9kdWN0T3B0aW9uXCJdID0gUHJvZHVjdE9wdGlvbjtcblR5cGVzLnR5cGVzW1wiUHJvZHVjdFZhcmlhbnRcIl0gPSBQcm9kdWN0VmFyaWFudDtcblR5cGVzLnR5cGVzW1wiUHJvZHVjdFZhcmlhbnRDb25uZWN0aW9uXCJdID0gUHJvZHVjdFZhcmlhbnRDb25uZWN0aW9uO1xuVHlwZXMudHlwZXNbXCJQcm9kdWN0VmFyaWFudEVkZ2VcIl0gPSBQcm9kdWN0VmFyaWFudEVkZ2U7XG5UeXBlcy50eXBlc1tcIlF1ZXJ5Um9vdFwiXSA9IFF1ZXJ5Um9vdDtcblR5cGVzLnR5cGVzW1wiU2NyaXB0RGlzY291bnRBcHBsaWNhdGlvblwiXSA9IFNjcmlwdERpc2NvdW50QXBwbGljYXRpb247XG5UeXBlcy50eXBlc1tcIlNlbGVjdGVkT3B0aW9uXCJdID0gU2VsZWN0ZWRPcHRpb247XG5UeXBlcy50eXBlc1tcIlNob3BcIl0gPSBTaG9wO1xuVHlwZXMudHlwZXNbXCJTaG9wUG9saWN5XCJdID0gU2hvcFBvbGljeTtcblR5cGVzLnR5cGVzW1wiU3RyaW5nXCJdID0gU3RyaW5nJDE7XG5UeXBlcy50eXBlc1tcIlVSTFwiXSA9IFVSTCQxO1xuVHlwZXMudHlwZXNbXCJVbml0UHJpY2VNZWFzdXJlbWVudFwiXSA9IFVuaXRQcmljZU1lYXN1cmVtZW50O1xuVHlwZXMudHlwZXNbXCJVbml0UHJpY2VNZWFzdXJlbWVudE1lYXN1cmVkVHlwZVwiXSA9IFVuaXRQcmljZU1lYXN1cmVtZW50TWVhc3VyZWRUeXBlO1xuVHlwZXMudHlwZXNbXCJVbml0UHJpY2VNZWFzdXJlbWVudE1lYXN1cmVkVW5pdFwiXSA9IFVuaXRQcmljZU1lYXN1cmVtZW50TWVhc3VyZWRVbml0O1xuVHlwZXMudHlwZXNbXCJVc2VyRXJyb3JcIl0gPSBVc2VyRXJyb3I7XG5UeXBlcy5xdWVyeVR5cGUgPSBcIlF1ZXJ5Um9vdFwiO1xuVHlwZXMubXV0YXRpb25UeXBlID0gXCJNdXRhdGlvblwiO1xuVHlwZXMuc3Vic2NyaXB0aW9uVHlwZSA9IG51bGw7XG5cbmZ1bmN0aW9uIHJlY3Vyc2l2ZWx5RnJlZXplT2JqZWN0KHN0cnVjdHVyZSkge1xuICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhzdHJ1Y3R1cmUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgIHZhciB2YWx1ZSA9IHN0cnVjdHVyZVtrZXldO1xuICAgIGlmICh2YWx1ZSAmJiAodHlwZW9mIHZhbHVlID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YodmFsdWUpKSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIHJlY3Vyc2l2ZWx5RnJlZXplT2JqZWN0KHZhbHVlKTtcbiAgICB9XG4gIH0pO1xuICBPYmplY3QuZnJlZXplKHN0cnVjdHVyZSk7XG4gIHJldHVybiBzdHJ1Y3R1cmU7XG59XG5cbnZhciB0eXBlcyA9IHJlY3Vyc2l2ZWx5RnJlZXplT2JqZWN0KFR5cGVzKTtcblxuLy8gR3JhcGhRTFxuLyoqXG4gKiBUaGUgSlMgQnV5IFNESyBDbGllbnQuXG4gKiBAY2xhc3NcbiAqXG4gKiBAcHJvcGVydHkge1Byb2R1Y3RSZXNvdXJjZX0gcHJvZHVjdCBUaGUgcHJvcGVydHkgdW5kZXIgd2hpY2ggcHJvZHVjdCBmZXRjaGluZyBtZXRob2RzIGxpdmUuXG4gKiBAcHJvcGVydHkge0NvbGxlY3Rpb25SZXNvdXJjZX0gY29sbGVjdGlvbiBUaGUgcHJvcGVydHkgdW5kZXIgd2hpY2ggY29sbGVjdGlvbiBmZXRjaGluZyBtZXRob2RzIGxpdmUuXG4gKiBAcHJvcGVydHkge1Nob3BSZXNvdXJjZX0gc2hvcCBUaGUgcHJvcGVydHkgdW5kZXIgd2hpY2ggc2hvcCBmZXRjaGluZyBtZXRob2RzIGxpdmUuXG4gKiBAcHJvcGVydHkge0NhcnRSZXNvdXJjZX0gY2FydCBUaGUgcHJvcGVydHkgdW5kZXIgd2hpY2ggc2hvcCBmZXRjaGluZyBhbmQgbXV0YXRpbmcgbWV0aG9kcyBsaXZlLlxuICogQHByb3BlcnR5IHtJbWFnZVJlc291cmNlfSBpbWFnZSBUaGUgcHJvcGVydHkgdW5kZXIgd2hpY2ggaW1hZ2UgaGVscGVyIG1ldGhvZHMgbGl2ZS5cbiAqL1xuXG52YXIgQ2xpZW50ID0gZnVuY3Rpb24gKCkge1xuICBjcmVhdGVDbGFzcyQxKENsaWVudCwgbnVsbCwgW3tcbiAgICBrZXk6ICdidWlsZENsaWVudCcsXG5cblxuICAgIC8qKlxuICAgICAqIFByaW1hcnkgZW50cnkgcG9pbnQgZm9yIGJ1aWxkaW5nIGEgbmV3IENsaWVudC5cbiAgICAgKi9cbiAgICB2YWx1ZTogZnVuY3Rpb24gYnVpbGRDbGllbnQoY29uZmlnLCBmZXRjaEZ1bmN0aW9uKSB7XG4gICAgICB2YXIgbmV3Q29uZmlnID0gbmV3IENvbmZpZyhjb25maWcpO1xuICAgICAgdmFyIGNsaWVudCA9IG5ldyBDbGllbnQobmV3Q29uZmlnLCBDbGllbnQkMiwgZmV0Y2hGdW5jdGlvbik7XG5cbiAgICAgIGNsaWVudC5jb25maWcgPSBuZXdDb25maWc7XG5cbiAgICAgIHJldHVybiBjbGllbnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGNvbnN0cnVjdHMgQ2xpZW50XG4gICAgICogQHBhcmFtIHtDb25maWd9IGNvbmZpZyBBbiBpbnN0YW5jZSBvZiB7QGxpbmsgQ29uZmlnfSB1c2VkIHRvIGNvbmZpZ3VyZSB0aGUgQ2xpZW50LlxuICAgICAqL1xuXG4gIH1dKTtcblxuICBmdW5jdGlvbiBDbGllbnQoY29uZmlnKSB7XG4gICAgdmFyIEdyYXBoUUxDbGllbnRDbGFzcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogQ2xpZW50JDI7XG4gICAgdmFyIGZldGNoRnVuY3Rpb24gPSBhcmd1bWVudHNbMl07XG4gICAgY2xhc3NDYWxsQ2hlY2skMSh0aGlzLCBDbGllbnQpO1xuXG4gICAgdmFyIHVybCA9ICdodHRwczovLycgKyBjb25maWcuZG9tYWluICsgJy9hcGkvMjAyNS0wMS9ncmFwaHFsJztcblxuICAgIHZhciBoZWFkZXJzID0ge1xuICAgICAgJ1gtU0RLLVZhcmlhbnQnOiAnamF2YXNjcmlwdCcsXG4gICAgICAnWC1TREstVmVyc2lvbic6IHZlcnNpb24sXG4gICAgICAnWC1TaG9waWZ5LVN0b3JlZnJvbnQtQWNjZXNzLVRva2VuJzogY29uZmlnLnN0b3JlZnJvbnRBY2Nlc3NUb2tlblxuICAgIH07XG5cbiAgICBpZiAoY29uZmlnLnNvdXJjZSkge1xuICAgICAgaGVhZGVyc1snWC1TREstVmFyaWFudC1Tb3VyY2UnXSA9IGNvbmZpZy5zb3VyY2U7XG4gICAgfVxuXG4gICAgdmFyIGxhbmd1YWdlSGVhZGVyID0gY29uZmlnLmxhbmd1YWdlID8gY29uZmlnLmxhbmd1YWdlIDogJyonO1xuXG4gICAgaGVhZGVyc1snQWNjZXB0LUxhbmd1YWdlJ10gPSBsYW5ndWFnZUhlYWRlcjtcblxuICAgIGlmIChmZXRjaEZ1bmN0aW9uKSB7XG4gICAgICBoZWFkZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgIGhlYWRlcnMuQWNjZXB0ID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuXG4gICAgICB0aGlzLmdyYXBoUUxDbGllbnQgPSBuZXcgR3JhcGhRTENsaWVudENsYXNzKHR5cGVzLCB7XG4gICAgICAgIGZldGNoZXI6IGZ1bmN0aW9uIGZldGNoZXIoZ3JhcGhRTFBhcmFtcykge1xuICAgICAgICAgIHJldHVybiBmZXRjaEZ1bmN0aW9uKHVybCwge1xuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZ3JhcGhRTFBhcmFtcyksXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIG1vZGU6ICdjb3JzJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnNcbiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZ3JhcGhRTENsaWVudCA9IG5ldyBHcmFwaFFMQ2xpZW50Q2xhc3ModHlwZXMsIHtcbiAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgIGZldGNoZXJPcHRpb25zOiB7IGhlYWRlcnM6IGhlYWRlcnMgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5wcm9kdWN0ID0gbmV3IFByb2R1Y3RSZXNvdXJjZSh0aGlzLmdyYXBoUUxDbGllbnQpO1xuICAgIHRoaXMuY29sbGVjdGlvbiA9IG5ldyBDb2xsZWN0aW9uUmVzb3VyY2UodGhpcy5ncmFwaFFMQ2xpZW50KTtcbiAgICB0aGlzLnNob3AgPSBuZXcgU2hvcFJlc291cmNlKHRoaXMuZ3JhcGhRTENsaWVudCk7XG4gICAgdGhpcy5jaGVja291dCA9IG5ldyBDaGVja291dFJlc291cmNlKHRoaXMuZ3JhcGhRTENsaWVudCk7XG4gICAgdGhpcy5pbWFnZSA9IG5ldyBJbWFnZVJlc291cmNlKHRoaXMuZ3JhcGhRTENsaWVudCk7XG4gIH1cblxuICAvKipcbiAgICogRmV0Y2hlcyB0aGUgbmV4dCBwYWdlIG9mIG1vZGVsc1xuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBjbGllbnQuZmV0Y2hOZXh0UGFnZShwcm9kdWN0cykudGhlbigobmV4dFByb2R1Y3RzKSA9PiB7XG4gICAqICAgLy8gRG8gc29tZXRoaW5nIHdpdGggdGhlIHByb2R1Y3RzXG4gICAqIH0pO1xuICAgKlxuICAgKiBAcGFyYW0ge21vZGVsc30gW0FycmF5XSBUaGUgcGFnaW5hdGVkIHNldCB0byBmZXRjaCB0aGUgbmV4dCBwYWdlIG9mXG4gICAqIEByZXR1cm4ge1Byb21pc2V8R3JhcGhNb2RlbFtdfSBBIHByb21pc2UgcmVzb2x2aW5nIHdpdGggYW4gYXJyYXkgb2YgYEdyYXBoTW9kZWxgcyBvZiB0aGUgdHlwZSBwcm92aWRlZC5cbiAgICovXG5cblxuICBjcmVhdGVDbGFzcyQxKENsaWVudCwgW3tcbiAgICBrZXk6ICdmZXRjaE5leHRQYWdlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZmV0Y2hOZXh0UGFnZShtb2RlbHMpIHtcbiAgICAgIHJldHVybiB0aGlzLmdyYXBoUUxDbGllbnQuZmV0Y2hOZXh0UGFnZShtb2RlbHMpO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gQ2xpZW50O1xufSgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IENsaWVudDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/shopify-buy/index.js\n");

/***/ })

};
;